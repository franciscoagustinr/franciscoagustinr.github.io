var B9=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var Ple=B9((zle,yC)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kh(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function L9(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var Gw={exports:{}},Hg={},Hw={exports:{}},Xn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bI;function F9(){if(bI)return Xn;bI=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),c=Symbol.iterator;function d(V){return V===null||typeof V!="object"?null:(V=c&&V[c]||V["@@iterator"],typeof V=="function"?V:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,A={};function x(V,Q,fe){this.props=V,this.context=Q,this.refs=A,this.updater=fe||g}x.prototype.isReactComponent={},x.prototype.setState=function(V,Q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Q,"setState")},x.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function w(){}w.prototype=x.prototype;function M(V,Q,fe){this.props=V,this.context=Q,this.refs=A,this.updater=fe||g}var b=M.prototype=new w;b.constructor=M,v(b,x.prototype),b.isPureReactComponent=!0;var R=Array.isArray,F=Object.prototype.hasOwnProperty,O={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function I(V,Q,fe){var oe,he={},xe=null,_e=null;if(Q!=null)for(oe in Q.ref!==void 0&&(_e=Q.ref),Q.key!==void 0&&(xe=""+Q.key),Q)F.call(Q,oe)&&!D.hasOwnProperty(oe)&&(he[oe]=Q[oe]);var be=arguments.length-2;if(be===1)he.children=fe;else if(1<be){for(var Xe=Array(be),Ye=0;Ye<be;Ye++)Xe[Ye]=arguments[Ye+2];he.children=Xe}if(V&&V.defaultProps)for(oe in be=V.defaultProps,be)he[oe]===void 0&&(he[oe]=be[oe]);return{$$typeof:i,type:V,key:xe,ref:_e,props:he,_owner:O.current}}function C(V,Q){return{$$typeof:i,type:V.type,key:Q,ref:V.ref,props:V.props,_owner:V._owner}}function B(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function k(V){var Q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(fe){return Q[fe]})}var H=/\/+/g;function z(V,Q){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):Q.toString(36)}function Z(V,Q,fe,oe,he){var xe=typeof V;(xe==="undefined"||xe==="boolean")&&(V=null);var _e=!1;if(V===null)_e=!0;else switch(xe){case"string":case"number":_e=!0;break;case"object":switch(V.$$typeof){case i:case e:_e=!0}}if(_e)return _e=V,he=he(_e),V=oe===""?"."+z(_e,0):oe,R(he)?(fe="",V!=null&&(fe=V.replace(H,"$&/")+"/"),Z(he,Q,fe,"",function(Ye){return Ye})):he!=null&&(B(he)&&(he=C(he,fe+(!he.key||_e&&_e.key===he.key?"":(""+he.key).replace(H,"$&/")+"/")+V)),Q.push(he)),1;if(_e=0,oe=oe===""?".":oe+":",R(V))for(var be=0;be<V.length;be++){xe=V[be];var Xe=oe+z(xe,be);_e+=Z(xe,Q,fe,Xe,he)}else if(Xe=d(V),typeof Xe=="function")for(V=Xe.call(V),be=0;!(xe=V.next()).done;)xe=xe.value,Xe=oe+z(xe,be++),_e+=Z(xe,Q,fe,Xe,he);else if(xe==="object")throw Q=String(V),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return _e}function ue(V,Q,fe){if(V==null)return V;var oe=[],he=0;return Z(V,oe,"","",function(xe){return Q.call(fe,xe,he++)}),oe}function ae(V){if(V._status===-1){var Q=V._result;Q=Q(),Q.then(function(fe){(V._status===0||V._status===-1)&&(V._status=1,V._result=fe)},function(fe){(V._status===0||V._status===-1)&&(V._status=2,V._result=fe)}),V._status===-1&&(V._status=0,V._result=Q)}if(V._status===1)return V._result.default;throw V._result}var ge={current:null},ee={transition:null},le={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:ee,ReactCurrentOwner:O};function $(){throw Error("act(...) is not supported in production builds of React.")}return Xn.Children={map:ue,forEach:function(V,Q,fe){ue(V,function(){Q.apply(this,arguments)},fe)},count:function(V){var Q=0;return ue(V,function(){Q++}),Q},toArray:function(V){return ue(V,function(Q){return Q})||[]},only:function(V){if(!B(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Xn.Component=x,Xn.Fragment=t,Xn.Profiler=r,Xn.PureComponent=M,Xn.StrictMode=n,Xn.Suspense=l,Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,Xn.act=$,Xn.cloneElement=function(V,Q,fe){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var oe=v({},V.props),he=V.key,xe=V.ref,_e=V._owner;if(Q!=null){if(Q.ref!==void 0&&(xe=Q.ref,_e=O.current),Q.key!==void 0&&(he=""+Q.key),V.type&&V.type.defaultProps)var be=V.type.defaultProps;for(Xe in Q)F.call(Q,Xe)&&!D.hasOwnProperty(Xe)&&(oe[Xe]=Q[Xe]===void 0&&be!==void 0?be[Xe]:Q[Xe])}var Xe=arguments.length-2;if(Xe===1)oe.children=fe;else if(1<Xe){be=Array(Xe);for(var Ye=0;Ye<Xe;Ye++)be[Ye]=arguments[Ye+2];oe.children=be}return{$$typeof:i,type:V.type,key:he,ref:xe,props:oe,_owner:_e}},Xn.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:s,_context:V},V.Consumer=V},Xn.createElement=I,Xn.createFactory=function(V){var Q=I.bind(null,V);return Q.type=V,Q},Xn.createRef=function(){return{current:null}},Xn.forwardRef=function(V){return{$$typeof:a,render:V}},Xn.isValidElement=B,Xn.lazy=function(V){return{$$typeof:f,_payload:{_status:-1,_result:V},_init:ae}},Xn.memo=function(V,Q){return{$$typeof:u,type:V,compare:Q===void 0?null:Q}},Xn.startTransition=function(V){var Q=ee.transition;ee.transition={};try{V()}finally{ee.transition=Q}},Xn.unstable_act=$,Xn.useCallback=function(V,Q){return ge.current.useCallback(V,Q)},Xn.useContext=function(V){return ge.current.useContext(V)},Xn.useDebugValue=function(){},Xn.useDeferredValue=function(V){return ge.current.useDeferredValue(V)},Xn.useEffect=function(V,Q){return ge.current.useEffect(V,Q)},Xn.useId=function(){return ge.current.useId()},Xn.useImperativeHandle=function(V,Q,fe){return ge.current.useImperativeHandle(V,Q,fe)},Xn.useInsertionEffect=function(V,Q){return ge.current.useInsertionEffect(V,Q)},Xn.useLayoutEffect=function(V,Q){return ge.current.useLayoutEffect(V,Q)},Xn.useMemo=function(V,Q){return ge.current.useMemo(V,Q)},Xn.useReducer=function(V,Q,fe){return ge.current.useReducer(V,Q,fe)},Xn.useRef=function(V){return ge.current.useRef(V)},Xn.useState=function(V){return ge.current.useState(V)},Xn.useSyncExternalStore=function(V,Q,fe){return ge.current.useSyncExternalStore(V,Q,fe)},Xn.useTransition=function(){return ge.current.useTransition()},Xn.version="18.3.1",Xn}var CI;function Kx(){return CI||(CI=1,Hw.exports=F9()),Hw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI;function O9(){if(RI)return Hg;RI=1;var i=Kx(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var f,c={},d=null,g=null;u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(g=l.ref);for(f in l)n.call(l,f)&&!s.hasOwnProperty(f)&&(c[f]=l[f]);if(a&&a.defaultProps)for(f in l=a.defaultProps,l)c[f]===void 0&&(c[f]=l[f]);return{$$typeof:e,type:a,key:d,ref:g,props:c,_owner:r.current}}return Hg.Fragment=t,Hg.jsx=o,Hg.jsxs=o,Hg}var II;function k9(){return II||(II=1,Gw.exports=O9()),Gw.exports}var re=k9(),me=Kx();const jo=kh(me);var iy={},Vw={exports:{}},zo={},Ww={exports:{}},jw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI;function N9(){return PI||(PI=1,function(i){function e(ee,le){var $=ee.length;ee.push(le);e:for(;0<$;){var V=$-1>>>1,Q=ee[V];if(0<r(Q,le))ee[V]=le,ee[$]=Q,$=V;else break e}}function t(ee){return ee.length===0?null:ee[0]}function n(ee){if(ee.length===0)return null;var le=ee[0],$=ee.pop();if($!==le){ee[0]=$;e:for(var V=0,Q=ee.length,fe=Q>>>1;V<fe;){var oe=2*(V+1)-1,he=ee[oe],xe=oe+1,_e=ee[xe];if(0>r(he,$))xe<Q&&0>r(_e,he)?(ee[V]=_e,ee[xe]=$,V=xe):(ee[V]=he,ee[oe]=$,V=oe);else if(xe<Q&&0>r(_e,$))ee[V]=_e,ee[xe]=$,V=xe;else break e}}return le}function r(ee,le){var $=ee.sortIndex-le.sortIndex;return $!==0?$:ee.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,c=null,d=3,g=!1,v=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ee){for(var le=t(u);le!==null;){if(le.callback===null)n(u);else if(le.startTime<=ee)n(u),le.sortIndex=le.expirationTime,e(l,le);else break;le=t(u)}}function R(ee){if(A=!1,b(ee),!v)if(t(l)!==null)v=!0,ae(F);else{var le=t(u);le!==null&&ge(R,le.startTime-ee)}}function F(ee,le){v=!1,A&&(A=!1,w(I),I=-1),g=!0;var $=d;try{for(b(le),c=t(l);c!==null&&(!(c.expirationTime>le)||ee&&!k());){var V=c.callback;if(typeof V=="function"){c.callback=null,d=c.priorityLevel;var Q=V(c.expirationTime<=le);le=i.unstable_now(),typeof Q=="function"?c.callback=Q:c===t(l)&&n(l),b(le)}else n(l);c=t(l)}if(c!==null)var fe=!0;else{var oe=t(u);oe!==null&&ge(R,oe.startTime-le),fe=!1}return fe}finally{c=null,d=$,g=!1}}var O=!1,D=null,I=-1,C=5,B=-1;function k(){return!(i.unstable_now()-B<C)}function H(){if(D!==null){var ee=i.unstable_now();B=ee;var le=!0;try{le=D(!0,ee)}finally{le?z():(O=!1,D=null)}}else O=!1}var z;if(typeof M=="function")z=function(){M(H)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ue=Z.port2;Z.port1.onmessage=H,z=function(){ue.postMessage(null)}}else z=function(){x(H,0)};function ae(ee){D=ee,O||(O=!0,z())}function ge(ee,le){I=x(function(){ee(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ee){ee.callback=null},i.unstable_continueExecution=function(){v||g||(v=!0,ae(F))},i.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ee?Math.floor(1e3/ee):5},i.unstable_getCurrentPriorityLevel=function(){return d},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(ee){switch(d){case 1:case 2:case 3:var le=3;break;default:le=d}var $=d;d=le;try{return ee()}finally{d=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ee,le){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var $=d;d=ee;try{return le()}finally{d=$}},i.unstable_scheduleCallback=function(ee,le,$){var V=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?V+$:V):$=V,ee){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=$+Q,ee={id:f++,callback:le,priorityLevel:ee,startTime:$,expirationTime:Q,sortIndex:-1},$>V?(ee.sortIndex=$,e(u,ee),t(l)===null&&ee===t(u)&&(A?(w(I),I=-1):A=!0,ge(R,$-V))):(ee.sortIndex=Q,e(l,ee),v||g||(v=!0,ae(F))),ee},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(ee){var le=d;return function(){var $=d;d=le;try{return ee.apply(this,arguments)}finally{d=$}}}}(jw)),jw}var DI;function U9(){return DI||(DI=1,Ww.exports=N9()),Ww.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BI;function z9(){if(BI)return zo;BI=1;var i=Kx(),e=U9();function t(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,y=1;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function s(h,p){o(h,p),o(h+"Capture",p)}function o(h,p){for(r[h]=p,h=0;h<p.length;h++)n.add(p[h])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},c={};function d(h){return l.call(c,h)?!0:l.call(f,h)?!1:u.test(h)?c[h]=!0:(f[h]=!0,!1)}function g(h,p,y,T){if(y!==null&&y.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return T?!1:y!==null?!y.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function v(h,p,y,T){if(p===null||typeof p>"u"||g(h,p,y,T))return!0;if(T)return!1;if(y!==null)switch(y.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function A(h,p,y,T,L,G,Y){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=T,this.attributeNamespace=L,this.mustUseProperty=y,this.propertyName=h,this.type=p,this.sanitizeURL=G,this.removeEmptyString=Y}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){x[h]=new A(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var p=h[0];x[p]=new A(p,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){x[h]=new A(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){x[h]=new A(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){x[h]=new A(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){x[h]=new A(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){x[h]=new A(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){x[h]=new A(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){x[h]=new A(h,5,!1,h.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function M(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var p=h.replace(w,M);x[p]=new A(p,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var p=h.replace(w,M);x[p]=new A(p,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var p=h.replace(w,M);x[p]=new A(p,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){x[h]=new A(h,1,!1,h.toLowerCase(),null,!1,!1)}),x.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){x[h]=new A(h,1,!1,h.toLowerCase(),null,!0,!0)});function b(h,p,y,T){var L=x.hasOwnProperty(p)?x[p]:null;(L!==null?L.type!==0:T||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(v(p,y,L,T)&&(y=null),T||L===null?d(p)&&(y===null?h.removeAttribute(p):h.setAttribute(p,""+y)):L.mustUseProperty?h[L.propertyName]=y===null?L.type===3?!1:"":y:(p=L.attributeName,T=L.attributeNamespace,y===null?h.removeAttribute(p):(L=L.type,y=L===3||L===4&&y===!0?"":""+y,T?h.setAttributeNS(T,p,y):h.setAttribute(p,y))))}var R=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),O=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),k=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),ee=Symbol.iterator;function le(h){return h===null||typeof h!="object"?null:(h=ee&&h[ee]||h["@@iterator"],typeof h=="function"?h:null)}var $=Object.assign,V;function Q(h){if(V===void 0)try{throw Error()}catch(y){var p=y.stack.trim().match(/\n( *(at )?)/);V=p&&p[1]||""}return`
`+V+h}var fe=!1;function oe(h,p){if(!h||fe)return"";fe=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Ke){var T=Ke}Reflect.construct(h,[],p)}else{try{p.call()}catch(Ke){T=Ke}h.call(p.prototype)}else{try{throw Error()}catch(Ke){T=Ke}h()}}catch(Ke){if(Ke&&T&&typeof Ke.stack=="string"){for(var L=Ke.stack.split(`
`),G=T.stack.split(`
`),Y=L.length-1,ve=G.length-1;1<=Y&&0<=ve&&L[Y]!==G[ve];)ve--;for(;1<=Y&&0<=ve;Y--,ve--)if(L[Y]!==G[ve]){if(Y!==1||ve!==1)do if(Y--,ve--,0>ve||L[Y]!==G[ve]){var Me=`
`+L[Y].replace(" at new "," at ");return h.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",h.displayName)),Me}while(1<=Y&&0<=ve);break}}}finally{fe=!1,Error.prepareStackTrace=y}return(h=h?h.displayName||h.name:"")?Q(h):""}function he(h){switch(h.tag){case 5:return Q(h.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return h=oe(h.type,!1),h;case 11:return h=oe(h.type.render,!1),h;case 1:return h=oe(h.type,!0),h;default:return""}}function xe(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case D:return"Fragment";case O:return"Portal";case C:return"Profiler";case I:return"StrictMode";case z:return"Suspense";case Z:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case k:return(h.displayName||"Context")+".Consumer";case B:return(h._context.displayName||"Context")+".Provider";case H:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case ue:return p=h.displayName||null,p!==null?p:xe(h.type)||"Memo";case ae:p=h._payload,h=h._init;try{return xe(h(p))}catch{}}return null}function _e(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(p);case 8:return p===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function be(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Xe(h){var p=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Ye(h){var p=Xe(h)?"checked":"value",y=Object.getOwnPropertyDescriptor(h.constructor.prototype,p),T=""+h[p];if(!h.hasOwnProperty(p)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var L=y.get,G=y.set;return Object.defineProperty(h,p,{configurable:!0,get:function(){return L.call(this)},set:function(Y){T=""+Y,G.call(this,Y)}}),Object.defineProperty(h,p,{enumerable:y.enumerable}),{getValue:function(){return T},setValue:function(Y){T=""+Y},stopTracking:function(){h._valueTracker=null,delete h[p]}}}}function Ne(h){h._valueTracker||(h._valueTracker=Ye(h))}function Ee(h){if(!h)return!1;var p=h._valueTracker;if(!p)return!0;var y=p.getValue(),T="";return h&&(T=Xe(h)?h.checked?"true":"false":h.value),h=T,h!==y?(p.setValue(h),!0):!1}function Ge(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function se(h,p){var y=p.checked;return $({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:y??h._wrapperState.initialChecked})}function ht(h,p){var y=p.defaultValue==null?"":p.defaultValue,T=p.checked!=null?p.checked:p.defaultChecked;y=be(p.value!=null?p.value:y),h._wrapperState={initialChecked:T,initialValue:y,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function We(h,p){p=p.checked,p!=null&&b(h,"checked",p,!1)}function ut(h,p){We(h,p);var y=be(p.value),T=p.type;if(y!=null)T==="number"?(y===0&&h.value===""||h.value!=y)&&(h.value=""+y):h.value!==""+y&&(h.value=""+y);else if(T==="submit"||T==="reset"){h.removeAttribute("value");return}p.hasOwnProperty("value")?dt(h,p.type,y):p.hasOwnProperty("defaultValue")&&dt(h,p.type,be(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(h.defaultChecked=!!p.defaultChecked)}function Fe(h,p,y){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var T=p.type;if(!(T!=="submit"&&T!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+h._wrapperState.initialValue,y||p===h.value||(h.value=p),h.defaultValue=p}y=h.name,y!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,y!==""&&(h.name=y)}function dt(h,p,y){(p!=="number"||Ge(h.ownerDocument)!==h)&&(y==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+y&&(h.defaultValue=""+y))}var je=Array.isArray;function K(h,p,y,T){if(h=h.options,p){p={};for(var L=0;L<y.length;L++)p["$"+y[L]]=!0;for(y=0;y<h.length;y++)L=p.hasOwnProperty("$"+h[y].value),h[y].selected!==L&&(h[y].selected=L),L&&T&&(h[y].defaultSelected=!0)}else{for(y=""+be(y),p=null,L=0;L<h.length;L++){if(h[L].value===y){h[L].selected=!0,T&&(h[L].defaultSelected=!0);return}p!==null||h[L].disabled||(p=h[L])}p!==null&&(p.selected=!0)}}function J(h,p){if(p.dangerouslySetInnerHTML!=null)throw Error(t(91));return $({},p,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function ye(h,p){var y=p.value;if(y==null){if(y=p.children,p=p.defaultValue,y!=null){if(p!=null)throw Error(t(92));if(je(y)){if(1<y.length)throw Error(t(93));y=y[0]}p=y}p==null&&(p=""),y=p}h._wrapperState={initialValue:be(y)}}function Re(h,p){var y=be(p.value),T=be(p.defaultValue);y!=null&&(y=""+y,y!==h.value&&(h.value=y),p.defaultValue==null&&h.defaultValue!==y&&(h.defaultValue=y)),T!=null&&(h.defaultValue=""+T)}function De(h){var p=h.textContent;p===h._wrapperState.initialValue&&p!==""&&p!==null&&(h.value=p)}function ke(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qe(h,p){return h==null||h==="http://www.w3.org/1999/xhtml"?ke(p):h==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var nt,lt=function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,y,T,L){MSApp.execUnsafeLocalFunction(function(){return h(p,y,T,L)})}:h}(function(h,p){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=p;else{for(nt=nt||document.createElement("div"),nt.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=nt.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;p.firstChild;)h.appendChild(p.firstChild)}});function Ot(h,p){if(p){var y=h.firstChild;if(y&&y===h.lastChild&&y.nodeType===3){y.nodeValue=p;return}}h.textContent=p}var rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xt=["Webkit","ms","Moz","O"];Object.keys(rt).forEach(function(h){xt.forEach(function(p){p=p+h.charAt(0).toUpperCase()+h.substring(1),rt[p]=rt[h]})});function yt(h,p,y){return p==null||typeof p=="boolean"||p===""?"":y||typeof p!="number"||p===0||rt.hasOwnProperty(h)&&rt[h]?(""+p).trim():p+"px"}function gt(h,p){h=h.style;for(var y in p)if(p.hasOwnProperty(y)){var T=y.indexOf("--")===0,L=yt(y,p[y],T);y==="float"&&(y="cssFloat"),T?h.setProperty(y,L):h[y]=L}}var it=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kt(h,p){if(p){if(it[h]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(t(137,h));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(t(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(t(61))}if(p.style!=null&&typeof p.style!="object")throw Error(t(62))}}function Bt(h,p){if(h.indexOf("-")===-1)return typeof p.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qt=null;function Te(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Ce=null,Le=null,at=null;function vt(h){if(h=tl(h)){if(typeof Ce!="function")throw Error(t(280));var p=h.stateNode;p&&(p=rp(p),Ce(h.stateNode,h.type,p))}}function ft(h){Le?at?at.push(h):at=[h]:Le=h}function qt(){if(Le){var h=Le,p=at;if(at=Le=null,vt(h),p)for(h=0;h<p.length;h++)vt(p[h])}}function ln(h,p){return h(p)}function Kt(){}var Yt=!1;function Wn(h,p,y){if(Yt)return h(p,y);Yt=!0;try{return ln(h,p,y)}finally{Yt=!1,(Le!==null||at!==null)&&(Kt(),qt())}}function mn(h,p){var y=h.stateNode;if(y===null)return null;var T=rp(y);if(T===null)return null;y=T[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(h=h.type,T=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!T;break e;default:h=!1}if(h)return null;if(y&&typeof y!="function")throw Error(t(231,p,typeof y));return y}var fr=!1;if(a)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){fr=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{fr=!1}function _r(h,p,y,T,L,G,Y,ve,Me){var Ke=Array.prototype.slice.call(arguments,3);try{p.apply(y,Ke)}catch(St){this.onError(St)}}var Or=!1,Gr=null,sr=!1,cn=null,kr={onError:function(h){Or=!0,Gr=h}};function oi(h,p,y,T,L,G,Y,ve,Me){Or=!1,Gr=null,_r.apply(kr,arguments)}function X(h,p,y,T,L,G,Y,ve,Me){if(oi.apply(this,arguments),Or){if(Or){var Ke=Gr;Or=!1,Gr=null}else throw Error(t(198));sr||(sr=!0,cn=Ke)}}function ne(h){var p=h,y=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,p.flags&4098&&(y=p.return),h=p.return;while(h)}return p.tag===3?y:null}function Se(h){if(h.tag===13){var p=h.memoizedState;if(p===null&&(h=h.alternate,h!==null&&(p=h.memoizedState)),p!==null)return p.dehydrated}return null}function Ue(h){if(ne(h)!==h)throw Error(t(188))}function Qe(h){var p=h.alternate;if(!p){if(p=ne(h),p===null)throw Error(t(188));return p!==h?null:h}for(var y=h,T=p;;){var L=y.return;if(L===null)break;var G=L.alternate;if(G===null){if(T=L.return,T!==null){y=T;continue}break}if(L.child===G.child){for(G=L.child;G;){if(G===y)return Ue(L),h;if(G===T)return Ue(L),p;G=G.sibling}throw Error(t(188))}if(y.return!==T.return)y=L,T=G;else{for(var Y=!1,ve=L.child;ve;){if(ve===y){Y=!0,y=L,T=G;break}if(ve===T){Y=!0,T=L,y=G;break}ve=ve.sibling}if(!Y){for(ve=G.child;ve;){if(ve===y){Y=!0,y=G,T=L;break}if(ve===T){Y=!0,T=G,y=L;break}ve=ve.sibling}if(!Y)throw Error(t(189))}}if(y.alternate!==T)throw Error(t(190))}if(y.tag!==3)throw Error(t(188));return y.stateNode.current===y?h:p}function Ze(h){return h=Qe(h),h!==null?Et(h):null}function Et(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=Et(h);if(p!==null)return p;h=h.sibling}return null}var q=e.unstable_scheduleCallback,de=e.unstable_cancelCallback,Ae=e.unstable_shouldYield,we=e.unstable_requestPaint,te=e.unstable_now,st=e.unstable_getCurrentPriorityLevel,$e=e.unstable_ImmediatePriority,et=e.unstable_UserBlockingPriority,ct=e.unstable_NormalPriority,Mt=e.unstable_LowPriority,Dt=e.unstable_IdlePriority,wt=null,Tt=null;function zt(h){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(wt,h,void 0,(h.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:Lt,un=Math.log,Nt=Math.LN2;function Lt(h){return h>>>=0,h===0?32:31-(un(h)/Nt|0)|0}var Sn=64,nn=4194304;function In(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function An(h,p){var y=h.pendingLanes;if(y===0)return 0;var T=0,L=h.suspendedLanes,G=h.pingedLanes,Y=y&268435455;if(Y!==0){var ve=Y&~L;ve!==0?T=In(ve):(G&=Y,G!==0&&(T=In(G)))}else Y=y&~L,Y!==0?T=In(Y):G!==0&&(T=In(G));if(T===0)return 0;if(p!==0&&p!==T&&!(p&L)&&(L=T&-T,G=p&-p,L>=G||L===16&&(G&4194240)!==0))return p;if(T&4&&(T|=y&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=T;0<p;)y=31-Vt(p),L=1<<y,T|=h[y],p&=~L;return T}function Vn(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wn(h,p){for(var y=h.suspendedLanes,T=h.pingedLanes,L=h.expirationTimes,G=h.pendingLanes;0<G;){var Y=31-Vt(G),ve=1<<Y,Me=L[Y];Me===-1?(!(ve&y)||ve&T)&&(L[Y]=Vn(ve,p)):Me<=p&&(h.expiredLanes|=ve),G&=~ve}}function Ut(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function En(){var h=Sn;return Sn<<=1,!(Sn&4194240)&&(Sn=64),h}function Yn(h){for(var p=[],y=0;31>y;y++)p.push(h);return p}function Mn(h,p,y){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-Vt(p),h[p]=y}function hn(h,p){var y=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var T=h.eventTimes;for(h=h.expirationTimes;0<y;){var L=31-Vt(y),G=1<<L;p[L]=0,T[L]=-1,h[L]=-1,y&=~G}}function gi(h,p){var y=h.entangledLanes|=p;for(h=h.entanglements;y;){var T=31-Vt(y),L=1<<T;L&p|h[T]&p&&(h[T]|=p),y&=~L}}var dn=0;function us(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var wa,qa,Fl,Do,Xa,Hs=!1,Ji=[],Cr=null,xn=null,Ms=null,cs=new Map,Ki=new Map,Vs=[],vc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rr(h,p){switch(h){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":cs.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(p.pointerId)}}function _i(h,p,y,T,L,G){return h===null||h.nativeEvent!==G?(h={blockedOn:p,domEventName:y,eventSystemFlags:T,nativeEvent:G,targetContainers:[L]},p!==null&&(p=tl(p),p!==null&&qa(p)),h):(h.eventSystemFlags|=T,p=h.targetContainers,L!==null&&p.indexOf(L)===-1&&p.push(L),h)}function yc(h,p,y,T,L){switch(p){case"focusin":return Cr=_i(Cr,h,p,y,T,L),!0;case"dragenter":return xn=_i(xn,h,p,y,T,L),!0;case"mouseover":return Ms=_i(Ms,h,p,y,T,L),!0;case"pointerover":var G=L.pointerId;return cs.set(G,_i(cs.get(G)||null,h,p,y,T,L)),!0;case"gotpointercapture":return G=L.pointerId,Ki.set(G,_i(Ki.get(G)||null,h,p,y,T,L)),!0}return!1}function ki(h){var p=zl(h.target);if(p!==null){var y=ne(p);if(y!==null){if(p=y.tag,p===13){if(p=Se(y),p!==null){h.blockedOn=p,Xa(h.priority,function(){Fl(y)});return}}else if(p===3&&y.stateNode.current.memoizedState.isDehydrated){h.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}h.blockedOn=null}function ho(h){if(h.blockedOn!==null)return!1;for(var p=h.targetContainers;0<p.length;){var y=bi(h.domEventName,h.eventSystemFlags,p[0],h.nativeEvent);if(y===null){y=h.nativeEvent;var T=new y.constructor(y.type,y);Qt=T,y.target.dispatchEvent(T),Qt=null}else return p=tl(y),p!==null&&qa(p),h.blockedOn=y,!1;p.shift()}return!0}function fo(h,p,y){ho(h)&&y.delete(p)}function hs(){Hs=!1,Cr!==null&&ho(Cr)&&(Cr=null),xn!==null&&ho(xn)&&(xn=null),Ms!==null&&ho(Ms)&&(Ms=null),cs.forEach(fo),Ki.forEach(fo)}function bs(h,p){h.blockedOn===p&&(h.blockedOn=null,Hs||(Hs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hs)))}function Ws(h){function p(L){return bs(L,h)}if(0<Ji.length){bs(Ji[0],h);for(var y=1;y<Ji.length;y++){var T=Ji[y];T.blockedOn===h&&(T.blockedOn=null)}}for(Cr!==null&&bs(Cr,h),xn!==null&&bs(xn,h),Ms!==null&&bs(Ms,h),cs.forEach(p),Ki.forEach(p),y=0;y<Vs.length;y++)T=Vs[y],T.blockedOn===h&&(T.blockedOn=null);for(;0<Vs.length&&(y=Vs[0],y.blockedOn===null);)ki(y),y.blockedOn===null&&Vs.shift()}var ai=R.ReactCurrentBatchConfig,$r=!0;function $n(h,p,y,T){var L=dn,G=ai.transition;ai.transition=null;try{dn=1,Ja(h,p,y,T)}finally{dn=L,ai.transition=G}}function js(h,p,y,T){var L=dn,G=ai.transition;ai.transition=null;try{dn=4,Ja(h,p,y,T)}finally{dn=L,ai.transition=G}}function Ja(h,p,y,T){if($r){var L=bi(h,p,y,T);if(L===null)Qd(h,p,T,Zo,y),Rr(h,T);else if(yc(L,h,p,y,T))T.stopPropagation();else if(Rr(h,T),p&4&&-1<vc.indexOf(h)){for(;L!==null;){var G=tl(L);if(G!==null&&wa(G),G=bi(h,p,y,T),G===null&&Qd(h,p,T,Zo,y),G===L)break;L=G}L!==null&&T.stopPropagation()}else Qd(h,p,T,null,y)}}var Zo=null;function bi(h,p,y,T){if(Zo=null,h=Te(T),h=zl(h),h!==null)if(p=ne(h),p===null)h=null;else if(y=p.tag,y===13){if(h=Se(p),h!==null)return h;h=null}else if(y===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;h=null}else p!==h&&(h=null);return Zo=h,null}function $o(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(st()){case $e:return 1;case et:return 4;case ct:case Mt:return 16;case Dt:return 536870912;default:return 16}default:return 16}}var Ci=null,Bo=null,xr=null;function ei(){if(xr)return xr;var h,p=Bo,y=p.length,T,L="value"in Ci?Ci.value:Ci.textContent,G=L.length;for(h=0;h<y&&p[h]===L[h];h++);var Y=y-h;for(T=1;T<=Y&&p[y-T]===L[G-T];T++);return xr=L.slice(h,1<T?1-T:void 0)}function ea(h){var p=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&p===13&&(h=13)):h=p,h===10&&(h=13),32<=h||h===13?h:0}function vi(){return!0}function Lo(){return!1}function ti(h){function p(y,T,L,G,Y){this._reactName=y,this._targetInst=L,this.type=T,this.nativeEvent=G,this.target=Y,this.currentTarget=null;for(var ve in h)h.hasOwnProperty(ve)&&(y=h[ve],this[ve]=y?y(G):G[ve]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?vi:Lo,this.isPropagationStopped=Lo,this}return $(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=vi)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=vi)},persist:function(){},isPersistent:vi}),p}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xr=ti(qs),Hr=$({},qs,{view:0,detail:0}),Jr=ti(Hr),Ir,li,Cs,Ka=$({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Cs&&(Cs&&h.type==="mousemove"?(Ir=h.screenX-Cs.screenX,li=h.screenY-Cs.screenY):li=Ir=0,Cs=h),Ir)},movementY:function(h){return"movementY"in h?h.movementY:li}}),du=ti(Ka),po=$({},Ka,{dataTransfer:0}),ta=ti(po),Ya=$({},Hr,{relatedTarget:0}),pu=ti(Ya),mu=$({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Sa=ti(mu),Vh=$({},qs,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),xc=ti(Vh),gu=$({},qs,{data:0}),Ac=ti(gu),_u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qa(h){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(h):(h=wc[h])?!!p[h]:!1}function Rs(){return Qa}var S=$({},Hr,{key:function(h){if(h.key){var p=_u[h.key]||h.key;if(p!=="Unidentified")return p}return h.type==="keypress"?(h=ea(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?fs[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(h){return h.type==="keypress"?ea(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?ea(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),U=ti(S),j=$({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ie=ti(j),Oe=$({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),Je=ti(Oe),Rt=$({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jn=ti(Rt),yi=$({},Ka,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=ti(yi),xi=[9,13,27,32],or=a&&"CompositionEvent"in window,Vr=null;a&&"documentMode"in document&&(Vr=document.documentMode);var qn=a&&"TextEvent"in window&&!Vr,na=a&&(!or||Vr&&8<Vr&&11>=Vr),ds=" ",rg=!1;function ig(h,p){switch(h){case"keyup":return xi.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zd(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Ol=!1;function yv(h,p){switch(h){case"compositionend":return zd(p);case"keypress":return p.which!==32?null:(rg=!0,ds);case"textInput":return h=p.data,h===ds&&rg?null:h;default:return null}}function Wh(h,p){if(Ol)return h==="compositionend"||!or&&ig(h,p)?(h=ei(),xr=Bo=Ci=null,Ol=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return na&&p.locale!=="ko"?null:p.data;default:return null}}var Sc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p==="input"?!!Sc[h.type]:p==="textarea"}function Ec(h,p,y,T){ft(T),p=Zd(p,"onChange"),0<p.length&&(y=new Xr("onChange","change",null,y,T),h.push({event:y,listeners:p}))}var kl=null,Tc=null;function xv(h){Rc(h,0)}function Za(h){var p=ui(h);if(Ee(p))return h}function Av(h,p){if(h==="change")return p}var Mc=!1;if(a){var Xs;if(a){var vu="oninput"in document;if(!vu){var yu=document.createElement("div");yu.setAttribute("oninput","return;"),vu=typeof yu.oninput=="function"}Xs=vu}else Xs=!1;Mc=Xs&&(!document.documentMode||9<document.documentMode)}function ra(){kl&&(kl.detachEvent("onpropertychange",Hd),Tc=kl=null)}function Hd(h){if(h.propertyName==="value"&&Za(Tc)){var p=[];Ec(p,Tc,h,Te(h)),Wn(xv,p)}}function bc(h,p,y){h==="focusin"?(ra(),kl=p,Tc=y,kl.attachEvent("onpropertychange",Hd)):h==="focusout"&&ra()}function wv(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Za(Tc)}function sg(h,p){if(h==="click")return Za(p)}function Kr(h,p){if(h==="input"||h==="change")return Za(p)}function Vd(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var mo=typeof Object.is=="function"?Object.is:Vd;function xu(h,p){if(mo(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var y=Object.keys(h),T=Object.keys(p);if(y.length!==T.length)return!1;for(T=0;T<y.length;T++){var L=y[T];if(!l.call(p,L)||!mo(h[L],p[L]))return!1}return!0}function jh(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function go(h,p){var y=jh(h);h=0;for(var T;y;){if(y.nodeType===3){if(T=h+y.textContent.length,h<=p&&T>=p)return{node:y,offset:p-h};h=T}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=jh(y)}}function Au(h,p){return h&&p?h===p?!0:h&&h.nodeType===3?!1:p&&p.nodeType===3?Au(h,p.parentNode):"contains"in h?h.contains(p):h.compareDocumentPosition?!!(h.compareDocumentPosition(p)&16):!1:!1}function Yr(){for(var h=window,p=Ge();p instanceof h.HTMLIFrameElement;){try{var y=typeof p.contentWindow.location.href=="string"}catch{y=!1}if(y)h=p.contentWindow;else break;p=Ge(h.document)}return p}function Ni(h){var p=h&&h.nodeName&&h.nodeName.toLowerCase();return p&&(p==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||p==="textarea"||h.contentEditable==="true")}function Ui(h){var p=Yr(),y=h.focusedElem,T=h.selectionRange;if(p!==y&&y&&y.ownerDocument&&Au(y.ownerDocument.documentElement,y)){if(T!==null&&Ni(y)){if(p=T.start,h=T.end,h===void 0&&(h=p),"selectionStart"in y)y.selectionStart=p,y.selectionEnd=Math.min(h,y.value.length);else if(h=(p=y.ownerDocument||document)&&p.defaultView||window,h.getSelection){h=h.getSelection();var L=y.textContent.length,G=Math.min(T.start,L);T=T.end===void 0?G:Math.min(T.end,L),!h.extend&&G>T&&(L=T,T=G,G=L),L=go(y,G);var Y=go(y,T);L&&Y&&(h.rangeCount!==1||h.anchorNode!==L.node||h.anchorOffset!==L.offset||h.focusNode!==Y.node||h.focusOffset!==Y.offset)&&(p=p.createRange(),p.setStart(L.node,L.offset),h.removeAllRanges(),G>T?(h.addRange(p),h.extend(Y.node,Y.offset)):(p.setEnd(Y.node,Y.offset),h.addRange(p)))}}for(p=[],h=y;h=h.parentNode;)h.nodeType===1&&p.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<p.length;y++)h=p[y],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Wd=a&&"documentMode"in document&&11>=document.documentMode,Ea=null,wu=null,qh=null,zi=!1;function jd(h,p,y){var T=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;zi||Ea==null||Ea!==Ge(T)||(T=Ea,"selectionStart"in T&&Ni(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),qh&&xu(qh,T)||(qh=T,T=Zd(wu,"onSelect"),0<T.length&&(p=new Xr("onSelect","select",null,p,y),h.push({event:p,listeners:T}),p.target=Ea)))}function Cc(h,p){var y={};return y[h.toLowerCase()]=p.toLowerCase(),y["Webkit"+h]="webkit"+p,y["Moz"+h]="moz"+p,y}var Nl={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},ia={},sa={};a&&(sa=document.createElement("div").style,"AnimationEvent"in window||(delete Nl.animationend.animation,delete Nl.animationiteration.animation,delete Nl.animationstart.animation),"TransitionEvent"in window||delete Nl.transitionend.transition);function Ta(h){if(ia[h])return ia[h];if(!Nl[h])return h;var p=Nl[h],y;for(y in p)if(p.hasOwnProperty(y)&&y in sa)return ia[h]=p[y];return h}var Xh=Ta("animationend"),Jh=Ta("animationiteration"),og=Ta("animationstart"),ag=Ta("transitionend"),lg=new Map,ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $a(h,p){lg.set(h,p),s(p,[h])}for(var qd=0;qd<ug.length;qd++){var Kh=ug[qd],Yh=Kh.toLowerCase(),Sv=Kh[0].toUpperCase()+Kh.slice(1);$a(Yh,"on"+Sv)}$a(Xh,"onAnimationEnd"),$a(Jh,"onAnimationIteration"),$a(og,"onAnimationStart"),$a("dblclick","onDoubleClick"),$a("focusin","onFocus"),$a("focusout","onBlur"),$a(ag,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ul));function Jd(h,p,y){var T=h.type||"unknown-event";h.currentTarget=y,X(T,p,void 0,h),h.currentTarget=null}function Rc(h,p){p=(p&4)!==0;for(var y=0;y<h.length;y++){var T=h[y],L=T.event;T=T.listeners;e:{var G=void 0;if(p)for(var Y=T.length-1;0<=Y;Y--){var ve=T[Y],Me=ve.instance,Ke=ve.currentTarget;if(ve=ve.listener,Me!==G&&L.isPropagationStopped())break e;Jd(L,ve,Ke),G=Me}else for(Y=0;Y<T.length;Y++){if(ve=T[Y],Me=ve.instance,Ke=ve.currentTarget,ve=ve.listener,Me!==G&&L.isPropagationStopped())break e;Jd(L,ve,Ke),G=Me}}}if(sr)throw h=cn,sr=!1,cn=null,h}function Pr(h,p){var y=p[Tu];y===void 0&&(y=p[Tu]=new Set);var T=h+"__bubble";y.has(T)||(Yd(p,h,2,!1),y.add(T))}function Kd(h,p,y){var T=0;p&&(T|=4),Yd(y,h,T,p)}var Qh="_reactListening"+Math.random().toString(36).slice(2);function Ic(h){if(!h[Qh]){h[Qh]=!0,n.forEach(function(y){y!=="selectionchange"&&(Xd.has(y)||Kd(y,!1,h),Kd(y,!0,h))});var p=h.nodeType===9?h:h.ownerDocument;p===null||p[Qh]||(p[Qh]=!0,Kd("selectionchange",!1,p))}}function Yd(h,p,y,T){switch($o(p)){case 1:var L=$n;break;case 4:L=js;break;default:L=Ja}y=L.bind(null,p,y,h),L=void 0,!fr||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(L=!0),T?L!==void 0?h.addEventListener(p,y,{capture:!0,passive:L}):h.addEventListener(p,y,!0):L!==void 0?h.addEventListener(p,y,{passive:L}):h.addEventListener(p,y,!1)}function Qd(h,p,y,T,L){var G=T;if(!(p&1)&&!(p&2)&&T!==null)e:for(;;){if(T===null)return;var Y=T.tag;if(Y===3||Y===4){var ve=T.stateNode.containerInfo;if(ve===L||ve.nodeType===8&&ve.parentNode===L)break;if(Y===4)for(Y=T.return;Y!==null;){var Me=Y.tag;if((Me===3||Me===4)&&(Me=Y.stateNode.containerInfo,Me===L||Me.nodeType===8&&Me.parentNode===L))return;Y=Y.return}for(;ve!==null;){if(Y=zl(ve),Y===null)return;if(Me=Y.tag,Me===5||Me===6){T=G=Y;continue e}ve=ve.parentNode}}T=T.return}Wn(function(){var Ke=G,St=Te(y),bt=[];e:{var At=lg.get(h);if(At!==void 0){var Jt=Xr,tn=h;switch(h){case"keypress":if(ea(y)===0)break e;case"keydown":case"keyup":Jt=U;break;case"focusin":tn="focus",Jt=pu;break;case"focusout":tn="blur",Jt=pu;break;case"beforeblur":case"afterblur":Jt=pu;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Jt=du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Jt=ta;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Jt=Je;break;case Xh:case Jh:case og:Jt=Sa;break;case ag:Jt=Jn;break;case"scroll":Jt=Jr;break;case"wheel":Jt=jn;break;case"copy":case"cut":case"paste":Jt=xc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Jt=ie}var rn=(p&4)!==0,Ii=!rn&&h==="scroll",ze=rn?At!==null?At+"Capture":null:At;rn=[];for(var Ie=Ke,He;Ie!==null;){He=Ie;var Pt=He.stateNode;if(He.tag===5&&Pt!==null&&(He=Pt,ze!==null&&(Pt=mn(Ie,ze),Pt!=null&&rn.push(Pc(Ie,Pt,He)))),Ii)break;Ie=Ie.return}0<rn.length&&(At=new Jt(At,tn,null,y,St),bt.push({event:At,listeners:rn}))}}if(!(p&7)){e:{if(At=h==="mouseover"||h==="pointerover",Jt=h==="mouseout"||h==="pointerout",At&&y!==Qt&&(tn=y.relatedTarget||y.fromElement)&&(zl(tn)||tn[_o]))break e;if((Jt||At)&&(At=St.window===St?St:(At=St.ownerDocument)?At.defaultView||At.parentWindow:window,Jt?(tn=y.relatedTarget||y.toElement,Jt=Ke,tn=tn?zl(tn):null,tn!==null&&(Ii=ne(tn),tn!==Ii||tn.tag!==5&&tn.tag!==6)&&(tn=null)):(Jt=null,tn=Ke),Jt!==tn)){if(rn=du,Pt="onMouseLeave",ze="onMouseEnter",Ie="mouse",(h==="pointerout"||h==="pointerover")&&(rn=ie,Pt="onPointerLeave",ze="onPointerEnter",Ie="pointer"),Ii=Jt==null?At:ui(Jt),He=tn==null?At:ui(tn),At=new rn(Pt,Ie+"leave",Jt,y,St),At.target=Ii,At.relatedTarget=He,Pt=null,zl(St)===Ke&&(rn=new rn(ze,Ie+"enter",tn,y,St),rn.target=He,rn.relatedTarget=Ii,Pt=rn),Ii=Pt,Jt&&tn)t:{for(rn=Jt,ze=tn,Ie=0,He=rn;He;He=Su(He))Ie++;for(He=0,Pt=ze;Pt;Pt=Su(Pt))He++;for(;0<Ie-He;)rn=Su(rn),Ie--;for(;0<He-Ie;)ze=Su(ze),He--;for(;Ie--;){if(rn===ze||ze!==null&&rn===ze.alternate)break t;rn=Su(rn),ze=Su(ze)}rn=null}else rn=null;Jt!==null&&Ev(bt,At,Jt,rn,!1),tn!==null&&Ii!==null&&Ev(bt,Ii,tn,rn,!0)}}e:{if(At=Ke?ui(Ke):window,Jt=At.nodeName&&At.nodeName.toLowerCase(),Jt==="select"||Jt==="input"&&At.type==="file")var an=Av;else if(Gd(At))if(Mc)an=Kr;else{an=wv;var gn=bc}else(Jt=At.nodeName)&&Jt.toLowerCase()==="input"&&(At.type==="checkbox"||At.type==="radio")&&(an=sg);if(an&&(an=an(h,Ke))){Ec(bt,an,y,St);break e}gn&&gn(h,At,Ke),h==="focusout"&&(gn=At._wrapperState)&&gn.controlled&&At.type==="number"&&dt(At,"number",At.value)}switch(gn=Ke?ui(Ke):window,h){case"focusin":(Gd(gn)||gn.contentEditable==="true")&&(Ea=gn,wu=Ke,qh=null);break;case"focusout":qh=wu=Ea=null;break;case"mousedown":zi=!0;break;case"contextmenu":case"mouseup":case"dragend":zi=!1,jd(bt,y,St);break;case"selectionchange":if(Wd)break;case"keydown":case"keyup":jd(bt,y,St)}var _n;if(or)e:{switch(h){case"compositionstart":var Tn="onCompositionStart";break e;case"compositionend":Tn="onCompositionEnd";break e;case"compositionupdate":Tn="onCompositionUpdate";break e}Tn=void 0}else Ol?ig(h,y)&&(Tn="onCompositionEnd"):h==="keydown"&&y.keyCode===229&&(Tn="onCompositionStart");Tn&&(na&&y.locale!=="ko"&&(Ol||Tn!=="onCompositionStart"?Tn==="onCompositionEnd"&&Ol&&(_n=ei()):(Ci=St,Bo="value"in Ci?Ci.value:Ci.textContent,Ol=!0)),gn=Zd(Ke,Tn),0<gn.length&&(Tn=new Ac(Tn,h,null,y,St),bt.push({event:Tn,listeners:gn}),_n?Tn.data=_n:(_n=zd(y),_n!==null&&(Tn.data=_n)))),(_n=qn?yv(h,y):Wh(h,y))&&(Ke=Zd(Ke,"onBeforeInput"),0<Ke.length&&(St=new Ac("onBeforeInput","beforeinput",null,y,St),bt.push({event:St,listeners:Ke}),St.data=_n))}Rc(bt,p)})}function Pc(h,p,y){return{instance:h,listener:p,currentTarget:y}}function Zd(h,p){for(var y=p+"Capture",T=[];h!==null;){var L=h,G=L.stateNode;L.tag===5&&G!==null&&(L=G,G=mn(h,y),G!=null&&T.unshift(Pc(h,G,L)),G=mn(h,p),G!=null&&T.push(Pc(h,G,L))),h=h.return}return T}function Su(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function Ev(h,p,y,T,L){for(var G=p._reactName,Y=[];y!==null&&y!==T;){var ve=y,Me=ve.alternate,Ke=ve.stateNode;if(Me!==null&&Me===T)break;ve.tag===5&&Ke!==null&&(ve=Ke,L?(Me=mn(y,G),Me!=null&&Y.unshift(Pc(y,Me,ve))):L||(Me=mn(y,G),Me!=null&&Y.push(Pc(y,Me,ve)))),y=y.return}Y.length!==0&&h.push({event:p,listeners:Y})}var pw=/\r\n?/g,Tv=/\u0000|\uFFFD/g;function cg(h){return(typeof h=="string"?h:""+h).replace(pw,`
`).replace(Tv,"")}function Zh(h,p,y){if(p=cg(p),cg(h)!==p&&y)throw Error(t(425))}function $h(){}var Dc=null,hg=null;function fg(h,p){return h==="textarea"||h==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var dg=typeof setTimeout=="function"?setTimeout:void 0,pg=typeof clearTimeout=="function"?clearTimeout:void 0,$d=typeof Promise=="function"?Promise:void 0,mw=typeof queueMicrotask=="function"?queueMicrotask:typeof $d<"u"?function(h){return $d.resolve(null).then(h).catch(Mv)}:dg;function Mv(h){setTimeout(function(){throw h})}function ep(h,p){var y=p,T=0;do{var L=y.nextSibling;if(h.removeChild(y),L&&L.nodeType===8)if(y=L.data,y==="/$"){if(T===0){h.removeChild(L),Ws(p);return}T--}else y!=="$"&&y!=="$?"&&y!=="$!"||T++;y=L}while(y);Ws(p)}function el(h){for(;h!=null;h=h.nextSibling){var p=h.nodeType;if(p===1||p===3)break;if(p===8){if(p=h.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return h}function mg(h){h=h.previousSibling;for(var p=0;h;){if(h.nodeType===8){var y=h.data;if(y==="$"||y==="$!"||y==="$?"){if(p===0)return h;p--}else y==="/$"&&p++}h=h.previousSibling}return null}var Eu=Math.random().toString(36).slice(2),Ri="__reactFiber$"+Eu,Bc="__reactProps$"+Eu,_o="__reactContainer$"+Eu,Tu="__reactEvents$"+Eu,tp="__reactListeners$"+Eu,np="__reactHandles$"+Eu;function zl(h){var p=h[Ri];if(p)return p;for(var y=h.parentNode;y;){if(p=y[_o]||y[Ri]){if(y=p.alternate,p.child!==null||y!==null&&y.child!==null)for(h=mg(h);h!==null;){if(y=h[Ri])return y;h=mg(h)}return p}h=y,y=h.parentNode}return null}function tl(h){return h=h[Ri]||h[_o],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function ui(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(t(33))}function rp(h){return h[Bc]||null}var gg=[],Gi=-1;function ni(h){return{current:h}}function Dr(h){0>Gi||(h.current=gg[Gi],gg[Gi]=null,Gi--)}function Mr(h,p){Gi++,gg[Gi]=h.current,h.current=p}var nl={},Yi=ni(nl),Is=ni(!1),rl=nl;function Mu(h,p){var y=h.type.contextTypes;if(!y)return nl;var T=h.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===p)return T.__reactInternalMemoizedMaskedChildContext;var L={},G;for(G in y)L[G]=p[G];return T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=L),L}function ps(h){return h=h.childContextTypes,h!=null}function ef(){Dr(Is),Dr(Yi)}function _g(h,p,y){if(Yi.current!==nl)throw Error(t(168));Mr(Yi,p),Mr(Is,y)}function tf(h,p,y){var T=h.stateNode;if(p=p.childContextTypes,typeof T.getChildContext!="function")return y;T=T.getChildContext();for(var L in T)if(!(L in p))throw Error(t(108,_e(h)||"Unknown",L));return $({},y,T)}function bu(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||nl,rl=Yi.current,Mr(Yi,h),Mr(Is,Is.current),!0}function vg(h,p,y){var T=h.stateNode;if(!T)throw Error(t(169));y?(h=tf(h,p,rl),T.__reactInternalMemoizedMergedChildContext=h,Dr(Is),Dr(Yi),Mr(Yi,h)):Dr(Is),Mr(Is,y)}var oa=null,nf=!1,ip=!1;function rf(h){oa===null?oa=[h]:oa.push(h)}function bv(h){nf=!0,rf(h)}function Ma(){if(!ip&&oa!==null){ip=!0;var h=0,p=dn;try{var y=oa;for(dn=1;h<y.length;h++){var T=y[h];do T=T(!0);while(T!==null)}oa=null,nf=!1}catch(L){throw oa!==null&&(oa=oa.slice(h+1)),q($e,Ma),L}finally{dn=p,ip=!1}}return null}var Cu=[],Js=0,sp=null,op=0,Ps=[],Hi=0,Ru=null,Ft=1,Fo="";function il(h,p){Cu[Js++]=op,Cu[Js++]=sp,sp=h,op=p}function yg(h,p,y){Ps[Hi++]=Ft,Ps[Hi++]=Fo,Ps[Hi++]=Ru,Ru=h;var T=Ft;h=Fo;var L=32-Vt(T)-1;T&=~(1<<L),y+=1;var G=32-Vt(p)+L;if(30<G){var Y=L-L%5;G=(T&(1<<Y)-1).toString(32),T>>=Y,L-=Y,Ft=1<<32-Vt(p)+L|y<<L|T,Fo=G+h}else Ft=1<<G|y<<L|T,Fo=h}function xg(h){h.return!==null&&(il(h,1),yg(h,1,0))}function sl(h){for(;h===sp;)sp=Cu[--Js],Cu[Js]=null,op=Cu[--Js],Cu[Js]=null;for(;h===Ru;)Ru=Ps[--Hi],Ps[Hi]=null,Fo=Ps[--Hi],Ps[Hi]=null,Ft=Ps[--Hi],Ps[Hi]=null}var Qi=null,Ds=null,Nr=!1,Oo=null;function Ag(h,p){var y=Pa(5,null,null,0);y.elementType="DELETED",y.stateNode=p,y.return=h,p=h.deletions,p===null?(h.deletions=[y],h.flags|=16):p.push(y)}function wg(h,p){switch(h.tag){case 5:var y=h.type;return p=p.nodeType!==1||y.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(h.stateNode=p,Qi=h,Ds=el(p.firstChild),!0):!1;case 6:return p=h.pendingProps===""||p.nodeType!==3?null:p,p!==null?(h.stateNode=p,Qi=h,Ds=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(y=Ru!==null?{id:Ft,overflow:Fo}:null,h.memoizedState={dehydrated:p,treeContext:y,retryLane:1073741824},y=Pa(18,null,null,0),y.stateNode=p,y.return=h,h.child=y,Qi=h,Ds=null,!0):!1;default:return!1}}function ap(h){return(h.mode&1)!==0&&(h.flags&128)===0}function lp(h){if(Nr){var p=Ds;if(p){var y=p;if(!wg(h,p)){if(ap(h))throw Error(t(418));p=el(y.nextSibling);var T=Qi;p&&wg(h,p)?Ag(T,y):(h.flags=h.flags&-4097|2,Nr=!1,Qi=h)}}else{if(ap(h))throw Error(t(418));h.flags=h.flags&-4097|2,Nr=!1,Qi=h}}}function up(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Qi=h}function Lc(h){if(h!==Qi)return!1;if(!Nr)return up(h),Nr=!0,!1;var p;if((p=h.tag!==3)&&!(p=h.tag!==5)&&(p=h.type,p=p!=="head"&&p!=="body"&&!fg(h.type,h.memoizedProps)),p&&(p=Ds)){if(ap(h))throw Sg(),Error(t(418));for(;p;)Ag(h,p),p=el(p.nextSibling)}if(up(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(t(317));e:{for(h=h.nextSibling,p=0;h;){if(h.nodeType===8){var y=h.data;if(y==="/$"){if(p===0){Ds=el(h.nextSibling);break e}p--}else y!=="$"&&y!=="$!"&&y!=="$?"||p++}h=h.nextSibling}Ds=null}}else Ds=Qi?el(h.stateNode.nextSibling):null;return!0}function Sg(){for(var h=Ds;h;)h=el(h.nextSibling)}function Gl(){Ds=Qi=null,Nr=!1}function Fc(h){Oo===null?Oo=[h]:Oo.push(h)}var gw=R.ReactCurrentBatchConfig;function sf(h,p,y){if(h=y.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(t(309));var T=y.stateNode}if(!T)throw Error(t(147,h));var L=T,G=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===G?p.ref:(p=function(Y){var ve=L.refs;Y===null?delete ve[G]:ve[G]=Y},p._stringRef=G,p)}if(typeof h!="string")throw Error(t(284));if(!y._owner)throw Error(t(290,h))}return h}function of(h,p){throw h=Object.prototype.toString.call(p),Error(t(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function Eg(h){var p=h._init;return p(h._payload)}function Tg(h){function p(ze,Ie){if(h){var He=ze.deletions;He===null?(ze.deletions=[Ie],ze.flags|=16):He.push(Ie)}}function y(ze,Ie){if(!h)return null;for(;Ie!==null;)p(ze,Ie),Ie=Ie.sibling;return null}function T(ze,Ie){for(ze=new Map;Ie!==null;)Ie.key!==null?ze.set(Ie.key,Ie):ze.set(Ie.index,Ie),Ie=Ie.sibling;return ze}function L(ze,Ie){return ze=qc(ze,Ie),ze.index=0,ze.sibling=null,ze}function G(ze,Ie,He){return ze.index=He,h?(He=ze.alternate,He!==null?(He=He.index,He<Ie?(ze.flags|=2,Ie):He):(ze.flags|=2,Ie)):(ze.flags|=1048576,Ie)}function Y(ze){return h&&ze.alternate===null&&(ze.flags|=2),ze}function ve(ze,Ie,He,Pt){return Ie===null||Ie.tag!==6?(Ie=Fw(He,ze.mode,Pt),Ie.return=ze,Ie):(Ie=L(Ie,He),Ie.return=ze,Ie)}function Me(ze,Ie,He,Pt){var an=He.type;return an===D?St(ze,Ie,He.props.children,Pt,He.key):Ie!==null&&(Ie.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===ae&&Eg(an)===Ie.type)?(Pt=L(Ie,He.props),Pt.ref=sf(ze,Ie,He),Pt.return=ze,Pt):(Pt=Yv(He.type,He.key,He.props,null,ze.mode,Pt),Pt.ref=sf(ze,Ie,He),Pt.return=ze,Pt)}function Ke(ze,Ie,He,Pt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==He.containerInfo||Ie.stateNode.implementation!==He.implementation?(Ie=Ow(He,ze.mode,Pt),Ie.return=ze,Ie):(Ie=L(Ie,He.children||[]),Ie.return=ze,Ie)}function St(ze,Ie,He,Pt,an){return Ie===null||Ie.tag!==7?(Ie=Sf(He,ze.mode,Pt,an),Ie.return=ze,Ie):(Ie=L(Ie,He),Ie.return=ze,Ie)}function bt(ze,Ie,He){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Ie=Fw(""+Ie,ze.mode,He),Ie.return=ze,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case F:return He=Yv(Ie.type,Ie.key,Ie.props,null,ze.mode,He),He.ref=sf(ze,null,Ie),He.return=ze,He;case O:return Ie=Ow(Ie,ze.mode,He),Ie.return=ze,Ie;case ae:var Pt=Ie._init;return bt(ze,Pt(Ie._payload),He)}if(je(Ie)||le(Ie))return Ie=Sf(Ie,ze.mode,He,null),Ie.return=ze,Ie;of(ze,Ie)}return null}function At(ze,Ie,He,Pt){var an=Ie!==null?Ie.key:null;if(typeof He=="string"&&He!==""||typeof He=="number")return an!==null?null:ve(ze,Ie,""+He,Pt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case F:return He.key===an?Me(ze,Ie,He,Pt):null;case O:return He.key===an?Ke(ze,Ie,He,Pt):null;case ae:return an=He._init,At(ze,Ie,an(He._payload),Pt)}if(je(He)||le(He))return an!==null?null:St(ze,Ie,He,Pt,null);of(ze,He)}return null}function Jt(ze,Ie,He,Pt,an){if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number")return ze=ze.get(He)||null,ve(Ie,ze,""+Pt,an);if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case F:return ze=ze.get(Pt.key===null?He:Pt.key)||null,Me(Ie,ze,Pt,an);case O:return ze=ze.get(Pt.key===null?He:Pt.key)||null,Ke(Ie,ze,Pt,an);case ae:var gn=Pt._init;return Jt(ze,Ie,He,gn(Pt._payload),an)}if(je(Pt)||le(Pt))return ze=ze.get(He)||null,St(Ie,ze,Pt,an,null);of(Ie,Pt)}return null}function tn(ze,Ie,He,Pt){for(var an=null,gn=null,_n=Ie,Tn=Ie=0,vs=null;_n!==null&&Tn<He.length;Tn++){_n.index>Tn?(vs=_n,_n=null):vs=_n.sibling;var vr=At(ze,_n,He[Tn],Pt);if(vr===null){_n===null&&(_n=vs);break}h&&_n&&vr.alternate===null&&p(ze,_n),Ie=G(vr,Ie,Tn),gn===null?an=vr:gn.sibling=vr,gn=vr,_n=vs}if(Tn===He.length)return y(ze,_n),Nr&&il(ze,Tn),an;if(_n===null){for(;Tn<He.length;Tn++)_n=bt(ze,He[Tn],Pt),_n!==null&&(Ie=G(_n,Ie,Tn),gn===null?an=_n:gn.sibling=_n,gn=_n);return Nr&&il(ze,Tn),an}for(_n=T(ze,_n);Tn<He.length;Tn++)vs=Jt(_n,ze,Tn,He[Tn],Pt),vs!==null&&(h&&vs.alternate!==null&&_n.delete(vs.key===null?Tn:vs.key),Ie=G(vs,Ie,Tn),gn===null?an=vs:gn.sibling=vs,gn=vs);return h&&_n.forEach(function(Xc){return p(ze,Xc)}),Nr&&il(ze,Tn),an}function rn(ze,Ie,He,Pt){var an=le(He);if(typeof an!="function")throw Error(t(150));if(He=an.call(He),He==null)throw Error(t(151));for(var gn=an=null,_n=Ie,Tn=Ie=0,vs=null,vr=He.next();_n!==null&&!vr.done;Tn++,vr=He.next()){_n.index>Tn?(vs=_n,_n=null):vs=_n.sibling;var Xc=At(ze,_n,vr.value,Pt);if(Xc===null){_n===null&&(_n=vs);break}h&&_n&&Xc.alternate===null&&p(ze,_n),Ie=G(Xc,Ie,Tn),gn===null?an=Xc:gn.sibling=Xc,gn=Xc,_n=vs}if(vr.done)return y(ze,_n),Nr&&il(ze,Tn),an;if(_n===null){for(;!vr.done;Tn++,vr=He.next())vr=bt(ze,vr.value,Pt),vr!==null&&(Ie=G(vr,Ie,Tn),gn===null?an=vr:gn.sibling=vr,gn=vr);return Nr&&il(ze,Tn),an}for(_n=T(ze,_n);!vr.done;Tn++,vr=He.next())vr=Jt(_n,ze,Tn,vr.value,Pt),vr!==null&&(h&&vr.alternate!==null&&_n.delete(vr.key===null?Tn:vr.key),Ie=G(vr,Ie,Tn),gn===null?an=vr:gn.sibling=vr,gn=vr);return h&&_n.forEach(function(D9){return p(ze,D9)}),Nr&&il(ze,Tn),an}function Ii(ze,Ie,He,Pt){if(typeof He=="object"&&He!==null&&He.type===D&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case F:e:{for(var an=He.key,gn=Ie;gn!==null;){if(gn.key===an){if(an=He.type,an===D){if(gn.tag===7){y(ze,gn.sibling),Ie=L(gn,He.props.children),Ie.return=ze,ze=Ie;break e}}else if(gn.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===ae&&Eg(an)===gn.type){y(ze,gn.sibling),Ie=L(gn,He.props),Ie.ref=sf(ze,gn,He),Ie.return=ze,ze=Ie;break e}y(ze,gn);break}else p(ze,gn);gn=gn.sibling}He.type===D?(Ie=Sf(He.props.children,ze.mode,Pt,He.key),Ie.return=ze,ze=Ie):(Pt=Yv(He.type,He.key,He.props,null,ze.mode,Pt),Pt.ref=sf(ze,Ie,He),Pt.return=ze,ze=Pt)}return Y(ze);case O:e:{for(gn=He.key;Ie!==null;){if(Ie.key===gn)if(Ie.tag===4&&Ie.stateNode.containerInfo===He.containerInfo&&Ie.stateNode.implementation===He.implementation){y(ze,Ie.sibling),Ie=L(Ie,He.children||[]),Ie.return=ze,ze=Ie;break e}else{y(ze,Ie);break}else p(ze,Ie);Ie=Ie.sibling}Ie=Ow(He,ze.mode,Pt),Ie.return=ze,ze=Ie}return Y(ze);case ae:return gn=He._init,Ii(ze,Ie,gn(He._payload),Pt)}if(je(He))return tn(ze,Ie,He,Pt);if(le(He))return rn(ze,Ie,He,Pt);of(ze,He)}return typeof He=="string"&&He!==""||typeof He=="number"?(He=""+He,Ie!==null&&Ie.tag===6?(y(ze,Ie.sibling),Ie=L(Ie,He),Ie.return=ze,ze=Ie):(y(ze,Ie),Ie=Fw(He,ze.mode,Pt),Ie.return=ze,ze=Ie),Y(ze)):y(ze,Ie)}return Ii}var Iu=Tg(!0),af=Tg(!1),Pu=ni(null),Du=null,ol=null,Oc=null;function Bu(){Oc=ol=Du=null}function lf(h){var p=Pu.current;Dr(Pu),h._currentValue=p}function uf(h,p,y){for(;h!==null;){var T=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,T!==null&&(T.childLanes|=p)):T!==null&&(T.childLanes&p)!==p&&(T.childLanes|=p),h===y)break;h=h.return}}function Hl(h,p){Du=h,Oc=ol=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&p&&(Un=!0),h.firstContext=null)}function vo(h){var p=h._currentValue;if(Oc!==h)if(h={context:h,memoizedValue:p,next:null},ol===null){if(Du===null)throw Error(t(308));ol=h,Du.dependencies={lanes:0,firstContext:h}}else ol=ol.next=h;return p}var al=null;function Mg(h){al===null?al=[h]:al.push(h)}function cf(h,p,y,T){var L=p.interleaved;return L===null?(y.next=y,Mg(p)):(y.next=L.next,L.next=y),p.interleaved=y,aa(h,T)}function aa(h,p){h.lanes|=p;var y=h.alternate;for(y!==null&&(y.lanes|=p),y=h,h=h.return;h!==null;)h.childLanes|=p,y=h.alternate,y!==null&&(y.childLanes|=p),y=h,h=h.return;return y.tag===3?y.stateNode:null}var Ar=!1;function Nn(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ci(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function wr(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function Wr(h,p,y){var T=h.updateQueue;if(T===null)return null;if(T=T.shared,dr&2){var L=T.pending;return L===null?p.next=p:(p.next=L.next,L.next=p),T.pending=p,aa(h,y)}return L=T.interleaved,L===null?(p.next=p,Mg(T)):(p.next=L.next,L.next=p),T.interleaved=p,aa(h,y)}function ms(h,p,y){if(p=p.updateQueue,p!==null&&(p=p.shared,(y&4194240)!==0)){var T=p.lanes;T&=h.pendingLanes,y|=T,p.lanes=y,gi(h,y)}}function Lu(h,p){var y=h.updateQueue,T=h.alternate;if(T!==null&&(T=T.updateQueue,y===T)){var L=null,G=null;if(y=y.firstBaseUpdate,y!==null){do{var Y={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};G===null?L=G=Y:G=G.next=Y,y=y.next}while(y!==null);G===null?L=G=p:G=G.next=p}else L=G=p;y={baseState:T.baseState,firstBaseUpdate:L,lastBaseUpdate:G,shared:T.shared,effects:T.effects},h.updateQueue=y;return}h=y.lastBaseUpdate,h===null?y.firstBaseUpdate=p:h.next=p,y.lastBaseUpdate=p}function ri(h,p,y,T){var L=h.updateQueue;Ar=!1;var G=L.firstBaseUpdate,Y=L.lastBaseUpdate,ve=L.shared.pending;if(ve!==null){L.shared.pending=null;var Me=ve,Ke=Me.next;Me.next=null,Y===null?G=Ke:Y.next=Ke,Y=Me;var St=h.alternate;St!==null&&(St=St.updateQueue,ve=St.lastBaseUpdate,ve!==Y&&(ve===null?St.firstBaseUpdate=Ke:ve.next=Ke,St.lastBaseUpdate=Me))}if(G!==null){var bt=L.baseState;Y=0,St=Ke=Me=null,ve=G;do{var At=ve.lane,Jt=ve.eventTime;if((T&At)===At){St!==null&&(St=St.next={eventTime:Jt,lane:0,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null});e:{var tn=h,rn=ve;switch(At=p,Jt=y,rn.tag){case 1:if(tn=rn.payload,typeof tn=="function"){bt=tn.call(Jt,bt,At);break e}bt=tn;break e;case 3:tn.flags=tn.flags&-65537|128;case 0:if(tn=rn.payload,At=typeof tn=="function"?tn.call(Jt,bt,At):tn,At==null)break e;bt=$({},bt,At);break e;case 2:Ar=!0}}ve.callback!==null&&ve.lane!==0&&(h.flags|=64,At=L.effects,At===null?L.effects=[ve]:At.push(ve))}else Jt={eventTime:Jt,lane:At,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},St===null?(Ke=St=Jt,Me=bt):St=St.next=Jt,Y|=At;if(ve=ve.next,ve===null){if(ve=L.shared.pending,ve===null)break;At=ve,ve=At.next,At.next=null,L.lastBaseUpdate=At,L.shared.pending=null}}while(!0);if(St===null&&(Me=bt),L.baseState=Me,L.firstBaseUpdate=Ke,L.lastBaseUpdate=St,p=L.shared.interleaved,p!==null){L=p;do Y|=L.lane,L=L.next;while(L!==p)}else G===null&&(L.shared.lanes=0);yf|=Y,h.lanes=Y,h.memoizedState=bt}}function kc(h,p,y){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var T=h[p],L=T.callback;if(L!==null){if(T.callback=null,T=y,typeof L!="function")throw Error(t(191,L));L.call(T)}}}var ba={},yo=ni(ba),Fu=ni(ba),ll=ni(ba);function Ai(h){if(h===ba)throw Error(t(174));return h}function hf(h,p){switch(Mr(ll,p),Mr(Fu,h),Mr(yo,ba),h=p.nodeType,h){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:qe(null,"");break;default:h=h===8?p.parentNode:p,p=h.namespaceURI||null,h=h.tagName,p=qe(p,h)}Dr(yo),Mr(yo,p)}function Vl(){Dr(yo),Dr(Fu),Dr(ll)}function Ou(h){Ai(ll.current);var p=Ai(yo.current),y=qe(p,h.type);p!==y&&(Mr(Fu,h),Mr(yo,y))}function Nc(h){Fu.current===h&&(Dr(yo),Dr(Fu))}var Ur=ni(0);function la(h){for(var p=h;p!==null;){if(p.tag===13){var y=p.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Uc=[];function Ca(){for(var h=0;h<Uc.length;h++)Uc[h]._workInProgressVersionPrimary=null;Uc.length=0}var ku=R.ReactCurrentDispatcher,Nu=R.ReactCurrentBatchConfig,ul=0,Br=null,ii=null,ar=null,ua=!1,gs=!1,Wl=0,Ks=0;function Zi(){throw Error(t(321))}function ff(h,p){if(p===null)return!1;for(var y=0;y<p.length&&y<h.length;y++)if(!mo(h[y],p[y]))return!1;return!0}function df(h,p,y,T,L,G){if(ul=G,Br=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,ku.current=h===null||h.memoizedState===null?Lv:Fv,h=y(T,L),gs){G=0;do{if(gs=!1,Wl=0,25<=G)throw Error(t(301));G+=1,ar=ii=null,p.updateQueue=null,ku.current=Ov,h=y(T,L)}while(gs)}if(ku.current=gp,p=ii!==null&&ii.next!==null,ul=0,ar=ii=Br=null,ua=!1,p)throw Error(t(300));return h}function bg(){var h=Wl!==0;return Wl=0,h}function $i(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?Br.memoizedState=ar=h:ar=ar.next=h,ar}function xo(){if(ii===null){var h=Br.alternate;h=h!==null?h.memoizedState:null}else h=ii.next;var p=ar===null?Br.memoizedState:ar.next;if(p!==null)ar=p,ii=h;else{if(h===null)throw Error(t(310));ii=h,h={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},ar===null?Br.memoizedState=ar=h:ar=ar.next=h}return ar}function zc(h,p){return typeof p=="function"?p(h):p}function pf(h){var p=xo(),y=p.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=h;var T=ii,L=T.baseQueue,G=y.pending;if(G!==null){if(L!==null){var Y=L.next;L.next=G.next,G.next=Y}T.baseQueue=L=G,y.pending=null}if(L!==null){G=L.next,T=T.baseState;var ve=Y=null,Me=null,Ke=G;do{var St=Ke.lane;if((ul&St)===St)Me!==null&&(Me=Me.next={lane:0,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),T=Ke.hasEagerState?Ke.eagerState:h(T,Ke.action);else{var bt={lane:St,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null};Me===null?(ve=Me=bt,Y=T):Me=Me.next=bt,Br.lanes|=St,yf|=St}Ke=Ke.next}while(Ke!==null&&Ke!==G);Me===null?Y=T:Me.next=ve,mo(T,p.memoizedState)||(Un=!0),p.memoizedState=T,p.baseState=Y,p.baseQueue=Me,y.lastRenderedState=T}if(h=y.interleaved,h!==null){L=h;do G=L.lane,Br.lanes|=G,yf|=G,L=L.next;while(L!==h)}else L===null&&(y.lanes=0);return[p.memoizedState,y.dispatch]}function cl(h){var p=xo(),y=p.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=h;var T=y.dispatch,L=y.pending,G=p.memoizedState;if(L!==null){y.pending=null;var Y=L=L.next;do G=h(G,Y.action),Y=Y.next;while(Y!==L);mo(G,p.memoizedState)||(Un=!0),p.memoizedState=G,p.baseQueue===null&&(p.baseState=G),y.lastRenderedState=G}return[G,T]}function Cg(){}function Rg(h,p){var y=Br,T=xo(),L=p(),G=!mo(T.memoizedState,L);if(G&&(T.memoizedState=L,Un=!0),T=T.queue,Dg(Cv.bind(null,y,T,h),[h]),T.getSnapshot!==p||G||ar!==null&&ar.memoizedState.tag&1){if(y.flags|=2048,ca(9,mf.bind(null,y,T,L,p),void 0,null),_s===null)throw Error(t(349));ul&30||cp(y,p,L)}return L}function cp(h,p,y){h.flags|=16384,h={getSnapshot:p,value:y},p=Br.updateQueue,p===null?(p={lastEffect:null,stores:null},Br.updateQueue=p,p.stores=[h]):(y=p.stores,y===null?p.stores=[h]:y.push(h))}function mf(h,p,y,T){p.value=y,p.getSnapshot=T,Rv(p)&&Ig(h)}function Cv(h,p,y){return y(function(){Rv(p)&&Ig(h)})}function Rv(h){var p=h.getSnapshot;h=h.value;try{var y=p();return!mo(h,y)}catch{return!0}}function Ig(h){var p=aa(h,1);p!==null&&ml(p,h,1,-1)}function Pg(h){var p=$i();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zc,lastRenderedState:h},p.queue=h,h=h.dispatch=Uu.bind(null,Br,h),[p.memoizedState,h]}function ca(h,p,y,T){return h={tag:h,create:p,destroy:y,deps:T,next:null},p=Br.updateQueue,p===null?(p={lastEffect:null,stores:null},Br.updateQueue=p,p.lastEffect=h.next=h):(y=p.lastEffect,y===null?p.lastEffect=h.next=h:(T=y.next,y.next=h,h.next=T,p.lastEffect=h)),h}function Iv(){return xo().memoizedState}function Ra(h,p,y,T){var L=$i();Br.flags|=h,L.memoizedState=ca(1|p,y,void 0,T===void 0?null:T)}function gf(h,p,y,T){var L=xo();T=T===void 0?null:T;var G=void 0;if(ii!==null){var Y=ii.memoizedState;if(G=Y.destroy,T!==null&&ff(T,Y.deps)){L.memoizedState=ca(p,y,G,T);return}}Br.flags|=h,L.memoizedState=ca(1|p,y,G,T)}function Bs(h,p){return Ra(8390656,8,h,p)}function Dg(h,p){return gf(2048,8,h,p)}function Bg(h,p){return gf(4,2,h,p)}function Pv(h,p){return gf(4,4,h,p)}function Dv(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function Lg(h,p,y){return y=y!=null?y.concat([h]):null,gf(4,4,Dv.bind(null,p,h),y)}function hp(){}function Bv(h,p){var y=xo();p=p===void 0?null:p;var T=y.memoizedState;return T!==null&&p!==null&&ff(p,T[1])?T[0]:(y.memoizedState=[h,p],h)}function Ao(h,p){var y=xo();p=p===void 0?null:p;var T=y.memoizedState;return T!==null&&p!==null&&ff(p,T[1])?T[0]:(h=h(),y.memoizedState=[h,p],h)}function fp(h,p,y){return ul&21?(mo(y,p)||(y=En(),Br.lanes|=y,yf|=y,h.baseState=!0),p):(h.baseState&&(h.baseState=!1,Un=!0),h.memoizedState=y)}function _w(h,p){var y=dn;dn=y!==0&&4>y?y:4,h(!0);var T=Nu.transition;Nu.transition={};try{h(!1),p()}finally{dn=y,Nu.transition=T}}function hl(){return xo().memoizedState}function dp(h,p,y){var T=Wc(h);if(y={lane:T,action:y,hasEagerState:!1,eagerState:null,next:null},_f(h))pp(p,y);else if(y=cf(h,p,y,T),y!==null){var L=So();ml(y,h,T,L),mp(y,p,T)}}function Uu(h,p,y){var T=Wc(h),L={lane:T,action:y,hasEagerState:!1,eagerState:null,next:null};if(_f(h))pp(p,L);else{var G=h.alternate;if(h.lanes===0&&(G===null||G.lanes===0)&&(G=p.lastRenderedReducer,G!==null))try{var Y=p.lastRenderedState,ve=G(Y,y);if(L.hasEagerState=!0,L.eagerState=ve,mo(ve,Y)){var Me=p.interleaved;Me===null?(L.next=L,Mg(p)):(L.next=Me.next,Me.next=L),p.interleaved=L;return}}catch{}finally{}y=cf(h,p,L,T),y!==null&&(L=So(),ml(y,h,T,L),mp(y,p,T))}}function _f(h){var p=h.alternate;return h===Br||p!==null&&p===Br}function pp(h,p){gs=ua=!0;var y=h.pending;y===null?p.next=p:(p.next=y.next,y.next=p),h.pending=p}function mp(h,p,y){if(y&4194240){var T=p.lanes;T&=h.pendingLanes,y|=T,p.lanes=y,gi(h,y)}}var gp={readContext:vo,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useInsertionEffect:Zi,useLayoutEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useMutableSource:Zi,useSyncExternalStore:Zi,useId:Zi,unstable_isNewReconciler:!1},Lv={readContext:vo,useCallback:function(h,p){return $i().memoizedState=[h,p===void 0?null:p],h},useContext:vo,useEffect:Bs,useImperativeHandle:function(h,p,y){return y=y!=null?y.concat([h]):null,Ra(4194308,4,Dv.bind(null,p,h),y)},useLayoutEffect:function(h,p){return Ra(4194308,4,h,p)},useInsertionEffect:function(h,p){return Ra(4,2,h,p)},useMemo:function(h,p){var y=$i();return p=p===void 0?null:p,h=h(),y.memoizedState=[h,p],h},useReducer:function(h,p,y){var T=$i();return p=y!==void 0?y(p):p,T.memoizedState=T.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},T.queue=h,h=h.dispatch=dp.bind(null,Br,h),[T.memoizedState,h]},useRef:function(h){var p=$i();return h={current:h},p.memoizedState=h},useState:Pg,useDebugValue:hp,useDeferredValue:function(h){return $i().memoizedState=h},useTransition:function(){var h=Pg(!1),p=h[0];return h=_w.bind(null,h[1]),$i().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,y){var T=Br,L=$i();if(Nr){if(y===void 0)throw Error(t(407));y=y()}else{if(y=p(),_s===null)throw Error(t(349));ul&30||cp(T,p,y)}L.memoizedState=y;var G={value:y,getSnapshot:p};return L.queue=G,Bs(Cv.bind(null,T,G,h),[h]),T.flags|=2048,ca(9,mf.bind(null,T,G,y,p),void 0,null),y},useId:function(){var h=$i(),p=_s.identifierPrefix;if(Nr){var y=Fo,T=Ft;y=(T&~(1<<32-Vt(T)-1)).toString(32)+y,p=":"+p+"R"+y,y=Wl++,0<y&&(p+="H"+y.toString(32)),p+=":"}else y=Ks++,p=":"+p+"r"+y.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},Fv={readContext:vo,useCallback:Bv,useContext:vo,useEffect:Dg,useImperativeHandle:Lg,useInsertionEffect:Bg,useLayoutEffect:Pv,useMemo:Ao,useReducer:pf,useRef:Iv,useState:function(){return pf(zc)},useDebugValue:hp,useDeferredValue:function(h){var p=xo();return fp(p,ii.memoizedState,h)},useTransition:function(){var h=pf(zc)[0],p=xo().memoizedState;return[h,p]},useMutableSource:Cg,useSyncExternalStore:Rg,useId:hl,unstable_isNewReconciler:!1},Ov={readContext:vo,useCallback:Bv,useContext:vo,useEffect:Dg,useImperativeHandle:Lg,useInsertionEffect:Bg,useLayoutEffect:Pv,useMemo:Ao,useReducer:cl,useRef:Iv,useState:function(){return cl(zc)},useDebugValue:hp,useDeferredValue:function(h){var p=xo();return ii===null?p.memoizedState=h:fp(p,ii.memoizedState,h)},useTransition:function(){var h=cl(zc)[0],p=xo().memoizedState;return[h,p]},useMutableSource:Cg,useSyncExternalStore:Rg,useId:hl,unstable_isNewReconciler:!1};function ko(h,p){if(h&&h.defaultProps){p=$({},p),h=h.defaultProps;for(var y in h)p[y]===void 0&&(p[y]=h[y]);return p}return p}function vf(h,p,y,T){p=h.memoizedState,y=y(T,p),y=y==null?p:$({},p,y),h.memoizedState=y,h.lanes===0&&(h.updateQueue.baseState=y)}var _p={isMounted:function(h){return(h=h._reactInternals)?ne(h)===h:!1},enqueueSetState:function(h,p,y){h=h._reactInternals;var T=So(),L=Wc(h),G=wr(T,L);G.payload=p,y!=null&&(G.callback=y),p=Wr(h,G,L),p!==null&&(ml(p,h,L,T),ms(p,h,L))},enqueueReplaceState:function(h,p,y){h=h._reactInternals;var T=So(),L=Wc(h),G=wr(T,L);G.tag=1,G.payload=p,y!=null&&(G.callback=y),p=Wr(h,G,L),p!==null&&(ml(p,h,L,T),ms(p,h,L))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var y=So(),T=Wc(h),L=wr(y,T);L.tag=2,p!=null&&(L.callback=p),p=Wr(h,L,T),p!==null&&(ml(p,h,T,y),ms(p,h,T))}};function kv(h,p,y,T,L,G,Y){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(T,G,Y):p.prototype&&p.prototype.isPureReactComponent?!xu(y,T)||!xu(L,G):!0}function m(h,p,y){var T=!1,L=nl,G=p.contextType;return typeof G=="object"&&G!==null?G=vo(G):(L=ps(p)?rl:Yi.current,T=p.contextTypes,G=(T=T!=null)?Mu(h,L):nl),p=new p(y,G),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=_p,h.stateNode=p,p._reactInternals=h,T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=L,h.__reactInternalMemoizedMaskedChildContext=G),p}function _(h,p,y,T){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(y,T),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(y,T),p.state!==h&&_p.enqueueReplaceState(p,p.state,null)}function E(h,p,y,T){var L=h.stateNode;L.props=y,L.state=h.memoizedState,L.refs={},Nn(h);var G=p.contextType;typeof G=="object"&&G!==null?L.context=vo(G):(G=ps(p)?rl:Yi.current,L.context=Mu(h,G)),L.state=h.memoizedState,G=p.getDerivedStateFromProps,typeof G=="function"&&(vf(h,p,G,y),L.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(p=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),p!==L.state&&_p.enqueueReplaceState(L,L.state,null),ri(h,y,L,T),L.state=h.memoizedState),typeof L.componentDidMount=="function"&&(h.flags|=4194308)}function P(h,p){try{var y="",T=p;do y+=he(T),T=T.return;while(T);var L=y}catch(G){L=`
Error generating stack: `+G.message+`
`+G.stack}return{value:h,source:p,stack:L,digest:null}}function N(h,p,y){return{value:h,source:null,stack:y??null,digest:p??null}}function W(h,p){try{console.error(p.value)}catch(y){setTimeout(function(){throw y})}}var pe=typeof WeakMap=="function"?WeakMap:Map;function Pe(h,p,y){y=wr(-1,y),y.tag=3,y.payload={element:null};var T=p.value;return y.callback=function(){Wv||(Wv=!0,bw=T),W(h,p)},y}function ot(h,p,y){y=wr(-1,y),y.tag=3;var T=h.type.getDerivedStateFromError;if(typeof T=="function"){var L=p.value;y.payload=function(){return T(L)},y.callback=function(){W(h,p)}}var G=h.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(y.callback=function(){W(h,p),typeof T!="function"&&(Hc===null?Hc=new Set([this]):Hc.add(this));var Y=p.stack;this.componentDidCatch(p.value,{componentStack:Y!==null?Y:""})}),y}function It(h,p,y){var T=h.pingCache;if(T===null){T=h.pingCache=new pe;var L=new Set;T.set(p,L)}else L=T.get(p),L===void 0&&(L=new Set,T.set(p,L));L.has(y)||(L.add(y),h=A9.bind(null,h,p,y),p.then(h,h))}function Zt(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function bn(h,p,y,T,L){return h.mode&1?(h.flags|=65536,h.lanes=L,h):(h===p?h.flags|=65536:(h.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(p=wr(-1,1),p.tag=2,Wr(y,p,1))),y.lanes|=1),h)}var fn=R.ReactCurrentOwner,Un=!1;function Xt(h,p,y,T){p.child=h===null?af(p,null,y,T):Iu(p,h.child,y,T)}function es(h,p,y,T,L){y=y.render;var G=p.ref;return Hl(p,L),T=df(h,p,y,T,G,L),y=bg(),h!==null&&!Un?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~L,zu(h,p,L)):(Nr&&y&&xg(p),p.flags|=1,Xt(h,p,T,L),p.child)}function wo(h,p,y,T,L){if(h===null){var G=y.type;return typeof G=="function"&&!Lw(G)&&G.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(p.tag=15,p.type=G,Ve(h,p,G,T,L)):(h=Yv(y.type,null,T,p,p.mode,L),h.ref=p.ref,h.return=p,p.child=h)}if(G=h.child,!(h.lanes&L)){var Y=G.memoizedProps;if(y=y.compare,y=y!==null?y:xu,y(Y,T)&&h.ref===p.ref)return zu(h,p,L)}return p.flags|=1,h=qc(G,T),h.ref=p.ref,h.return=p,p.child=h}function Ve(h,p,y,T,L){if(h!==null){var G=h.memoizedProps;if(xu(G,T)&&h.ref===p.ref)if(Un=!1,p.pendingProps=T=G,(h.lanes&L)!==0)h.flags&131072&&(Un=!0);else return p.lanes=h.lanes,zu(h,p,L)}return Wt(h,p,y,T,L)}function Be(h,p,y){var T=p.pendingProps,L=T.children,G=h!==null?h.memoizedState:null;if(T.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mr(yp,ha),ha|=y;else{if(!(y&1073741824))return h=G!==null?G.baseLanes|y:y,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null,transitions:null},p.updateQueue=null,Mr(yp,ha),ha|=h,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=G!==null?G.baseLanes:y,Mr(yp,ha),ha|=T}else G!==null?(T=G.baseLanes|y,p.memoizedState=null):T=y,Mr(yp,ha),ha|=T;return Xt(h,p,L,y),p.child}function tt(h,p){var y=p.ref;(h===null&&y!==null||h!==null&&h.ref!==y)&&(p.flags|=512,p.flags|=2097152)}function Wt(h,p,y,T,L){var G=ps(y)?rl:Yi.current;return G=Mu(p,G),Hl(p,L),y=df(h,p,y,T,G,L),T=bg(),h!==null&&!Un?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~L,zu(h,p,L)):(Nr&&T&&xg(p),p.flags|=1,Xt(h,p,y,L),p.child)}function on(h,p,y,T,L){if(ps(y)){var G=!0;bu(p)}else G=!1;if(Hl(p,L),p.stateNode===null)Uv(h,p),m(p,y,T),E(p,y,T,L),T=!0;else if(h===null){var Y=p.stateNode,ve=p.memoizedProps;Y.props=ve;var Me=Y.context,Ke=y.contextType;typeof Ke=="object"&&Ke!==null?Ke=vo(Ke):(Ke=ps(y)?rl:Yi.current,Ke=Mu(p,Ke));var St=y.getDerivedStateFromProps,bt=typeof St=="function"||typeof Y.getSnapshotBeforeUpdate=="function";bt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ve!==T||Me!==Ke)&&_(p,Y,T,Ke),Ar=!1;var At=p.memoizedState;Y.state=At,ri(p,T,Y,L),Me=p.memoizedState,ve!==T||At!==Me||Is.current||Ar?(typeof St=="function"&&(vf(p,y,St,T),Me=p.memoizedState),(ve=Ar||kv(p,y,ve,T,At,Me,Ke))?(bt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(p.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=T,p.memoizedState=Me),Y.props=T,Y.state=Me,Y.context=Ke,T=ve):(typeof Y.componentDidMount=="function"&&(p.flags|=4194308),T=!1)}else{Y=p.stateNode,ci(h,p),ve=p.memoizedProps,Ke=p.type===p.elementType?ve:ko(p.type,ve),Y.props=Ke,bt=p.pendingProps,At=Y.context,Me=y.contextType,typeof Me=="object"&&Me!==null?Me=vo(Me):(Me=ps(y)?rl:Yi.current,Me=Mu(p,Me));var Jt=y.getDerivedStateFromProps;(St=typeof Jt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ve!==bt||At!==Me)&&_(p,Y,T,Me),Ar=!1,At=p.memoizedState,Y.state=At,ri(p,T,Y,L);var tn=p.memoizedState;ve!==bt||At!==tn||Is.current||Ar?(typeof Jt=="function"&&(vf(p,y,Jt,T),tn=p.memoizedState),(Ke=Ar||kv(p,y,Ke,T,At,tn,Me)||!1)?(St||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(T,tn,Me),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(T,tn,Me)),typeof Y.componentDidUpdate=="function"&&(p.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ve===h.memoizedProps&&At===h.memoizedState||(p.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ve===h.memoizedProps&&At===h.memoizedState||(p.flags|=1024),p.memoizedProps=T,p.memoizedState=tn),Y.props=T,Y.state=tn,Y.context=Me,T=Ke):(typeof Y.componentDidUpdate!="function"||ve===h.memoizedProps&&At===h.memoizedState||(p.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ve===h.memoizedProps&&At===h.memoizedState||(p.flags|=1024),T=!1)}return Bn(h,p,y,T,G,L)}function Bn(h,p,y,T,L,G){tt(h,p);var Y=(p.flags&128)!==0;if(!T&&!Y)return L&&vg(p,y,!1),zu(h,p,G);T=p.stateNode,fn.current=p;var ve=Y&&typeof y.getDerivedStateFromError!="function"?null:T.render();return p.flags|=1,h!==null&&Y?(p.child=Iu(p,h.child,null,G),p.child=Iu(p,null,ve,G)):Xt(h,p,ve,G),p.memoizedState=T.state,L&&vg(p,y,!0),p.child}function Cn(h){var p=h.stateNode;p.pendingContext?_g(h,p.pendingContext,p.pendingContext!==p.context):p.context&&_g(h,p.context,!1),hf(h,p.containerInfo)}function er(h,p,y,T,L){return Gl(),Fc(L),p.flags|=256,Xt(h,p,y,T),p.child}var wi={dehydrated:null,treeContext:null,retryLane:0};function Qn(h){return{baseLanes:h,cachePool:null,transitions:null}}function fl(h,p,y){var T=p.pendingProps,L=Ur.current,G=!1,Y=(p.flags&128)!==0,ve;if((ve=Y)||(ve=h!==null&&h.memoizedState===null?!1:(L&2)!==0),ve?(G=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(L|=1),Mr(Ur,L&1),h===null)return lp(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(p.mode&1?h.data==="$!"?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(Y=T.children,h=T.fallback,G?(T=p.mode,G=p.child,Y={mode:"hidden",children:Y},!(T&1)&&G!==null?(G.childLanes=0,G.pendingProps=Y):G=Qv(Y,T,0,null),h=Sf(h,T,y,null),G.return=p,h.return=p,G.sibling=h,p.child=G,p.child.memoizedState=Qn(y),p.memoizedState=wi,h):Fg(p,Y));if(L=h.memoizedState,L!==null&&(ve=L.dehydrated,ve!==null))return u9(h,p,Y,T,ve,L,y);if(G){G=T.fallback,Y=p.mode,L=h.child,ve=L.sibling;var Me={mode:"hidden",children:T.children};return!(Y&1)&&p.child!==L?(T=p.child,T.childLanes=0,T.pendingProps=Me,p.deletions=null):(T=qc(L,Me),T.subtreeFlags=L.subtreeFlags&14680064),ve!==null?G=qc(ve,G):(G=Sf(G,Y,y,null),G.flags|=2),G.return=p,T.return=p,T.sibling=G,p.child=T,T=G,G=p.child,Y=h.child.memoizedState,Y=Y===null?Qn(y):{baseLanes:Y.baseLanes|y,cachePool:null,transitions:Y.transitions},G.memoizedState=Y,G.childLanes=h.childLanes&~y,p.memoizedState=wi,T}return G=h.child,h=G.sibling,T=qc(G,{mode:"visible",children:T.children}),!(p.mode&1)&&(T.lanes=y),T.return=p,T.sibling=null,h!==null&&(y=p.deletions,y===null?(p.deletions=[h],p.flags|=16):y.push(h)),p.child=T,p.memoizedState=null,T}function Fg(h,p){return p=Qv({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function Nv(h,p,y,T){return T!==null&&Fc(T),Iu(p,h.child,null,y),h=Fg(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function u9(h,p,y,T,L,G,Y){if(y)return p.flags&256?(p.flags&=-257,T=N(Error(t(422))),Nv(h,p,Y,T)):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(G=T.fallback,L=p.mode,T=Qv({mode:"visible",children:T.children},L,0,null),G=Sf(G,L,Y,null),G.flags|=2,T.return=p,G.return=p,T.sibling=G,p.child=T,p.mode&1&&Iu(p,h.child,null,Y),p.child.memoizedState=Qn(Y),p.memoizedState=wi,G);if(!(p.mode&1))return Nv(h,p,Y,null);if(L.data==="$!"){if(T=L.nextSibling&&L.nextSibling.dataset,T)var ve=T.dgst;return T=ve,G=Error(t(419)),T=N(G,T,void 0),Nv(h,p,Y,T)}if(ve=(Y&h.childLanes)!==0,Un||ve){if(T=_s,T!==null){switch(Y&-Y){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}L=L&(T.suspendedLanes|Y)?0:L,L!==0&&L!==G.retryLane&&(G.retryLane=L,aa(h,L),ml(T,h,L,-1))}return Bw(),T=N(Error(t(421))),Nv(h,p,Y,T)}return L.data==="$?"?(p.flags|=128,p.child=h.child,p=w9.bind(null,h),L._reactRetry=p,null):(h=G.treeContext,Ds=el(L.nextSibling),Qi=p,Nr=!0,Oo=null,h!==null&&(Ps[Hi++]=Ft,Ps[Hi++]=Fo,Ps[Hi++]=Ru,Ft=h.id,Fo=h.overflow,Ru=p),p=Fg(p,T.children),p.flags|=4096,p)}function YR(h,p,y){h.lanes|=p;var T=h.alternate;T!==null&&(T.lanes|=p),uf(h.return,p,y)}function vw(h,p,y,T,L){var G=h.memoizedState;G===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:T,tail:y,tailMode:L}:(G.isBackwards=p,G.rendering=null,G.renderingStartTime=0,G.last=T,G.tail=y,G.tailMode=L)}function QR(h,p,y){var T=p.pendingProps,L=T.revealOrder,G=T.tail;if(Xt(h,p,T.children,y),T=Ur.current,T&2)T=T&1|2,p.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&YR(h,y,p);else if(h.tag===19)YR(h,y,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}T&=1}if(Mr(Ur,T),!(p.mode&1))p.memoizedState=null;else switch(L){case"forwards":for(y=p.child,L=null;y!==null;)h=y.alternate,h!==null&&la(h)===null&&(L=y),y=y.sibling;y=L,y===null?(L=p.child,p.child=null):(L=y.sibling,y.sibling=null),vw(p,!1,L,y,G);break;case"backwards":for(y=null,L=p.child,p.child=null;L!==null;){if(h=L.alternate,h!==null&&la(h)===null){p.child=L;break}h=L.sibling,L.sibling=y,y=L,L=h}vw(p,!0,y,null,G);break;case"together":vw(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Uv(h,p){!(p.mode&1)&&h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2)}function zu(h,p,y){if(h!==null&&(p.dependencies=h.dependencies),yf|=p.lanes,!(y&p.childLanes))return null;if(h!==null&&p.child!==h.child)throw Error(t(153));if(p.child!==null){for(h=p.child,y=qc(h,h.pendingProps),p.child=y,y.return=p;h.sibling!==null;)h=h.sibling,y=y.sibling=qc(h,h.pendingProps),y.return=p;y.sibling=null}return p.child}function c9(h,p,y){switch(p.tag){case 3:Cn(p),Gl();break;case 5:Ou(p);break;case 1:ps(p.type)&&bu(p);break;case 4:hf(p,p.stateNode.containerInfo);break;case 10:var T=p.type._context,L=p.memoizedProps.value;Mr(Pu,T._currentValue),T._currentValue=L;break;case 13:if(T=p.memoizedState,T!==null)return T.dehydrated!==null?(Mr(Ur,Ur.current&1),p.flags|=128,null):y&p.child.childLanes?fl(h,p,y):(Mr(Ur,Ur.current&1),h=zu(h,p,y),h!==null?h.sibling:null);Mr(Ur,Ur.current&1);break;case 19:if(T=(y&p.childLanes)!==0,h.flags&128){if(T)return QR(h,p,y);p.flags|=128}if(L=p.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),Mr(Ur,Ur.current),T)break;return null;case 22:case 23:return p.lanes=0,Be(h,p,y)}return zu(h,p,y)}var ZR,yw,$R,eI;ZR=function(h,p){for(var y=p.child;y!==null;){if(y.tag===5||y.tag===6)h.appendChild(y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},yw=function(){},$R=function(h,p,y,T){var L=h.memoizedProps;if(L!==T){h=p.stateNode,Ai(yo.current);var G=null;switch(y){case"input":L=se(h,L),T=se(h,T),G=[];break;case"select":L=$({},L,{value:void 0}),T=$({},T,{value:void 0}),G=[];break;case"textarea":L=J(h,L),T=J(h,T),G=[];break;default:typeof L.onClick!="function"&&typeof T.onClick=="function"&&(h.onclick=$h)}kt(y,T);var Y;y=null;for(Ke in L)if(!T.hasOwnProperty(Ke)&&L.hasOwnProperty(Ke)&&L[Ke]!=null)if(Ke==="style"){var ve=L[Ke];for(Y in ve)ve.hasOwnProperty(Y)&&(y||(y={}),y[Y]="")}else Ke!=="dangerouslySetInnerHTML"&&Ke!=="children"&&Ke!=="suppressContentEditableWarning"&&Ke!=="suppressHydrationWarning"&&Ke!=="autoFocus"&&(r.hasOwnProperty(Ke)?G||(G=[]):(G=G||[]).push(Ke,null));for(Ke in T){var Me=T[Ke];if(ve=L!=null?L[Ke]:void 0,T.hasOwnProperty(Ke)&&Me!==ve&&(Me!=null||ve!=null))if(Ke==="style")if(ve){for(Y in ve)!ve.hasOwnProperty(Y)||Me&&Me.hasOwnProperty(Y)||(y||(y={}),y[Y]="");for(Y in Me)Me.hasOwnProperty(Y)&&ve[Y]!==Me[Y]&&(y||(y={}),y[Y]=Me[Y])}else y||(G||(G=[]),G.push(Ke,y)),y=Me;else Ke==="dangerouslySetInnerHTML"?(Me=Me?Me.__html:void 0,ve=ve?ve.__html:void 0,Me!=null&&ve!==Me&&(G=G||[]).push(Ke,Me)):Ke==="children"?typeof Me!="string"&&typeof Me!="number"||(G=G||[]).push(Ke,""+Me):Ke!=="suppressContentEditableWarning"&&Ke!=="suppressHydrationWarning"&&(r.hasOwnProperty(Ke)?(Me!=null&&Ke==="onScroll"&&Pr("scroll",h),G||ve===Me||(G=[])):(G=G||[]).push(Ke,Me))}y&&(G=G||[]).push("style",y);var Ke=G;(p.updateQueue=Ke)&&(p.flags|=4)}},eI=function(h,p,y,T){y!==T&&(p.flags|=4)};function Og(h,p){if(!Nr)switch(h.tailMode){case"hidden":p=h.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?h.tail=null:y.sibling=null;break;case"collapsed":y=h.tail;for(var T=null;y!==null;)y.alternate!==null&&(T=y),y=y.sibling;T===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:T.sibling=null}}function Ys(h){var p=h.alternate!==null&&h.alternate.child===h.child,y=0,T=0;if(p)for(var L=h.child;L!==null;)y|=L.lanes|L.childLanes,T|=L.subtreeFlags&14680064,T|=L.flags&14680064,L.return=h,L=L.sibling;else for(L=h.child;L!==null;)y|=L.lanes|L.childLanes,T|=L.subtreeFlags,T|=L.flags,L.return=h,L=L.sibling;return h.subtreeFlags|=T,h.childLanes=y,p}function h9(h,p,y){var T=p.pendingProps;switch(sl(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(p),null;case 1:return ps(p.type)&&ef(),Ys(p),null;case 3:return T=p.stateNode,Vl(),Dr(Is),Dr(Yi),Ca(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(h===null||h.child===null)&&(Lc(p)?p.flags|=4:h===null||h.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,Oo!==null&&(Iw(Oo),Oo=null))),yw(h,p),Ys(p),null;case 5:Nc(p);var L=Ai(ll.current);if(y=p.type,h!==null&&p.stateNode!=null)$R(h,p,y,T,L),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!T){if(p.stateNode===null)throw Error(t(166));return Ys(p),null}if(h=Ai(yo.current),Lc(p)){T=p.stateNode,y=p.type;var G=p.memoizedProps;switch(T[Ri]=p,T[Bc]=G,h=(p.mode&1)!==0,y){case"dialog":Pr("cancel",T),Pr("close",T);break;case"iframe":case"object":case"embed":Pr("load",T);break;case"video":case"audio":for(L=0;L<Ul.length;L++)Pr(Ul[L],T);break;case"source":Pr("error",T);break;case"img":case"image":case"link":Pr("error",T),Pr("load",T);break;case"details":Pr("toggle",T);break;case"input":ht(T,G),Pr("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!G.multiple},Pr("invalid",T);break;case"textarea":ye(T,G),Pr("invalid",T)}kt(y,G),L=null;for(var Y in G)if(G.hasOwnProperty(Y)){var ve=G[Y];Y==="children"?typeof ve=="string"?T.textContent!==ve&&(G.suppressHydrationWarning!==!0&&Zh(T.textContent,ve,h),L=["children",ve]):typeof ve=="number"&&T.textContent!==""+ve&&(G.suppressHydrationWarning!==!0&&Zh(T.textContent,ve,h),L=["children",""+ve]):r.hasOwnProperty(Y)&&ve!=null&&Y==="onScroll"&&Pr("scroll",T)}switch(y){case"input":Ne(T),Fe(T,G,!0);break;case"textarea":Ne(T),De(T);break;case"select":case"option":break;default:typeof G.onClick=="function"&&(T.onclick=$h)}T=L,p.updateQueue=T,T!==null&&(p.flags|=4)}else{Y=L.nodeType===9?L:L.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=ke(y)),h==="http://www.w3.org/1999/xhtml"?y==="script"?(h=Y.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof T.is=="string"?h=Y.createElement(y,{is:T.is}):(h=Y.createElement(y),y==="select"&&(Y=h,T.multiple?Y.multiple=!0:T.size&&(Y.size=T.size))):h=Y.createElementNS(h,y),h[Ri]=p,h[Bc]=T,ZR(h,p,!1,!1),p.stateNode=h;e:{switch(Y=Bt(y,T),y){case"dialog":Pr("cancel",h),Pr("close",h),L=T;break;case"iframe":case"object":case"embed":Pr("load",h),L=T;break;case"video":case"audio":for(L=0;L<Ul.length;L++)Pr(Ul[L],h);L=T;break;case"source":Pr("error",h),L=T;break;case"img":case"image":case"link":Pr("error",h),Pr("load",h),L=T;break;case"details":Pr("toggle",h),L=T;break;case"input":ht(h,T),L=se(h,T),Pr("invalid",h);break;case"option":L=T;break;case"select":h._wrapperState={wasMultiple:!!T.multiple},L=$({},T,{value:void 0}),Pr("invalid",h);break;case"textarea":ye(h,T),L=J(h,T),Pr("invalid",h);break;default:L=T}kt(y,L),ve=L;for(G in ve)if(ve.hasOwnProperty(G)){var Me=ve[G];G==="style"?gt(h,Me):G==="dangerouslySetInnerHTML"?(Me=Me?Me.__html:void 0,Me!=null&&lt(h,Me)):G==="children"?typeof Me=="string"?(y!=="textarea"||Me!=="")&&Ot(h,Me):typeof Me=="number"&&Ot(h,""+Me):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(r.hasOwnProperty(G)?Me!=null&&G==="onScroll"&&Pr("scroll",h):Me!=null&&b(h,G,Me,Y))}switch(y){case"input":Ne(h),Fe(h,T,!1);break;case"textarea":Ne(h),De(h);break;case"option":T.value!=null&&h.setAttribute("value",""+be(T.value));break;case"select":h.multiple=!!T.multiple,G=T.value,G!=null?K(h,!!T.multiple,G,!1):T.defaultValue!=null&&K(h,!!T.multiple,T.defaultValue,!0);break;default:typeof L.onClick=="function"&&(h.onclick=$h)}switch(y){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Ys(p),null;case 6:if(h&&p.stateNode!=null)eI(h,p,h.memoizedProps,T);else{if(typeof T!="string"&&p.stateNode===null)throw Error(t(166));if(y=Ai(ll.current),Ai(yo.current),Lc(p)){if(T=p.stateNode,y=p.memoizedProps,T[Ri]=p,(G=T.nodeValue!==y)&&(h=Qi,h!==null))switch(h.tag){case 3:Zh(T.nodeValue,y,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Zh(T.nodeValue,y,(h.mode&1)!==0)}G&&(p.flags|=4)}else T=(y.nodeType===9?y:y.ownerDocument).createTextNode(T),T[Ri]=p,p.stateNode=T}return Ys(p),null;case 13:if(Dr(Ur),T=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(Nr&&Ds!==null&&p.mode&1&&!(p.flags&128))Sg(),Gl(),p.flags|=98560,G=!1;else if(G=Lc(p),T!==null&&T.dehydrated!==null){if(h===null){if(!G)throw Error(t(318));if(G=p.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(t(317));G[Ri]=p}else Gl(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;Ys(p),G=!1}else Oo!==null&&(Iw(Oo),Oo=null),G=!0;if(!G)return p.flags&65536?p:null}return p.flags&128?(p.lanes=y,p):(T=T!==null,T!==(h!==null&&h.memoizedState!==null)&&T&&(p.child.flags|=8192,p.mode&1&&(h===null||Ur.current&1?ts===0&&(ts=3):Bw())),p.updateQueue!==null&&(p.flags|=4),Ys(p),null);case 4:return Vl(),yw(h,p),h===null&&Ic(p.stateNode.containerInfo),Ys(p),null;case 10:return lf(p.type._context),Ys(p),null;case 17:return ps(p.type)&&ef(),Ys(p),null;case 19:if(Dr(Ur),G=p.memoizedState,G===null)return Ys(p),null;if(T=(p.flags&128)!==0,Y=G.rendering,Y===null)if(T)Og(G,!1);else{if(ts!==0||h!==null&&h.flags&128)for(h=p.child;h!==null;){if(Y=la(h),Y!==null){for(p.flags|=128,Og(G,!1),T=Y.updateQueue,T!==null&&(p.updateQueue=T,p.flags|=4),p.subtreeFlags=0,T=y,y=p.child;y!==null;)G=y,h=T,G.flags&=14680066,Y=G.alternate,Y===null?(G.childLanes=0,G.lanes=h,G.child=null,G.subtreeFlags=0,G.memoizedProps=null,G.memoizedState=null,G.updateQueue=null,G.dependencies=null,G.stateNode=null):(G.childLanes=Y.childLanes,G.lanes=Y.lanes,G.child=Y.child,G.subtreeFlags=0,G.deletions=null,G.memoizedProps=Y.memoizedProps,G.memoizedState=Y.memoizedState,G.updateQueue=Y.updateQueue,G.type=Y.type,h=Y.dependencies,G.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),y=y.sibling;return Mr(Ur,Ur.current&1|2),p.child}h=h.sibling}G.tail!==null&&te()>xp&&(p.flags|=128,T=!0,Og(G,!1),p.lanes=4194304)}else{if(!T)if(h=la(Y),h!==null){if(p.flags|=128,T=!0,y=h.updateQueue,y!==null&&(p.updateQueue=y,p.flags|=4),Og(G,!0),G.tail===null&&G.tailMode==="hidden"&&!Y.alternate&&!Nr)return Ys(p),null}else 2*te()-G.renderingStartTime>xp&&y!==1073741824&&(p.flags|=128,T=!0,Og(G,!1),p.lanes=4194304);G.isBackwards?(Y.sibling=p.child,p.child=Y):(y=G.last,y!==null?y.sibling=Y:p.child=Y,G.last=Y)}return G.tail!==null?(p=G.tail,G.rendering=p,G.tail=p.sibling,G.renderingStartTime=te(),p.sibling=null,y=Ur.current,Mr(Ur,T?y&1|2:y&1),p):(Ys(p),null);case 22:case 23:return Dw(),T=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==T&&(p.flags|=8192),T&&p.mode&1?ha&1073741824&&(Ys(p),p.subtreeFlags&6&&(p.flags|=8192)):Ys(p),null;case 24:return null;case 25:return null}throw Error(t(156,p.tag))}function f9(h,p){switch(sl(p),p.tag){case 1:return ps(p.type)&&ef(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return Vl(),Dr(Is),Dr(Yi),Ca(),h=p.flags,h&65536&&!(h&128)?(p.flags=h&-65537|128,p):null;case 5:return Nc(p),null;case 13:if(Dr(Ur),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(t(340));Gl()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return Dr(Ur),null;case 4:return Vl(),null;case 10:return lf(p.type._context),null;case 22:case 23:return Dw(),null;case 24:return null;default:return null}}var zv=!1,Qs=!1,d9=typeof WeakSet=="function"?WeakSet:Set,en=null;function vp(h,p){var y=h.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(T){Si(h,p,T)}else y.current=null}function xw(h,p,y){try{y()}catch(T){Si(h,p,T)}}var tI=!1;function p9(h,p){if(Dc=$r,h=Yr(),Ni(h)){if("selectionStart"in h)var y={start:h.selectionStart,end:h.selectionEnd};else e:{y=(y=h.ownerDocument)&&y.defaultView||window;var T=y.getSelection&&y.getSelection();if(T&&T.rangeCount!==0){y=T.anchorNode;var L=T.anchorOffset,G=T.focusNode;T=T.focusOffset;try{y.nodeType,G.nodeType}catch{y=null;break e}var Y=0,ve=-1,Me=-1,Ke=0,St=0,bt=h,At=null;t:for(;;){for(var Jt;bt!==y||L!==0&&bt.nodeType!==3||(ve=Y+L),bt!==G||T!==0&&bt.nodeType!==3||(Me=Y+T),bt.nodeType===3&&(Y+=bt.nodeValue.length),(Jt=bt.firstChild)!==null;)At=bt,bt=Jt;for(;;){if(bt===h)break t;if(At===y&&++Ke===L&&(ve=Y),At===G&&++St===T&&(Me=Y),(Jt=bt.nextSibling)!==null)break;bt=At,At=bt.parentNode}bt=Jt}y=ve===-1||Me===-1?null:{start:ve,end:Me}}else y=null}y=y||{start:0,end:0}}else y=null;for(hg={focusedElem:h,selectionRange:y},$r=!1,en=p;en!==null;)if(p=en,h=p.child,(p.subtreeFlags&1028)!==0&&h!==null)h.return=p,en=h;else for(;en!==null;){p=en;try{var tn=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(tn!==null){var rn=tn.memoizedProps,Ii=tn.memoizedState,ze=p.stateNode,Ie=ze.getSnapshotBeforeUpdate(p.elementType===p.type?rn:ko(p.type,rn),Ii);ze.__reactInternalSnapshotBeforeUpdate=Ie}break;case 3:var He=p.stateNode.containerInfo;He.nodeType===1?He.textContent="":He.nodeType===9&&He.documentElement&&He.removeChild(He.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Pt){Si(p,p.return,Pt)}if(h=p.sibling,h!==null){h.return=p.return,en=h;break}en=p.return}return tn=tI,tI=!1,tn}function kg(h,p,y){var T=p.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var L=T=T.next;do{if((L.tag&h)===h){var G=L.destroy;L.destroy=void 0,G!==void 0&&xw(p,y,G)}L=L.next}while(L!==T)}}function Gv(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&h)===h){var T=y.create;y.destroy=T()}y=y.next}while(y!==p)}}function Aw(h){var p=h.ref;if(p!==null){var y=h.stateNode;switch(h.tag){case 5:h=y;break;default:h=y}typeof p=="function"?p(h):p.current=h}}function nI(h){var p=h.alternate;p!==null&&(h.alternate=null,nI(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&(delete p[Ri],delete p[Bc],delete p[Tu],delete p[tp],delete p[np])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function rI(h){return h.tag===5||h.tag===3||h.tag===4}function iI(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||rI(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function ww(h,p,y){var T=h.tag;if(T===5||T===6)h=h.stateNode,p?y.nodeType===8?y.parentNode.insertBefore(h,p):y.insertBefore(h,p):(y.nodeType===8?(p=y.parentNode,p.insertBefore(h,y)):(p=y,p.appendChild(h)),y=y._reactRootContainer,y!=null||p.onclick!==null||(p.onclick=$h));else if(T!==4&&(h=h.child,h!==null))for(ww(h,p,y),h=h.sibling;h!==null;)ww(h,p,y),h=h.sibling}function Sw(h,p,y){var T=h.tag;if(T===5||T===6)h=h.stateNode,p?y.insertBefore(h,p):y.appendChild(h);else if(T!==4&&(h=h.child,h!==null))for(Sw(h,p,y),h=h.sibling;h!==null;)Sw(h,p,y),h=h.sibling}var Ls=null,dl=!1;function Gc(h,p,y){for(y=y.child;y!==null;)sI(h,p,y),y=y.sibling}function sI(h,p,y){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(wt,y)}catch{}switch(y.tag){case 5:Qs||vp(y,p);case 6:var T=Ls,L=dl;Ls=null,Gc(h,p,y),Ls=T,dl=L,Ls!==null&&(dl?(h=Ls,y=y.stateNode,h.nodeType===8?h.parentNode.removeChild(y):h.removeChild(y)):Ls.removeChild(y.stateNode));break;case 18:Ls!==null&&(dl?(h=Ls,y=y.stateNode,h.nodeType===8?ep(h.parentNode,y):h.nodeType===1&&ep(h,y),Ws(h)):ep(Ls,y.stateNode));break;case 4:T=Ls,L=dl,Ls=y.stateNode.containerInfo,dl=!0,Gc(h,p,y),Ls=T,dl=L;break;case 0:case 11:case 14:case 15:if(!Qs&&(T=y.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){L=T=T.next;do{var G=L,Y=G.destroy;G=G.tag,Y!==void 0&&(G&2||G&4)&&xw(y,p,Y),L=L.next}while(L!==T)}Gc(h,p,y);break;case 1:if(!Qs&&(vp(y,p),T=y.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=y.memoizedProps,T.state=y.memoizedState,T.componentWillUnmount()}catch(ve){Si(y,p,ve)}Gc(h,p,y);break;case 21:Gc(h,p,y);break;case 22:y.mode&1?(Qs=(T=Qs)||y.memoizedState!==null,Gc(h,p,y),Qs=T):Gc(h,p,y);break;default:Gc(h,p,y)}}function oI(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var y=h.stateNode;y===null&&(y=h.stateNode=new d9),p.forEach(function(T){var L=S9.bind(null,h,T);y.has(T)||(y.add(T),T.then(L,L))})}}function pl(h,p){var y=p.deletions;if(y!==null)for(var T=0;T<y.length;T++){var L=y[T];try{var G=h,Y=p,ve=Y;e:for(;ve!==null;){switch(ve.tag){case 5:Ls=ve.stateNode,dl=!1;break e;case 3:Ls=ve.stateNode.containerInfo,dl=!0;break e;case 4:Ls=ve.stateNode.containerInfo,dl=!0;break e}ve=ve.return}if(Ls===null)throw Error(t(160));sI(G,Y,L),Ls=null,dl=!1;var Me=L.alternate;Me!==null&&(Me.return=null),L.return=null}catch(Ke){Si(L,p,Ke)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)aI(p,h),p=p.sibling}function aI(h,p){var y=h.alternate,T=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(pl(p,h),jl(h),T&4){try{kg(3,h,h.return),Gv(3,h)}catch(rn){Si(h,h.return,rn)}try{kg(5,h,h.return)}catch(rn){Si(h,h.return,rn)}}break;case 1:pl(p,h),jl(h),T&512&&y!==null&&vp(y,y.return);break;case 5:if(pl(p,h),jl(h),T&512&&y!==null&&vp(y,y.return),h.flags&32){var L=h.stateNode;try{Ot(L,"")}catch(rn){Si(h,h.return,rn)}}if(T&4&&(L=h.stateNode,L!=null)){var G=h.memoizedProps,Y=y!==null?y.memoizedProps:G,ve=h.type,Me=h.updateQueue;if(h.updateQueue=null,Me!==null)try{ve==="input"&&G.type==="radio"&&G.name!=null&&We(L,G),Bt(ve,Y);var Ke=Bt(ve,G);for(Y=0;Y<Me.length;Y+=2){var St=Me[Y],bt=Me[Y+1];St==="style"?gt(L,bt):St==="dangerouslySetInnerHTML"?lt(L,bt):St==="children"?Ot(L,bt):b(L,St,bt,Ke)}switch(ve){case"input":ut(L,G);break;case"textarea":Re(L,G);break;case"select":var At=L._wrapperState.wasMultiple;L._wrapperState.wasMultiple=!!G.multiple;var Jt=G.value;Jt!=null?K(L,!!G.multiple,Jt,!1):At!==!!G.multiple&&(G.defaultValue!=null?K(L,!!G.multiple,G.defaultValue,!0):K(L,!!G.multiple,G.multiple?[]:"",!1))}L[Bc]=G}catch(rn){Si(h,h.return,rn)}}break;case 6:if(pl(p,h),jl(h),T&4){if(h.stateNode===null)throw Error(t(162));L=h.stateNode,G=h.memoizedProps;try{L.nodeValue=G}catch(rn){Si(h,h.return,rn)}}break;case 3:if(pl(p,h),jl(h),T&4&&y!==null&&y.memoizedState.isDehydrated)try{Ws(p.containerInfo)}catch(rn){Si(h,h.return,rn)}break;case 4:pl(p,h),jl(h);break;case 13:pl(p,h),jl(h),L=h.child,L.flags&8192&&(G=L.memoizedState!==null,L.stateNode.isHidden=G,!G||L.alternate!==null&&L.alternate.memoizedState!==null||(Mw=te())),T&4&&oI(h);break;case 22:if(St=y!==null&&y.memoizedState!==null,h.mode&1?(Qs=(Ke=Qs)||St,pl(p,h),Qs=Ke):pl(p,h),jl(h),T&8192){if(Ke=h.memoizedState!==null,(h.stateNode.isHidden=Ke)&&!St&&h.mode&1)for(en=h,St=h.child;St!==null;){for(bt=en=St;en!==null;){switch(At=en,Jt=At.child,At.tag){case 0:case 11:case 14:case 15:kg(4,At,At.return);break;case 1:vp(At,At.return);var tn=At.stateNode;if(typeof tn.componentWillUnmount=="function"){T=At,y=At.return;try{p=T,tn.props=p.memoizedProps,tn.state=p.memoizedState,tn.componentWillUnmount()}catch(rn){Si(T,y,rn)}}break;case 5:vp(At,At.return);break;case 22:if(At.memoizedState!==null){cI(bt);continue}}Jt!==null?(Jt.return=At,en=Jt):cI(bt)}St=St.sibling}e:for(St=null,bt=h;;){if(bt.tag===5){if(St===null){St=bt;try{L=bt.stateNode,Ke?(G=L.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none"):(ve=bt.stateNode,Me=bt.memoizedProps.style,Y=Me!=null&&Me.hasOwnProperty("display")?Me.display:null,ve.style.display=yt("display",Y))}catch(rn){Si(h,h.return,rn)}}}else if(bt.tag===6){if(St===null)try{bt.stateNode.nodeValue=Ke?"":bt.memoizedProps}catch(rn){Si(h,h.return,rn)}}else if((bt.tag!==22&&bt.tag!==23||bt.memoizedState===null||bt===h)&&bt.child!==null){bt.child.return=bt,bt=bt.child;continue}if(bt===h)break e;for(;bt.sibling===null;){if(bt.return===null||bt.return===h)break e;St===bt&&(St=null),bt=bt.return}St===bt&&(St=null),bt.sibling.return=bt.return,bt=bt.sibling}}break;case 19:pl(p,h),jl(h),T&4&&oI(h);break;case 21:break;default:pl(p,h),jl(h)}}function jl(h){var p=h.flags;if(p&2){try{e:{for(var y=h.return;y!==null;){if(rI(y)){var T=y;break e}y=y.return}throw Error(t(160))}switch(T.tag){case 5:var L=T.stateNode;T.flags&32&&(Ot(L,""),T.flags&=-33);var G=iI(h);Sw(h,G,L);break;case 3:case 4:var Y=T.stateNode.containerInfo,ve=iI(h);ww(h,ve,Y);break;default:throw Error(t(161))}}catch(Me){Si(h,h.return,Me)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function m9(h,p,y){en=h,lI(h)}function lI(h,p,y){for(var T=(h.mode&1)!==0;en!==null;){var L=en,G=L.child;if(L.tag===22&&T){var Y=L.memoizedState!==null||zv;if(!Y){var ve=L.alternate,Me=ve!==null&&ve.memoizedState!==null||Qs;ve=zv;var Ke=Qs;if(zv=Y,(Qs=Me)&&!Ke)for(en=L;en!==null;)Y=en,Me=Y.child,Y.tag===22&&Y.memoizedState!==null?hI(L):Me!==null?(Me.return=Y,en=Me):hI(L);for(;G!==null;)en=G,lI(G),G=G.sibling;en=L,zv=ve,Qs=Ke}uI(h)}else L.subtreeFlags&8772&&G!==null?(G.return=L,en=G):uI(h)}}function uI(h){for(;en!==null;){var p=en;if(p.flags&8772){var y=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:Qs||Gv(5,p);break;case 1:var T=p.stateNode;if(p.flags&4&&!Qs)if(y===null)T.componentDidMount();else{var L=p.elementType===p.type?y.memoizedProps:ko(p.type,y.memoizedProps);T.componentDidUpdate(L,y.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var G=p.updateQueue;G!==null&&kc(p,G,T);break;case 3:var Y=p.updateQueue;if(Y!==null){if(y=null,p.child!==null)switch(p.child.tag){case 5:y=p.child.stateNode;break;case 1:y=p.child.stateNode}kc(p,Y,y)}break;case 5:var ve=p.stateNode;if(y===null&&p.flags&4){y=ve;var Me=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Me.autoFocus&&y.focus();break;case"img":Me.src&&(y.src=Me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var Ke=p.alternate;if(Ke!==null){var St=Ke.memoizedState;if(St!==null){var bt=St.dehydrated;bt!==null&&Ws(bt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qs||p.flags&512&&Aw(p)}catch(At){Si(p,p.return,At)}}if(p===h){en=null;break}if(y=p.sibling,y!==null){y.return=p.return,en=y;break}en=p.return}}function cI(h){for(;en!==null;){var p=en;if(p===h){en=null;break}var y=p.sibling;if(y!==null){y.return=p.return,en=y;break}en=p.return}}function hI(h){for(;en!==null;){var p=en;try{switch(p.tag){case 0:case 11:case 15:var y=p.return;try{Gv(4,p)}catch(Me){Si(p,y,Me)}break;case 1:var T=p.stateNode;if(typeof T.componentDidMount=="function"){var L=p.return;try{T.componentDidMount()}catch(Me){Si(p,L,Me)}}var G=p.return;try{Aw(p)}catch(Me){Si(p,G,Me)}break;case 5:var Y=p.return;try{Aw(p)}catch(Me){Si(p,Y,Me)}}}catch(Me){Si(p,p.return,Me)}if(p===h){en=null;break}var ve=p.sibling;if(ve!==null){ve.return=p.return,en=ve;break}en=p.return}}var g9=Math.ceil,Hv=R.ReactCurrentDispatcher,Ew=R.ReactCurrentOwner,Ia=R.ReactCurrentBatchConfig,dr=0,_s=null,Vi=null,Fs=0,ha=0,yp=ni(0),ts=0,Ng=null,yf=0,Vv=0,Tw=0,Ug=null,No=null,Mw=0,xp=1/0,Gu=null,Wv=!1,bw=null,Hc=null,jv=!1,Vc=null,qv=0,zg=0,Cw=null,Xv=-1,Jv=0;function So(){return dr&6?te():Xv!==-1?Xv:Xv=te()}function Wc(h){return h.mode&1?dr&2&&Fs!==0?Fs&-Fs:gw.transition!==null?(Jv===0&&(Jv=En()),Jv):(h=dn,h!==0||(h=window.event,h=h===void 0?16:$o(h.type)),h):1}function ml(h,p,y,T){if(50<zg)throw zg=0,Cw=null,Error(t(185));Mn(h,y,T),(!(dr&2)||h!==_s)&&(h===_s&&(!(dr&2)&&(Vv|=y),ts===4&&jc(h,Fs)),Uo(h,T),y===1&&dr===0&&!(p.mode&1)&&(xp=te()+500,nf&&Ma()))}function Uo(h,p){var y=h.callbackNode;wn(h,p);var T=An(h,h===_s?Fs:0);if(T===0)y!==null&&de(y),h.callbackNode=null,h.callbackPriority=0;else if(p=T&-T,h.callbackPriority!==p){if(y!=null&&de(y),p===1)h.tag===0?bv(dI.bind(null,h)):rf(dI.bind(null,h)),mw(function(){!(dr&6)&&Ma()}),y=null;else{switch(us(T)){case 1:y=$e;break;case 4:y=et;break;case 16:y=ct;break;case 536870912:y=Dt;break;default:y=ct}y=AI(y,fI.bind(null,h))}h.callbackPriority=p,h.callbackNode=y}}function fI(h,p){if(Xv=-1,Jv=0,dr&6)throw Error(t(327));var y=h.callbackNode;if(Ap()&&h.callbackNode!==y)return null;var T=An(h,h===_s?Fs:0);if(T===0)return null;if(T&30||T&h.expiredLanes||p)p=Kv(h,T);else{p=T;var L=dr;dr|=2;var G=mI();(_s!==h||Fs!==p)&&(Gu=null,xp=te()+500,Af(h,p));do try{y9();break}catch(ve){pI(h,ve)}while(!0);Bu(),Hv.current=G,dr=L,Vi!==null?p=0:(_s=null,Fs=0,p=ts)}if(p!==0){if(p===2&&(L=Ut(h),L!==0&&(T=L,p=Rw(h,L))),p===1)throw y=Ng,Af(h,0),jc(h,T),Uo(h,te()),y;if(p===6)jc(h,T);else{if(L=h.current.alternate,!(T&30)&&!_9(L)&&(p=Kv(h,T),p===2&&(G=Ut(h),G!==0&&(T=G,p=Rw(h,G))),p===1))throw y=Ng,Af(h,0),jc(h,T),Uo(h,te()),y;switch(h.finishedWork=L,h.finishedLanes=T,p){case 0:case 1:throw Error(t(345));case 2:wf(h,No,Gu);break;case 3:if(jc(h,T),(T&130023424)===T&&(p=Mw+500-te(),10<p)){if(An(h,0)!==0)break;if(L=h.suspendedLanes,(L&T)!==T){So(),h.pingedLanes|=h.suspendedLanes&L;break}h.timeoutHandle=dg(wf.bind(null,h,No,Gu),p);break}wf(h,No,Gu);break;case 4:if(jc(h,T),(T&4194240)===T)break;for(p=h.eventTimes,L=-1;0<T;){var Y=31-Vt(T);G=1<<Y,Y=p[Y],Y>L&&(L=Y),T&=~G}if(T=L,T=te()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*g9(T/1960))-T,10<T){h.timeoutHandle=dg(wf.bind(null,h,No,Gu),T);break}wf(h,No,Gu);break;case 5:wf(h,No,Gu);break;default:throw Error(t(329))}}}return Uo(h,te()),h.callbackNode===y?fI.bind(null,h):null}function Rw(h,p){var y=Ug;return h.current.memoizedState.isDehydrated&&(Af(h,p).flags|=256),h=Kv(h,p),h!==2&&(p=No,No=y,p!==null&&Iw(p)),h}function Iw(h){No===null?No=h:No.push.apply(No,h)}function _9(h){for(var p=h;;){if(p.flags&16384){var y=p.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var T=0;T<y.length;T++){var L=y[T],G=L.getSnapshot;L=L.value;try{if(!mo(G(),L))return!1}catch{return!1}}}if(y=p.child,p.subtreeFlags&16384&&y!==null)y.return=p,p=y;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function jc(h,p){for(p&=~Tw,p&=~Vv,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var y=31-Vt(p),T=1<<y;h[y]=-1,p&=~T}}function dI(h){if(dr&6)throw Error(t(327));Ap();var p=An(h,0);if(!(p&1))return Uo(h,te()),null;var y=Kv(h,p);if(h.tag!==0&&y===2){var T=Ut(h);T!==0&&(p=T,y=Rw(h,T))}if(y===1)throw y=Ng,Af(h,0),jc(h,p),Uo(h,te()),y;if(y===6)throw Error(t(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,wf(h,No,Gu),Uo(h,te()),null}function Pw(h,p){var y=dr;dr|=1;try{return h(p)}finally{dr=y,dr===0&&(xp=te()+500,nf&&Ma())}}function xf(h){Vc!==null&&Vc.tag===0&&!(dr&6)&&Ap();var p=dr;dr|=1;var y=Ia.transition,T=dn;try{if(Ia.transition=null,dn=1,h)return h()}finally{dn=T,Ia.transition=y,dr=p,!(dr&6)&&Ma()}}function Dw(){ha=yp.current,Dr(yp)}function Af(h,p){h.finishedWork=null,h.finishedLanes=0;var y=h.timeoutHandle;if(y!==-1&&(h.timeoutHandle=-1,pg(y)),Vi!==null)for(y=Vi.return;y!==null;){var T=y;switch(sl(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&ef();break;case 3:Vl(),Dr(Is),Dr(Yi),Ca();break;case 5:Nc(T);break;case 4:Vl();break;case 13:Dr(Ur);break;case 19:Dr(Ur);break;case 10:lf(T.type._context);break;case 22:case 23:Dw()}y=y.return}if(_s=h,Vi=h=qc(h.current,null),Fs=ha=p,ts=0,Ng=null,Tw=Vv=yf=0,No=Ug=null,al!==null){for(p=0;p<al.length;p++)if(y=al[p],T=y.interleaved,T!==null){y.interleaved=null;var L=T.next,G=y.pending;if(G!==null){var Y=G.next;G.next=L,T.next=Y}y.pending=T}al=null}return h}function pI(h,p){do{var y=Vi;try{if(Bu(),ku.current=gp,ua){for(var T=Br.memoizedState;T!==null;){var L=T.queue;L!==null&&(L.pending=null),T=T.next}ua=!1}if(ul=0,ar=ii=Br=null,gs=!1,Wl=0,Ew.current=null,y===null||y.return===null){ts=1,Ng=p,Vi=null;break}e:{var G=h,Y=y.return,ve=y,Me=p;if(p=Fs,ve.flags|=32768,Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var Ke=Me,St=ve,bt=St.tag;if(!(St.mode&1)&&(bt===0||bt===11||bt===15)){var At=St.alternate;At?(St.updateQueue=At.updateQueue,St.memoizedState=At.memoizedState,St.lanes=At.lanes):(St.updateQueue=null,St.memoizedState=null)}var Jt=Zt(Y);if(Jt!==null){Jt.flags&=-257,bn(Jt,Y,ve,G,p),Jt.mode&1&&It(G,Ke,p),p=Jt,Me=Ke;var tn=p.updateQueue;if(tn===null){var rn=new Set;rn.add(Me),p.updateQueue=rn}else tn.add(Me);break e}else{if(!(p&1)){It(G,Ke,p),Bw();break e}Me=Error(t(426))}}else if(Nr&&ve.mode&1){var Ii=Zt(Y);if(Ii!==null){!(Ii.flags&65536)&&(Ii.flags|=256),bn(Ii,Y,ve,G,p),Fc(P(Me,ve));break e}}G=Me=P(Me,ve),ts!==4&&(ts=2),Ug===null?Ug=[G]:Ug.push(G),G=Y;do{switch(G.tag){case 3:G.flags|=65536,p&=-p,G.lanes|=p;var ze=Pe(G,Me,p);Lu(G,ze);break e;case 1:ve=Me;var Ie=G.type,He=G.stateNode;if(!(G.flags&128)&&(typeof Ie.getDerivedStateFromError=="function"||He!==null&&typeof He.componentDidCatch=="function"&&(Hc===null||!Hc.has(He)))){G.flags|=65536,p&=-p,G.lanes|=p;var Pt=ot(G,ve,p);Lu(G,Pt);break e}}G=G.return}while(G!==null)}_I(y)}catch(an){p=an,Vi===y&&y!==null&&(Vi=y=y.return);continue}break}while(!0)}function mI(){var h=Hv.current;return Hv.current=gp,h===null?gp:h}function Bw(){(ts===0||ts===3||ts===2)&&(ts=4),_s===null||!(yf&268435455)&&!(Vv&268435455)||jc(_s,Fs)}function Kv(h,p){var y=dr;dr|=2;var T=mI();(_s!==h||Fs!==p)&&(Gu=null,Af(h,p));do try{v9();break}catch(L){pI(h,L)}while(!0);if(Bu(),dr=y,Hv.current=T,Vi!==null)throw Error(t(261));return _s=null,Fs=0,ts}function v9(){for(;Vi!==null;)gI(Vi)}function y9(){for(;Vi!==null&&!Ae();)gI(Vi)}function gI(h){var p=xI(h.alternate,h,ha);h.memoizedProps=h.pendingProps,p===null?_I(h):Vi=p,Ew.current=null}function _I(h){var p=h;do{var y=p.alternate;if(h=p.return,p.flags&32768){if(y=f9(y,p),y!==null){y.flags&=32767,Vi=y;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{ts=6,Vi=null;return}}else if(y=h9(y,p,ha),y!==null){Vi=y;return}if(p=p.sibling,p!==null){Vi=p;return}Vi=p=h}while(p!==null);ts===0&&(ts=5)}function wf(h,p,y){var T=dn,L=Ia.transition;try{Ia.transition=null,dn=1,x9(h,p,y,T)}finally{Ia.transition=L,dn=T}return null}function x9(h,p,y,T){do Ap();while(Vc!==null);if(dr&6)throw Error(t(327));y=h.finishedWork;var L=h.finishedLanes;if(y===null)return null;if(h.finishedWork=null,h.finishedLanes=0,y===h.current)throw Error(t(177));h.callbackNode=null,h.callbackPriority=0;var G=y.lanes|y.childLanes;if(hn(h,G),h===_s&&(Vi=_s=null,Fs=0),!(y.subtreeFlags&2064)&&!(y.flags&2064)||jv||(jv=!0,AI(ct,function(){return Ap(),null})),G=(y.flags&15990)!==0,y.subtreeFlags&15990||G){G=Ia.transition,Ia.transition=null;var Y=dn;dn=1;var ve=dr;dr|=4,Ew.current=null,p9(h,y),aI(y,h),Ui(hg),$r=!!Dc,hg=Dc=null,h.current=y,m9(y),we(),dr=ve,dn=Y,Ia.transition=G}else h.current=y;if(jv&&(jv=!1,Vc=h,qv=L),G=h.pendingLanes,G===0&&(Hc=null),zt(y.stateNode),Uo(h,te()),p!==null)for(T=h.onRecoverableError,y=0;y<p.length;y++)L=p[y],T(L.value,{componentStack:L.stack,digest:L.digest});if(Wv)throw Wv=!1,h=bw,bw=null,h;return qv&1&&h.tag!==0&&Ap(),G=h.pendingLanes,G&1?h===Cw?zg++:(zg=0,Cw=h):zg=0,Ma(),null}function Ap(){if(Vc!==null){var h=us(qv),p=Ia.transition,y=dn;try{if(Ia.transition=null,dn=16>h?16:h,Vc===null)var T=!1;else{if(h=Vc,Vc=null,qv=0,dr&6)throw Error(t(331));var L=dr;for(dr|=4,en=h.current;en!==null;){var G=en,Y=G.child;if(en.flags&16){var ve=G.deletions;if(ve!==null){for(var Me=0;Me<ve.length;Me++){var Ke=ve[Me];for(en=Ke;en!==null;){var St=en;switch(St.tag){case 0:case 11:case 15:kg(8,St,G)}var bt=St.child;if(bt!==null)bt.return=St,en=bt;else for(;en!==null;){St=en;var At=St.sibling,Jt=St.return;if(nI(St),St===Ke){en=null;break}if(At!==null){At.return=Jt,en=At;break}en=Jt}}}var tn=G.alternate;if(tn!==null){var rn=tn.child;if(rn!==null){tn.child=null;do{var Ii=rn.sibling;rn.sibling=null,rn=Ii}while(rn!==null)}}en=G}}if(G.subtreeFlags&2064&&Y!==null)Y.return=G,en=Y;else e:for(;en!==null;){if(G=en,G.flags&2048)switch(G.tag){case 0:case 11:case 15:kg(9,G,G.return)}var ze=G.sibling;if(ze!==null){ze.return=G.return,en=ze;break e}en=G.return}}var Ie=h.current;for(en=Ie;en!==null;){Y=en;var He=Y.child;if(Y.subtreeFlags&2064&&He!==null)He.return=Y,en=He;else e:for(Y=Ie;en!==null;){if(ve=en,ve.flags&2048)try{switch(ve.tag){case 0:case 11:case 15:Gv(9,ve)}}catch(an){Si(ve,ve.return,an)}if(ve===Y){en=null;break e}var Pt=ve.sibling;if(Pt!==null){Pt.return=ve.return,en=Pt;break e}en=ve.return}}if(dr=L,Ma(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(wt,h)}catch{}T=!0}return T}finally{dn=y,Ia.transition=p}}return!1}function vI(h,p,y){p=P(y,p),p=Pe(h,p,1),h=Wr(h,p,1),p=So(),h!==null&&(Mn(h,1,p),Uo(h,p))}function Si(h,p,y){if(h.tag===3)vI(h,h,y);else for(;p!==null;){if(p.tag===3){vI(p,h,y);break}else if(p.tag===1){var T=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Hc===null||!Hc.has(T))){h=P(y,h),h=ot(p,h,1),p=Wr(p,h,1),h=So(),p!==null&&(Mn(p,1,h),Uo(p,h));break}}p=p.return}}function A9(h,p,y){var T=h.pingCache;T!==null&&T.delete(p),p=So(),h.pingedLanes|=h.suspendedLanes&y,_s===h&&(Fs&y)===y&&(ts===4||ts===3&&(Fs&130023424)===Fs&&500>te()-Mw?Af(h,0):Tw|=y),Uo(h,p)}function yI(h,p){p===0&&(h.mode&1?(p=nn,nn<<=1,!(nn&130023424)&&(nn=4194304)):p=1);var y=So();h=aa(h,p),h!==null&&(Mn(h,p,y),Uo(h,y))}function w9(h){var p=h.memoizedState,y=0;p!==null&&(y=p.retryLane),yI(h,y)}function S9(h,p){var y=0;switch(h.tag){case 13:var T=h.stateNode,L=h.memoizedState;L!==null&&(y=L.retryLane);break;case 19:T=h.stateNode;break;default:throw Error(t(314))}T!==null&&T.delete(p),yI(h,y)}var xI;xI=function(h,p,y){if(h!==null)if(h.memoizedProps!==p.pendingProps||Is.current)Un=!0;else{if(!(h.lanes&y)&&!(p.flags&128))return Un=!1,c9(h,p,y);Un=!!(h.flags&131072)}else Un=!1,Nr&&p.flags&1048576&&yg(p,op,p.index);switch(p.lanes=0,p.tag){case 2:var T=p.type;Uv(h,p),h=p.pendingProps;var L=Mu(p,Yi.current);Hl(p,y),L=df(null,p,T,h,L,y);var G=bg();return p.flags|=1,typeof L=="object"&&L!==null&&typeof L.render=="function"&&L.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ps(T)?(G=!0,bu(p)):G=!1,p.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,Nn(p),L.updater=_p,p.stateNode=L,L._reactInternals=p,E(p,T,h,y),p=Bn(null,p,T,!0,G,y)):(p.tag=0,Nr&&G&&xg(p),Xt(null,p,L,y),p=p.child),p;case 16:T=p.elementType;e:{switch(Uv(h,p),h=p.pendingProps,L=T._init,T=L(T._payload),p.type=T,L=p.tag=T9(T),h=ko(T,h),L){case 0:p=Wt(null,p,T,h,y);break e;case 1:p=on(null,p,T,h,y);break e;case 11:p=es(null,p,T,h,y);break e;case 14:p=wo(null,p,T,ko(T.type,h),y);break e}throw Error(t(306,T,""))}return p;case 0:return T=p.type,L=p.pendingProps,L=p.elementType===T?L:ko(T,L),Wt(h,p,T,L,y);case 1:return T=p.type,L=p.pendingProps,L=p.elementType===T?L:ko(T,L),on(h,p,T,L,y);case 3:e:{if(Cn(p),h===null)throw Error(t(387));T=p.pendingProps,G=p.memoizedState,L=G.element,ci(h,p),ri(p,T,null,y);var Y=p.memoizedState;if(T=Y.element,G.isDehydrated)if(G={element:T,isDehydrated:!1,cache:Y.cache,pendingSuspenseBoundaries:Y.pendingSuspenseBoundaries,transitions:Y.transitions},p.updateQueue.baseState=G,p.memoizedState=G,p.flags&256){L=P(Error(t(423)),p),p=er(h,p,T,y,L);break e}else if(T!==L){L=P(Error(t(424)),p),p=er(h,p,T,y,L);break e}else for(Ds=el(p.stateNode.containerInfo.firstChild),Qi=p,Nr=!0,Oo=null,y=af(p,null,T,y),p.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Gl(),T===L){p=zu(h,p,y);break e}Xt(h,p,T,y)}p=p.child}return p;case 5:return Ou(p),h===null&&lp(p),T=p.type,L=p.pendingProps,G=h!==null?h.memoizedProps:null,Y=L.children,fg(T,L)?Y=null:G!==null&&fg(T,G)&&(p.flags|=32),tt(h,p),Xt(h,p,Y,y),p.child;case 6:return h===null&&lp(p),null;case 13:return fl(h,p,y);case 4:return hf(p,p.stateNode.containerInfo),T=p.pendingProps,h===null?p.child=Iu(p,null,T,y):Xt(h,p,T,y),p.child;case 11:return T=p.type,L=p.pendingProps,L=p.elementType===T?L:ko(T,L),es(h,p,T,L,y);case 7:return Xt(h,p,p.pendingProps,y),p.child;case 8:return Xt(h,p,p.pendingProps.children,y),p.child;case 12:return Xt(h,p,p.pendingProps.children,y),p.child;case 10:e:{if(T=p.type._context,L=p.pendingProps,G=p.memoizedProps,Y=L.value,Mr(Pu,T._currentValue),T._currentValue=Y,G!==null)if(mo(G.value,Y)){if(G.children===L.children&&!Is.current){p=zu(h,p,y);break e}}else for(G=p.child,G!==null&&(G.return=p);G!==null;){var ve=G.dependencies;if(ve!==null){Y=G.child;for(var Me=ve.firstContext;Me!==null;){if(Me.context===T){if(G.tag===1){Me=wr(-1,y&-y),Me.tag=2;var Ke=G.updateQueue;if(Ke!==null){Ke=Ke.shared;var St=Ke.pending;St===null?Me.next=Me:(Me.next=St.next,St.next=Me),Ke.pending=Me}}G.lanes|=y,Me=G.alternate,Me!==null&&(Me.lanes|=y),uf(G.return,y,p),ve.lanes|=y;break}Me=Me.next}}else if(G.tag===10)Y=G.type===p.type?null:G.child;else if(G.tag===18){if(Y=G.return,Y===null)throw Error(t(341));Y.lanes|=y,ve=Y.alternate,ve!==null&&(ve.lanes|=y),uf(Y,y,p),Y=G.sibling}else Y=G.child;if(Y!==null)Y.return=G;else for(Y=G;Y!==null;){if(Y===p){Y=null;break}if(G=Y.sibling,G!==null){G.return=Y.return,Y=G;break}Y=Y.return}G=Y}Xt(h,p,L.children,y),p=p.child}return p;case 9:return L=p.type,T=p.pendingProps.children,Hl(p,y),L=vo(L),T=T(L),p.flags|=1,Xt(h,p,T,y),p.child;case 14:return T=p.type,L=ko(T,p.pendingProps),L=ko(T.type,L),wo(h,p,T,L,y);case 15:return Ve(h,p,p.type,p.pendingProps,y);case 17:return T=p.type,L=p.pendingProps,L=p.elementType===T?L:ko(T,L),Uv(h,p),p.tag=1,ps(T)?(h=!0,bu(p)):h=!1,Hl(p,y),m(p,T,L),E(p,T,L,y),Bn(null,p,T,!0,h,y);case 19:return QR(h,p,y);case 22:return Be(h,p,y)}throw Error(t(156,p.tag))};function AI(h,p){return q(h,p)}function E9(h,p,y,T){this.tag=h,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pa(h,p,y,T){return new E9(h,p,y,T)}function Lw(h){return h=h.prototype,!(!h||!h.isReactComponent)}function T9(h){if(typeof h=="function")return Lw(h)?1:0;if(h!=null){if(h=h.$$typeof,h===H)return 11;if(h===ue)return 14}return 2}function qc(h,p){var y=h.alternate;return y===null?(y=Pa(h.tag,p,h.key,h.mode),y.elementType=h.elementType,y.type=h.type,y.stateNode=h.stateNode,y.alternate=h,h.alternate=y):(y.pendingProps=p,y.type=h.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=h.flags&14680064,y.childLanes=h.childLanes,y.lanes=h.lanes,y.child=h.child,y.memoizedProps=h.memoizedProps,y.memoizedState=h.memoizedState,y.updateQueue=h.updateQueue,p=h.dependencies,y.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},y.sibling=h.sibling,y.index=h.index,y.ref=h.ref,y}function Yv(h,p,y,T,L,G){var Y=2;if(T=h,typeof h=="function")Lw(h)&&(Y=1);else if(typeof h=="string")Y=5;else e:switch(h){case D:return Sf(y.children,L,G,p);case I:Y=8,L|=8;break;case C:return h=Pa(12,y,p,L|2),h.elementType=C,h.lanes=G,h;case z:return h=Pa(13,y,p,L),h.elementType=z,h.lanes=G,h;case Z:return h=Pa(19,y,p,L),h.elementType=Z,h.lanes=G,h;case ge:return Qv(y,L,G,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case B:Y=10;break e;case k:Y=9;break e;case H:Y=11;break e;case ue:Y=14;break e;case ae:Y=16,T=null;break e}throw Error(t(130,h==null?h:typeof h,""))}return p=Pa(Y,y,p,L),p.elementType=h,p.type=T,p.lanes=G,p}function Sf(h,p,y,T){return h=Pa(7,h,T,p),h.lanes=y,h}function Qv(h,p,y,T){return h=Pa(22,h,T,p),h.elementType=ge,h.lanes=y,h.stateNode={isHidden:!1},h}function Fw(h,p,y){return h=Pa(6,h,null,p),h.lanes=y,h}function Ow(h,p,y){return p=Pa(4,h.children!==null?h.children:[],h.key,p),p.lanes=y,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function M9(h,p,y,T,L){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yn(0),this.expirationTimes=Yn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yn(0),this.identifierPrefix=T,this.onRecoverableError=L,this.mutableSourceEagerHydrationData=null}function kw(h,p,y,T,L,G,Y,ve,Me){return h=new M9(h,p,y,ve,Me),p===1?(p=1,G===!0&&(p|=8)):p=0,G=Pa(3,null,null,p),h.current=G,G.stateNode=h,G.memoizedState={element:T,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nn(G),h}function b9(h,p,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:T==null?null:""+T,children:h,containerInfo:p,implementation:y}}function wI(h){if(!h)return nl;h=h._reactInternals;e:{if(ne(h)!==h||h.tag!==1)throw Error(t(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ps(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(t(171))}if(h.tag===1){var y=h.type;if(ps(y))return tf(h,y,p)}return p}function SI(h,p,y,T,L,G,Y,ve,Me){return h=kw(y,T,!0,h,L,G,Y,ve,Me),h.context=wI(null),y=h.current,T=So(),L=Wc(y),G=wr(T,L),G.callback=p??null,Wr(y,G,L),h.current.lanes=L,Mn(h,L,T),Uo(h,T),h}function Zv(h,p,y,T){var L=p.current,G=So(),Y=Wc(L);return y=wI(y),p.context===null?p.context=y:p.pendingContext=y,p=wr(G,Y),p.payload={element:h},T=T===void 0?null:T,T!==null&&(p.callback=T),h=Wr(L,p,Y),h!==null&&(ml(h,L,Y,G),ms(h,L,Y)),Y}function $v(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function EI(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var y=h.retryLane;h.retryLane=y!==0&&y<p?y:p}}function Nw(h,p){EI(h,p),(h=h.alternate)&&EI(h,p)}function C9(){return null}var TI=typeof reportError=="function"?reportError:function(h){console.error(h)};function Uw(h){this._internalRoot=h}ey.prototype.render=Uw.prototype.render=function(h){var p=this._internalRoot;if(p===null)throw Error(t(409));Zv(h,p,null,null)},ey.prototype.unmount=Uw.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var p=h.containerInfo;xf(function(){Zv(null,h,null,null)}),p[_o]=null}};function ey(h){this._internalRoot=h}ey.prototype.unstable_scheduleHydration=function(h){if(h){var p=Do();h={blockedOn:null,target:h,priority:p};for(var y=0;y<Vs.length&&p!==0&&p<Vs[y].priority;y++);Vs.splice(y,0,h),y===0&&ki(h)}};function zw(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function ty(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function MI(){}function R9(h,p,y,T,L){if(L){if(typeof T=="function"){var G=T;T=function(){var Ke=$v(Y);G.call(Ke)}}var Y=SI(p,T,h,0,null,!1,!1,"",MI);return h._reactRootContainer=Y,h[_o]=Y.current,Ic(h.nodeType===8?h.parentNode:h),xf(),Y}for(;L=h.lastChild;)h.removeChild(L);if(typeof T=="function"){var ve=T;T=function(){var Ke=$v(Me);ve.call(Ke)}}var Me=kw(h,0,!1,null,null,!1,!1,"",MI);return h._reactRootContainer=Me,h[_o]=Me.current,Ic(h.nodeType===8?h.parentNode:h),xf(function(){Zv(p,Me,y,T)}),Me}function ny(h,p,y,T,L){var G=y._reactRootContainer;if(G){var Y=G;if(typeof L=="function"){var ve=L;L=function(){var Me=$v(Y);ve.call(Me)}}Zv(p,Y,h,L)}else Y=R9(y,p,h,L,T);return $v(Y)}wa=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var y=In(p.pendingLanes);y!==0&&(gi(p,y|1),Uo(p,te()),!(dr&6)&&(xp=te()+500,Ma()))}break;case 13:xf(function(){var T=aa(h,1);if(T!==null){var L=So();ml(T,h,1,L)}}),Nw(h,1)}},qa=function(h){if(h.tag===13){var p=aa(h,134217728);if(p!==null){var y=So();ml(p,h,134217728,y)}Nw(h,134217728)}},Fl=function(h){if(h.tag===13){var p=Wc(h),y=aa(h,p);if(y!==null){var T=So();ml(y,h,p,T)}Nw(h,p)}},Do=function(){return dn},Xa=function(h,p){var y=dn;try{return dn=h,p()}finally{dn=y}},Ce=function(h,p,y){switch(p){case"input":if(ut(h,y),p=y.name,y.type==="radio"&&p!=null){for(y=h;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<y.length;p++){var T=y[p];if(T!==h&&T.form===h.form){var L=rp(T);if(!L)throw Error(t(90));Ee(T),ut(T,L)}}}break;case"textarea":Re(h,y);break;case"select":p=y.value,p!=null&&K(h,!!y.multiple,p,!1)}},ln=Pw,Kt=xf;var I9={usingClientEntryPoint:!1,Events:[tl,ui,rp,ft,qt,Pw]},Gg={findFiberByHostInstance:zl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P9={bundleType:Gg.bundleType,version:Gg.version,rendererPackageName:Gg.rendererPackageName,rendererConfig:Gg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=Ze(h),h===null?null:h.stateNode},findFiberByHostInstance:Gg.findFiberByHostInstance||C9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ry=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ry.isDisabled&&ry.supportsFiber)try{wt=ry.inject(P9),Tt=ry}catch{}}return zo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I9,zo.createPortal=function(h,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zw(p))throw Error(t(200));return b9(h,p,null,y)},zo.createRoot=function(h,p){if(!zw(h))throw Error(t(299));var y=!1,T="",L=TI;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(T=p.identifierPrefix),p.onRecoverableError!==void 0&&(L=p.onRecoverableError)),p=kw(h,1,!1,null,null,y,!1,T,L),h[_o]=p.current,Ic(h.nodeType===8?h.parentNode:h),new Uw(p)},zo.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(t(188)):(h=Object.keys(h).join(","),Error(t(268,h)));return h=Ze(p),h=h===null?null:h.stateNode,h},zo.flushSync=function(h){return xf(h)},zo.hydrate=function(h,p,y){if(!ty(p))throw Error(t(200));return ny(null,h,p,!0,y)},zo.hydrateRoot=function(h,p,y){if(!zw(h))throw Error(t(405));var T=y!=null&&y.hydratedSources||null,L=!1,G="",Y=TI;if(y!=null&&(y.unstable_strictMode===!0&&(L=!0),y.identifierPrefix!==void 0&&(G=y.identifierPrefix),y.onRecoverableError!==void 0&&(Y=y.onRecoverableError)),p=SI(p,null,h,1,y??null,L,!1,G,Y),h[_o]=p.current,Ic(h),T)for(h=0;h<T.length;h++)y=T[h],L=y._getVersion,L=L(y._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[y,L]:p.mutableSourceEagerHydrationData.push(y,L);return new ey(p)},zo.render=function(h,p,y){if(!ty(p))throw Error(t(200));return ny(null,h,p,!1,y)},zo.unmountComponentAtNode=function(h){if(!ty(h))throw Error(t(40));return h._reactRootContainer?(xf(function(){ny(null,null,h,!1,function(){h._reactRootContainer=null,h[_o]=null})}),!0):!1},zo.unstable_batchedUpdates=Pw,zo.unstable_renderSubtreeIntoContainer=function(h,p,y,T){if(!ty(y))throw Error(t(200));if(h==null||h._reactInternals===void 0)throw Error(t(38));return ny(h,p,y,!1,T)},zo.version="18.3.1-next-f1338f8080-20240426",zo}var LI;function EO(){if(LI)return Vw.exports;LI=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Vw.exports=z9(),Vw.exports}var FI;function G9(){if(FI)return iy;FI=1;var i=EO();return iy.createRoot=i.createRoot,iy.hydrateRoot=i.hydrateRoot,iy}var TO=G9();const H9=kh(TO),V9=({text:i})=>re.jsx("div",{className:"animate-dialogBox 3xl:left-[59%] 3xl:rounded-2xl 3xl:p-4 3xl:text-2xl absolute hidden rounded-xl border-[2px] border-black bg-[#f4f4f4] p-2 font-Karla text-base transition-all duration-150 before:absolute before:right-full before:top-1/2 before:-mt-[9px] before:h-0 before:w-0 before:border-[8px] before:border-b-transparent before:border-l-transparent before:border-r-[#000] before:border-t-transparent before:content-[''] after:absolute after:right-full after:top-1/2 after:-mt-[6.5px] after:h-0 after:w-0 after:border-[5.5px] after:border-b-transparent after:border-l-transparent after:border-r-[#f4f4f4] after:border-t-transparent after:content-[''] md:left-[58%] md:top-[64%] md:block lg:left-[59%] lg:top-[62%] 4xl:rounded-3xl 4xl:px-8 4xl:py-8 4xl:text-6xl",children:re.jsx("p",{dangerouslySetInnerHTML:{__html:i}})}),W9="/assets/green-circle-BVSs0ap4.png",j9=()=>{const i=Array.from({length:20},(e,t)=>re.jsxs(jo.Fragment,{children:["AVAILABLE FOR FREELANCE WORK",re.jsx("img",{src:W9,alt:"Green Circle",className:"mx-1 inline-block aspect-square w-3 object-contain"})]},t));return re.jsx("div",{className:"absolute top-0 z-50 flex w-full select-none overflow-hidden bg-[#217281] bg-opacity-30",children:re.jsxs("div",{className:"inline-flex min-w-full animate-marquee whitespace-nowrap py-1 font-sans text-xs font-extralight text-white hover:[animation-play-state:paused] 3xl:text-base 4xl:py-3 4xl:text-4xl",children:[re.jsx("span",{children:i}),re.jsx("span",{children:i})]})})},q9="/assets/github-DOiKAu5n.png",X9="/assets/linkedin-BNlVeSjz.png",J9="/assets/coffee-cup-CrBaEcs0.png",K9="/assets/seeding-Cg_q6HkA.png",MO="/assets/rocket-ejnKPbKL.png",bO="/assets/slightly-smiling-face-D55x1O6O.png";function Ju(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function CO(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var va={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},vm={duration:.5,overwrite:!1,delay:0},xC,so,si,Na=1e8,qr=1/Na,kM=Math.PI*2,Y9=kM/4,Q9=0,RO=Math.sqrt,Z9=Math.cos,$9=Math.sin,Ts=function(e){return typeof e=="string"},Mi=function(e){return typeof e=="function"},lc=function(e){return typeof e=="number"},AC=function(e){return typeof e>"u"},su=function(e){return typeof e=="object"},qo=function(e){return e!==!1},wC=function(){return typeof window<"u"},sy=function(e){return Mi(e)||Ts(e)},IO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},oo=Array.isArray,NM=/(?:-?\.?\d|\.)+/gi,PO=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,tm=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,qw=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,DO=/[+-]=-?[.\d]+/,BO=/[^,'"\[\]\s]+/gi,ez=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,hi,ql,UM,SC,xa={},L1={},LO,FO=function(e){return(L1=vd(e,xa))&&Yo},EC=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},t0=function(e,t){return!t&&console.warn(e)},OO=function(e,t){return e&&(xa[e]=t)&&L1&&(L1[e]=t)||xa},n0=function(){return 0},tz={suppressEvents:!0,isStart:!0,kill:!1},_1={suppressEvents:!0,kill:!1},nz={suppressEvents:!0},TC={},gh=[],zM={},kO,pa={},Xw={},OI=30,v1=[],MC="",bC=function(e){var t=e[0],n,r;if(su(t)||Mi(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=v1.length;r--&&!v1[r].targetTest(t););n=v1[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new ak(e[r],n)))||e.splice(r,1);return e},od=function(e){return e._gsap||bC(Ua(e))[0]._gsap},NO=function(e,t,n){return(n=e[t])&&Mi(n)?e[t]():AC(n)&&e.getAttribute&&e.getAttribute(t)||n},Xo=function(e,t){return(e=e.split(",")).forEach(t)||e},Di=function(e){return Math.round(e*1e5)/1e5||0},As=function(e){return Math.round(e*1e7)/1e7||0},am=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},rz=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},F1=function(){var e=gh.length,t=gh.slice(0),n,r;for(zM={},gh.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},UO=function(e,t,n,r){gh.length&&!so&&F1(),e.render(t,n,so&&t<0&&(e._initted||e._startAt)),gh.length&&!so&&F1()},zO=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(BO).length<2?t:Ts(e)?e.trim():e},GO=function(e){return e},Va=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},iz=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},vd=function(e,t){for(var n in t)e[n]=t[n];return e},kI=function i(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=su(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},O1=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},I_=function(e){var t=e.parent||hi,n=e.keyframes?iz(oo(e.keyframes)):Va;if(qo(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},sz=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},HO=function(e,t,n,r,s){var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},Yx=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[n]===t&&(e[n]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Eh=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ad=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},oz=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},GM=function(e,t,n,r){return e._startAt&&(so?e._startAt.revert(_1):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},az=function i(e){return!e||e._ts&&i(e.parent)},NI=function(e){return e._repeat?ym(e._tTime,e=e.duration()+e._rDelay)*e:0},ym=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},k1=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Qx=function(e){return e._end=As(e._start+(e._tDur/Math.abs(e._ts||e._rts||qr)||0))},Zx=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=As(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Qx(e),n._dirty||ad(n,e)),e},VO=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=k1(e.rawTime(),t),(!t._dur||W0(0,t.totalDuration(),n)-t._tTime>qr)&&t.render(n,!0)),ad(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-qr}},Kl=function(e,t,n,r){return t.parent&&Eh(t),t._start=As((lc(n)?n:n||e!==hi?Ba(e,n,t):e._time)+t._delay),t._end=As(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),HO(e,t,"_first","_last",e._sort?"_start":0),HM(t)||(e._recent=t),r||VO(e,t),e._ts<0&&Zx(e,e._tTime),e},WO=function(e,t){return(xa.ScrollTrigger||EC("scrollTrigger",t))&&xa.ScrollTrigger.create(t,e)},jO=function(e,t,n,r,s){if(RC(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!so&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&kO!==ma.frame)return gh.push(e),e._lazy=[s,r],1},lz=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},HM=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},uz=function(e,t,n,r){var s=e.ratio,o=t<0||!t&&(!e._start&&lz(e)&&!(!e._initted&&HM(e))||(e._ts<0||e._dp._ts<0)&&!HM(e))?0:1,a=e._rDelay,l=0,u,f,c;if(a&&e._repeat&&(l=W0(0,e._tDur,t),f=ym(l,a),e._yoyo&&f&1&&(o=1-o),f!==ym(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||so||r||e._zTime===qr||!t&&e._zTime){if(!e._initted&&jO(e,t,r,n,l))return;for(c=e._zTime,e._zTime=t||(n?qr:0),n||(n=t&&!c),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&GM(e,t,n,!0),e._onUpdate&&!n&&_a(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&_a(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Eh(e,1),!n&&!so&&(_a(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},cz=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},xm=function(e,t,n,r){var s=e._repeat,o=As(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:As(o*(s+1)+e._rDelay*s):o,a>0&&!r&&Zx(e,e._tTime=e._tDur*a),e.parent&&Qx(e),n||ad(e.parent,e),e},UI=function(e){return e instanceof bo?ad(e):xm(e,e._dur)},hz={_start:0,endTime:n0,totalDuration:n0},Ba=function i(e,t,n){var r=e.labels,s=e._recent||hz,o=e.duration()>=Na?s.endTime(!1):e._dur,a,l,u;return Ts(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),u=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(a<0?s:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),u&&n&&(l=l/100*(oo(n)?n[0]:n).totalDuration()),a>1?i(e,t.substr(0,a-1),n)+l:o+l)):t==null?o:+t},P_=function(e,t,n){var r=lc(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=n,e){for(a=o,l=n;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=qo(l.vars.inherit)&&l.parent;o.immediateRender=qo(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new qi(t[0],o,t[s+1])},Nh=function(e,t){return e||e===0?t(e):t},W0=function(e,t,n){return n<e?e:n>t?t:n},io=function(e,t){return!Ts(e)||!(t=ez.exec(e))?"":t[1]},fz=function(e,t,n){return Nh(n,function(r){return W0(e,t,r)})},VM=[].slice,qO=function(e,t){return e&&su(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&su(e[0]))&&!e.nodeType&&e!==ql},dz=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var s;return Ts(r)&&!t||qO(r,1)?(s=n).push.apply(s,Ua(r)):n.push(r)})||n},Ua=function(e,t,n){return si&&!t&&si.selector?si.selector(e):Ts(e)&&!n&&(UM||!Am())?VM.call((t||SC).querySelectorAll(e),0):oo(e)?dz(e,n):qO(e)?VM.call(e,0):e?[e]:[]},WM=function(e){return e=Ua(e)[0]||t0("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Ua(t,n.querySelectorAll?n:n===e?t0("Invalid scope")||SC.createElement("div"):e)}},XO=function(e){return e.sort(function(){return .5-Math.random()})},JO=function(e){if(Mi(e))return e;var t=su(e)?e:{each:e},n=ld(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,u=t.axis,f=r,c=r;return Ts(r)?f=c={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(f=r[0],c=r[1]),function(d,g,v){var A=(v||t).length,x=o[A],w,M,b,R,F,O,D,I,C;if(!x){if(C=t.grid==="auto"?0:(t.grid||[1,Na])[1],!C){for(D=-Na;D<(D=v[C++].getBoundingClientRect().left)&&C<A;);C<A&&C--}for(x=o[A]=[],w=l?Math.min(C,A)*f-.5:r%C,M=C===Na?0:l?A*c/C-.5:r/C|0,D=0,I=Na,O=0;O<A;O++)b=O%C-w,R=M-(O/C|0),x[O]=F=u?Math.abs(u==="y"?R:b):RO(b*b+R*R),F>D&&(D=F),F<I&&(I=F);r==="random"&&XO(x),x.max=D-I,x.min=I,x.v=A=(parseFloat(t.amount)||parseFloat(t.each)*(C>A?A-1:u?u==="y"?A/C:C:Math.max(C,A/C))||0)*(r==="edges"?-1:1),x.b=A<0?s-A:s,x.u=io(t.amount||t.each)||0,n=n&&A<0?ik(n):n}return A=(x[d]-x.min)/x.max||0,As(x.b+(n?n(A):A)*x.v)+x.u}},jM=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=As(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(lc(n)?0:io(n))}},KO=function(e,t){var n=oo(e),r,s;return!n&&su(e)&&(r=n=e.radius||Na,e.values?(e=Ua(e.values),(s=!lc(e[0]))&&(r*=r)):e=jM(e.increment)),Nh(t,n?Mi(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=Na,f=0,c=e.length,d,g;c--;)s?(d=e[c].x-a,g=e[c].y-l,d=d*d+g*g):d=Math.abs(e[c]-a),d<u&&(u=d,f=c);return f=!r||u<=r?e[f]:o,s||f===o||lc(o)?f:f+io(o)}:jM(e))},YO=function(e,t,n,r){return Nh(oo(e)?!t:n===!0?!!(n=0):!r,function(){return oo(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},pz=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,o){return o(s)},r)}},mz=function(e,t){return function(n){return e(parseFloat(n))+(t||io(n))}},gz=function(e,t,n){return ZO(e,t,0,1,n)},QO=function(e,t,n){return Nh(n,function(r){return e[~~t(r)]})},_z=function i(e,t,n){var r=t-e;return oo(e)?QO(e,i(0,e.length),t):Nh(n,function(s){return(r+(s-e)%r)%r+e})},vz=function i(e,t,n){var r=t-e,s=r*2;return oo(e)?QO(e,i(0,e.length-1),t):Nh(n,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},r0=function(e){for(var t=0,n="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?BO:NM),n+=e.substr(t,r-t)+YO(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},ZO=function(e,t,n,r,s){var o=t-e,a=r-n;return Nh(s,function(l){return n+((l-e)/o*a||0)})},yz=function i(e,t,n,r){var s=isNaN(e+t)?0:function(g){return(1-g)*e+g*t};if(!s){var o=Ts(e),a={},l,u,f,c,d;if(n===!0&&(r=1)&&(n=null),o)e={p:e},t={p:t};else if(oo(e)&&!oo(t)){for(f=[],c=e.length,d=c-2,u=1;u<c;u++)f.push(i(e[u-1],e[u]));c--,s=function(v){v*=c;var A=Math.min(d,~~v);return f[A](v-A)},n=t}else r||(e=vd(oo(e)?[]:{},e));if(!f){for(l in t)CC.call(a,e,l,"get",t[l]);s=function(v){return DC(v,a)||(o?e.p:e)}}}return Nh(n,s)},zI=function(e,t,n){var r=e.labels,s=Na,o,a,l;for(o in r)a=r[o]-t,a<0==!!n&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},_a=function(e,t,n){var r=e.vars,s=r[t],o=si,a=e._ctx,l,u,f;if(s)return l=r[t+"Params"],u=r.callbackScope||e,n&&gh.length&&F1(),a&&(si=a),f=l?s.apply(u,l):s.call(u),si=o,f},__=function(e){return Eh(e),e.scrollTrigger&&e.scrollTrigger.kill(!!so),e.progress()<1&&_a(e,"onInterrupt"),e},nm,$O=[],ek=function(e){if(e)if(e=!e.name&&e.default||e,wC()||e.headless){var t=e.name,n=Mi(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:n0,render:DC,add:CC,kill:Fz,modifier:Lz,rawVars:0},o={targetTest:0,get:0,getSetter:PC,aliases:{},register:0};if(Am(),e!==r){if(pa[t])return;Va(r,Va(O1(e,s),o)),vd(r.prototype,vd(s,O1(e,o))),pa[r.prop=t]=r,e.targetTest&&(v1.push(r),TC[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}OO(t,r),e.register&&e.register(Yo,r,Jo)}else $O.push(e)},zr=255,v_={aqua:[0,zr,zr],lime:[0,zr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,zr],navy:[0,0,128],white:[zr,zr,zr],olive:[128,128,0],yellow:[zr,zr,0],orange:[zr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[zr,0,0],pink:[zr,192,203],cyan:[0,zr,zr],transparent:[zr,zr,zr,0]},Jw=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*zr+.5|0},tk=function(e,t,n){var r=e?lc(e)?[e>>16,e>>8&zr,e&zr]:0:v_.black,s,o,a,l,u,f,c,d,g,v;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),v_[e])r=v_[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&zr,r&zr,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&zr,e&zr]}else if(e.substr(0,3)==="hsl"){if(r=v=e.match(NM),!t)l=+r[0]%360/360,u=+r[1]/100,f=+r[2]/100,o=f<=.5?f*(u+1):f+u-f*u,s=f*2-o,r.length>3&&(r[3]*=1),r[0]=Jw(l+1/3,s,o),r[1]=Jw(l,s,o),r[2]=Jw(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(PO),n&&r.length<4&&(r[3]=1),r}else r=e.match(NM)||v_.transparent;r=r.map(Number)}return t&&!v&&(s=r[0]/zr,o=r[1]/zr,a=r[2]/zr,c=Math.max(s,o,a),d=Math.min(s,o,a),f=(c+d)/2,c===d?l=u=0:(g=c-d,u=f>.5?g/(2-c-d):g/(c+d),l=c===s?(o-a)/g+(o<a?6:0):c===o?(a-s)/g+2:(s-o)/g+4,l*=60),r[0]=~~(l+.5),r[1]=~~(u*100+.5),r[2]=~~(f*100+.5)),n&&r.length<4&&(r[3]=1),r},nk=function(e){var t=[],n=[],r=-1;return e.split(_h).forEach(function(s){var o=s.match(tm)||[];t.push.apply(t,o),n.push(r+=o.length+1)}),t.c=n,t},GI=function(e,t,n){var r="",s=(e+r).match(_h),o=t?"hsla(":"rgba(",a=0,l,u,f,c;if(!s)return e;if(s=s.map(function(d){return(d=tk(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),n&&(f=nk(e),l=n.c,l.join(r)!==f.c.join(r)))for(u=e.replace(_h,"1").split(tm),c=u.length-1;a<c;a++)r+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(f.length?f:s.length?s:n).shift());if(!u)for(u=e.split(_h),c=u.length-1;a<c;a++)r+=u[a]+s[a];return r+u[c]},_h=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in v_)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),xz=/hsl[a]?\(/,rk=function(e){var t=e.join(" "),n;if(_h.lastIndex=0,_h.test(t))return n=xz.test(t),e[1]=GI(e[1],n),e[0]=GI(e[0],n,nk(e[1])),!0},i0,ma=function(){var i=Date.now,e=500,t=33,n=i(),r=n,s=1e3/240,o=s,a=[],l,u,f,c,d,g,v=function A(x){var w=i()-r,M=x===!0,b,R,F,O;if((w>e||w<0)&&(n+=w-t),r+=w,F=r-n,b=F-o,(b>0||M)&&(O=++c.frame,d=F-c.time*1e3,c.time=F=F/1e3,o+=b+(b>=s?4:s-b),R=1),M||(l=u(A)),R)for(g=0;g<a.length;g++)a[g](F,d,O,x)};return c={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(x){return d/(1e3/(x||60))},wake:function(){LO&&(!UM&&wC()&&(ql=UM=window,SC=ql.document||{},xa.gsap=Yo,(ql.gsapVersions||(ql.gsapVersions=[])).push(Yo.version),FO(L1||ql.GreenSockGlobals||!ql.gsap&&ql||{}),$O.forEach(ek)),f=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&c.sleep(),u=f||function(x){return setTimeout(x,o-c.time*1e3+1|0)},i0=1,v(2))},sleep:function(){(f?cancelAnimationFrame:clearTimeout)(l),i0=0,u=n0},lagSmoothing:function(x,w){e=x||1/0,t=Math.min(w||33,e)},fps:function(x){s=1e3/(x||240),o=c.time*1e3+s},add:function(x,w,M){var b=w?function(R,F,O,D){x(R,F,O,D),c.remove(b)}:x;return c.remove(x),a[M?"unshift":"push"](b),Am(),b},remove:function(x,w){~(w=a.indexOf(x))&&a.splice(w,1)&&g>=w&&g--},_listeners:a},c}(),Am=function(){return!i0&&ma.wake()},rr={},Az=/^[\d.\-M][\d.\-,\s]/,wz=/["']/g,Sz=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,o=n.length,a,l,u;s<o;s++)l=n[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),t[r]=isNaN(u)?u.replace(wz,"").trim():+u,r=l.substr(a+1).trim();return t},Ez=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},Tz=function(e){var t=(e+"").split("("),n=rr[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[Sz(t[1])]:Ez(e).split(",").map(zO)):rr._CE&&Az.test(e)?rr._CE("",e):n},ik=function(e){return function(t){return 1-e(1-t)}},sk=function i(e,t){for(var n=e._first,r;n;)n instanceof bo?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},ld=function(e,t){return e&&(Mi(e)?e:rr[e]||Tz(e))||t},Id=function(e,t,n,r){n===void 0&&(n=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:r},o;return Xo(e,function(a){rr[a]=xa[a]=s,rr[o=a.toLowerCase()]=n;for(var l in s)rr[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=rr[a+"."+l]=s[l]}),s},ok=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Kw=function i(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),o=s/kM*(Math.asin(1/r)||0),a=function(f){return f===1?1:r*Math.pow(2,-10*f)*$9((f-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:ok(a);return s=kM/s,l.config=function(u,f){return i(e,u,f)},l},Yw=function i(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:ok(n);return r.config=function(s){return i(e,s)},r};Xo("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;Id(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});rr.Linear.easeNone=rr.none=rr.Linear.easeIn;Id("Elastic",Kw("in"),Kw("out"),Kw());(function(i,e){var t=1/e,n=2*t,r=2.5*t,s=function(a){return a<t?i*a*a:a<n?i*Math.pow(a-1.5/e,2)+.75:a<r?i*(a-=2.25/e)*a+.9375:i*Math.pow(a-2.625/e,2)+.984375};Id("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Id("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});Id("Circ",function(i){return-(RO(1-i*i)-1)});Id("Sine",function(i){return i===1?1:-Z9(i*Y9)+1});Id("Back",Yw("in"),Yw("out"),Yw());rr.SteppedEase=rr.steps=xa.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,o=1-qr;return function(a){return((r*W0(0,o,a)|0)+s)*n}}};vm.ease=rr["quad.out"];Xo("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return MC+=i+","+i+"Params,"});var ak=function(e,t){this.id=Q9++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:NO,this.set=t?t.getSetter:PC},s0=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,xm(this,+t.duration,1,1),this.data=t.data,si&&(this._ctx=si,si.data.push(this)),i0||ma.wake()}var e=i.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,xm(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(Am(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Zx(this,n),!s._dp||s.parent||VO(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Kl(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===qr||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),UO(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+NI(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+NI(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?ym(this._tTime,s)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-qr?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?k1(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-qr?0:this._rts,this.totalTime(W0(-Math.abs(this._delay),this._tDur,s),r!==!1),Qx(this),oz(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Am(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==qr&&(this._tTime-=qr)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Kl(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(qo(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?k1(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=nz);var r=so;return so=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),so=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,UI(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,UI(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(Ba(this,n),qo(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,qo(r))},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-qr:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-qr,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-qr)},e.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},e.then=function(n){var r=this;return new Promise(function(s){var o=Mi(n)?n:GO,a=function(){var u=r.then;r.then=null,Mi(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=u),s(o),r.then=u};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){__(this)},i}();Va(s0.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-qr,_prom:0,_ps:!1,_rts:1});var bo=function(i){CO(e,i);function e(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=qo(n.sortChildren),hi&&Kl(n.parent||hi,Ju(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&WO(Ju(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return P_(0,arguments,this),this},t.from=function(r,s,o){return P_(1,arguments,this),this},t.fromTo=function(r,s,o,a){return P_(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,I_(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new qi(r,s,Ba(this,o),1),this},t.call=function(r,s,o){return Kl(this,qi.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,u,f){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=f,o.parent=this,new qi(r,o,Ba(this,l)),this},t.staggerFrom=function(r,s,o,a,l,u,f){return o.runBackwards=1,I_(o).immediateRender=qo(o.immediateRender),this.staggerTo(r,s,o,a,l,u,f)},t.staggerFromTo=function(r,s,o,a,l,u,f,c){return a.startAt=o,I_(a).immediateRender=qo(a.immediateRender),this.staggerTo(r,s,a,l,u,f,c)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,f=r<=0?0:As(r),c=this._zTime<0!=r<0&&(this._initted||!u),d,g,v,A,x,w,M,b,R,F,O,D;if(this!==hi&&f>l&&r>=0&&(f=l),f!==this._tTime||o||c){if(a!==this._time&&u&&(f+=this._time-a,r+=this._time-a),d=f,R=this._start,b=this._ts,w=!b,c&&(u||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(O=this._yoyo,x=u+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(x*100+r,s,o);if(d=As(f%x),f===l?(A=this._repeat,d=u):(A=~~(f/x),A&&A===f/x&&(d=u,A--),d>u&&(d=u)),F=ym(this._tTime,x),!a&&this._tTime&&F!==A&&this._tTime-F*x-this._dur<=0&&(F=A),O&&A&1&&(d=u-d,D=1),A!==F&&!this._lock){var I=O&&F&1,C=I===(O&&A&1);if(A<F&&(I=!I),a=I?0:f%u?u:f,this._lock=1,this.render(a||(D?0:As(A*x)),s,!u)._lock=0,this._tTime=f,!s&&this.parent&&_a(this,"onRepeat"),this.vars.repeatRefresh&&!D&&(this.invalidate()._lock=1),a&&a!==this._time||w!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,C&&(this._lock=2,a=I?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!D&&this.invalidate()),this._lock=0,!this._ts&&!w)return this;sk(this,D)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(M=cz(this,As(a),As(d)),M&&(f-=d-(d=M._start))),this._tTime=f,this._time=d,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&d&&!s&&!A&&(_a(this,"onStart"),this._tTime!==f))return this;if(d>=a&&r>=0)for(g=this._first;g;){if(v=g._next,(g._act||d>=g._start)&&g._ts&&M!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(d-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(d-g._start)*g._ts,s,o),d!==this._time||!this._ts&&!w){M=0,v&&(f+=this._zTime=-qr);break}}g=v}else{g=this._last;for(var B=r<0?r:d;g;){if(v=g._prev,(g._act||B<=g._end)&&g._ts&&M!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(B-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(B-g._start)*g._ts,s,o||so&&(g._initted||g._startAt)),d!==this._time||!this._ts&&!w){M=0,v&&(f+=this._zTime=B?-qr:qr);break}}g=v}}if(M&&!s&&(this.pause(),M.render(d>=a?0:-qr)._zTime=d>=a?1:-1,this._ts))return this._start=R,Qx(this),this.render(r,s,o);this._onUpdate&&!s&&_a(this,"onUpdate",!0),(f===l&&this._tTime>=this.totalDuration()||!f&&a)&&(R===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((r||!u)&&(f===l&&this._ts>0||!f&&this._ts<0)&&Eh(this,1),!s&&!(r<0&&!a)&&(f||a||!l)&&(_a(this,f===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(lc(s)||(s=Ba(this,s,r)),!(r instanceof s0)){if(oo(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Ts(r))return this.addLabel(r,s);if(Mi(r))r=qi.delayedCall(0,r);else return this}return this!==r?Kl(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Na);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof qi?s&&l.push(u):(o&&l.push(u),r&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Ts(r)?this.removeLabel(r):Mi(r)?this.killTweensOf(r):(Yx(this,r),r===this._recent&&(this._recent=this._last),ad(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=As(ma.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Ba(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=qi.delayedCall(0,s||n0,o);return a.data="isPause",this._hasPause=1,Kl(this,a,Ba(this,r))},t.removePause=function(r){var s=this._first;for(r=Ba(this,r);s;)s._start===r&&s.data==="isPause"&&Eh(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)uh!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=Ua(r),l=this._first,u=lc(s),f;l;)l instanceof qi?rz(l._targets,a)&&(u?(!uh||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(f=l.getTweensOf(a,s)).length&&o.push.apply(o,f),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=Ba(o,r),l=s,u=l.startAt,f=l.onStart,c=l.onStartParams,d=l.immediateRender,g,v=qi.to(o,Va({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||qr,onStart:function(){if(o.pause(),!g){var x=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());v._dur!==x&&xm(v,x,0,1).render(v._time,!0,!0),g=1}f&&f.apply(v,c||[])}},s));return d?v.render(0):v},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,Va({startAt:{time:Ba(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),zI(this,Ba(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),zI(this,Ba(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+qr)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=r);return ad(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),ad(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=Na,u,f,c;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(c=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),f=a._start,f>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Kl(o,a,f-a._delay,1)._lock=0):l=f,f<0&&a._ts&&(s-=f,(!c&&!o._dp||c&&c.smoothChildTiming)&&(o._start+=f/o._ts,o._time-=f,o._tTime-=f),o.shiftChildren(-f,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;xm(o,o===hi&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(hi._ts&&(UO(hi,k1(r,hi)),kO=ma.frame),ma.frame>=OI){OI+=va.autoSleep||120;var s=hi._first;if((!s||!s._ts)&&va.autoSleep&&ma._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||ma.sleep()}}},e}(s0);Va(bo.prototype,{_lock:0,_hasPause:0,_forcing:0});var Mz=function(e,t,n,r,s,o,a){var l=new Jo(this._pt,e,t,0,1,dk,null,s),u=0,f=0,c,d,g,v,A,x,w,M;for(l.b=n,l.e=r,n+="",r+="",(w=~r.indexOf("random("))&&(r=r0(r)),o&&(M=[n,r],o(M,e,t),n=M[0],r=M[1]),d=n.match(qw)||[];c=qw.exec(r);)v=c[0],A=r.substring(u,c.index),g?g=(g+1)%5:A.substr(-5)==="rgba("&&(g=1),v!==d[f++]&&(x=parseFloat(d[f-1])||0,l._pt={_next:l._pt,p:A||f===1?A:",",s:x,c:v.charAt(1)==="="?am(x,v)-x:parseFloat(v)-x,m:g&&g<4?Math.round:0},u=qw.lastIndex);return l.c=u<r.length?r.substring(u,r.length):"",l.fp=a,(DO.test(r)||w)&&(l.e=0),this._pt=l,l},CC=function(e,t,n,r,s,o,a,l,u,f){Mi(r)&&(r=r(s||0,e,o));var c=e[t],d=n!=="get"?n:Mi(c)?u?e[t.indexOf("set")||!Mi(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():c,g=Mi(c)?u?Pz:hk:IC,v;if(Ts(r)&&(~r.indexOf("random(")&&(r=r0(r)),r.charAt(1)==="="&&(v=am(d,r)+(io(d)||0),(v||v===0)&&(r=v))),!f||d!==r||qM)return!isNaN(d*r)&&r!==""?(v=new Jo(this._pt,e,t,+d||0,r-(d||0),typeof c=="boolean"?Bz:fk,0,g),u&&(v.fp=u),a&&v.modifier(a,this,e),this._pt=v):(!c&&!(t in e)&&EC(t,r),Mz.call(this,e,t,d,r,g,l||va.stringFilter,u))},bz=function(e,t,n,r,s){if(Mi(e)&&(e=D_(e,s,t,n,r)),!su(e)||e.style&&e.nodeType||oo(e)||IO(e))return Ts(e)?D_(e,s,t,n,r):e;var o={},a;for(a in e)o[a]=D_(e[a],s,t,n,r);return o},lk=function(e,t,n,r,s,o){var a,l,u,f;if(pa[e]&&(a=new pa[e]).init(s,a.rawVars?t[e]:bz(t[e],r,s,o,n),n,r,o)!==!1&&(n._pt=l=new Jo(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==nm))for(u=n._ptLookup[n._targets.indexOf(s)],f=a._props.length;f--;)u[a._props[f]]=l;return a},uh,qM,RC=function i(e,t,n){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,u=r.onUpdate,f=r.runBackwards,c=r.yoyoEase,d=r.keyframes,g=r.autoRevert,v=e._dur,A=e._startAt,x=e._targets,w=e.parent,M=w&&w.data==="nested"?w.vars.targets:x,b=e._overwrite==="auto"&&!xC,R=e.timeline,F,O,D,I,C,B,k,H,z,Z,ue,ae,ge;if(R&&(!d||!s)&&(s="none"),e._ease=ld(s,vm.ease),e._yEase=c?ik(ld(c===!0?s:c,vm.ease)):0,c&&e._yoyo&&!e._repeat&&(c=e._yEase,e._yEase=e._ease,e._ease=c),e._from=!R&&!!r.runBackwards,!R||d&&!r.stagger){if(H=x[0]?od(x[0]).harness:0,ae=H&&r[H.prop],F=O1(r,TC),A&&(A._zTime<0&&A.progress(1),t<0&&f&&a&&!g?A.render(-1,!0):A.revert(f&&v?_1:tz),A._lazy=0),o){if(Eh(e._startAt=qi.set(x,Va({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!A&&qo(l),startAt:null,delay:0,onUpdate:u&&function(){return _a(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(so||!a&&!g)&&e._startAt.revert(_1),a&&v&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(f&&v&&!A){if(t&&(a=!1),D=Va({overwrite:!1,data:"isFromStart",lazy:a&&!A&&qo(l),immediateRender:a,stagger:0,parent:w},F),ae&&(D[H.prop]=ae),Eh(e._startAt=qi.set(x,D)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(so?e._startAt.revert(_1):e._startAt.render(-1,!0)),e._zTime=t,!a)i(e._startAt,qr,qr);else if(!t)return}for(e._pt=e._ptCache=0,l=v&&qo(l)||l&&!v,O=0;O<x.length;O++){if(C=x[O],k=C._gsap||bC(x)[O]._gsap,e._ptLookup[O]=Z={},zM[k.id]&&gh.length&&F1(),ue=M===x?O:M.indexOf(C),H&&(z=new H).init(C,ae||F,e,ue,M)!==!1&&(e._pt=I=new Jo(e._pt,C,z.name,0,1,z.render,z,0,z.priority),z._props.forEach(function(ee){Z[ee]=I}),z.priority&&(B=1)),!H||ae)for(D in F)pa[D]&&(z=lk(D,F,e,ue,C,M))?z.priority&&(B=1):Z[D]=I=CC.call(e,C,D,"get",F[D],ue,M,0,r.stringFilter);e._op&&e._op[O]&&e.kill(C,e._op[O]),b&&e._pt&&(uh=e,hi.killTweensOf(C,Z,e.globalTime(t)),ge=!e.parent,uh=0),e._pt&&l&&(zM[k.id]=1)}B&&pk(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!ge,d&&t<=0&&R.render(Na,!0,!0)},Cz=function(e,t,n,r,s,o,a,l){var u=(e._pt&&e._ptCache||(e._ptCache={}))[t],f,c,d,g;if(!u)for(u=e._ptCache[t]=[],d=e._ptLookup,g=e._targets.length;g--;){if(f=d[g][t],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==t&&f.fp!==t;)f=f._next;if(!f)return qM=1,e.vars[t]="+=0",RC(e,a),qM=0,l?t0(t+" not eligible for reset"):1;u.push(f)}for(g=u.length;g--;)c=u[g],f=c._pt||c,f.s=(r||r===0)&&!s?r:f.s+(r||0)+o*f.c,f.c=n-f.s,c.e&&(c.e=Di(n)+io(c.e)),c.b&&(c.b=f.s+io(c.b))},Rz=function(e,t){var n=e[0]?od(e[0]).harness:0,r=n&&n.aliases,s,o,a,l;if(!r)return t;s=vd({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},Iz=function(e,t,n,r){var s=t.ease||r||"power1.inOut",o,a;if(oo(t))a=n[e]||(n[e]=[]),t.forEach(function(l,u){return a.push({t:u/(t.length-1)*100,v:l,e:s})});else for(o in t)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},D_=function(e,t,n,r,s){return Mi(e)?e.call(t,n,r,s):Ts(e)&&~e.indexOf("random(")?r0(e):e},uk=MC+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",ck={};Xo(uk+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return ck[i]=1});var qi=function(i){CO(e,i);function e(n,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=i.call(this,o?r:I_(r))||this;var l=a.vars,u=l.duration,f=l.delay,c=l.immediateRender,d=l.stagger,g=l.overwrite,v=l.keyframes,A=l.defaults,x=l.scrollTrigger,w=l.yoyoEase,M=r.parent||hi,b=(oo(n)||IO(n)?lc(n[0]):"length"in r)?[n]:Ua(n),R,F,O,D,I,C,B,k;if(a._targets=b.length?bC(b):t0("GSAP target "+n+" not found. https://gsap.com",!va.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=g,v||d||sy(u)||sy(f)){if(r=a.vars,R=a.timeline=new bo({data:"nested",defaults:A||{},targets:M&&M.data==="nested"?M.vars.targets:b}),R.kill(),R.parent=R._dp=Ju(a),R._start=0,d||sy(u)||sy(f)){if(D=b.length,B=d&&JO(d),su(d))for(I in d)~uk.indexOf(I)&&(k||(k={}),k[I]=d[I]);for(F=0;F<D;F++)O=O1(r,ck),O.stagger=0,w&&(O.yoyoEase=w),k&&vd(O,k),C=b[F],O.duration=+D_(u,Ju(a),F,C,b),O.delay=(+D_(f,Ju(a),F,C,b)||0)-a._delay,!d&&D===1&&O.delay&&(a._delay=f=O.delay,a._start+=f,O.delay=0),R.to(C,O,B?B(F,C,b):0),R._ease=rr.none;R.duration()?u=f=0:a.timeline=0}else if(v){I_(Va(R.vars.defaults,{ease:"none"})),R._ease=ld(v.ease||r.ease||"none");var H=0,z,Z,ue;if(oo(v))v.forEach(function(ae){return R.to(b,ae,">")}),R.duration();else{O={};for(I in v)I==="ease"||I==="easeEach"||Iz(I,v[I],O,v.easeEach);for(I in O)for(z=O[I].sort(function(ae,ge){return ae.t-ge.t}),H=0,F=0;F<z.length;F++)Z=z[F],ue={ease:Z.e,duration:(Z.t-(F?z[F-1].t:0))/100*u},ue[I]=Z.v,R.to(b,ue,H),H+=ue.duration;R.duration()<u&&R.to({},{duration:u-R.duration()})}}u||a.duration(u=R.duration())}else a.timeline=0;return g===!0&&!xC&&(uh=Ju(a),hi.killTweensOf(b),uh=0),Kl(M,Ju(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(c||!u&&!v&&a._start===As(M._time)&&qo(c)&&az(Ju(a))&&M.data!=="nested")&&(a._tTime=-qr,a.render(Math.max(0,-f)||0)),x&&WO(Ju(a),x),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,u=this._dur,f=r<0,c=r>l-qr&&!f?l:r<qr?0:r,d,g,v,A,x,w,M,b,R;if(!u)uz(this,r,s,o);else if(c!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f){if(d=c,b=this.timeline,this._repeat){if(A=u+this._rDelay,this._repeat<-1&&f)return this.totalTime(A*100+r,s,o);if(d=As(c%A),c===l?(v=this._repeat,d=u):(v=~~(c/A),v&&v===As(c/A)&&(d=u,v--),d>u&&(d=u)),w=this._yoyo&&v&1,w&&(R=this._yEase,d=u-d),x=ym(this._tTime,A),d===a&&!o&&this._initted&&v===x)return this._tTime=c,this;v!==x&&(b&&this._yEase&&sk(b,w),this.vars.repeatRefresh&&!w&&!this._lock&&this._time!==A&&this._initted&&(this._lock=o=1,this.render(As(A*v),!0).invalidate()._lock=0))}if(!this._initted){if(jO(this,f?r:d,o,s,c))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&v!==x))return this;if(u!==this._dur)return this.render(r,s,o)}if(this._tTime=c,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=M=(R||this._ease)(d/u),this._from&&(this.ratio=M=1-M),d&&!a&&!s&&!v&&(_a(this,"onStart"),this._tTime!==c))return this;for(g=this._pt;g;)g.r(M,g.d),g=g._next;b&&b.render(r<0?r:b._dur*b._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(f&&GM(this,r,s,o),_a(this,"onUpdate")),this._repeat&&v!==x&&this.vars.onRepeat&&!s&&this.parent&&_a(this,"onRepeat"),(c===this._tDur||!c)&&this._tTime===c&&(f&&!this._onUpdate&&GM(this,r,!0,!0),(r||!u)&&(c===this._tDur&&this._ts>0||!c&&this._ts<0)&&Eh(this,1),!s&&!(f&&!a)&&(c||a||w)&&(_a(this,c===l?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){i0||ma.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||RC(this,u),f=this._ease(u/this._dur),Cz(this,r,s,o,a,f,u,l)?this.resetTo(r,s,o,a,1):(Zx(this,0),this.parent||HO(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?__(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,uh&&uh.vars.overwrite!==!0)._first||__(this),this.parent&&o!==this.timeline.totalDuration()&&xm(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?Ua(r):a,u=this._ptLookup,f=this._pt,c,d,g,v,A,x,w;if((!s||s==="all")&&sz(a,l))return s==="all"&&(this._pt=0),__(this);for(c=this._op=this._op||[],s!=="all"&&(Ts(s)&&(A={},Xo(s,function(M){return A[M]=1}),s=A),s=Rz(a,s)),w=a.length;w--;)if(~l.indexOf(a[w])){d=u[w],s==="all"?(c[w]=s,v=d,g={}):(g=c[w]=c[w]||{},v=s);for(A in v)x=d&&d[A],x&&((!("kill"in x.d)||x.d.kill(A)===!0)&&Yx(this,x,"_pt"),delete d[A]),g!=="all"&&(g[A]=1)}return this._initted&&!this._pt&&f&&__(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return P_(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return P_(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return hi.killTweensOf(r,s,o)},e}(s0);Va(qi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Xo("staggerTo,staggerFrom,staggerFromTo",function(i){qi[i]=function(){var e=new bo,t=VM.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var IC=function(e,t,n){return e[t]=n},hk=function(e,t,n){return e[t](n)},Pz=function(e,t,n,r){return e[t](r.fp,n)},Dz=function(e,t,n){return e.setAttribute(t,n)},PC=function(e,t){return Mi(e[t])?hk:AC(e[t])&&e.setAttribute?Dz:IC},fk=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Bz=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},dk=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},DC=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Lz=function(e,t,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,n),s=o},Fz=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Yx(this,t,"_pt"):t.dep||(n=1),t=r;return!n},Oz=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},pk=function(e){for(var t=e._pt,n,r,s,o;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=n}e._pt=s},Jo=function(){function i(t,n,r,s,o,a,l,u,f){this.t=n,this.s=s,this.c=o,this.p=r,this.r=a||fk,this.d=l||this,this.set=u||IC,this.pr=f||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=Oz,this.m=n,this.mt=s,this.tween=r},i}();Xo(MC+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return TC[i]=1});xa.TweenMax=xa.TweenLite=qi;xa.TimelineLite=xa.TimelineMax=bo;hi=new bo({sortChildren:!1,defaults:vm,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});va.stringFilter=rk;var ud=[],y1={},kz=[],HI=0,Nz=0,Qw=function(e){return(y1[e]||kz).map(function(t){return t()})},XM=function(){var e=Date.now(),t=[];e-HI>2&&(Qw("matchMediaInit"),ud.forEach(function(n){var r=n.queries,s=n.conditions,o,a,l,u;for(a in r)o=ql.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(n.revert(),l&&t.push(n))}),Qw("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),HI=e,Qw("matchMedia"))},mk=function(){function i(t,n){this.selector=n&&WM(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Nz++,t&&this.add(t)}var e=i.prototype;return e.add=function(n,r,s){Mi(n)&&(s=r,r=n,n=Mi);var o=this,a=function(){var u=si,f=o.selector,c;return u&&u!==o&&u.data.push(o),s&&(o.selector=WM(s)),si=o,c=r.apply(o,arguments),Mi(c)&&o._r.push(c),si=u,o.selector=f,o.isReverted=!1,c};return o.last=a,n===Mi?a(o,function(l){return o.add(null,l)}):n?o[n]=a:a},e.ignore=function(n){var r=si;si=null,n(this),si=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof qi&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n?function(){for(var a=s.getTweens(),l=s.data.length,u;l--;)u=s.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(f){return a.splice(a.indexOf(f),1)}));for(a.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,c){return c.g-f.g||-1/0}).forEach(function(f){return f.t.revert(n)}),l=s.data.length;l--;)u=s.data[l],u instanceof bo?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof qi)&&u.revert&&u.revert(n);s._r.forEach(function(f){return f(n,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=ud.length;o--;)ud[o].id===this.id&&ud.splice(o,1)},e.revert=function(n){this.kill(n||{})},i}(),Uz=function(){function i(t){this.contexts=[],this.scope=t,si&&si.data.push(this)}var e=i.prototype;return e.add=function(n,r,s){su(n)||(n={matches:n});var o=new mk(0,s||this.scope),a=o.conditions={},l,u,f;si&&!o.selector&&(o.selector=si.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(u in n)u==="all"?f=1:(l=ql.matchMedia(n[u]),l&&(ud.indexOf(o)<0&&ud.push(o),(a[u]=l.matches)&&(f=1),l.addListener?l.addListener(XM):l.addEventListener("change",XM)));return f&&r(o,function(c){return o.add(null,c)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),N1={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return ek(r)})},timeline:function(e){return new bo(e)},getTweensOf:function(e,t){return hi.getTweensOf(e,t)},getProperty:function(e,t,n,r){Ts(e)&&(e=Ua(e)[0]);var s=od(e||{}).get,o=n?GO:zO;return n==="native"&&(n=""),e&&(t?o((pa[t]&&pa[t].get||s)(e,t,n,r)):function(a,l,u){return o((pa[a]&&pa[a].get||s)(e,a,l,u))})},quickSetter:function(e,t,n){if(e=Ua(e),e.length>1){var r=e.map(function(f){return Yo.quickSetter(f,t,n)}),s=r.length;return function(f){for(var c=s;c--;)r[c](f)}}e=e[0]||{};var o=pa[t],a=od(e),l=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(f){var c=new o;nm._pt=0,c.init(e,n?f+n:f,nm,0,[e]),c.render(1,c),nm._pt&&DC(1,nm)}:a.set(e,l);return o?u:function(f){return u(e,l,n?f+n:f,a,1)}},quickTo:function(e,t,n){var r,s=Yo.to(e,vd((r={},r[t]="+=0.1",r.paused=!0,r),n||{})),o=function(l,u,f){return s.resetTo(t,l,u,f)};return o.tween=s,o},isTweening:function(e){return hi.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=ld(e.ease,vm.ease)),kI(vm,e||{})},config:function(e){return kI(va,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!pa[a]&&!xa[a]&&t0(t+" effect requires "+a+" plugin.")}),Xw[t]=function(a,l,u){return n(Ua(a),Va(l||{},s),u)},o&&(bo.prototype[t]=function(a,l,u){return this.add(Xw[t](a,su(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){rr[e]=ld(t)},parseEase:function(e,t){return arguments.length?ld(e,t):rr},getById:function(e){return hi.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new bo(e),r,s;for(n.smoothChildTiming=qo(e.smoothChildTiming),hi.remove(n),n._dp=0,n._time=n._tTime=hi._time,r=hi._first;r;)s=r._next,(t||!(!r._dur&&r instanceof qi&&r.vars.onComplete===r._targets[0]))&&Kl(n,r,r._start-r._delay),r=s;return Kl(hi,n,0),n},context:function(e,t){return e?new mk(e,t):si},matchMedia:function(e){return new Uz(e)},matchMediaRefresh:function(){return ud.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||XM()},addEventListener:function(e,t){var n=y1[e]||(y1[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=y1[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:_z,wrapYoyo:vz,distribute:JO,random:YO,snap:KO,normalize:gz,getUnit:io,clamp:fz,splitColor:tk,toArray:Ua,selector:WM,mapRange:ZO,pipe:pz,unitize:mz,interpolate:yz,shuffle:XO},install:FO,effects:Xw,ticker:ma,updateRoot:bo.updateRoot,plugins:pa,globalTimeline:hi,core:{PropTween:Jo,globals:OO,Tween:qi,Timeline:bo,Animation:s0,getCache:od,_removeLinkedListItem:Yx,reverting:function(){return so},context:function(e){return e&&si&&(si.data.push(e),e._ctx=si),si},suppressOverwrites:function(e){return xC=e}}};Xo("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return N1[i]=qi[i]});ma.add(bo.updateRoot);nm=N1.to({},{duration:0});var zz=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Gz=function(e,t){var n=e._targets,r,s,o;for(r in t)for(s=n.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=zz(o,r)),o&&o.modifier&&o.modifier(t[r],e,n[s],r))},Zw=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,u;if(Ts(s)&&(l={},Xo(s,function(f){return l[f]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}Gz(a,s)}}}},Yo=N1.registerPlugin({name:"attr",init:function(e,t,n,r,s){var o,a,l;this.tween=n;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)so?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},Zw("roundProps",jM),Zw("modifiers"),Zw("snap",KO))||N1;qi.version=bo.version=Yo.version="3.12.5";LO=1;wC()&&Am();rr.Power0;rr.Power1;rr.Power2;rr.Power3;rr.Power4;rr.Linear;rr.Quad;rr.Cubic;rr.Quart;rr.Quint;rr.Strong;rr.Elastic;rr.Back;rr.SteppedEase;rr.Bounce;rr.Sine;rr.Expo;rr.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var VI,ch,lm,BC,Kf,WI,LC,Hz=function(){return typeof window<"u"},uc={},Hf=180/Math.PI,um=Math.PI/180,wp=Math.atan2,jI=1e8,FC=/([A-Z])/g,Vz=/(left|right|width|margin|padding|x)/i,Wz=/[\s,\(]\S/,Ql={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},JM=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},jz=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},qz=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Xz=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},gk=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},_k=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Jz=function(e,t,n){return e.style[t]=n},Kz=function(e,t,n){return e.style.setProperty(t,n)},Yz=function(e,t,n){return e._gsap[t]=n},Qz=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Zz=function(e,t,n,r,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},$z=function(e,t,n,r,s){var o=e._gsap;o[t]=n,o.renderTransform(s,o)},fi="transform",Ko=fi+"Origin",eG=function i(e,t){var n=this,r=this.target,s=r.style,o=r._gsap;if(e in uc&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Ql[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=Qu(r,a)}):this.tfm[e]=o.x?o[e]:Qu(r,e),e===Ko&&(this.tfm.zOrigin=o.zOrigin);else return Ql.transform.split(",").forEach(function(a){return i.call(n,a,t)});if(this.props.indexOf(fi)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Ko,t,"")),e=fi}(s||t)&&this.props.push(e,t,s[e])},vk=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},tG=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(FC,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=LC(),(!s||!s.isStart)&&!n[fi]&&(vk(n),r.zOrigin&&n[Ko]&&(n[Ko]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},yk=function(e,t){var n={target:e,props:[],revert:tG,save:eG};return e._gsap||Yo.core.getCache(e),t&&t.split(",").forEach(function(r){return n.save(r)}),n},xk,KM=function(e,t){var n=ch.createElementNS?ch.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ch.createElement(e);return n&&n.style?n:ch.createElement(e)},$l=function i(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(FC,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&i(e,wm(t)||t,1)||""},qI="O,Moz,ms,Ms,Webkit".split(","),wm=function(e,t,n){var r=t||Kf,s=r.style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(qI[o]+e in s););return o<0?null:(o===3?"ms":o>=0?qI[o]:"")+e},YM=function(){Hz()&&window.document&&(VI=window,ch=VI.document,lm=ch.documentElement,Kf=KM("div")||{style:{}},KM("div"),fi=wm(fi),Ko=fi+"Origin",Kf.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",xk=!!wm("perspective"),LC=Yo.core.reverting,BC=1)},$w=function i(e){var t=KM("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(lm.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),lm.removeChild(t),this.style.cssText=s,o},XI=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Ak=function(e){var t;try{t=e.getBBox()}catch{t=$w.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===$w||(t=$w.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+XI(e,["x","cx","x1"])||0,y:+XI(e,["y","cy","y1"])||0,width:0,height:0}:t},wk=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Ak(e))},yd=function(e,t){if(t){var n=e.style,r;t in uc&&t!==Ko&&(t=fi),n.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(r==="--"?t:t.replace(FC,"-$1").toLowerCase())):n.removeAttribute(t)}},hh=function(e,t,n,r,s,o){var a=new Jo(e._pt,t,n,0,1,o?_k:gk);return e._pt=a,a.b=r,a.e=s,e._props.push(n),a},JI={deg:1,rad:1,turn:1},nG={grid:1,flex:1},Th=function i(e,t,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=Kf.style,l=Vz.test(t),u=e.tagName.toLowerCase()==="svg",f=(u?"client":"offset")+(l?"Width":"Height"),c=100,d=r==="px",g=r==="%",v,A,x,w;if(r===o||!s||JI[r]||JI[o])return s;if(o!=="px"&&!d&&(s=i(e,t,n,"px")),w=e.getCTM&&wk(e),(g||o==="%")&&(uc[t]||~t.indexOf("adius")))return v=w?e.getBBox()[l?"width":"height"]:e[f],Di(g?s/v*c:s/100*v);if(a[l?"width":"height"]=c+(d?o:r),A=~t.indexOf("adius")||r==="em"&&e.appendChild&&!u?e:e.parentNode,w&&(A=(e.ownerSVGElement||{}).parentNode),(!A||A===ch||!A.appendChild)&&(A=ch.body),x=A._gsap,x&&g&&x.width&&l&&x.time===ma.time&&!x.uncache)return Di(s/x.width*c);if(g&&(t==="height"||t==="width")){var M=e.style[t];e.style[t]=c+r,v=e[f],M?e.style[t]=M:yd(e,t)}else(g||o==="%")&&!nG[$l(A,"display")]&&(a.position=$l(e,"position")),A===e&&(a.position="static"),A.appendChild(Kf),v=Kf[f],A.removeChild(Kf),a.position="absolute";return l&&g&&(x=od(A),x.time=ma.time,x.width=A[f]),Di(d?v*s/c:v&&s?c/v*s:0)},Qu=function(e,t,n,r){var s;return BC||YM(),t in Ql&&t!=="transform"&&(t=Ql[t],~t.indexOf(",")&&(t=t.split(",")[0])),uc[t]&&t!=="transform"?(s=a0(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:z1($l(e,Ko))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=U1[t]&&U1[t](e,t,n)||$l(e,t)||NO(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Th(e,t,s,n)+n:s},rG=function(e,t,n,r){if(!n||n==="none"){var s=wm(t,e,1),o=s&&$l(e,s,1);o&&o!==n?(t=s,n=o):t==="borderColor"&&(n=$l(e,"borderTopColor"))}var a=new Jo(this._pt,e.style,t,0,1,dk),l=0,u=0,f,c,d,g,v,A,x,w,M,b,R,F;if(a.b=n,a.e=r,n+="",r+="",r==="auto"&&(A=e.style[t],e.style[t]=r,r=$l(e,t)||r,A?e.style[t]=A:yd(e,t)),f=[n,r],rk(f),n=f[0],r=f[1],d=n.match(tm)||[],F=r.match(tm)||[],F.length){for(;c=tm.exec(r);)x=c[0],M=r.substring(l,c.index),v?v=(v+1)%5:(M.substr(-5)==="rgba("||M.substr(-5)==="hsla(")&&(v=1),x!==(A=d[u++]||"")&&(g=parseFloat(A)||0,R=A.substr((g+"").length),x.charAt(1)==="="&&(x=am(g,x)+R),w=parseFloat(x),b=x.substr((w+"").length),l=tm.lastIndex-b.length,b||(b=b||va.units[t]||R,l===r.length&&(r+=b,a.e+=b)),R!==b&&(g=Th(e,t,A,b)||0),a._pt={_next:a._pt,p:M||u===1?M:",",s:g,c:w-g,m:v&&v<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?_k:gk;return DO.test(r)&&(a.e=0),this._pt=a,a},KI={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},iG=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=KI[n]||n,t[1]=KI[r]||r,t.join(" ")},sG=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,s=t.u,o=n._gsap,a,l,u;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],uc[a]&&(l=1,a=a==="transformOrigin"?Ko:fi),yd(n,a);l&&(yd(n,fi),o&&(o.svg&&n.removeAttribute("transform"),a0(n,1),o.uncache=1,vk(r)))}},U1={clearProps:function(e,t,n,r,s){if(s.data!=="isFromStart"){var o=e._pt=new Jo(e._pt,t,n,0,0,sG);return o.u=r,o.pr=-10,o.tween=s,e._props.push(n),1}}},o0=[1,0,0,1,0,0],Sk={},Ek=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},YI=function(e){var t=$l(e,fi);return Ek(t)?o0:t.substr(7).match(PO).map(Di)},OC=function(e,t){var n=e._gsap||od(e),r=e.style,s=YI(e),o,a,l,u;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?o0:s):(s===o0&&!e.offsetParent&&e!==lm&&!n.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(u=1,a=e.nextElementSibling,lm.appendChild(e)),s=YI(e),l?r.display=l:yd(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):lm.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},QM=function(e,t,n,r,s,o){var a=e._gsap,l=s||OC(e,!0),u=a.xOrigin||0,f=a.yOrigin||0,c=a.xOffset||0,d=a.yOffset||0,g=l[0],v=l[1],A=l[2],x=l[3],w=l[4],M=l[5],b=t.split(" "),R=parseFloat(b[0])||0,F=parseFloat(b[1])||0,O,D,I,C;n?l!==o0&&(D=g*x-v*A)&&(I=R*(x/D)+F*(-A/D)+(A*M-x*w)/D,C=R*(-v/D)+F*(g/D)-(g*M-v*w)/D,R=I,F=C):(O=Ak(e),R=O.x+(~b[0].indexOf("%")?R/100*O.width:R),F=O.y+(~(b[1]||b[0]).indexOf("%")?F/100*O.height:F)),r||r!==!1&&a.smooth?(w=R-u,M=F-f,a.xOffset=c+(w*g+M*A)-w,a.yOffset=d+(w*v+M*x)-M):a.xOffset=a.yOffset=0,a.xOrigin=R,a.yOrigin=F,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[Ko]="0px 0px",o&&(hh(o,a,"xOrigin",u,R),hh(o,a,"yOrigin",f,F),hh(o,a,"xOffset",c,a.xOffset),hh(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",R+" "+F)},a0=function(e,t){var n=e._gsap||new ak(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,s=n.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=$l(e,Ko)||"0",f,c,d,g,v,A,x,w,M,b,R,F,O,D,I,C,B,k,H,z,Z,ue,ae,ge,ee,le,$,V,Q,fe,oe,he;return f=c=d=A=x=w=M=b=R=0,g=v=1,n.svg=!!(e.getCTM&&wk(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[fi]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[fi]!=="none"?l[fi]:"")),r.scale=r.rotate=r.translate="none"),D=OC(e,n.svg),n.svg&&(n.uncache?(ee=e.getBBox(),u=n.xOrigin-ee.x+"px "+(n.yOrigin-ee.y)+"px",ge=""):ge=!t&&e.getAttribute("data-svg-origin"),QM(e,ge||u,!!ge||n.originIsAbsolute,n.smooth!==!1,D)),F=n.xOrigin||0,O=n.yOrigin||0,D!==o0&&(k=D[0],H=D[1],z=D[2],Z=D[3],f=ue=D[4],c=ae=D[5],D.length===6?(g=Math.sqrt(k*k+H*H),v=Math.sqrt(Z*Z+z*z),A=k||H?wp(H,k)*Hf:0,M=z||Z?wp(z,Z)*Hf+A:0,M&&(v*=Math.abs(Math.cos(M*um))),n.svg&&(f-=F-(F*k+O*z),c-=O-(F*H+O*Z))):(he=D[6],fe=D[7],$=D[8],V=D[9],Q=D[10],oe=D[11],f=D[12],c=D[13],d=D[14],I=wp(he,Q),x=I*Hf,I&&(C=Math.cos(-I),B=Math.sin(-I),ge=ue*C+$*B,ee=ae*C+V*B,le=he*C+Q*B,$=ue*-B+$*C,V=ae*-B+V*C,Q=he*-B+Q*C,oe=fe*-B+oe*C,ue=ge,ae=ee,he=le),I=wp(-z,Q),w=I*Hf,I&&(C=Math.cos(-I),B=Math.sin(-I),ge=k*C-$*B,ee=H*C-V*B,le=z*C-Q*B,oe=Z*B+oe*C,k=ge,H=ee,z=le),I=wp(H,k),A=I*Hf,I&&(C=Math.cos(I),B=Math.sin(I),ge=k*C+H*B,ee=ue*C+ae*B,H=H*C-k*B,ae=ae*C-ue*B,k=ge,ue=ee),x&&Math.abs(x)+Math.abs(A)>359.9&&(x=A=0,w=180-w),g=Di(Math.sqrt(k*k+H*H+z*z)),v=Di(Math.sqrt(ae*ae+he*he)),I=wp(ue,ae),M=Math.abs(I)>2e-4?I*Hf:0,R=oe?1/(oe<0?-oe:oe):0),n.svg&&(ge=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Ek($l(e,fi)),ge&&e.setAttribute("transform",ge))),Math.abs(M)>90&&Math.abs(M)<270&&(s?(g*=-1,M+=A<=0?180:-180,A+=A<=0?180:-180):(v*=-1,M+=M<=0?180:-180)),t=t||n.uncache,n.x=f-((n.xPercent=f&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-f)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=c-((n.yPercent=c&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-c)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=d+o,n.scaleX=Di(g),n.scaleY=Di(v),n.rotation=Di(A)+a,n.rotationX=Di(x)+a,n.rotationY=Di(w)+a,n.skewX=M+a,n.skewY=b+a,n.transformPerspective=R+o,(n.zOrigin=parseFloat(u.split(" ")[2])||!t&&n.zOrigin||0)&&(r[Ko]=z1(u)),n.xOffset=n.yOffset=0,n.force3D=va.force3D,n.renderTransform=n.svg?aG:xk?Tk:oG,n.uncache=0,n},z1=function(e){return(e=e.split(" "))[0]+" "+e[1]},eS=function(e,t,n){var r=io(t);return Di(parseFloat(t)+parseFloat(Th(e,"x",n+"px",r)))+r},oG=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Tk(e,t)},Ef="0deg",Vg="0px",Tf=") ",Tk=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.z,u=n.rotation,f=n.rotationY,c=n.rotationX,d=n.skewX,g=n.skewY,v=n.scaleX,A=n.scaleY,x=n.transformPerspective,w=n.force3D,M=n.target,b=n.zOrigin,R="",F=w==="auto"&&e&&e!==1||w===!0;if(b&&(c!==Ef||f!==Ef)){var O=parseFloat(f)*um,D=Math.sin(O),I=Math.cos(O),C;O=parseFloat(c)*um,C=Math.cos(O),o=eS(M,o,D*C*-b),a=eS(M,a,-Math.sin(O)*-b),l=eS(M,l,I*C*-b+b)}x!==Vg&&(R+="perspective("+x+Tf),(r||s)&&(R+="translate("+r+"%, "+s+"%) "),(F||o!==Vg||a!==Vg||l!==Vg)&&(R+=l!==Vg||F?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Tf),u!==Ef&&(R+="rotate("+u+Tf),f!==Ef&&(R+="rotateY("+f+Tf),c!==Ef&&(R+="rotateX("+c+Tf),(d!==Ef||g!==Ef)&&(R+="skew("+d+", "+g+Tf),(v!==1||A!==1)&&(R+="scale("+v+", "+A+Tf),M.style[fi]=R||"translate(0, 0)"},aG=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.rotation,u=n.skewX,f=n.skewY,c=n.scaleX,d=n.scaleY,g=n.target,v=n.xOrigin,A=n.yOrigin,x=n.xOffset,w=n.yOffset,M=n.forceCSS,b=parseFloat(o),R=parseFloat(a),F,O,D,I,C;l=parseFloat(l),u=parseFloat(u),f=parseFloat(f),f&&(f=parseFloat(f),u+=f,l+=f),l||u?(l*=um,u*=um,F=Math.cos(l)*c,O=Math.sin(l)*c,D=Math.sin(l-u)*-d,I=Math.cos(l-u)*d,u&&(f*=um,C=Math.tan(u-f),C=Math.sqrt(1+C*C),D*=C,I*=C,f&&(C=Math.tan(f),C=Math.sqrt(1+C*C),F*=C,O*=C)),F=Di(F),O=Di(O),D=Di(D),I=Di(I)):(F=c,I=d,O=D=0),(b&&!~(o+"").indexOf("px")||R&&!~(a+"").indexOf("px"))&&(b=Th(g,"x",o,"px"),R=Th(g,"y",a,"px")),(v||A||x||w)&&(b=Di(b+v-(v*F+A*D)+x),R=Di(R+A-(v*O+A*I)+w)),(r||s)&&(C=g.getBBox(),b=Di(b+r/100*C.width),R=Di(R+s/100*C.height)),C="matrix("+F+","+O+","+D+","+I+","+b+","+R+")",g.setAttribute("transform",C),M&&(g.style[fi]=C)},lG=function(e,t,n,r,s){var o=360,a=Ts(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Hf:1),u=l-r,f=r+u+"deg",c,d;return a&&(c=s.split("_")[1],c==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),c==="cw"&&u<0?u=(u+o*jI)%o-~~(u/o)*o:c==="ccw"&&u>0&&(u=(u-o*jI)%o-~~(u/o)*o)),e._pt=d=new Jo(e._pt,t,n,r,u,jz),d.e=f,d.u="deg",e._props.push(n),d},QI=function(e,t){for(var n in t)e[n]=t[n];return e},uG=function(e,t,n){var r=QI({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,l,u,f,c,d,g,v;r.svg?(u=n.getAttribute("transform"),n.setAttribute("transform",""),o[fi]=t,a=a0(n,1),yd(n,fi),n.setAttribute("transform",u)):(u=getComputedStyle(n)[fi],o[fi]=t,a=a0(n,1),o[fi]=u);for(l in uc)u=r[l],f=a[l],u!==f&&s.indexOf(l)<0&&(g=io(u),v=io(f),c=g!==v?Th(n,l,u,v):parseFloat(u),d=parseFloat(f),e._pt=new Jo(e._pt,a,l,c,d-c,JM),e._pt.u=v||0,e._props.push(l));QI(a,r)};Xo("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",r="Bottom",s="Left",o=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(a){return e<2?i+a:"border"+a+i});U1[e>1?"border"+i:i]=function(a,l,u,f,c){var d,g;if(arguments.length<4)return d=o.map(function(v){return Qu(a,v,u)}),g=d.join(" "),g.split(d[0]).length===5?d[0]:g;d=(f+"").split(" "),g={},o.forEach(function(v,A){return g[v]=d[A]=d[A]||d[(A-1)/2|0]}),a.init(l,g,c)}});var Mk={name:"css",register:YM,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var o=this._props,a=e.style,l=n.vars.startAt,u,f,c,d,g,v,A,x,w,M,b,R,F,O,D,I;BC||YM(),this.styles=this.styles||yk(e),I=this.styles.props,this.tween=n;for(A in t)if(A!=="autoRound"&&(f=t[A],!(pa[A]&&lk(A,t,n,r,e,s)))){if(g=typeof f,v=U1[A],g==="function"&&(f=f.call(n,r,e,s),g=typeof f),g==="string"&&~f.indexOf("random(")&&(f=r0(f)),v)v(this,e,A,f,n)&&(D=1);else if(A.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(A)+"").trim(),f+="",_h.lastIndex=0,_h.test(u)||(x=io(u),w=io(f)),w?x!==w&&(u=Th(e,A,u,w)+w):x&&(f+=x),this.add(a,"setProperty",u,f,r,s,0,0,A),o.push(A),I.push(A,0,a[A]);else if(g!=="undefined"){if(l&&A in l?(u=typeof l[A]=="function"?l[A].call(n,r,e,s):l[A],Ts(u)&&~u.indexOf("random(")&&(u=r0(u)),io(u+"")||u==="auto"||(u+=va.units[A]||io(Qu(e,A))||""),(u+"").charAt(1)==="="&&(u=Qu(e,A))):u=Qu(e,A),d=parseFloat(u),M=g==="string"&&f.charAt(1)==="="&&f.substr(0,2),M&&(f=f.substr(2)),c=parseFloat(f),A in Ql&&(A==="autoAlpha"&&(d===1&&Qu(e,"visibility")==="hidden"&&c&&(d=0),I.push("visibility",0,a.visibility),hh(this,a,"visibility",d?"inherit":"hidden",c?"inherit":"hidden",!c)),A!=="scale"&&A!=="transform"&&(A=Ql[A],~A.indexOf(",")&&(A=A.split(",")[0]))),b=A in uc,b){if(this.styles.save(A),R||(F=e._gsap,F.renderTransform&&!t.parseTransform||a0(e,t.parseTransform),O=t.smoothOrigin!==!1&&F.smooth,R=this._pt=new Jo(this._pt,a,fi,0,1,F.renderTransform,F,0,-1),R.dep=1),A==="scale")this._pt=new Jo(this._pt,F,"scaleY",F.scaleY,(M?am(F.scaleY,M+c):c)-F.scaleY||0,JM),this._pt.u=0,o.push("scaleY",A),A+="X";else if(A==="transformOrigin"){I.push(Ko,0,a[Ko]),f=iG(f),F.svg?QM(e,f,0,O,0,this):(w=parseFloat(f.split(" ")[2])||0,w!==F.zOrigin&&hh(this,F,"zOrigin",F.zOrigin,w),hh(this,a,A,z1(u),z1(f)));continue}else if(A==="svgOrigin"){QM(e,f,1,O,0,this);continue}else if(A in Sk){lG(this,F,A,d,M?am(d,M+f):f);continue}else if(A==="smoothOrigin"){hh(this,F,"smooth",F.smooth,f);continue}else if(A==="force3D"){F[A]=f;continue}else if(A==="transform"){uG(this,f,e);continue}}else A in a||(A=wm(A)||A);if(b||(c||c===0)&&(d||d===0)&&!Wz.test(f)&&A in a)x=(u+"").substr((d+"").length),c||(c=0),w=io(f)||(A in va.units?va.units[A]:x),x!==w&&(d=Th(e,A,u,w)),this._pt=new Jo(this._pt,b?F:a,A,d,(M?am(d,M+c):c)-d,!b&&(w==="px"||A==="zIndex")&&t.autoRound!==!1?Xz:JM),this._pt.u=w||0,x!==w&&w!=="%"&&(this._pt.b=u,this._pt.r=qz);else if(A in a)rG.call(this,e,A,u,M?M+f:f);else if(A in e)this.add(e,A,u||e[A],M?M+f:f,r,s);else if(A!=="parseTransform"){EC(A,f);continue}b||(A in a?I.push(A,0,a[A]):I.push(A,1,u||e[A])),o.push(A)}}D&&pk(this)},render:function(e,t){if(t.tween._time||!LC())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Qu,aliases:Ql,getSetter:function(e,t,n){var r=Ql[t];return r&&r.indexOf(",")<0&&(t=r),t in uc&&t!==Ko&&(e._gsap.x||Qu(e,"x"))?n&&WI===n?t==="scale"?Qz:Yz:(WI=n||{})&&(t==="scale"?Zz:$z):e.style&&!AC(e.style[t])?Jz:~t.indexOf("-")?Kz:PC(e,t)},core:{_removeProperty:yd,_getMatrix:OC}};Yo.utils.checkPrefix=wm;Yo.core.getStyleSaver=yk;(function(i,e,t,n){var r=Xo(i+","+e+","+t,function(s){uc[s]=1});Xo(e,function(s){va.units[s]="deg",Sk[s]=1}),Ql[r[13]]=i+","+e,Xo(n,function(s){var o=s.split(":");Ql[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Xo("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){va.units[i]="px"});Yo.registerPlugin(Mk);var Qr=Yo.registerPlugin(Mk)||Yo;Qr.core.Tween;const ZI=i=>{let e;const t=new Set,n=(u,f)=>{const c=typeof u=="function"?u(e):u;if(!Object.is(c,e)){const d=e;e=f??(typeof c!="object"||c===null)?c:Object.assign({},e,c),t.forEach(g=>g(e,d))}},r=()=>e,a={setState:n,getState:r,getInitialState:()=>l,subscribe:u=>(t.add(u),()=>t.delete(u))},l=e=i(n,r,a);return a},cG=i=>i?ZI(i):ZI,hG=i=>i;function fG(i,e=hG){const t=jo.useSyncExternalStore(i.subscribe,()=>e(i.getState()),()=>e(i.getInitialState()));return jo.useDebugValue(t),t}const $I=i=>{const e=cG(i),t=n=>fG(e,n);return Object.assign(t,e),t},Pd=i=>i?$I(i):$I,Dd=Pd(i=>({isScrolling:!1,setIsScrolling:e=>i({isScrolling:e})})),$x=(i,e)=>{!e||!i.length||(Qr.to(i,{y:-10,duration:.8,ease:"elastic.out(15, 120)"}),Qr.to(i,{y:0,delay:.3,duration:.8,ease:"elastic.out(1.2, 0.2)"}))},dG=({setDialogText:i})=>{const e=me.useRef(null),t=me.useRef(null),n=me.useRef(null),r=[e.current,t.current,n.current],s=Dd(l=>l.isScrolling),o=()=>{new Howl({src:["assets/sounds/elastic.mp3"],volume:.06}).play()},a=l=>{let u=!1,f,c,d,g=!1;const v=()=>{Qr.set(l,{x:0,y:0,scale:1});const M=l.getBoundingClientRect();f=M.left+M.width/2,c=M.top+M.height/2-35,d=M.width},A=M=>{let b=!1;const R=u?1.3:1,F=M.clientX-f,O=M.clientY-c;Math.sqrt(F**2+O**2)<d*R&&(b=!0,u||(u=!0),x(M.clientX,M.clientY)),!b&&u&&(w(),u=!1)},x=(M,b)=>{Qr.to(l,{x:(M-f)*.5,y:(b-c)*.4,scale:1.5,rotate:l===l.coffeeRef?"-":"10deg",ease:"power1",duration:.2,onStart:()=>{g||(o(),g=!0)}})},w=()=>{Qr.to(l,{x:0,y:0,scale:1,rotate:"0deg",ease:"elastic.out(1.2, 0.4)",duration:.5,onStart:()=>{g=!1}}),l.style.zIndex=1};return v(),window.addEventListener("mousemove",A),window.addEventListener("resize",v),()=>{window.removeEventListener("mousemove",A),window.removeEventListener("resize",v)}};return me.useEffect(()=>{const l=a(e.current),u=a(t.current),f=a(n.current);return()=>{l(),u(),f()}},[]),me.useEffect(()=>{$x(r,s)},[s]),re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"absolute bottom-2 right-2 z-50 lg:bottom-4 lg:right-14 4xl:bottom-12 4xl:right-20",children:re.jsx("img",{ref:t,src:X9,alt:"github-logo",className:"z-50 h-auto w-12 cursor-pointer select-none drop-shadow-lg md:w-14 3xl:w-20 4xl:w-44",onClick:()=>{window.open("https://www.linkedin.com/in/franciscoagustinr/","_blank")},onMouseEnter:()=>{i(`Where connections bloom <img loading="eager" src=${K9} class='inline-block w-6 animate-pulse'/>`)},onMouseLeave:()=>{i("")}})}),re.jsx("div",{className:"absolute bottom-2 right-16 z-50 md:right-20 lg:bottom-4 lg:right-36 3xl:right-44 4xl:bottom-12 4xl:right-80",children:re.jsx("img",{ref:e,src:q9,alt:"github-logo",className:"z-50 h-auto w-12 cursor-pointer select-none drop-shadow-lg md:w-14 3xl:w-20 4xl:w-44",onClick:()=>{window.open("https://github.com/franciscoagustinr","_blank")},onMouseEnter:()=>{i(`Check out my most exciting projects! <img loading="eager" src=${MO} class='inline-block w-6 animate-ping'/>`)},onMouseLeave:()=>{i("")}})}),re.jsx("div",{className:"absolute bottom-2 left-1 z-50 lg:bottom-3 lg:left-5 4xl:bottom-12 4xl:left-14",children:re.jsx("img",{ref:n,src:J9,alt:"Coffee Cup",className:"z-50 w-12 -rotate-12 cursor-pointer select-none drop-shadow-lg md:w-16 lg:w-20 3xl:w-24 4xl:w-56",onClick:()=>{window.open("https://cafecito.app/franciscoagustinr","_blank")},onMouseEnter:()=>{i(`Invite me a coffee! <img loading="eager" src=${bO} class='inline-block w-6 animate-spin'/>`)},onMouseLeave:()=>{i("")}})})]})};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Gm="171",pG={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},mG={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bk=0,ZM=1,Ck=2,gG=3,Rk=0,eA=1,B_=2,Sl=3,Il=0,ao=1,Co=2,eu=0,cd=1,$M=2,eb=3,tb=4,Ik=5,lh=100,Pk=101,Dk=102,Bk=103,Lk=104,Fk=200,Ok=201,kk=202,Nk=203,G1=204,H1=205,Uk=206,zk=207,Gk=208,Hk=209,Vk=210,Wk=211,jk=212,qk=213,Xk=214,V1=0,W1=1,j1=2,xd=3,q1=4,X1=5,J1=6,K1=7,j0=0,Jk=1,Kk=2,tu=0,Yk=1,Qk=2,Zk=3,kC=4,$k=5,eN=6,tN=7,nb="attached",nN="detached",Mh=300,ou=301,bh=302,Sm=303,l0=304,Hm=306,Ch=1e3,Fi=1001,Em=1002,Ss=1003,tA=1004,_G=1004,Yf=1005,vG=1005,pr=1006,cm=1007,yG=1007,za=1008,rb=1008,Qo=1009,nA=1010,rA=1011,Tm=1012,q0=1013,au=1014,pi=1015,ws=1016,iA=1017,sA=1018,Ad=1020,NC=35902,UC=1021,zC=1022,Oi=1023,GC=1024,HC=1025,hd=1026,wd=1027,X0=1028,J0=1029,VC=1030,oA=1031,xG=1032,aA=1033,L_=33776,F_=33777,O_=33778,k_=33779,Y1=35840,Q1=35841,Z1=35842,$1=35843,ex=36196,tx=37492,nx=37496,rx=37808,ix=37809,sx=37810,ox=37811,ax=37812,lx=37813,ux=37814,cx=37815,hx=37816,fx=37817,dx=37818,px=37819,mx=37820,gx=37821,N_=36492,_x=36494,vx=36495,WC=36283,yx=36284,xx=36285,Ax=36286,rN=2200,iN=2201,sN=2202,Mm=2300,bm=2301,x1=2302,Qf=2400,Zf=2401,u0=2402,lA=2500,jC=2501,oN=0,qC=1,wx=2,aN=3200,XC=3201,AG=3202,wG=3203,Uh=0,lN=1,tc="",Mo="srgb",lu="srgb-linear",c0="linear",br="srgb",SG=0,Vf=7680,EG=7681,TG=7682,MG=7683,bG=34055,CG=34056,RG=5386,IG=512,PG=513,DG=514,BG=515,LG=516,FG=517,OG=518,ib=519,uN=512,cN=513,hN=514,JC=515,fN=516,dN=517,pN=518,mN=519,h0=35044,kG=35048,NG=35040,UG=35045,zG=35049,GG=35041,HG=35046,VG=35050,WG=35042,jG="100",sb="300 es",Zl=2e3,f0=2001;class hu{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Zs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let eP=1234567;const fd=Math.PI/180,Cm=180/Math.PI;function ya(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Zs[i&255]+Zs[i>>8&255]+Zs[i>>16&255]+Zs[i>>24&255]+"-"+Zs[e&255]+Zs[e>>8&255]+"-"+Zs[e>>16&15|64]+Zs[e>>24&255]+"-"+Zs[t&63|128]+Zs[t>>8&255]+"-"+Zs[t>>16&255]+Zs[t>>24&255]+Zs[n&255]+Zs[n>>8&255]+Zs[n>>16&255]+Zs[n>>24&255]).toLowerCase()}function Fn(i,e,t){return Math.max(e,Math.min(t,i))}function KC(i,e){return(i%e+e)%e}function qG(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function XG(i,e,t){return i!==e?(t-i)/(e-i):0}function U_(i,e,t){return(1-t)*i+t*e}function JG(i,e,t,n){return U_(i,e,1-Math.exp(-t*n))}function KG(i,e=1){return e-Math.abs(KC(i,e*2)-e)}function YG(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function QG(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function ZG(i,e){return i+Math.floor(Math.random()*(e-i+1))}function $G(i,e){return i+Math.random()*(e-i)}function e8(i){return i*(.5-Math.random())}function t8(i){i!==void 0&&(eP=i);let e=eP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function n8(i){return i*fd}function r8(i){return i*Cm}function i8(i){return(i&i-1)===0&&i!==0}function s8(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function o8(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function a8(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+n)/2),f=o((e+n)/2),c=s((e-n)/2),d=o((e-n)/2),g=s((n-e)/2),v=o((n-e)/2);switch(r){case"XYX":i.set(a*f,l*c,l*d,a*u);break;case"YZY":i.set(l*d,a*f,l*c,a*u);break;case"ZXZ":i.set(l*c,l*d,a*f,a*u);break;case"XZX":i.set(a*f,l*v,l*g,a*u);break;case"YXY":i.set(l*g,a*f,l*v,a*u);break;case"ZYZ":i.set(l*v,l*g,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ro(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Gn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const YC={DEG2RAD:fd,RAD2DEG:Cm,generateUUID:ya,clamp:Fn,euclideanModulo:KC,mapLinear:qG,inverseLerp:XG,lerp:U_,damp:JG,pingpong:KG,smoothstep:YG,smootherstep:QG,randInt:ZG,randFloat:$G,randFloatSpread:e8,seededRandom:t8,degToRad:n8,radToDeg:r8,isPowerOfTwo:i8,ceilPowerOfTwo:s8,floorPowerOfTwo:o8,setQuaternionFromProperEuler:a8,normalize:Gn,denormalize:Ro};class mt{constructor(e=0,t=0){mt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Fn(this.x,e.x,t.x),this.y=Fn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Fn(this.x,e,t),this.y=Fn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Fn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Fn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ln{constructor(e,t,n,r,s,o,a,l,u){Ln.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,u)}set(e,t,n,r,s,o,a,l,u){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=s,f[5]=l,f[6]=n,f[7]=o,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],u=n[1],f=n[4],c=n[7],d=n[2],g=n[5],v=n[8],A=r[0],x=r[3],w=r[6],M=r[1],b=r[4],R=r[7],F=r[2],O=r[5],D=r[8];return s[0]=o*A+a*M+l*F,s[3]=o*x+a*b+l*O,s[6]=o*w+a*R+l*D,s[1]=u*A+f*M+c*F,s[4]=u*x+f*b+c*O,s[7]=u*w+f*R+c*D,s[2]=d*A+g*M+v*F,s[5]=d*x+g*b+v*O,s[8]=d*w+g*R+v*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8];return t*o*f-t*a*u-n*s*f+n*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8],c=f*o-a*u,d=a*l-f*s,g=u*s-o*l,v=t*c+n*d+r*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/v;return e[0]=c*A,e[1]=(r*u-f*n)*A,e[2]=(a*n-r*o)*A,e[3]=d*A,e[4]=(f*t-r*l)*A,e[5]=(r*s-a*t)*A,e[6]=g*A,e[7]=(n*l-u*t)*A,e[8]=(o*t-n*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(n*l,n*u,-n*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(tS.makeScale(e,t)),this}rotate(e){return this.premultiply(tS.makeRotation(-e)),this}translate(e,t){return this.premultiply(tS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const tS=new Ln;function gN(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const l8={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function rm(i,e){return new l8[i](e)}function d0(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function _N(){const i=d0("canvas");return i.style.display="block",i}const tP={};function qp(i){i in tP||(tP[i]=!0,console.warn(i))}function u8(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function c8(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function h8(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const nP=new Ln().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),rP=new Ln().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function f8(){const i={enabled:!0,workingColorSpace:lu,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===br&&(r.r=sc(r.r),r.g=sc(r.g),r.b=sc(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===br&&(r.r=hm(r.r),r.g=hm(r.g),r.b=hm(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===tc?c0:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[lu]:{primaries:e,whitePoint:n,transfer:c0,toXYZ:nP,fromXYZ:rP,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Mo},outputColorSpaceConfig:{drawingBufferColorSpace:Mo}},[Mo]:{primaries:e,whitePoint:n,transfer:br,toXYZ:nP,fromXYZ:rP,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Mo}}}),i}const cr=f8();function sc(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function hm(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Sp;class vN{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Sp===void 0&&(Sp=d0("canvas")),Sp.width=e.width,Sp.height=e.height;const n=Sp.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Sp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=d0("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=sc(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(sc(t[n]/255)*255):t[n]=sc(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let d8=0;class $f{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:d8++}),this.uuid=ya(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(nS(r[o].image)):s.push(nS(r[o]))}else s=nS(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function nS(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?vN.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let p8=0;class mr extends hu{constructor(e=mr.DEFAULT_IMAGE,t=mr.DEFAULT_MAPPING,n=Fi,r=Fi,s=pr,o=za,a=Oi,l=Qo,u=mr.DEFAULT_ANISOTROPY,f=tc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:p8++}),this.uuid=ya(),this.name="",this.source=new $f(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new mt(0,0),this.repeat=new mt(1,1),this.center=new mt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ln,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Mh)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ch:e.x=e.x-Math.floor(e.x);break;case Fi:e.x=e.x<0?0:1;break;case Em:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ch:e.y=e.y-Math.floor(e.y);break;case Fi:e.y=e.y<0?0:1;break;case Em:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}mr.DEFAULT_IMAGE=null;mr.DEFAULT_MAPPING=Mh;mr.DEFAULT_ANISOTROPY=1;class nr{constructor(e=0,t=0,n=0,r=1){nr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,u=l[0],f=l[4],c=l[8],d=l[1],g=l[5],v=l[9],A=l[2],x=l[6],w=l[10];if(Math.abs(f-d)<.01&&Math.abs(c-A)<.01&&Math.abs(v-x)<.01){if(Math.abs(f+d)<.1&&Math.abs(c+A)<.1&&Math.abs(v+x)<.1&&Math.abs(u+g+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(u+1)/2,R=(g+1)/2,F=(w+1)/2,O=(f+d)/4,D=(c+A)/4,I=(v+x)/4;return b>R&&b>F?b<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(b),r=O/n,s=D/n):R>F?R<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(R),n=O/r,s=I/r):F<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(F),n=D/s,r=I/s),this.set(n,r,s,t),this}let M=Math.sqrt((x-v)*(x-v)+(c-A)*(c-A)+(d-f)*(d-f));return Math.abs(M)<.001&&(M=1),this.x=(x-v)/M,this.y=(c-A)/M,this.z=(d-f)/M,this.w=Math.acos((u+g+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Fn(this.x,e.x,t.x),this.y=Fn(this.y,e.y,t.y),this.z=Fn(this.z,e.z,t.z),this.w=Fn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Fn(this.x,e,t),this.y=Fn(this.y,e,t),this.z=Fn(this.z,e,t),this.w=Fn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Fn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class yN extends hu{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new nr(0,0,e,t),this.scissorTest=!1,this.viewport=new nr(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:pr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new mr(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new $f(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Po extends yN{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class uA extends mr{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ss,this.minFilter=Ss,this.wrapR=Fi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class m8 extends Po{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new uA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class QC extends mr{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ss,this.minFilter=Ss,this.wrapR=Fi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class g8 extends Po{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new QC(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class lo{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],u=n[r+1],f=n[r+2],c=n[r+3];const d=s[o+0],g=s[o+1],v=s[o+2],A=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=f,e[t+3]=c;return}if(a===1){e[t+0]=d,e[t+1]=g,e[t+2]=v,e[t+3]=A;return}if(c!==A||l!==d||u!==g||f!==v){let x=1-a;const w=l*d+u*g+f*v+c*A,M=w>=0?1:-1,b=1-w*w;if(b>Number.EPSILON){const F=Math.sqrt(b),O=Math.atan2(F,w*M);x=Math.sin(x*O)/F,a=Math.sin(a*O)/F}const R=a*M;if(l=l*x+d*R,u=u*x+g*R,f=f*x+v*R,c=c*x+A*R,x===1-a){const F=1/Math.sqrt(l*l+u*u+f*f+c*c);l*=F,u*=F,f*=F,c*=F}}e[t]=l,e[t+1]=u,e[t+2]=f,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],u=n[r+2],f=n[r+3],c=s[o],d=s[o+1],g=s[o+2],v=s[o+3];return e[t]=a*v+f*c+l*g-u*d,e[t+1]=l*v+f*d+u*c-a*g,e[t+2]=u*v+f*g+a*d-l*c,e[t+3]=f*v-a*c-l*d-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(n/2),f=a(r/2),c=a(s/2),d=l(n/2),g=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=d*f*c+u*g*v,this._y=u*g*c-d*f*v,this._z=u*f*v+d*g*c,this._w=u*f*c-d*g*v;break;case"YXZ":this._x=d*f*c+u*g*v,this._y=u*g*c-d*f*v,this._z=u*f*v-d*g*c,this._w=u*f*c+d*g*v;break;case"ZXY":this._x=d*f*c-u*g*v,this._y=u*g*c+d*f*v,this._z=u*f*v+d*g*c,this._w=u*f*c-d*g*v;break;case"ZYX":this._x=d*f*c-u*g*v,this._y=u*g*c+d*f*v,this._z=u*f*v-d*g*c,this._w=u*f*c+d*g*v;break;case"YZX":this._x=d*f*c+u*g*v,this._y=u*g*c+d*f*v,this._z=u*f*v-d*g*c,this._w=u*f*c-d*g*v;break;case"XZY":this._x=d*f*c-u*g*v,this._y=u*g*c-d*f*v,this._z=u*f*v+d*g*c,this._w=u*f*c+d*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],f=t[6],c=t[10],d=n+a+c;if(d>0){const g=.5/Math.sqrt(d+1);this._w=.25/g,this._x=(f-l)*g,this._y=(s-u)*g,this._z=(o-r)*g}else if(n>a&&n>c){const g=2*Math.sqrt(1+n-a-c);this._w=(f-l)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+u)/g}else if(a>c){const g=2*Math.sqrt(1+a-n-c);this._w=(s-u)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(l+f)/g}else{const g=2*Math.sqrt(1+c-n-a);this._w=(o-r)/g,this._x=(s+u)/g,this._y=(l+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Fn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,f=t._w;return this._x=n*f+o*a+r*u-s*l,this._y=r*f+o*l+s*a-n*u,this._z=s*f+o*u+n*l-r*a,this._w=o*f-n*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*n+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),f=Math.atan2(u,a),c=Math.sin((1-t)*f)/u,d=Math.sin(t*f)/u;return this._w=o*c+this._w*d,this._x=n*c+this._x*d,this._y=r*c+this._y*d,this._z=s*c+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(e=0,t=0,n=0){ce.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(iP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(iP.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*n),f=2*(a*t-s*r),c=2*(s*n-o*t);return this.x=t+l*u+o*c-a*f,this.y=n+l*f+a*u-s*c,this.z=r+l*c+s*f-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Fn(this.x,e.x,t.x),this.y=Fn(this.y,e.y,t.y),this.z=Fn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Fn(this.x,e,t),this.y=Fn(this.y,e,t),this.z=Fn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Fn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return rS.copy(this).projectOnVector(e),this.sub(rS)}reflect(e){return this.sub(rS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Fn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const rS=new ce,iP=new lo;class Es{constructor(e=new ce(1/0,1/0,1/0),t=new ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(gl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(gl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=gl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,gl):gl.fromBufferAttribute(s,o),gl.applyMatrix4(e.matrixWorld),this.expandByPoint(gl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),oy.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),oy.copy(n.boundingBox)),oy.applyMatrix4(e.matrixWorld),this.union(oy)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,gl),gl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Wg),ay.subVectors(this.max,Wg),Ep.subVectors(e.a,Wg),Tp.subVectors(e.b,Wg),Mp.subVectors(e.c,Wg),Jc.subVectors(Tp,Ep),Kc.subVectors(Mp,Tp),Mf.subVectors(Ep,Mp);let t=[0,-Jc.z,Jc.y,0,-Kc.z,Kc.y,0,-Mf.z,Mf.y,Jc.z,0,-Jc.x,Kc.z,0,-Kc.x,Mf.z,0,-Mf.x,-Jc.y,Jc.x,0,-Kc.y,Kc.x,0,-Mf.y,Mf.x,0];return!iS(t,Ep,Tp,Mp,ay)||(t=[1,0,0,0,1,0,0,0,1],!iS(t,Ep,Tp,Mp,ay))?!1:(ly.crossVectors(Jc,Kc),t=[ly.x,ly.y,ly.z],iS(t,Ep,Tp,Mp,ay))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,gl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(gl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Hu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Hu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Hu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Hu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Hu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Hu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Hu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Hu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Hu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Hu=[new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce],gl=new ce,oy=new Es,Ep=new ce,Tp=new ce,Mp=new ce,Jc=new ce,Kc=new ce,Mf=new ce,Wg=new ce,ay=new ce,ly=new ce,bf=new ce;function iS(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){bf.fromArray(i,s);const a=r.x*Math.abs(bf.x)+r.y*Math.abs(bf.y)+r.z*Math.abs(bf.z),l=e.dot(bf),u=t.dot(bf),f=n.dot(bf);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}const _8=new Es,jg=new ce,sS=new ce;class is{constructor(e=new ce,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):_8.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;jg.subVectors(e,this.center);const t=jg.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(jg,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(sS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(jg.copy(e.center).add(sS)),this.expandByPoint(jg.copy(e.center).sub(sS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Vu=new ce,oS=new ce,uy=new ce,Yc=new ce,aS=new ce,cy=new ce,lS=new ce;class Vm{constructor(e=new ce,t=new ce(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Vu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Vu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Vu.copy(this.origin).addScaledVector(this.direction,t),Vu.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){oS.copy(e).add(t).multiplyScalar(.5),uy.copy(t).sub(e).normalize(),Yc.copy(this.origin).sub(oS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(uy),a=Yc.dot(this.direction),l=-Yc.dot(uy),u=Yc.lengthSq(),f=Math.abs(1-o*o);let c,d,g,v;if(f>0)if(c=o*l-a,d=o*a-l,v=s*f,c>=0)if(d>=-v)if(d<=v){const A=1/f;c*=A,d*=A,g=c*(c+o*d+2*a)+d*(o*c+d+2*l)+u}else d=s,c=Math.max(0,-(o*d+a)),g=-c*c+d*(d+2*l)+u;else d=-s,c=Math.max(0,-(o*d+a)),g=-c*c+d*(d+2*l)+u;else d<=-v?(c=Math.max(0,-(-o*s+a)),d=c>0?-s:Math.min(Math.max(-s,-l),s),g=-c*c+d*(d+2*l)+u):d<=v?(c=0,d=Math.min(Math.max(-s,-l),s),g=d*(d+2*l)+u):(c=Math.max(0,-(o*s+a)),d=c>0?s:Math.min(Math.max(-s,-l),s),g=-c*c+d*(d+2*l)+u);else d=o>0?-s:s,c=Math.max(0,-(o*d+a)),g=-c*c+d*(d+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,c),r&&r.copy(oS).addScaledVector(uy,d),g}intersectSphere(e,t){Vu.subVectors(e.center,this.origin);const n=Vu.dot(this.direction),r=Vu.dot(Vu)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const u=1/this.direction.x,f=1/this.direction.y,c=1/this.direction.z,d=this.origin;return u>=0?(n=(e.min.x-d.x)*u,r=(e.max.x-d.x)*u):(n=(e.max.x-d.x)*u,r=(e.min.x-d.x)*u),f>=0?(s=(e.min.y-d.y)*f,o=(e.max.y-d.y)*f):(s=(e.max.y-d.y)*f,o=(e.min.y-d.y)*f),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),c>=0?(a=(e.min.z-d.z)*c,l=(e.max.z-d.z)*c):(a=(e.max.z-d.z)*c,l=(e.min.z-d.z)*c),n>l||a>r)||((a>n||n!==n)&&(n=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Vu)!==null}intersectTriangle(e,t,n,r,s){aS.subVectors(t,e),cy.subVectors(n,e),lS.crossVectors(aS,cy);let o=this.direction.dot(lS),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Yc.subVectors(this.origin,e);const l=a*this.direction.dot(cy.crossVectors(Yc,cy));if(l<0)return null;const u=a*this.direction.dot(aS.cross(Yc));if(u<0||l+u>o)return null;const f=-a*Yc.dot(lS);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pn{constructor(e,t,n,r,s,o,a,l,u,f,c,d,g,v,A,x){pn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,u,f,c,d,g,v,A,x)}set(e,t,n,r,s,o,a,l,u,f,c,d,g,v,A,x){const w=this.elements;return w[0]=e,w[4]=t,w[8]=n,w[12]=r,w[1]=s,w[5]=o,w[9]=a,w[13]=l,w[2]=u,w[6]=f,w[10]=c,w[14]=d,w[3]=g,w[7]=v,w[11]=A,w[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/bp.setFromMatrixColumn(e,0).length(),s=1/bp.setFromMatrixColumn(e,1).length(),o=1/bp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),u=Math.sin(r),f=Math.cos(s),c=Math.sin(s);if(e.order==="XYZ"){const d=o*f,g=o*c,v=a*f,A=a*c;t[0]=l*f,t[4]=-l*c,t[8]=u,t[1]=g+v*u,t[5]=d-A*u,t[9]=-a*l,t[2]=A-d*u,t[6]=v+g*u,t[10]=o*l}else if(e.order==="YXZ"){const d=l*f,g=l*c,v=u*f,A=u*c;t[0]=d+A*a,t[4]=v*a-g,t[8]=o*u,t[1]=o*c,t[5]=o*f,t[9]=-a,t[2]=g*a-v,t[6]=A+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*f,g=l*c,v=u*f,A=u*c;t[0]=d-A*a,t[4]=-o*c,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*f,t[9]=A-d*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*f,g=o*c,v=a*f,A=a*c;t[0]=l*f,t[4]=v*u-g,t[8]=d*u+A,t[1]=l*c,t[5]=A*u+d,t[9]=g*u-v,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,g=o*u,v=a*l,A=a*u;t[0]=l*f,t[4]=A-d*c,t[8]=v*c+g,t[1]=c,t[5]=o*f,t[9]=-a*f,t[2]=-u*f,t[6]=g*c+v,t[10]=d-A*c}else if(e.order==="XZY"){const d=o*l,g=o*u,v=a*l,A=a*u;t[0]=l*f,t[4]=-c,t[8]=u*f,t[1]=d*c+A,t[5]=o*f,t[9]=g*c-v,t[2]=v*c-g,t[6]=a*f,t[10]=A*c+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(v8,e,y8)}lookAt(e,t,n){const r=this.elements;return fa.subVectors(e,t),fa.lengthSq()===0&&(fa.z=1),fa.normalize(),Qc.crossVectors(n,fa),Qc.lengthSq()===0&&(Math.abs(n.z)===1?fa.x+=1e-4:fa.z+=1e-4,fa.normalize(),Qc.crossVectors(n,fa)),Qc.normalize(),hy.crossVectors(fa,Qc),r[0]=Qc.x,r[4]=hy.x,r[8]=fa.x,r[1]=Qc.y,r[5]=hy.y,r[9]=fa.y,r[2]=Qc.z,r[6]=hy.z,r[10]=fa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],u=n[12],f=n[1],c=n[5],d=n[9],g=n[13],v=n[2],A=n[6],x=n[10],w=n[14],M=n[3],b=n[7],R=n[11],F=n[15],O=r[0],D=r[4],I=r[8],C=r[12],B=r[1],k=r[5],H=r[9],z=r[13],Z=r[2],ue=r[6],ae=r[10],ge=r[14],ee=r[3],le=r[7],$=r[11],V=r[15];return s[0]=o*O+a*B+l*Z+u*ee,s[4]=o*D+a*k+l*ue+u*le,s[8]=o*I+a*H+l*ae+u*$,s[12]=o*C+a*z+l*ge+u*V,s[1]=f*O+c*B+d*Z+g*ee,s[5]=f*D+c*k+d*ue+g*le,s[9]=f*I+c*H+d*ae+g*$,s[13]=f*C+c*z+d*ge+g*V,s[2]=v*O+A*B+x*Z+w*ee,s[6]=v*D+A*k+x*ue+w*le,s[10]=v*I+A*H+x*ae+w*$,s[14]=v*C+A*z+x*ge+w*V,s[3]=M*O+b*B+R*Z+F*ee,s[7]=M*D+b*k+R*ue+F*le,s[11]=M*I+b*H+R*ae+F*$,s[15]=M*C+b*z+R*ge+F*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],f=e[2],c=e[6],d=e[10],g=e[14],v=e[3],A=e[7],x=e[11],w=e[15];return v*(+s*l*c-r*u*c-s*a*d+n*u*d+r*a*g-n*l*g)+A*(+t*l*g-t*u*d+s*o*d-r*o*g+r*u*f-s*l*f)+x*(+t*u*c-t*a*g-s*o*c+n*o*g+s*a*f-n*u*f)+w*(-r*a*f-t*l*c+t*a*d+r*o*c-n*o*d+n*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8],c=e[9],d=e[10],g=e[11],v=e[12],A=e[13],x=e[14],w=e[15],M=c*x*u-A*d*u+A*l*g-a*x*g-c*l*w+a*d*w,b=v*d*u-f*x*u-v*l*g+o*x*g+f*l*w-o*d*w,R=f*A*u-v*c*u+v*a*g-o*A*g-f*a*w+o*c*w,F=v*c*l-f*A*l-v*a*d+o*A*d+f*a*x-o*c*x,O=t*M+n*b+r*R+s*F;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/O;return e[0]=M*D,e[1]=(A*d*s-c*x*s-A*r*g+n*x*g+c*r*w-n*d*w)*D,e[2]=(a*x*s-A*l*s+A*r*u-n*x*u-a*r*w+n*l*w)*D,e[3]=(c*l*s-a*d*s-c*r*u+n*d*u+a*r*g-n*l*g)*D,e[4]=b*D,e[5]=(f*x*s-v*d*s+v*r*g-t*x*g-f*r*w+t*d*w)*D,e[6]=(v*l*s-o*x*s-v*r*u+t*x*u+o*r*w-t*l*w)*D,e[7]=(o*d*s-f*l*s+f*r*u-t*d*u-o*r*g+t*l*g)*D,e[8]=R*D,e[9]=(v*c*s-f*A*s-v*n*g+t*A*g+f*n*w-t*c*w)*D,e[10]=(o*A*s-v*a*s+v*n*u-t*A*u-o*n*w+t*a*w)*D,e[11]=(f*a*s-o*c*s-f*n*u+t*c*u+o*n*g-t*a*g)*D,e[12]=F*D,e[13]=(f*A*r-v*c*r+v*n*d-t*A*d-f*n*x+t*c*x)*D,e[14]=(v*a*r-o*A*r-v*n*l+t*A*l+o*n*x-t*a*x)*D,e[15]=(o*c*r-f*a*r+f*n*l-t*c*l-o*n*d+t*a*d)*D,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,u=s*o,f=s*a;return this.set(u*o+n,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+n,f*l-r*o,0,u*l-r*a,f*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,f=o+o,c=a+a,d=s*u,g=s*f,v=s*c,A=o*f,x=o*c,w=a*c,M=l*u,b=l*f,R=l*c,F=n.x,O=n.y,D=n.z;return r[0]=(1-(A+w))*F,r[1]=(g+R)*F,r[2]=(v-b)*F,r[3]=0,r[4]=(g-R)*O,r[5]=(1-(d+w))*O,r[6]=(x+M)*O,r[7]=0,r[8]=(v+b)*D,r[9]=(x-M)*D,r[10]=(1-(d+A))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=bp.set(r[0],r[1],r[2]).length();const o=bp.set(r[4],r[5],r[6]).length(),a=bp.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],_l.copy(this);const u=1/s,f=1/o,c=1/a;return _l.elements[0]*=u,_l.elements[1]*=u,_l.elements[2]*=u,_l.elements[4]*=f,_l.elements[5]*=f,_l.elements[6]*=f,_l.elements[8]*=c,_l.elements[9]*=c,_l.elements[10]*=c,t.setFromRotationMatrix(_l),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o,a=Zl){const l=this.elements,u=2*s/(t-e),f=2*s/(n-r),c=(t+e)/(t-e),d=(n+r)/(n-r);let g,v;if(a===Zl)g=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===f0)g=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=c,l[12]=0,l[1]=0,l[5]=f,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,o,a=Zl){const l=this.elements,u=1/(t-e),f=1/(n-r),c=1/(o-s),d=(t+e)*u,g=(n+r)*f;let v,A;if(a===Zl)v=(o+s)*c,A=-2*c;else if(a===f0)v=s*c,A=-1*c;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=A,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const bp=new ce,_l=new pn,v8=new ce(0,0,0),y8=new ce(1,1,1),Qc=new ce,hy=new ce,fa=new ce,sP=new pn,oP=new lo;class Aa{constructor(e=0,t=0,n=0,r=Aa.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],f=r[9],c=r[2],d=r[6],g=r[10];switch(t){case"XYZ":this._y=Math.asin(Fn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Fn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-c,s),this._z=0);break;case"ZXY":this._x=Math.asin(Fn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,g),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Fn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-c,s)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-Fn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return sP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(sP,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return oP.setFromEuler(this),this.setFromQuaternion(oP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Aa.DEFAULT_ORDER="XYZ";class dd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let x8=0;const aP=new ce,Cp=new lo,Wu=new pn,fy=new ce,qg=new ce,A8=new ce,w8=new lo,lP=new ce(1,0,0),uP=new ce(0,1,0),cP=new ce(0,0,1),hP={type:"added"},S8={type:"removed"},Rp={type:"childadded",child:null},uS={type:"childremoved",child:null};class ir extends hu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:x8++}),this.uuid=ya(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ir.DEFAULT_UP.clone();const e=new ce,t=new Aa,n=new lo,r=new ce(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new pn},normalMatrix:{value:new Ln}}),this.matrix=new pn,this.matrixWorld=new pn,this.matrixAutoUpdate=ir.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ir.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new dd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Cp.setFromAxisAngle(e,t),this.quaternion.multiply(Cp),this}rotateOnWorldAxis(e,t){return Cp.setFromAxisAngle(e,t),this.quaternion.premultiply(Cp),this}rotateX(e){return this.rotateOnAxis(lP,e)}rotateY(e){return this.rotateOnAxis(uP,e)}rotateZ(e){return this.rotateOnAxis(cP,e)}translateOnAxis(e,t){return aP.copy(e).applyQuaternion(this.quaternion),this.position.add(aP.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(lP,e)}translateY(e){return this.translateOnAxis(uP,e)}translateZ(e){return this.translateOnAxis(cP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Wu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?fy.copy(e):fy.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),qg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wu.lookAt(qg,fy,this.up):Wu.lookAt(fy,qg,this.up),this.quaternion.setFromRotationMatrix(Wu),r&&(Wu.extractRotation(r.matrixWorld),Cp.setFromRotationMatrix(Wu),this.quaternion.premultiply(Cp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(hP),Rp.child=e,this.dispatchEvent(Rp),Rp.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(S8),uS.child=e,this.dispatchEvent(uS),uS.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Wu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Wu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Wu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(hP),Rp.child=e,this.dispatchEvent(Rp),Rp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qg,e,A8),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qg,w8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++){const c=l[u];s(e.shapes,c)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),f=o(e.images),c=o(e.shapes),d=o(e.skeletons),g=o(e.animations),v=o(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),f.length>0&&(n.images=f),c.length>0&&(n.shapes=c),d.length>0&&(n.skeletons=d),g.length>0&&(n.animations=g),v.length>0&&(n.nodes=v)}return n.object=r,n;function o(a){const l=[];for(const u in a){const f=a[u];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}ir.DEFAULT_UP=new ce(0,1,0);ir.DEFAULT_MATRIX_AUTO_UPDATE=!0;ir.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const vl=new ce,ju=new ce,cS=new ce,qu=new ce,Ip=new ce,Pp=new ce,fP=new ce,hS=new ce,fS=new ce,dS=new ce,pS=new nr,mS=new nr,gS=new nr;class Wo{constructor(e=new ce,t=new ce,n=new ce){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),vl.subVectors(e,t),r.cross(vl);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){vl.subVectors(r,t),ju.subVectors(n,t),cS.subVectors(e,t);const o=vl.dot(vl),a=vl.dot(ju),l=vl.dot(cS),u=ju.dot(ju),f=ju.dot(cS),c=o*u-a*a;if(c===0)return s.set(0,0,0),null;const d=1/c,g=(u*l-a*f)*d,v=(o*f-a*l)*d;return s.set(1-g-v,v,g)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,qu)===null?!1:qu.x>=0&&qu.y>=0&&qu.x+qu.y<=1}static getInterpolation(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,qu)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,qu.x),l.addScaledVector(o,qu.y),l.addScaledVector(a,qu.z),l)}static getInterpolatedAttribute(e,t,n,r,s,o){return pS.setScalar(0),mS.setScalar(0),gS.setScalar(0),pS.fromBufferAttribute(e,t),mS.fromBufferAttribute(e,n),gS.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(pS,s.x),o.addScaledVector(mS,s.y),o.addScaledVector(gS,s.z),o}static isFrontFacing(e,t,n,r){return vl.subVectors(n,t),ju.subVectors(e,t),vl.cross(ju).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return vl.subVectors(this.c,this.b),ju.subVectors(this.a,this.b),vl.cross(ju).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Wo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Wo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return Wo.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Wo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Wo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;Ip.subVectors(r,n),Pp.subVectors(s,n),hS.subVectors(e,n);const l=Ip.dot(hS),u=Pp.dot(hS);if(l<=0&&u<=0)return t.copy(n);fS.subVectors(e,r);const f=Ip.dot(fS),c=Pp.dot(fS);if(f>=0&&c<=f)return t.copy(r);const d=l*c-f*u;if(d<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(n).addScaledVector(Ip,o);dS.subVectors(e,s);const g=Ip.dot(dS),v=Pp.dot(dS);if(v>=0&&g<=v)return t.copy(s);const A=g*u-l*v;if(A<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(n).addScaledVector(Pp,a);const x=f*v-g*c;if(x<=0&&c-f>=0&&g-v>=0)return fP.subVectors(s,r),a=(c-f)/(c-f+(g-v)),t.copy(r).addScaledVector(fP,a);const w=1/(x+A+d);return o=A*w,a=d*w,t.copy(n).addScaledVector(Ip,o).addScaledVector(Pp,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const xN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zc={h:0,s:0,l:0},dy={h:0,s:0,l:0};function _S(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Ht{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Mo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,cr.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=cr.workingColorSpace){return this.r=e,this.g=t,this.b=n,cr.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=cr.workingColorSpace){if(e=KC(e,1),t=Fn(t,0,1),n=Fn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=_S(o,s,e+1/3),this.g=_S(o,s,e),this.b=_S(o,s,e-1/3)}return cr.toWorkingColorSpace(this,r),this}setStyle(e,t=Mo){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Mo){const n=xN[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=sc(e.r),this.g=sc(e.g),this.b=sc(e.b),this}copyLinearToSRGB(e){return this.r=hm(e.r),this.g=hm(e.g),this.b=hm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Mo){return cr.fromWorkingColorSpace($s.copy(this),e),Math.round(Fn($s.r*255,0,255))*65536+Math.round(Fn($s.g*255,0,255))*256+Math.round(Fn($s.b*255,0,255))}getHexString(e=Mo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=cr.workingColorSpace){cr.fromWorkingColorSpace($s.copy(this),t);const n=$s.r,r=$s.g,s=$s.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,u;const f=(a+o)/2;if(a===o)l=0,u=0;else{const c=o-a;switch(u=f<=.5?c/(o+a):c/(2-o-a),o){case n:l=(r-s)/c+(r<s?6:0);break;case r:l=(s-n)/c+2;break;case s:l=(n-r)/c+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,t=cr.workingColorSpace){return cr.fromWorkingColorSpace($s.copy(this),t),e.r=$s.r,e.g=$s.g,e.b=$s.b,e}getStyle(e=Mo){cr.fromWorkingColorSpace($s.copy(this),e);const t=$s.r,n=$s.g,r=$s.b;return e!==Mo?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Zc),this.setHSL(Zc.h+e,Zc.s+t,Zc.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Zc),e.getHSL(dy);const n=U_(Zc.h,dy.h,t),r=U_(Zc.s,dy.s,t),s=U_(Zc.l,dy.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const $s=new Ht;Ht.NAMES=xN;let E8=0;class Xi extends hu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:E8++}),this.uuid=ya(),this.name="",this.type="Material",this.blending=cd,this.side=Il,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=G1,this.blendDst=H1,this.blendEquation=lh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ht(0,0,0),this.blendAlpha=0,this.depthFunc=xd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ib,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vf,this.stencilZFail=Vf,this.stencilZPass=Vf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==cd&&(n.blending=this.blending),this.side!==Il&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==G1&&(n.blendSrc=this.blendSrc),this.blendDst!==H1&&(n.blendDst=this.blendDst),this.blendEquation!==lh&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==xd&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ib&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Vf&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Vf&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Vf&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Io extends Xi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Aa,this.combine=j0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const nc=T8();function T8(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(n[l]=0,n[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(n[l]=1024>>-u-14,n[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(n[l]=u+15<<10,n[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(n[l]=31744,n[l|256]=64512,r[l]=24,r[l|256]=24):(n[l]=31744,n[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,f=0;for(;!(u&8388608);)u<<=1,f-=8388608;u&=-8388609,f+=947912704,s[l]=u|f}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Ho(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Fn(i,-65504,65504),nc.floatView[0]=i;const e=nc.uint32View[0],t=e>>23&511;return nc.baseTable[t]+((e&8388607)>>nc.shiftTable[t])}function y_(i){const e=i>>10;return nc.uint32View[0]=nc.mantissaTable[nc.offsetTable[e]+(i&1023)]+nc.exponentTable[e],nc.floatView[0]}const ed={toHalfFloat:Ho,fromHalfFloat:y_},Wi=new ce,py=new mt;class gr{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=h0,this.updateRanges=[],this.gpuType=pi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)py.fromBufferAttribute(this,t),py.applyMatrix3(e),this.setXY(t,py.x,py.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Wi.fromBufferAttribute(this,t),Wi.applyMatrix3(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Wi.fromBufferAttribute(this,t),Wi.applyMatrix4(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Wi.fromBufferAttribute(this,t),Wi.applyNormalMatrix(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Wi.fromBufferAttribute(this,t),Wi.transformDirection(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ro(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Gn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ro(t,this.array)),t}setX(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ro(t,this.array)),t}setY(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ro(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ro(t,this.array)),t}setW(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array),s=Gn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==h0&&(e.usage=this.usage),e}}class M8 extends gr{constructor(e,t,n){super(new Int8Array(e),t,n)}}class b8 extends gr{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class C8 extends gr{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class R8 extends gr{constructor(e,t,n){super(new Int16Array(e),t,n)}}class ZC extends gr{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class I8 extends gr{constructor(e,t,n){super(new Int32Array(e),t,n)}}class $C extends gr{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class P8 extends gr{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=y_(this.array[e*this.itemSize]);return this.normalized&&(t=Ro(t,this.array)),t}setX(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize]=Ho(t),this}getY(e){let t=y_(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ro(t,this.array)),t}setY(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+1]=Ho(t),this}getZ(e){let t=y_(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ro(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+2]=Ho(t),this}getW(e){let t=y_(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ro(t,this.array)),t}setW(e,t){return this.normalized&&(t=Gn(t,this.array)),this.array[e*this.itemSize+3]=Ho(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array)),this.array[e+0]=Ho(t),this.array[e+1]=Ho(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array)),this.array[e+0]=Ho(t),this.array[e+1]=Ho(n),this.array[e+2]=Ho(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array),s=Gn(s,this.array)),this.array[e+0]=Ho(t),this.array[e+1]=Ho(n),this.array[e+2]=Ho(r),this.array[e+3]=Ho(s),this}}class sn extends gr{constructor(e,t,n){super(new Float32Array(e),t,n)}}let D8=0;const Da=new pn,vS=new ir,Dp=new ce,da=new Es,Xg=new Es,ys=new ce;class Dn extends hu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:D8++}),this.uuid=ya(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(gN(e)?$C:ZC)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Ln().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Da.makeRotationFromQuaternion(e),this.applyMatrix4(Da),this}rotateX(e){return Da.makeRotationX(e),this.applyMatrix4(Da),this}rotateY(e){return Da.makeRotationY(e),this.applyMatrix4(Da),this}rotateZ(e){return Da.makeRotationZ(e),this.applyMatrix4(Da),this}translate(e,t,n){return Da.makeTranslation(e,t,n),this.applyMatrix4(Da),this}scale(e,t,n){return Da.makeScale(e,t,n),this.applyMatrix4(Da),this}lookAt(e){return vS.lookAt(e),vS.updateMatrix(),this.applyMatrix4(vS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Dp).negate(),this.translate(Dp.x,Dp.y,Dp.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new sn(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Es);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ce(-1/0,-1/0,-1/0),new ce(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];da.setFromBufferAttribute(s),this.morphTargetsRelative?(ys.addVectors(this.boundingBox.min,da.min),this.boundingBox.expandByPoint(ys),ys.addVectors(this.boundingBox.max,da.max),this.boundingBox.expandByPoint(ys)):(this.boundingBox.expandByPoint(da.min),this.boundingBox.expandByPoint(da.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new is);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ce,1/0);return}if(e){const n=this.boundingSphere.center;if(da.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Xg.setFromBufferAttribute(a),this.morphTargetsRelative?(ys.addVectors(da.min,Xg.min),da.expandByPoint(ys),ys.addVectors(da.max,Xg.max),da.expandByPoint(ys)):(da.expandByPoint(Xg.min),da.expandByPoint(Xg.max))}da.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)ys.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(ys));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)ys.fromBufferAttribute(a,u),l&&(Dp.fromBufferAttribute(e,u),ys.add(Dp)),r=Math.max(r,n.distanceToSquared(ys))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new gr(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let I=0;I<n.count;I++)a[I]=new ce,l[I]=new ce;const u=new ce,f=new ce,c=new ce,d=new mt,g=new mt,v=new mt,A=new ce,x=new ce;function w(I,C,B){u.fromBufferAttribute(n,I),f.fromBufferAttribute(n,C),c.fromBufferAttribute(n,B),d.fromBufferAttribute(s,I),g.fromBufferAttribute(s,C),v.fromBufferAttribute(s,B),f.sub(u),c.sub(u),g.sub(d),v.sub(d);const k=1/(g.x*v.y-v.x*g.y);isFinite(k)&&(A.copy(f).multiplyScalar(v.y).addScaledVector(c,-g.y).multiplyScalar(k),x.copy(c).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(k),a[I].add(A),a[C].add(A),a[B].add(A),l[I].add(x),l[C].add(x),l[B].add(x))}let M=this.groups;M.length===0&&(M=[{start:0,count:e.count}]);for(let I=0,C=M.length;I<C;++I){const B=M[I],k=B.start,H=B.count;for(let z=k,Z=k+H;z<Z;z+=3)w(e.getX(z+0),e.getX(z+1),e.getX(z+2))}const b=new ce,R=new ce,F=new ce,O=new ce;function D(I){F.fromBufferAttribute(r,I),O.copy(F);const C=a[I];b.copy(C),b.sub(F.multiplyScalar(F.dot(C))).normalize(),R.crossVectors(O,C);const k=R.dot(l[I])<0?-1:1;o.setXYZW(I,b.x,b.y,b.z,k)}for(let I=0,C=M.length;I<C;++I){const B=M[I],k=B.start,H=B.count;for(let z=k,Z=k+H;z<Z;z+=3)D(e.getX(z+0)),D(e.getX(z+1)),D(e.getX(z+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new gr(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,g=n.count;d<g;d++)n.setXYZ(d,0,0,0);const r=new ce,s=new ce,o=new ce,a=new ce,l=new ce,u=new ce,f=new ce,c=new ce;if(e)for(let d=0,g=e.count;d<g;d+=3){const v=e.getX(d+0),A=e.getX(d+1),x=e.getX(d+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,A),o.fromBufferAttribute(t,x),f.subVectors(o,s),c.subVectors(r,s),f.cross(c),a.fromBufferAttribute(n,v),l.fromBufferAttribute(n,A),u.fromBufferAttribute(n,x),a.add(f),l.add(f),u.add(f),n.setXYZ(v,a.x,a.y,a.z),n.setXYZ(A,l.x,l.y,l.z),n.setXYZ(x,u.x,u.y,u.z)}else for(let d=0,g=t.count;d<g;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),f.subVectors(o,s),c.subVectors(r,s),f.cross(c),n.setXYZ(d+0,f.x,f.y,f.z),n.setXYZ(d+1,f.x,f.y,f.z),n.setXYZ(d+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ys.fromBufferAttribute(e,t),ys.normalize(),e.setXYZ(t,ys.x,ys.y,ys.z)}toNonIndexed(){function e(a,l){const u=a.array,f=a.itemSize,c=a.normalized,d=new u.constructor(l.length*f);let g=0,v=0;for(let A=0,x=l.length;A<x;A++){a.isInterleavedBufferAttribute?g=l[A]*a.data.stride+a.offset:g=l[A]*f;for(let w=0;w<f;w++)d[v++]=u[g++]}return new gr(d,f,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Dn,n=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,n);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let f=0,c=u.length;f<c;f++){const d=u[f],g=e(d,n);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],f=[];for(let c=0,d=u.length;c<d;c++){const g=u[c];f.push(g.toJSON(e.data))}f.length>0&&(r[l]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const u in r){const f=r[u];this.setAttribute(u,f.clone(t))}const s=e.morphAttributes;for(const u in s){const f=[],c=s[u];for(let d=0,g=c.length;d<g;d++)f.push(c[d].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,f=o.length;u<f;u++){const c=o[u];this.addGroup(c.start,c.count,c.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const dP=new pn,Cf=new Vm,my=new is,pP=new ce,gy=new ce,_y=new ce,vy=new ce,yS=new ce,yy=new ce,mP=new ce,xy=new ce;class Lr extends ir{constructor(e=new Dn,t=new Io){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){yy.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const f=a[l],c=s[l];f!==0&&(yS.fromBufferAttribute(c,e),o?yy.addScaledVector(yS,f):yy.addScaledVector(yS.sub(t),f))}t.add(yy)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),my.copy(n.boundingSphere),my.applyMatrix4(s),Cf.copy(e.ray).recast(e.near),!(my.containsPoint(Cf.origin)===!1&&(Cf.intersectSphere(my,pP)===null||Cf.origin.distanceToSquared(pP)>(e.far-e.near)**2))&&(dP.copy(s).invert(),Cf.copy(e.ray).applyMatrix4(dP),!(n.boundingBox!==null&&Cf.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Cf)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,f=s.attributes.uv1,c=s.attributes.normal,d=s.groups,g=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,A=d.length;v<A;v++){const x=d[v],w=o[x.materialIndex],M=Math.max(x.start,g.start),b=Math.min(a.count,Math.min(x.start+x.count,g.start+g.count));for(let R=M,F=b;R<F;R+=3){const O=a.getX(R),D=a.getX(R+1),I=a.getX(R+2);r=Ay(this,w,e,n,u,f,c,O,D,I),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const v=Math.max(0,g.start),A=Math.min(a.count,g.start+g.count);for(let x=v,w=A;x<w;x+=3){const M=a.getX(x),b=a.getX(x+1),R=a.getX(x+2);r=Ay(this,o,e,n,u,f,c,M,b,R),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,A=d.length;v<A;v++){const x=d[v],w=o[x.materialIndex],M=Math.max(x.start,g.start),b=Math.min(l.count,Math.min(x.start+x.count,g.start+g.count));for(let R=M,F=b;R<F;R+=3){const O=R,D=R+1,I=R+2;r=Ay(this,w,e,n,u,f,c,O,D,I),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const v=Math.max(0,g.start),A=Math.min(l.count,g.start+g.count);for(let x=v,w=A;x<w;x+=3){const M=x,b=x+1,R=x+2;r=Ay(this,o,e,n,u,f,c,M,b,R),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function B8(i,e,t,n,r,s,o,a){let l;if(e.side===ao?l=n.intersectTriangle(o,s,r,!0,a):l=n.intersectTriangle(r,s,o,e.side===Il,a),l===null)return null;xy.copy(a),xy.applyMatrix4(i.matrixWorld);const u=t.ray.origin.distanceTo(xy);return u<t.near||u>t.far?null:{distance:u,point:xy.clone(),object:i}}function Ay(i,e,t,n,r,s,o,a,l,u){i.getVertexPosition(a,gy),i.getVertexPosition(l,_y),i.getVertexPosition(u,vy);const f=B8(i,e,t,n,gy,_y,vy,mP);if(f){const c=new ce;Wo.getBarycoord(mP,gy,_y,vy,c),r&&(f.uv=Wo.getInterpolatedAttribute(r,a,l,u,c,new mt)),s&&(f.uv1=Wo.getInterpolatedAttribute(s,a,l,u,c,new mt)),o&&(f.normal=Wo.getInterpolatedAttribute(o,a,l,u,c,new ce),f.normal.dot(n.direction)>0&&f.normal.multiplyScalar(-1));const d={a,b:l,c:u,normal:new ce,materialIndex:0};Wo.getNormal(gy,_y,vy,d.normal),f.face=d,f.barycoord=c}return f}class Bd extends Dn{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],f=[],c=[];let d=0,g=0;v("z","y","x",-1,-1,n,t,e,o,s,0),v("z","y","x",1,-1,n,t,-e,o,s,1),v("x","z","y",1,1,e,n,t,r,o,2),v("x","z","y",1,-1,e,n,-t,r,o,3),v("x","y","z",1,-1,e,t,n,r,s,4),v("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new sn(u,3)),this.setAttribute("normal",new sn(f,3)),this.setAttribute("uv",new sn(c,2));function v(A,x,w,M,b,R,F,O,D,I,C){const B=R/D,k=F/I,H=R/2,z=F/2,Z=O/2,ue=D+1,ae=I+1;let ge=0,ee=0;const le=new ce;for(let $=0;$<ae;$++){const V=$*k-z;for(let Q=0;Q<ue;Q++){const fe=Q*B-H;le[A]=fe*M,le[x]=V*b,le[w]=Z,u.push(le.x,le.y,le.z),le[A]=0,le[x]=0,le[w]=O>0?1:-1,f.push(le.x,le.y,le.z),c.push(Q/D),c.push(1-$/I),ge+=1}}for(let $=0;$<I;$++)for(let V=0;V<D;V++){const Q=d+V+ue*$,fe=d+V+ue*($+1),oe=d+(V+1)+ue*($+1),he=d+(V+1)+ue*$;l.push(Q,fe,he),l.push(fe,oe,he),ee+=6}a.addGroup(g,ee,C),g+=ee,d+=ge}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Rm(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function To(i){const e={};for(let t=0;t<i.length;t++){const n=Rm(i[t]);for(const r in n)e[r]=n[r]}return e}function L8(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function AN(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:cr.workingColorSpace}const e2={clone:Rm,merge:To};var F8=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,O8=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class uo extends Xi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=F8,this.fragmentShader=O8,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Rm(e.uniforms),this.uniformsGroups=L8(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class K0 extends ir{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pn,this.projectionMatrix=new pn,this.projectionMatrixInverse=new pn,this.coordinateSystem=Zl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const $c=new ce,gP=new mt,_P=new mt;class Li extends K0{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Cm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(fd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Cm*2*Math.atan(Math.tan(fd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){$c.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set($c.x,$c.y).multiplyScalar(-e/$c.z),$c.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set($c.x,$c.y).multiplyScalar(-e/$c.z)}getViewSize(e,t){return this.getViewBounds(e,gP,_P),t.subVectors(_P,gP)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(fd*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/u,r*=o.width/l,n*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Bp=-90,Lp=1;class wN extends ir{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Li(Bp,Lp,e,t);r.layers=this.layers,this.add(r);const s=new Li(Bp,Lp,e,t);s.layers=this.layers,this.add(s);const o=new Li(Bp,Lp,e,t);o.layers=this.layers,this.add(o);const a=new Li(Bp,Lp,e,t);a.layers=this.layers,this.add(a);const l=new Li(Bp,Lp,e,t);l.layers=this.layers,this.add(l);const u=new Li(Bp,Lp,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Zl)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===f0)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,f]=this.children,c=e.getRenderTarget(),d=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const A=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,l),e.setRenderTarget(n,4,r),e.render(t,u),n.texture.generateMipmaps=A,e.setRenderTarget(n,5,r),e.render(t,f),e.setRenderTarget(c,d,g),e.xr.enabled=v,n.texture.needsPMREMUpdate=!0}}class Y0 extends mr{constructor(e,t,n,r,s,o,a,l,u,f){e=e!==void 0?e:[],t=t!==void 0?t:ou,super(e,t,n,r,s,o,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class t2 extends Po{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Y0(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:pr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Bd(5,5,5),s=new uo({name:"CubemapFromEquirect",uniforms:Rm(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ao,blending:eu});s.uniforms.tEquirect.value=t;const o=new Lr(r,s),a=t.minFilter;return t.minFilter===za&&(t.minFilter=pr),new wN(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}class cA{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ht(e),this.density=t}clone(){return new cA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class hA{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Ht(e),this.near=t,this.far=n}clone(){return new hA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Im=class extends ir{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Aa,this.environmentIntensity=1,this.environmentRotation=new Aa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class Q0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=h0,this.updateRanges=[],this.version=0,this.uuid=ya()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ya()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ya()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Eo=new ce;class Rh{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Eo.fromBufferAttribute(this,t),Eo.applyMatrix4(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Eo.fromBufferAttribute(this,t),Eo.applyNormalMatrix(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Eo.fromBufferAttribute(this,t),Eo.transformDirection(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Ro(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Gn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Gn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Gn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Gn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Gn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ro(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ro(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ro(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ro(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Gn(t,this.array),n=Gn(n,this.array),r=Gn(r,this.array),s=Gn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new gr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Rh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class n2 extends Xi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Fp;const Jg=new ce,Op=new ce,kp=new ce,Np=new mt,Kg=new mt,SN=new pn,wy=new ce,Yg=new ce,Sy=new ce,vP=new mt,xS=new mt,yP=new mt;class EN extends ir{constructor(e=new n2){if(super(),this.isSprite=!0,this.type="Sprite",Fp===void 0){Fp=new Dn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Q0(t,5);Fp.setIndex([0,1,2,0,2,3]),Fp.setAttribute("position",new Rh(n,3,0,!1)),Fp.setAttribute("uv",new Rh(n,2,3,!1))}this.geometry=Fp,this.material=e,this.center=new mt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Op.setFromMatrixScale(this.matrixWorld),SN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),kp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Op.multiplyScalar(-kp.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;Ey(wy.set(-.5,-.5,0),kp,o,Op,r,s),Ey(Yg.set(.5,-.5,0),kp,o,Op,r,s),Ey(Sy.set(.5,.5,0),kp,o,Op,r,s),vP.set(0,0),xS.set(1,0),yP.set(1,1);let a=e.ray.intersectTriangle(wy,Yg,Sy,!1,Jg);if(a===null&&(Ey(Yg.set(-.5,.5,0),kp,o,Op,r,s),xS.set(0,1),a=e.ray.intersectTriangle(wy,Sy,Yg,!1,Jg),a===null))return;const l=e.ray.origin.distanceTo(Jg);l<e.near||l>e.far||t.push({distance:l,point:Jg.clone(),uv:Wo.getInterpolation(Jg,wy,Yg,Sy,vP,xS,yP,new mt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Ey(i,e,t,n,r,s){Np.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(Kg.x=s*Np.x-r*Np.y,Kg.y=r*Np.x+s*Np.y):Kg.copy(Np),i.copy(e),i.x+=Kg.x,i.y+=Kg.y,i.applyMatrix4(SN)}const Ty=new ce,xP=new ce;class TN extends ir{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Ty.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Ty);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Ty.setFromMatrixPosition(e.matrixWorld),xP.setFromMatrixPosition(this.matrixWorld);const n=Ty.distanceTo(xP)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),n>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const AP=new ce,wP=new nr,SP=new nr,k8=new ce,EP=new pn,My=new ce,AS=new is,TP=new pn,wS=new Vm;class r2 extends Lr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=nb,this.bindMatrix=new pn,this.bindMatrixInverse=new pn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Es),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,My),this.boundingBox.expandByPoint(My)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new is),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,My),this.boundingSphere.expandByPoint(My)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),AS.copy(this.boundingSphere),AS.applyMatrix4(r),e.ray.intersectsSphere(AS)!==!1&&(TP.copy(r).invert(),wS.copy(e.ray).applyMatrix4(TP),!(this.boundingBox!==null&&wS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,wS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new nr,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===nb?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===nN?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;wP.fromBufferAttribute(r.attributes.skinIndex,e),SP.fromBufferAttribute(r.attributes.skinWeight,e),AP.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=SP.getComponent(s);if(o!==0){const a=wP.getComponent(s);EP.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(k8.copy(AP).applyMatrix4(EP),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class fA extends ir{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Rl extends mr{constructor(e=null,t=1,n=1,r,s,o,a,l,u=Ss,f=Ss,c,d){super(null,o,a,l,u,f,r,s,c,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const MP=new pn,N8=new pn;class Z0{constructor(e=[],t=[]){this.uuid=ya(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new pn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new pn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:N8;MP.multiplyMatrices(a,t[s]),MP.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Z0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Rl(t,e,e,Oi,pi);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new fA),this.bones.push(o),this.boneInverses.push(new pn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class Ih extends gr{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Up=new pn,bP=new pn,by=[],CP=new Es,U8=new pn,Qg=new Lr,Zg=new is;class i2 extends Lr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ih(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,U8)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Es),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Up),CP.copy(e.boundingBox).applyMatrix4(Up),this.boundingBox.union(CP)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new is),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Up),Zg.copy(e.boundingSphere).applyMatrix4(Up),this.boundingSphere.union(Zg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let a=0;a<n.length;a++)n[a]=r[o+a]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Qg.geometry=this.geometry,Qg.material=this.material,Qg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Zg.copy(this.boundingSphere),Zg.applyMatrix4(n),e.ray.intersectsSphere(Zg)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Up),bP.multiplyMatrices(n,Up),Qg.matrixWorld=bP,Qg.raycast(e,by);for(let o=0,a=by.length;o<a;o++){const l=by[o];l.instanceId=s,l.object=this,t.push(l)}by.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ih(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new Rl(new Float32Array(r*this.count),r,this.count,X0,pi));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<n.length;u++)o+=n[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const SS=new ce,z8=new ce,G8=new Ln;class ah{constructor(e=new ce(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=SS.subVectors(n,t).cross(z8.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(SS),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||G8.getNormalMatrix(e),r=this.coplanarPoint(SS).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Rf=new is,Cy=new ce;class $0{constructor(e=new ah,t=new ah,n=new ah,r=new ah,s=new ah,o=new ah){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Zl){const n=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],f=r[5],c=r[6],d=r[7],g=r[8],v=r[9],A=r[10],x=r[11],w=r[12],M=r[13],b=r[14],R=r[15];if(n[0].setComponents(l-s,d-u,x-g,R-w).normalize(),n[1].setComponents(l+s,d+u,x+g,R+w).normalize(),n[2].setComponents(l+o,d+f,x+v,R+M).normalize(),n[3].setComponents(l-o,d-f,x-v,R-M).normalize(),n[4].setComponents(l-a,d-c,x-A,R-b).normalize(),t===Zl)n[5].setComponents(l+a,d+c,x+A,R+b).normalize();else if(t===f0)n[5].setComponents(a,c,A,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Rf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Rf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Rf)}intersectsSprite(e){return Rf.center.set(0,0,0),Rf.radius=.7071067811865476,Rf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Rf)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Cy.x=r.normal.x>0?e.max.x:e.min.x,Cy.y=r.normal.y>0?e.max.y:e.min.y,Cy.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Cy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ES(i,e){return i-e}function H8(i,e){return i.z-e.z}function V8(i,e){return e.z-i.z}class W8{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=n,a.index=r}reset(){this.list.length=0,this.index=0}}const Go=new pn,j8=new Ht(1,1,1),TS=new $0,Ry=new Es,If=new is,$g=new ce,RP=new ce,q8=new ce,MS=new W8,eo=new Lr,Iy=[];function X8(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,i.getComponent(s,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function Pf(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class MN extends Lr{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,n=t*2,r){super(new Dn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Rl(t,e,e,Oi,pi);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Rl(t,e,e,J0,au);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Rl(t,e,e,Oi,pi);n.colorSpace=cr.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,f=new a.constructor(n*l),c=new gr(f,l,u);t.setAttribute(s,c)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new gr(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Es);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Go),this.getBoundingBoxAt(s,Ry).applyMatrix4(Go),e.union(Ry)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new is);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Go),this.getBoundingSphereAt(s,If).applyMatrix4(Go),e.union(If)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ES),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=n):(r=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;Go.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(j8.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=n===-1?o.count:n),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ES),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const f in n.attributes){const c=t.getAttribute(f),d=n.getAttribute(f);X8(c,d,l);const g=c.itemSize;for(let v=c.count,A=u;v<A;v++){const x=l+v;for(let w=0;w<g;w++)d.setComponent(x,w,0)}d.needsUpdate=!0,d.addUpdateRange(l*g,u*g)}if(r){const f=a.indexStart,c=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let d=0;d<o.count;d++)s.setX(f+d,l+o.getX(d));for(let d=o.count,g=c;d<g;d++)s.setX(f+d,l);s.needsUpdate=!0,s.addUpdateRange(f,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let r=0,s=n.length;r<s;r++)n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((o,a)=>a).sort((o,a)=>n[o].vertexStart-n[a].vertexStart),s=this.geometry;for(let o=0,a=n.length;o<a;o++){const l=r[o],u=n[l];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==t){const{indexStart:f,vertexStart:c,reservedIndexCount:d}=u,g=s.index,v=g.array,A=e-c;for(let x=f;x<f+d;x++)v[x]=v[x]+A;g.array.copyWithin(t,f,f+d),g.addUpdateRange(t,d),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:f,reservedVertexCount:c}=u,d=s.attributes;for(const g in d){const v=d[g],{array:A,itemSize:x}=v;A.copyWithin(e*x,f*x,(f+c)*x),v.addUpdateRange(e*x,c*x)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Es,o=n.index,a=n.attributes.position;for(let l=r.start,u=r.start+r.count;l<u;l++){let f=l;o&&(f=o.getX(f)),s.expandByPoint($g.fromBufferAttribute(a,f))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new is;this.getBoundingBoxAt(e,Ry),Ry.getCenter(s.center);const o=n.index,a=n.attributes.position;let l=0;for(let u=r.start,f=r.start+r.count;u<f;u++){let c=u;o&&(c=o.getX(c)),$g.fromBufferAttribute(a,c),l=Math.max(l,s.center.distanceToSquared($g))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(ES);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Pf(this._multiDrawCounts,r),Pf(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Pf(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Pf(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Pf(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...n.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Dn,this._initializeGeometry(s));const o=this.geometry;s.index&&Pf(s.index.array,o.index.array);for(const a in s.attributes)Pf(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;eo.material=this.material,eo.geometry.index=o.index,eo.geometry.attributes=o.attributes,eo.geometry.boundingBox===null&&(eo.geometry.boundingBox=new Es),eo.geometry.boundingSphere===null&&(eo.geometry.boundingSphere=new is);for(let a=0,l=n.length;a<l;a++){if(!n[a].visible||!n[a].active)continue;const u=n[a].geometryIndex,f=r[u];eo.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(a,eo.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,eo.geometry.boundingBox),this.getBoundingSphereAt(u,eo.geometry.boundingSphere),eo.raycast(e,Iy);for(let c=0,d=Iy.length;c<d;c++){const g=Iy[c];g.object=this,g.batchId=a,t.push(g)}Iy.length=0}eo.material=null,eo.geometry.index=null,eo.geometry.attributes={},eo.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,f=this._multiDrawCounts,c=this._geometryInfo,d=this.perObjectFrustumCulled,g=this._indirectTexture,v=g.image.data;d&&(Go.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),TS.setFromProjectionMatrix(Go,e.coordinateSystem));let A=0;if(this.sortObjects){Go.copy(this.matrixWorld).invert(),$g.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Go),RP.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Go);for(let M=0,b=l.length;M<b;M++)if(l[M].visible&&l[M].active){const R=l[M].geometryIndex;this.getMatrixAt(M,Go),this.getBoundingSphereAt(R,If).applyMatrix4(Go);let F=!1;if(d&&(F=!TS.intersectsSphere(If)),!F){const O=c[R],D=q8.subVectors(If.center,$g).dot(RP);MS.push(O.start,O.count,D,M)}}const x=MS.list,w=this.customSort;w===null?x.sort(s.transparent?V8:H8):w.call(this,x,n);for(let M=0,b=x.length;M<b;M++){const R=x[M];u[A]=R.start*a,f[A]=R.count,v[A]=R.index,A++}MS.reset()}else for(let x=0,w=l.length;x<w;x++)if(l[x].visible&&l[x].active){const M=l[x].geometryIndex;let b=!1;if(d&&(this.getMatrixAt(x,Go),this.getBoundingSphereAt(M,If).applyMatrix4(Go),b=!TS.intersectsSphere(If)),!b){const R=c[M];u[A]=R.start*a,f[A]=R.count,v[A]=x,A++}}g.needsUpdate=!0,this._multiDrawCount=A,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class co extends Xi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ht(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Sx=new ce,Ex=new ce,IP=new pn,e_=new Vm,Py=new is,bS=new ce,PP=new ce;class cc extends ir{constructor(e=new Dn,t=new co){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)Sx.fromBufferAttribute(t,r-1),Ex.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Sx.distanceTo(Ex);e.setAttribute("lineDistance",new sn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Py.copy(n.boundingSphere),Py.applyMatrix4(r),Py.radius+=s,e.ray.intersectsSphere(Py)===!1)return;IP.copy(r).invert(),e_.copy(e.ray).applyMatrix4(IP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,f=n.index,d=n.attributes.position;if(f!==null){const g=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let A=g,x=v-1;A<x;A+=u){const w=f.getX(A),M=f.getX(A+1),b=Dy(this,e,e_,l,w,M);b&&t.push(b)}if(this.isLineLoop){const A=f.getX(v-1),x=f.getX(g),w=Dy(this,e,e_,l,A,x);w&&t.push(w)}}else{const g=Math.max(0,o.start),v=Math.min(d.count,o.start+o.count);for(let A=g,x=v-1;A<x;A+=u){const w=Dy(this,e,e_,l,A,A+1);w&&t.push(w)}if(this.isLineLoop){const A=Dy(this,e,e_,l,v-1,g);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Dy(i,e,t,n,r,s){const o=i.geometry.attributes.position;if(Sx.fromBufferAttribute(o,r),Ex.fromBufferAttribute(o,s),t.distanceSqToSegment(Sx,Ex,bS,PP)>n)return;bS.applyMatrix4(i.matrixWorld);const l=e.ray.origin.distanceTo(bS);if(!(l<e.near||l>e.far))return{distance:l,point:PP.clone().applyMatrix4(i.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:i}}const DP=new ce,BP=new ce;class Dl extends cc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)DP.fromBufferAttribute(t,r),BP.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+DP.distanceTo(BP);e.setAttribute("lineDistance",new sn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class s2 extends cc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class dA extends Xi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const LP=new pn,ob=new Vm,By=new is,Ly=new ce;class o2 extends ir{constructor(e=new Dn,t=new dA){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),By.copy(n.boundingSphere),By.applyMatrix4(r),By.radius+=s,e.ray.intersectsSphere(By)===!1)return;LP.copy(r).invert(),ob.copy(e.ray).applyMatrix4(LP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=n.index,c=n.attributes.position;if(u!==null){const d=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let v=d,A=g;v<A;v++){const x=u.getX(v);Ly.fromBufferAttribute(c,x),FP(Ly,x,l,r,e,t,this)}}else{const d=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let v=d,A=g;v<A;v++)Ly.fromBufferAttribute(c,v),FP(Ly,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function FP(i,e,t,n,r,s,o){const a=ob.distanceSqToPoint(i);if(a<t){const l=new ce;ob.closestPointToPoint(i,l),l.applyMatrix4(n);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class rc extends ir{constructor(){super(),this.isGroup=!0,this.type="Group"}}class J8 extends mr{constructor(e,t,n,r,s,o,a,l,u){super(e,t,n,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:pr,this.magFilter=s!==void 0?s:pr,this.generateMipmaps=!1;const f=this;function c(){f.needsUpdate=!0,e.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(c)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class K8 extends mr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ss,this.minFilter=Ss,this.generateMipmaps=!1,this.needsUpdate=!0}}class pA extends mr{constructor(e,t,n,r,s,o,a,l,u,f,c,d){super(null,o,a,l,u,f,r,s,c,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Y8 extends pA{constructor(e,t,n,r,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Fi,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Q8 extends pA{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,ou),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Z8 extends mr{constructor(e,t,n,r,s,o,a,l,u){super(e,t,n,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class a2 extends mr{constructor(e,t,n,r,s,o,a,l,u,f=hd){if(f!==hd&&f!==wd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&f===hd&&(n=au),n===void 0&&f===wd&&(n=Ad),super(null,r,s,o,a,l,f,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ss,this.minFilter=l!==void 0?l:Ss,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Bl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=n[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,n[r]===o)return r/(s-1);const f=n[r],d=n[r+1]-f,g=(o-f)/d;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new mt:new ce);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new ce,r=[],s=[],o=[],a=new ce,l=new pn;for(let g=0;g<=e;g++){const v=g/e;r[g]=this.getTangentAt(v,new ce)}s[0]=new ce,o[0]=new ce;let u=Number.MAX_VALUE;const f=Math.abs(r[0].x),c=Math.abs(r[0].y),d=Math.abs(r[0].z);f<=u&&(u=f,n.set(1,0,0)),c<=u&&(u=c,n.set(0,1,0)),d<=u&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Fn(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(a,v))}o[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(Fn(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],g*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class mA extends Bl{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new mt){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=l-this.aX,g=u-this.aY;l=d*f-g*c+this.aX,u=d*c+g*f+this.aY}return n.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class bN extends mA{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function l2(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,f,c){let d=(o-s)/u-(a-s)/(u+f)+(a-o)/f,g=(a-o)/f-(l-o)/(f+c)+(l-a)/c;d*=f,g*=f,r(o,a,d,g)},calc:function(s){const o=s*s,a=o*s;return i+e*s+t*o+n*a}}}const Fy=new ce,CS=new l2,RS=new l2,IS=new l2;class CN extends Bl{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new ce){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,f;this.closed||a>0?u=r[(a-1)%s]:(Fy.subVectors(r[0],r[1]).add(r[0]),u=Fy);const c=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(Fy.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=Fy),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(c),g),A=Math.pow(c.distanceToSquared(d),g),x=Math.pow(d.distanceToSquared(f),g);A<1e-4&&(A=1),v<1e-4&&(v=A),x<1e-4&&(x=A),CS.initNonuniformCatmullRom(u.x,c.x,d.x,f.x,v,A,x),RS.initNonuniformCatmullRom(u.y,c.y,d.y,f.y,v,A,x),IS.initNonuniformCatmullRom(u.z,c.z,d.z,f.z,v,A,x)}else this.curveType==="catmullrom"&&(CS.initCatmullRom(u.x,c.x,d.x,f.x,this.tension),RS.initCatmullRom(u.y,c.y,d.y,f.y,this.tension),IS.initCatmullRom(u.z,c.z,d.z,f.z,this.tension));return n.set(CS.calc(l),RS.calc(l),IS.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new ce().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function OP(i,e,t,n,r){const s=(n-e)*.5,o=(r-t)*.5,a=i*i,l=i*a;return(2*t-2*n+s+o)*l+(-3*t+3*n-2*s-o)*a+s*i+t}function $8(i,e){const t=1-i;return t*t*e}function eH(i,e){return 2*(1-i)*i*e}function tH(i,e){return i*i*e}function z_(i,e,t,n){return $8(i,e)+eH(i,t)+tH(i,n)}function nH(i,e){const t=1-i;return t*t*t*e}function rH(i,e){const t=1-i;return 3*t*t*i*e}function iH(i,e){return 3*(1-i)*i*i*e}function sH(i,e){return i*i*i*e}function G_(i,e,t,n,r){return nH(i,e)+rH(i,t)+iH(i,n)+sH(i,r)}class u2 extends Bl{constructor(e=new mt,t=new mt,n=new mt,r=new mt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new mt){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(G_(e,r.x,s.x,o.x,a.x),G_(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class RN extends Bl{constructor(e=new ce,t=new ce,n=new ce,r=new ce){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ce){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(G_(e,r.x,s.x,o.x,a.x),G_(e,r.y,s.y,o.y,a.y),G_(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class c2 extends Bl{constructor(e=new mt,t=new mt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new mt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new mt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class IN extends Bl{constructor(e=new ce,t=new ce){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ce){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ce){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class h2 extends Bl{constructor(e=new mt,t=new mt,n=new mt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new mt){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(z_(e,r.x,s.x,o.x),z_(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class f2 extends Bl{constructor(e=new ce,t=new ce,n=new ce){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ce){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(z_(e,r.x,s.x,o.x),z_(e,r.y,s.y,o.y),z_(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class d2 extends Bl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new mt){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],f=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(OP(a,l.x,u.x,f.x,c.x),OP(a,l.y,u.y,f.y,c.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new mt().fromArray(r))}return this}}var Tx=Object.freeze({__proto__:null,ArcCurve:bN,CatmullRomCurve3:CN,CubicBezierCurve:u2,CubicBezierCurve3:RN,EllipseCurve:mA,LineCurve:c2,LineCurve3:IN,QuadraticBezierCurve:h2,QuadraticBezierCurve3:f2,SplineCurve:d2});class PN extends Bl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Tx[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const f=l[u];n&&n.equals(f)||(t.push(f),n=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new Tx[r.type]().fromJSON(r))}return this}}class p0 extends PN{constructor(e){super(),this.type="Path",this.currentPoint=new mt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new c2(this.currentPoint.clone(),new mt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new h2(this.currentPoint.clone(),new mt(e,t),new mt(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new u2(this.currentPoint.clone(),new mt(e,t),new mt(n,r),new mt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new d2(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){const u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){const u=new mA(e,t,n,r,s,o,a,l);if(this.curves.length>0){const c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);const f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ev extends Dn{constructor(e=[new mt(0,-.5),new mt(.5,0),new mt(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Fn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],f=1/t,c=new ce,d=new mt,g=new ce,v=new ce,A=new ce;let x=0,w=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:x=e[M+1].x-e[M].x,w=e[M+1].y-e[M].y,g.x=w*1,g.y=-x,g.z=w*0,A.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(A.x,A.y,A.z);break;default:x=e[M+1].x-e[M].x,w=e[M+1].y-e[M].y,g.x=w*1,g.y=-x,g.z=w*0,v.copy(g),g.x+=A.x,g.y+=A.y,g.z+=A.z,g.normalize(),l.push(g.x,g.y,g.z),A.copy(v)}for(let M=0;M<=t;M++){const b=n+M*f*r,R=Math.sin(b),F=Math.cos(b);for(let O=0;O<=e.length-1;O++){c.x=e[O].x*R,c.y=e[O].y,c.z=e[O].x*F,o.push(c.x,c.y,c.z),d.x=M/t,d.y=O/(e.length-1),a.push(d.x,d.y);const D=l[3*O+0]*R,I=l[3*O+1],C=l[3*O+0]*F;u.push(D,I,C)}}for(let M=0;M<t;M++)for(let b=0;b<e.length-1;b++){const R=b+M*e.length,F=R,O=R+e.length,D=R+e.length+1,I=R+1;s.push(F,O,I),s.push(D,I,O)}this.setIndex(s),this.setAttribute("position",new sn(o,3)),this.setAttribute("uv",new sn(a,2)),this.setAttribute("normal",new sn(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ev(e.points,e.segments,e.phiStart,e.phiLength)}}class gA extends ev{constructor(e=1,t=1,n=4,r=8){const s=new p0;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new gA(e.radius,e.length,e.capSegments,e.radialSegments)}}class _A extends Dn{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new ce,f=new mt;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let c=0,d=3;c<=t;c++,d+=3){const g=n+c/t*r;u.x=e*Math.cos(g),u.y=e*Math.sin(g),o.push(u.x,u.y,u.z),a.push(0,0,1),f.x=(o[d]/e+1)/2,f.y=(o[d+1]/e+1)/2,l.push(f.x,f.y)}for(let c=1;c<=t;c++)s.push(c,c+1,0);this.setIndex(s),this.setAttribute("position",new sn(o,3)),this.setAttribute("normal",new sn(a,3)),this.setAttribute("uv",new sn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _A(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Wm extends Dn{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const f=[],c=[],d=[],g=[];let v=0;const A=[],x=n/2;let w=0;M(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(f),this.setAttribute("position",new sn(c,3)),this.setAttribute("normal",new sn(d,3)),this.setAttribute("uv",new sn(g,2));function M(){const R=new ce,F=new ce;let O=0;const D=(t-e)/n;for(let I=0;I<=s;I++){const C=[],B=I/s,k=B*(t-e)+e;for(let H=0;H<=r;H++){const z=H/r,Z=z*l+a,ue=Math.sin(Z),ae=Math.cos(Z);F.x=k*ue,F.y=-B*n+x,F.z=k*ae,c.push(F.x,F.y,F.z),R.set(ue,D,ae).normalize(),d.push(R.x,R.y,R.z),g.push(z,1-B),C.push(v++)}A.push(C)}for(let I=0;I<r;I++)for(let C=0;C<s;C++){const B=A[C][I],k=A[C+1][I],H=A[C+1][I+1],z=A[C][I+1];(e>0||C!==0)&&(f.push(B,k,z),O+=3),(t>0||C!==s-1)&&(f.push(k,H,z),O+=3)}u.addGroup(w,O,0),w+=O}function b(R){const F=v,O=new mt,D=new ce;let I=0;const C=R===!0?e:t,B=R===!0?1:-1;for(let H=1;H<=r;H++)c.push(0,x*B,0),d.push(0,B,0),g.push(.5,.5),v++;const k=v;for(let H=0;H<=r;H++){const Z=H/r*l+a,ue=Math.cos(Z),ae=Math.sin(Z);D.x=C*ae,D.y=x*B,D.z=C*ue,c.push(D.x,D.y,D.z),d.push(0,B,0),O.x=ue*.5+.5,O.y=ae*.5*B+.5,g.push(O.x,O.y),v++}for(let H=0;H<r;H++){const z=F+H,Z=k+H;R===!0?f.push(Z,Z+1,z):f.push(Z+1,Z,z),I+=3}u.addGroup(w,I,R===!0?1:2),w+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class vA extends Wm{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new vA(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class zh extends Dn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];a(r),u(n),f(),this.setAttribute("position",new sn(s,3)),this.setAttribute("normal",new sn(s.slice(),3)),this.setAttribute("uv",new sn(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(M){const b=new ce,R=new ce,F=new ce;for(let O=0;O<t.length;O+=3)g(t[O+0],b),g(t[O+1],R),g(t[O+2],F),l(b,R,F,M)}function l(M,b,R,F){const O=F+1,D=[];for(let I=0;I<=O;I++){D[I]=[];const C=M.clone().lerp(R,I/O),B=b.clone().lerp(R,I/O),k=O-I;for(let H=0;H<=k;H++)H===0&&I===O?D[I][H]=C:D[I][H]=C.clone().lerp(B,H/k)}for(let I=0;I<O;I++)for(let C=0;C<2*(O-I)-1;C++){const B=Math.floor(C/2);C%2===0?(d(D[I][B+1]),d(D[I+1][B]),d(D[I][B])):(d(D[I][B+1]),d(D[I+1][B+1]),d(D[I+1][B]))}}function u(M){const b=new ce;for(let R=0;R<s.length;R+=3)b.x=s[R+0],b.y=s[R+1],b.z=s[R+2],b.normalize().multiplyScalar(M),s[R+0]=b.x,s[R+1]=b.y,s[R+2]=b.z}function f(){const M=new ce;for(let b=0;b<s.length;b+=3){M.x=s[b+0],M.y=s[b+1],M.z=s[b+2];const R=x(M)/2/Math.PI+.5,F=w(M)/Math.PI+.5;o.push(R,1-F)}v(),c()}function c(){for(let M=0;M<o.length;M+=6){const b=o[M+0],R=o[M+2],F=o[M+4],O=Math.max(b,R,F),D=Math.min(b,R,F);O>.9&&D<.1&&(b<.2&&(o[M+0]+=1),R<.2&&(o[M+2]+=1),F<.2&&(o[M+4]+=1))}}function d(M){s.push(M.x,M.y,M.z)}function g(M,b){const R=M*3;b.x=e[R+0],b.y=e[R+1],b.z=e[R+2]}function v(){const M=new ce,b=new ce,R=new ce,F=new ce,O=new mt,D=new mt,I=new mt;for(let C=0,B=0;C<s.length;C+=9,B+=6){M.set(s[C+0],s[C+1],s[C+2]),b.set(s[C+3],s[C+4],s[C+5]),R.set(s[C+6],s[C+7],s[C+8]),O.set(o[B+0],o[B+1]),D.set(o[B+2],o[B+3]),I.set(o[B+4],o[B+5]),F.copy(M).add(b).add(R).divideScalar(3);const k=x(F);A(O,B+0,M,k),A(D,B+2,b,k),A(I,B+4,R,k)}}function A(M,b,R,F){F<0&&M.x===1&&(o[b]=M.x-1),R.x===0&&R.z===0&&(o[b]=F/2/Math.PI+.5)}function x(M){return Math.atan2(M.z,-M.x)}function w(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zh(e.vertices,e.indices,e.radius,e.details)}}class yA extends zh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yA(e.radius,e.detail)}}const Oy=new ce,ky=new ce,PS=new ce,Ny=new Wo;class DN extends Dn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(fd*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],f=["a","b","c"],c=new Array(3),d={},g=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:A,b:x,c:w}=Ny;if(A.fromBufferAttribute(a,u[0]),x.fromBufferAttribute(a,u[1]),w.fromBufferAttribute(a,u[2]),Ny.getNormal(PS),c[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,c[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,c[2]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,!(c[0]===c[1]||c[1]===c[2]||c[2]===c[0]))for(let M=0;M<3;M++){const b=(M+1)%3,R=c[M],F=c[b],O=Ny[f[M]],D=Ny[f[b]],I=`${R}_${F}`,C=`${F}_${R}`;C in d&&d[C]?(PS.dot(d[C].normal)<=s&&(g.push(O.x,O.y,O.z),g.push(D.x,D.y,D.z)),d[C]=null):I in d||(d[I]={index0:u[M],index1:u[b],normal:PS.clone()})}}for(const v in d)if(d[v]){const{index0:A,index1:x}=d[v];Oy.fromBufferAttribute(a,A),ky.fromBufferAttribute(a,x),g.push(Oy.x,Oy.y,Oy.z),g.push(ky.x,ky.y,ky.z)}this.setAttribute("position",new sn(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class pd extends p0{constructor(e){super(e),this.uuid=ya(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new p0().fromJSON(r))}return this}}const oH={triangulate:function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=BN(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,f,c,d,g;if(n&&(s=hH(i,e,s,t)),i.length>80*t){a=u=i[0],l=f=i[1];for(let v=t;v<r;v+=t)c=i[v],d=i[v+1],c<a&&(a=c),d<l&&(l=d),c>u&&(u=c),d>f&&(f=d);g=Math.max(u-a,f-l),g=g!==0?32767/g:0}return m0(s,o,t,a,l,g,0),o}};function BN(i,e,t,n,r){let s,o;if(r===wH(i,e,t,n)>0)for(s=e;s<t;s+=n)o=kP(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=kP(s,i[s],i[s+1],o);return o&&xA(o,o.next)&&(_0(o),o=o.next),o}function Sd(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(xA(t,t.next)||di(t.prev,t,t.next)===0)){if(_0(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function m0(i,e,t,n,r,s,o){if(!i)return;!o&&s&&gH(i,n,r,s);let a=i,l,u;for(;i.prev!==i.next;){if(l=i.prev,u=i.next,s?lH(i,n,r,s):aH(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(u.i/t|0),_0(i),i=u.next,a=u.next;continue}if(i=u,i===a){o?o===1?(i=uH(Sd(i),e,t),m0(i,e,t,n,r,s,2)):o===2&&cH(i,e,t,n,r,s):m0(Sd(i),e,t,n,r,s,1);break}}}function aH(i){const e=i.prev,t=i,n=i.next;if(di(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,u=n.y,f=r<s?r<o?r:o:s<o?s:o,c=a<l?a<u?a:u:l<u?l:u,d=r>s?r>o?r:o:s>o?s:o,g=a>l?a>u?a:u:l>u?l:u;let v=n.next;for(;v!==e;){if(v.x>=f&&v.x<=d&&v.y>=c&&v.y<=g&&im(r,a,s,l,o,u,v.x,v.y)&&di(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function lH(i,e,t,n){const r=i.prev,s=i,o=i.next;if(di(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,f=r.y,c=s.y,d=o.y,g=a<l?a<u?a:u:l<u?l:u,v=f<c?f<d?f:d:c<d?c:d,A=a>l?a>u?a:u:l>u?l:u,x=f>c?f>d?f:d:c>d?c:d,w=ab(g,v,e,t,n),M=ab(A,x,e,t,n);let b=i.prevZ,R=i.nextZ;for(;b&&b.z>=w&&R&&R.z<=M;){if(b.x>=g&&b.x<=A&&b.y>=v&&b.y<=x&&b!==r&&b!==o&&im(a,f,l,c,u,d,b.x,b.y)&&di(b.prev,b,b.next)>=0||(b=b.prevZ,R.x>=g&&R.x<=A&&R.y>=v&&R.y<=x&&R!==r&&R!==o&&im(a,f,l,c,u,d,R.x,R.y)&&di(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;b&&b.z>=w;){if(b.x>=g&&b.x<=A&&b.y>=v&&b.y<=x&&b!==r&&b!==o&&im(a,f,l,c,u,d,b.x,b.y)&&di(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;R&&R.z<=M;){if(R.x>=g&&R.x<=A&&R.y>=v&&R.y<=x&&R!==r&&R!==o&&im(a,f,l,c,u,d,R.x,R.y)&&di(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function uH(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!xA(r,s)&&LN(r,n,n.next,s)&&g0(r,s)&&g0(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),_0(n),_0(n.next),n=i=s),n=n.next}while(n!==i);return Sd(n)}function cH(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&yH(o,a)){let l=FN(o,a);o=Sd(o,o.next),l=Sd(l,l.next),m0(o,e,t,n,r,s,0),m0(l,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function hH(i,e,t,n){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,u=BN(i,a,l,n,!1),u===u.next&&(u.steiner=!0),r.push(vH(u));for(r.sort(fH),s=0;s<r.length;s++)t=dH(r[s],t);return t}function fH(i,e){return i.x-e.x}function dH(i,e){const t=pH(i,e);if(!t)return e;const n=FN(t,i);return Sd(n,n.next),Sd(t,t.next)}function pH(i,e){let t=e,n=-1/0,r;const s=i.x,o=i.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>n&&(n=d,r=t.x<t.next.x?t:t.next,d===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let f=1/0,c;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&im(o<u?s:n,o,l,u,o<u?n:s,o,t.x,t.y)&&(c=Math.abs(o-t.y)/(s-t.x),g0(t,i)&&(c<f||c===f&&(t.x>r.x||t.x===r.x&&mH(r,t)))&&(r=t,f=c)),t=t.next;while(t!==a);return r}function mH(i,e){return di(i.prev,i,e.prev)<0&&di(e.next,i,i.next)<0}function gH(i,e,t,n){let r=i;do r.z===0&&(r.z=ab(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,_H(r)}function _H(i){let e,t,n,r,s,o,a,l,u=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<u&&(a++,n=n.nextZ,!!n);e++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,u*=2}while(o>1);return i}function ab(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function vH(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function im(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function yH(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!xH(i,e)&&(g0(i,e)&&g0(e,i)&&AH(i,e)&&(di(i.prev,i,e.prev)||di(i,e.prev,e))||xA(i,e)&&di(i.prev,i,i.next)>0&&di(e.prev,e,e.next)>0)}function di(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function xA(i,e){return i.x===e.x&&i.y===e.y}function LN(i,e,t,n){const r=zy(di(i,e,t)),s=zy(di(i,e,n)),o=zy(di(t,n,i)),a=zy(di(t,n,e));return!!(r!==s&&o!==a||r===0&&Uy(i,t,e)||s===0&&Uy(i,n,e)||o===0&&Uy(t,i,n)||a===0&&Uy(t,e,n))}function Uy(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function zy(i){return i>0?1:i<0?-1:0}function xH(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&LN(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function g0(i,e){return di(i.prev,i,i.next)<0?di(i,e,i.next)>=0&&di(i,i.prev,e)>=0:di(i,e,i.prev)<0||di(i,i.next,e)<0}function AH(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function FN(i,e){const t=new lb(i.i,i.x,i.y),n=new lb(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function kP(i,e,t,n){const r=new lb(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function _0(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function lb(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wH(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}class nu{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return nu.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];NP(e),UP(n,e);let o=e.length;t.forEach(NP);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,UP(n,t[l]);const a=oH.triangulate(n,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function NP(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function UP(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class AA extends Dn{constructor(e=new pd([new mt(.5,.5),new mt(-.5,.5),new mt(-.5,-.5),new mt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new sn(r,3)),this.setAttribute("uv",new sn(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,c=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:g-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,M=t.UVGenerator!==void 0?t.UVGenerator:SH;let b,R=!1,F,O,D,I;w&&(b=w.getSpacedPoints(f),R=!0,d=!1,F=w.computeFrenetFrames(f,!1),O=new ce,D=new ce,I=new ce),d||(x=0,g=0,v=0,A=0);const C=a.extractPoints(u);let B=C.shape;const k=C.holes;if(!nu.isClockWise(B)){B=B.reverse();for(let Ee=0,Ge=k.length;Ee<Ge;Ee++){const se=k[Ee];nu.isClockWise(se)&&(k[Ee]=se.reverse())}}const z=nu.triangulateShape(B,k),Z=B;for(let Ee=0,Ge=k.length;Ee<Ge;Ee++){const se=k[Ee];B=B.concat(se)}function ue(Ee,Ge,se){return Ge||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ee.clone().addScaledVector(Ge,se)}const ae=B.length,ge=z.length;function ee(Ee,Ge,se){let ht,We,ut;const Fe=Ee.x-Ge.x,dt=Ee.y-Ge.y,je=se.x-Ee.x,K=se.y-Ee.y,J=Fe*Fe+dt*dt,ye=Fe*K-dt*je;if(Math.abs(ye)>Number.EPSILON){const Re=Math.sqrt(J),De=Math.sqrt(je*je+K*K),ke=Ge.x-dt/Re,qe=Ge.y+Fe/Re,nt=se.x-K/De,lt=se.y+je/De,Ot=((nt-ke)*K-(lt-qe)*je)/(Fe*K-dt*je);ht=ke+Fe*Ot-Ee.x,We=qe+dt*Ot-Ee.y;const rt=ht*ht+We*We;if(rt<=2)return new mt(ht,We);ut=Math.sqrt(rt/2)}else{let Re=!1;Fe>Number.EPSILON?je>Number.EPSILON&&(Re=!0):Fe<-Number.EPSILON?je<-Number.EPSILON&&(Re=!0):Math.sign(dt)===Math.sign(K)&&(Re=!0),Re?(ht=-dt,We=Fe,ut=Math.sqrt(J)):(ht=Fe,We=dt,ut=Math.sqrt(J/2))}return new mt(ht/ut,We/ut)}const le=[];for(let Ee=0,Ge=Z.length,se=Ge-1,ht=Ee+1;Ee<Ge;Ee++,se++,ht++)se===Ge&&(se=0),ht===Ge&&(ht=0),le[Ee]=ee(Z[Ee],Z[se],Z[ht]);const $=[];let V,Q=le.concat();for(let Ee=0,Ge=k.length;Ee<Ge;Ee++){const se=k[Ee];V=[];for(let ht=0,We=se.length,ut=We-1,Fe=ht+1;ht<We;ht++,ut++,Fe++)ut===We&&(ut=0),Fe===We&&(Fe=0),V[ht]=ee(se[ht],se[ut],se[Fe]);$.push(V),Q=Q.concat(V)}for(let Ee=0;Ee<x;Ee++){const Ge=Ee/x,se=g*Math.cos(Ge*Math.PI/2),ht=v*Math.sin(Ge*Math.PI/2)+A;for(let We=0,ut=Z.length;We<ut;We++){const Fe=ue(Z[We],le[We],ht);_e(Fe.x,Fe.y,-se)}for(let We=0,ut=k.length;We<ut;We++){const Fe=k[We];V=$[We];for(let dt=0,je=Fe.length;dt<je;dt++){const K=ue(Fe[dt],V[dt],ht);_e(K.x,K.y,-se)}}}const fe=v+A;for(let Ee=0;Ee<ae;Ee++){const Ge=d?ue(B[Ee],Q[Ee],fe):B[Ee];R?(D.copy(F.normals[0]).multiplyScalar(Ge.x),O.copy(F.binormals[0]).multiplyScalar(Ge.y),I.copy(b[0]).add(D).add(O),_e(I.x,I.y,I.z)):_e(Ge.x,Ge.y,0)}for(let Ee=1;Ee<=f;Ee++)for(let Ge=0;Ge<ae;Ge++){const se=d?ue(B[Ge],Q[Ge],fe):B[Ge];R?(D.copy(F.normals[Ee]).multiplyScalar(se.x),O.copy(F.binormals[Ee]).multiplyScalar(se.y),I.copy(b[Ee]).add(D).add(O),_e(I.x,I.y,I.z)):_e(se.x,se.y,c/f*Ee)}for(let Ee=x-1;Ee>=0;Ee--){const Ge=Ee/x,se=g*Math.cos(Ge*Math.PI/2),ht=v*Math.sin(Ge*Math.PI/2)+A;for(let We=0,ut=Z.length;We<ut;We++){const Fe=ue(Z[We],le[We],ht);_e(Fe.x,Fe.y,c+se)}for(let We=0,ut=k.length;We<ut;We++){const Fe=k[We];V=$[We];for(let dt=0,je=Fe.length;dt<je;dt++){const K=ue(Fe[dt],V[dt],ht);R?_e(K.x,K.y+b[f-1].y,b[f-1].x+se):_e(K.x,K.y,c+se)}}}oe(),he();function oe(){const Ee=r.length/3;if(d){let Ge=0,se=ae*Ge;for(let ht=0;ht<ge;ht++){const We=z[ht];be(We[2]+se,We[1]+se,We[0]+se)}Ge=f+x*2,se=ae*Ge;for(let ht=0;ht<ge;ht++){const We=z[ht];be(We[0]+se,We[1]+se,We[2]+se)}}else{for(let Ge=0;Ge<ge;Ge++){const se=z[Ge];be(se[2],se[1],se[0])}for(let Ge=0;Ge<ge;Ge++){const se=z[Ge];be(se[0]+ae*f,se[1]+ae*f,se[2]+ae*f)}}n.addGroup(Ee,r.length/3-Ee,0)}function he(){const Ee=r.length/3;let Ge=0;xe(Z,Ge),Ge+=Z.length;for(let se=0,ht=k.length;se<ht;se++){const We=k[se];xe(We,Ge),Ge+=We.length}n.addGroup(Ee,r.length/3-Ee,1)}function xe(Ee,Ge){let se=Ee.length;for(;--se>=0;){const ht=se;let We=se-1;We<0&&(We=Ee.length-1);for(let ut=0,Fe=f+x*2;ut<Fe;ut++){const dt=ae*ut,je=ae*(ut+1),K=Ge+ht+dt,J=Ge+We+dt,ye=Ge+We+je,Re=Ge+ht+je;Xe(K,J,ye,Re)}}}function _e(Ee,Ge,se){l.push(Ee),l.push(Ge),l.push(se)}function be(Ee,Ge,se){Ye(Ee),Ye(Ge),Ye(se);const ht=r.length/3,We=M.generateTopUV(n,r,ht-3,ht-2,ht-1);Ne(We[0]),Ne(We[1]),Ne(We[2])}function Xe(Ee,Ge,se,ht){Ye(Ee),Ye(Ge),Ye(ht),Ye(Ge),Ye(se),Ye(ht);const We=r.length/3,ut=M.generateSideWallUV(n,r,We-6,We-3,We-2,We-1);Ne(ut[0]),Ne(ut[1]),Ne(ut[3]),Ne(ut[1]),Ne(ut[2]),Ne(ut[3])}function Ye(Ee){r.push(l[Ee*3+0]),r.push(l[Ee*3+1]),r.push(l[Ee*3+2])}function Ne(Ee){s.push(Ee.x),s.push(Ee.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return EH(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];n.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Tx[r.type]().fromJSON(r)),new AA(n,e.options)}}const SH={generateTopUV:function(i,e,t,n,r){const s=e[t*3],o=e[t*3+1],a=e[n*3],l=e[n*3+1],u=e[r*3],f=e[r*3+1];return[new mt(s,o),new mt(a,l),new mt(u,f)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[n*3],f=e[n*3+1],c=e[n*3+2],d=e[r*3],g=e[r*3+1],v=e[r*3+2],A=e[s*3],x=e[s*3+1],w=e[s*3+2];return Math.abs(a-f)<Math.abs(o-u)?[new mt(o,1-l),new mt(u,1-c),new mt(d,1-v),new mt(A,1-w)]:[new mt(a,1-l),new mt(f,1-c),new mt(g,1-v),new mt(x,1-w)]}};function EH(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class tv extends zh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new tv(e.radius,e.detail)}}class nv extends zh{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new nv(e.radius,e.detail)}}class Wa extends Dn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),u=a+1,f=l+1,c=e/a,d=t/l,g=[],v=[],A=[],x=[];for(let w=0;w<f;w++){const M=w*d-o;for(let b=0;b<u;b++){const R=b*c-s;v.push(R,-M,0),A.push(0,0,1),x.push(b/a),x.push(1-w/l)}}for(let w=0;w<l;w++)for(let M=0;M<a;M++){const b=M+u*w,R=M+u*(w+1),F=M+1+u*(w+1),O=M+1+u*w;g.push(b,R,O),g.push(R,F,O)}this.setIndex(g),this.setAttribute("position",new sn(v,3)),this.setAttribute("normal",new sn(A,3)),this.setAttribute("uv",new sn(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wa(e.width,e.height,e.widthSegments,e.heightSegments)}}class wA extends Dn{constructor(e=.5,t=1,n=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const a=[],l=[],u=[],f=[];let c=e;const d=(t-e)/r,g=new ce,v=new mt;for(let A=0;A<=r;A++){for(let x=0;x<=n;x++){const w=s+x/n*o;g.x=c*Math.cos(w),g.y=c*Math.sin(w),l.push(g.x,g.y,g.z),u.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,f.push(v.x,v.y)}c+=d}for(let A=0;A<r;A++){const x=A*(n+1);for(let w=0;w<n;w++){const M=w+x,b=M,R=M+n+1,F=M+n+2,O=M+1;a.push(b,R,O),a.push(R,F,O)}}this.setIndex(a),this.setAttribute("position",new sn(l,3)),this.setAttribute("normal",new sn(u,3)),this.setAttribute("uv",new sn(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wA(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class SA extends Dn{constructor(e=new pd([new mt(0,.5),new mt(-.5,-.5),new mt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(n),this.setAttribute("position",new sn(r,3)),this.setAttribute("normal",new sn(s,3)),this.setAttribute("uv",new sn(o,2));function u(f){const c=r.length/3,d=f.extractPoints(t);let g=d.shape;const v=d.holes;nu.isClockWise(g)===!1&&(g=g.reverse());for(let x=0,w=v.length;x<w;x++){const M=v[x];nu.isClockWise(M)===!0&&(v[x]=M.reverse())}const A=nu.triangulateShape(g,v);for(let x=0,w=v.length;x<w;x++){const M=v[x];g=g.concat(M)}for(let x=0,w=g.length;x<w;x++){const M=g[x];r.push(M.x,M.y,0),s.push(0,0,1),o.push(M.x,M.y)}for(let x=0,w=A.length;x<w;x++){const M=A[x],b=M[0]+c,R=M[1]+c,F=M[2]+c;n.push(b,R,F),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return TH(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];n.push(o)}return new SA(n,e.curveSegments)}}function TH(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class rv extends Dn{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let u=0;const f=[],c=new ce,d=new ce,g=[],v=[],A=[],x=[];for(let w=0;w<=n;w++){const M=[],b=w/n;let R=0;w===0&&o===0?R=.5/t:w===n&&l===Math.PI&&(R=-.5/t);for(let F=0;F<=t;F++){const O=F/t;c.x=-e*Math.cos(r+O*s)*Math.sin(o+b*a),c.y=e*Math.cos(o+b*a),c.z=e*Math.sin(r+O*s)*Math.sin(o+b*a),v.push(c.x,c.y,c.z),d.copy(c).normalize(),A.push(d.x,d.y,d.z),x.push(O+R,1-b),M.push(u++)}f.push(M)}for(let w=0;w<n;w++)for(let M=0;M<t;M++){const b=f[w][M+1],R=f[w][M],F=f[w+1][M],O=f[w+1][M+1];(w!==0||o>0)&&g.push(b,R,O),(w!==n-1||l<Math.PI)&&g.push(R,F,O)}this.setIndex(g),this.setAttribute("position",new sn(v,3)),this.setAttribute("normal",new sn(A,3)),this.setAttribute("uv",new sn(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class EA extends zh{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new EA(e.radius,e.detail)}}class TA extends Dn{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],l=[],u=[],f=new ce,c=new ce,d=new ce;for(let g=0;g<=n;g++)for(let v=0;v<=r;v++){const A=v/r*s,x=g/n*Math.PI*2;c.x=(e+t*Math.cos(x))*Math.cos(A),c.y=(e+t*Math.cos(x))*Math.sin(A),c.z=t*Math.sin(x),a.push(c.x,c.y,c.z),f.x=e*Math.cos(A),f.y=e*Math.sin(A),d.subVectors(c,f).normalize(),l.push(d.x,d.y,d.z),u.push(v/r),u.push(g/n)}for(let g=1;g<=n;g++)for(let v=1;v<=r;v++){const A=(r+1)*g+v-1,x=(r+1)*(g-1)+v-1,w=(r+1)*(g-1)+v,M=(r+1)*g+v;o.push(A,x,M),o.push(x,w,M)}this.setIndex(o),this.setAttribute("position",new sn(a,3)),this.setAttribute("normal",new sn(l,3)),this.setAttribute("uv",new sn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TA(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class MA extends Dn{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],l=[],u=[],f=[],c=new ce,d=new ce,g=new ce,v=new ce,A=new ce,x=new ce,w=new ce;for(let b=0;b<=n;++b){const R=b/n*s*Math.PI*2;M(R,s,o,e,g),M(R+.01,s,o,e,v),x.subVectors(v,g),w.addVectors(v,g),A.crossVectors(x,w),w.crossVectors(A,x),A.normalize(),w.normalize();for(let F=0;F<=r;++F){const O=F/r*Math.PI*2,D=-t*Math.cos(O),I=t*Math.sin(O);c.x=g.x+(D*w.x+I*A.x),c.y=g.y+(D*w.y+I*A.y),c.z=g.z+(D*w.z+I*A.z),l.push(c.x,c.y,c.z),d.subVectors(c,g).normalize(),u.push(d.x,d.y,d.z),f.push(b/n),f.push(F/r)}}for(let b=1;b<=n;b++)for(let R=1;R<=r;R++){const F=(r+1)*(b-1)+(R-1),O=(r+1)*b+(R-1),D=(r+1)*b+R,I=(r+1)*(b-1)+R;a.push(F,O,I),a.push(O,D,I)}this.setIndex(a),this.setAttribute("position",new sn(l,3)),this.setAttribute("normal",new sn(u,3)),this.setAttribute("uv",new sn(f,2));function M(b,R,F,O,D){const I=Math.cos(b),C=Math.sin(b),B=F/R*b,k=Math.cos(B);D.x=O*(2+k)*.5*I,D.y=O*(2+k)*C*.5,D.z=O*Math.sin(B)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new MA(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class bA extends Dn{constructor(e=new f2(new ce(-1,-1,0),new ce(-1,1,0),new ce(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ce,l=new ce,u=new mt;let f=new ce;const c=[],d=[],g=[],v=[];A(),this.setIndex(v),this.setAttribute("position",new sn(c,3)),this.setAttribute("normal",new sn(d,3)),this.setAttribute("uv",new sn(g,2));function A(){for(let b=0;b<t;b++)x(b);x(s===!1?t:0),M(),w()}function x(b){f=e.getPointAt(b/t,f);const R=o.normals[b],F=o.binormals[b];for(let O=0;O<=r;O++){const D=O/r*Math.PI*2,I=Math.sin(D),C=-Math.cos(D);l.x=C*R.x+I*F.x,l.y=C*R.y+I*F.y,l.z=C*R.z+I*F.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=f.x+n*l.x,a.y=f.y+n*l.y,a.z=f.z+n*l.z,c.push(a.x,a.y,a.z)}}function w(){for(let b=1;b<=t;b++)for(let R=1;R<=r;R++){const F=(r+1)*(b-1)+(R-1),O=(r+1)*b+(R-1),D=(r+1)*b+R,I=(r+1)*(b-1)+R;v.push(F,O,I),v.push(O,D,I)}}function M(){for(let b=0;b<=t;b++)for(let R=0;R<=r;R++)u.x=b/t,u.y=R/r,g.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new bA(new Tx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ON extends Dn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new ce,s=new ce;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,f=l.length;u<f;++u){const c=l[u],d=c.start,g=c.count;for(let v=d,A=d+g;v<A;v+=3)for(let x=0;x<3;x++){const w=a.getX(v+x),M=a.getX(v+(x+1)%3);r.fromBufferAttribute(o,w),s.fromBufferAttribute(o,M),zP(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const f=3*a+u,c=3*a+(u+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,c),zP(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new sn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function zP(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var GP=Object.freeze({__proto__:null,BoxGeometry:Bd,CapsuleGeometry:gA,CircleGeometry:_A,ConeGeometry:vA,CylinderGeometry:Wm,DodecahedronGeometry:yA,EdgesGeometry:DN,ExtrudeGeometry:AA,IcosahedronGeometry:tv,LatheGeometry:ev,OctahedronGeometry:nv,PlaneGeometry:Wa,PolyhedronGeometry:zh,RingGeometry:wA,ShapeGeometry:SA,SphereGeometry:rv,TetrahedronGeometry:EA,TorusGeometry:TA,TorusKnotGeometry:MA,TubeGeometry:bA,WireframeGeometry:ON});class kN extends Xi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ht(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class NN extends uo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class iv extends Xi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Aa,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ja extends iv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new mt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ht(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ht(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class UN extends Xi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ht(16777215),this.specular=new Ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Aa,this.combine=j0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zN extends Xi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class GN extends Xi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class HN extends Xi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Aa,this.combine=j0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sv extends Xi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=aN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class CA extends Xi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class VN extends Xi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WN extends co{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function td(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function jN(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function qN(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function ub(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r}function p2(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}function MH(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],f=u.getValueSize(),c=[],d=[];for(let g=0;g<u.times.length;++g){const v=u.times[g]*r;if(!(v<t||v>=n)){c.push(u.times[g]);for(let A=0;A<f;++A)d.push(u.values[g*f+A])}}c.length!==0&&(u.times=td(c,u.times.constructor),u.values=td(d,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function bH(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=i.tracks.find(function(w){return w.name===a.name&&w.ValueTypeName===l});if(u===void 0)continue;let f=0;const c=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=c/3);let d=0;const g=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=g/3);const v=a.times.length-1;let A;if(s<=a.times[0]){const w=f,M=c-f;A=a.values.slice(w,M)}else if(s>=a.times[v]){const w=v*c+f,M=w+c-f;A=a.values.slice(w,M)}else{const w=a.createInterpolant(),M=f,b=c-f;w.evaluate(s),A=w.resultBuffer.slice(M,b)}l==="quaternion"&&new lo().fromArray(A).normalize().conjugate().toArray(A);const x=u.times.length;for(let w=0;w<x;++w){const M=w*g+d;if(l==="quaternion")lo.multiplyQuaternionsFlat(u.values,M,A,0,u.values,M);else{const b=g-d*2;for(let R=0;R<b;++R)u.values[M+R]-=A[R]}}}return i.blendMode=jC,i}const CH={convertArray:td,isTypedArray:jN,getKeyframeOrder:qN,sortedArray:ub,flattenJSON:p2,subclip:MH,makeClipAdditive:bH};class jm{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class XN extends jm{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Qf,endingEnd:Qf}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Zf:s=e,a=2*t-n;break;case u0:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Zf:o=e,l=2*n-t;break;case u0:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const u=(n-t)*.5,f=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-n),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,g=this._weightNext,v=(n-t)/(r-t),A=v*v,x=A*v,w=-d*x+2*d*A-d*v,M=(1+d)*x+(-1.5-2*d)*A+(-.5+d)*v+1,b=(-1-g)*x+(1.5+g)*A+.5*v,R=g*x-g*A;for(let F=0;F!==a;++F)s[F]=w*o[f+F]+M*o[u+F]+b*o[l+F]+R*o[c+F];return s}}class m2 extends jm{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=(n-t)/(r-t),c=1-f;for(let d=0;d!==a;++d)s[d]=o[u+d]*c+o[l+d]*f;return s}}class JN extends jm{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ll{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=td(t,this.TimeBufferType),this.values=td(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:td(e.times,Array),values:td(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new JN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new m2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new XN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Mm:t=this.InterpolantFactoryMethodDiscrete;break;case bm:t=this.InterpolantFactoryMethodLinear;break;case x1:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Mm;case this.InterpolantFactoryMethodLinear:return bm;case this.InterpolantFactoryMethodSmooth:return x1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&jN(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===x1,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],f=e[a+1];if(u!==f&&(a!==1||u!==e[0]))if(r)l=!0;else{const c=a*n,d=c-n,g=c+n;for(let v=0;v!==n;++v){const A=t[c+v];if(A!==t[d+v]||A!==t[g+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const c=a*n,d=o*n;for(let g=0;g!==n;++g)t[d+g]=t[c+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,u=0;u!==n;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ll.prototype.TimeBufferType=Float32Array;Ll.prototype.ValueBufferType=Float32Array;Ll.prototype.DefaultInterpolation=bm;class Ld extends Ll{constructor(e,t,n){super(e,t,n)}}Ld.prototype.ValueTypeName="bool";Ld.prototype.ValueBufferType=Array;Ld.prototype.DefaultInterpolation=Mm;Ld.prototype.InterpolantFactoryMethodLinear=void 0;Ld.prototype.InterpolantFactoryMethodSmooth=void 0;class g2 extends Ll{}g2.prototype.ValueTypeName="color";class Ed extends Ll{}Ed.prototype.ValueTypeName="number";class KN extends jm{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let u=e*a;for(let f=u+a;u!==f;u+=4)lo.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Td extends Ll{InterpolantFactoryMethodLinear(e){return new KN(this.times,this.values,this.getValueSize(),e)}}Td.prototype.ValueTypeName="quaternion";Td.prototype.InterpolantFactoryMethodSmooth=void 0;class Fd extends Ll{constructor(e,t,n){super(e,t,n)}}Fd.prototype.ValueTypeName="string";Fd.prototype.ValueBufferType=Array;Fd.prototype.DefaultInterpolation=Mm;Fd.prototype.InterpolantFactoryMethodLinear=void 0;Fd.prototype.InterpolantFactoryMethodSmooth=void 0;class Md extends Ll{}Md.prototype.ValueTypeName="vector";class Pm{constructor(e="",t=-1,n=[],r=lA){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=ya(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(IH(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(Ll.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const f=qN(l);l=ub(l,1,f),u=ub(u,1,f),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Ed(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],f=u.name.match(s);if(f&&f.length>1){const c=f[1];let d=r[c];d||(r[c]=d=[]),d.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(c,d,g,v,A){if(g.length!==0){const x=[],w=[];p2(g,x,w,v),x.length!==0&&A.push(new c(d,x,w))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let c=0;c<u.length;c++){const d=u[c].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const g={};let v;for(v=0;v<d.length;v++)if(d[v].morphTargets)for(let A=0;A<d[v].morphTargets.length;A++)g[d[v].morphTargets[A]]=-1;for(const A in g){const x=[],w=[];for(let M=0;M!==d[v].morphTargets.length;++M){const b=d[v];x.push(b.time),w.push(b.morphTarget===A?1:0)}r.push(new Ed(".morphTargetInfluence["+A+"]",x,w))}l=g.length*o}else{const g=".bones["+t[c].name+"]";n(Md,g+".position",d,"pos",r),n(Td,g+".quaternion",d,"rot",r),n(Md,g+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function RH(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ed;case"vector":case"vector2":case"vector3":case"vector4":return Md;case"color":return g2;case"quaternion":return Td;case"bool":case"boolean":return Ld;case"string":return Fd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function IH(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=RH(i.type);if(i.times===void 0){const t=[],n=[];p2(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const ic={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class RA{constructor(e,t,n){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,c){return u.push(f,c),this},this.removeHandler=function(f){const c=u.indexOf(f);return c!==-1&&u.splice(c,2),this},this.getHandler=function(f){for(let c=0,d=u.length;c<d;c+=2){const g=u[c],v=u[c+1];if(g.global&&(g.lastIndex=0),g.test(f))return v}return null}}}const YN=new RA;class Gs{constructor(e){this.manager=e!==void 0?e:YN,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Gs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Xu={};class PH extends Error{constructor(e,t){super(e),this.response=t}}class Us extends Gs{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ic.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Xu[e]!==void 0){Xu[e].push({onLoad:t,onProgress:n,onError:r});return}Xu[e]=[],Xu[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const f=Xu[e],c=u.body.getReader(),d=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),g=d?parseInt(d):0,v=g!==0;let A=0;const x=new ReadableStream({start(w){M();function M(){c.read().then(({done:b,value:R})=>{if(b)w.close();else{A+=R.byteLength;const F=new ProgressEvent("progress",{lengthComputable:v,loaded:A,total:g});for(let O=0,D=f.length;O<D;O++){const I=f[O];I.onProgress&&I.onProgress(F)}w.enqueue(R),M()}},b=>{w.error(b)})}}});return new Response(x)}else throw new PH(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a===void 0)return u.text();{const c=/charset="?([^;"\s]*)"?/i.exec(a),d=c&&c[1]?c[1].toLowerCase():void 0,g=new TextDecoder(d);return u.arrayBuffer().then(v=>g.decode(v))}}}).then(u=>{ic.add(e,u);const f=Xu[e];delete Xu[e];for(let c=0,d=f.length;c<d;c++){const g=f[c];g.onLoad&&g.onLoad(u)}}).catch(u=>{const f=Xu[e];if(f===void 0)throw this.manager.itemError(e),u;delete Xu[e];for(let c=0,d=f.length;c<d;c++){const g=f[c];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class DH extends Gs{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Us(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Pm.parse(e[n]);t.push(r)}return t}}class BH extends Gs{constructor(e){super(e)}load(e,t,n,r){const s=this,o=[],a=new pA,l=new Us(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function f(c){l.load(e[c],function(d){const g=s.parse(d,!0);o[c]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},u+=1,u===6&&(g.mipmapCount===1&&(a.minFilter=pr),a.image=o,a.format=g.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(Array.isArray(e))for(let c=0,d=e.length;c<d;++c)f(c);else l.load(e,function(c){const d=s.parse(c,!0);if(d.isCubemap){const g=d.mipmaps.length/d.mipmapCount;for(let v=0;v<g;v++){o[v]={mipmaps:[]};for(let A=0;A<d.mipmapCount;A++)o[v].mipmaps.push(d.mipmaps[v*d.mipmapCount+A]),o[v].format=d.format,o[v].width=d.width,o[v].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=pr),a.format=d.format,a.needsUpdate=!0,t&&t(a)},n,r);return a}}class v0 extends Gs{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ic.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=d0("img");function l(){f(),ic.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(c){f(),r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class QN extends Gs{constructor(e){super(e)}load(e,t,n,r){const s=new Y0;s.colorSpace=Mo;const o=new v0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(f){s.images[u]=f,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class _2 extends Gs{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Rl,a=new Us(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Fi,o.wrapT=u.wrapT!==void 0?u.wrapT:Fi,o.magFilter=u.magFilter!==void 0?u.magFilter:pr,o.minFilter=u.minFilter!==void 0?u.minFilter:pr,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=za),u.mipmapCount===1&&(o.minFilter=pr),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},n,r),o}}class ZN extends Gs{constructor(e){super(e)}load(e,t,n,r){const s=new mr,o=new v0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class Gh extends ir{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ht(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class $N extends Gh{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ir.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ht(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const DS=new pn,HP=new ce,VP=new ce;class v2{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new mt(512,512),this.map=null,this.mapPass=null,this.matrix=new pn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new $0,this._frameExtents=new mt(1,1),this._viewportCount=1,this._viewports=[new nr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;HP.setFromMatrixPosition(e.matrixWorld),t.position.copy(HP),VP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(VP),t.updateMatrixWorld(),DS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DS),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(DS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class LH extends v2{constructor(){super(new Li(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Cm*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class y2 extends Gh{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ir.DEFAULT_UP),this.updateMatrix(),this.target=new ir,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new LH}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const WP=new pn,t_=new ce,BS=new ce;class FH extends v2{constructor(){super(new Li(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new mt(4,2),this._viewportCount=6,this._viewports=[new nr(2,1,1,1),new nr(0,1,1,1),new nr(3,1,1,1),new nr(1,1,1,1),new nr(3,0,1,1),new nr(1,0,1,1)],this._cubeDirections=[new ce(1,0,0),new ce(-1,0,0),new ce(0,0,1),new ce(0,0,-1),new ce(0,1,0),new ce(0,-1,0)],this._cubeUps=[new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,0,1),new ce(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),t_.setFromMatrixPosition(e.matrixWorld),n.position.copy(t_),BS.copy(n.position),BS.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(BS),n.updateMatrixWorld(),r.makeTranslation(-t_.x,-t_.y,-t_.z),WP.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(WP)}}class x2 extends Gh{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new FH}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class _c extends K0{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class OH extends v2{constructor(){super(new _c(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class A2 extends Gh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ir.DEFAULT_UP),this.updateMatrix(),this.target=new ir,this.shadow=new OH}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class eU extends Gh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class tU extends Gh{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class nU{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ce)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class rU extends Gh{constructor(e=new nU,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class IA extends Gs{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,o=new Us(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ht().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=new Ht().setHex(o.value);break;case"v2":r.uniforms[s].value=new mt().fromArray(o.value);break;case"v3":r.uniforms[s].value=new ce().fromArray(o.value);break;case"v4":r.uniforms[s].value=new nr().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Ln().fromArray(o.value);break;case"m4":r.uniforms[s].value=new pn().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new mt().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new mt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return IA.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:kN,SpriteMaterial:n2,RawShaderMaterial:NN,ShaderMaterial:uo,PointsMaterial:dA,MeshPhysicalMaterial:ja,MeshStandardMaterial:iv,MeshPhongMaterial:UN,MeshToonMaterial:zN,MeshNormalMaterial:GN,MeshLambertMaterial:HN,MeshDepthMaterial:sv,MeshDistanceMaterial:CA,MeshBasicMaterial:Io,MeshMatcapMaterial:VN,LineDashedMaterial:WN,LineBasicMaterial:co,Material:Xi};return new t[e]}}class vh{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class w2 extends Dn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class iU extends Gs{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Us(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(g,v){if(t[v]!==void 0)return t[v];const x=g.interleavedBuffers[v],w=s(g,x.buffer),M=rm(x.type,w),b=new Q0(M,x.stride);return b.uuid=x.uuid,t[v]=b,b}function s(g,v){if(n[v]!==void 0)return n[v];const x=g.arrayBuffers[v],w=new Uint32Array(x).buffer;return n[v]=w,w}const o=e.isInstancedBufferGeometry?new w2:new Dn,a=e.data.index;if(a!==void 0){const g=rm(a.type,a.array);o.setIndex(new gr(g,1))}const l=e.data.attributes;for(const g in l){const v=l[g];let A;if(v.isInterleavedBufferAttribute){const x=r(e.data,v.data);A=new Rh(x,v.itemSize,v.offset,v.normalized)}else{const x=rm(v.type,v.array),w=v.isInstancedBufferAttribute?Ih:gr;A=new w(x,v.itemSize,v.normalized)}v.name!==void 0&&(A.name=v.name),v.usage!==void 0&&A.setUsage(v.usage),o.setAttribute(g,A)}const u=e.data.morphAttributes;if(u)for(const g in u){const v=u[g],A=[];for(let x=0,w=v.length;x<w;x++){const M=v[x];let b;if(M.isInterleavedBufferAttribute){const R=r(e.data,M.data);b=new Rh(R,M.itemSize,M.offset,M.normalized)}else{const R=rm(M.type,M.array);b=new gr(R,M.itemSize,M.normalized)}M.name!==void 0&&(b.name=M.name),A.push(b)}o.morphAttributes[g]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const c=e.data.groups||e.data.drawcalls||e.data.offsets;if(c!==void 0)for(let g=0,v=c.length;g!==v;++g){const A=c[g];o.addGroup(A.start,A.count,A.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const g=new ce;d.center!==void 0&&g.fromArray(d.center),o.boundingSphere=new is(g,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class kH extends Gs{constructor(e){super(e)}load(e,t,n,r){const s=this,o=this.path===""?vh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Us(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(c){r!==void 0&&r(c),console.error("THREE:ObjectLoader: Can't parse "+e+".",c.message);return}const f=u.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?vh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Us(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,n),f=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,f),this.bindLightTargets(u),t!==void 0){let c=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){c=!0;break}c===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new pd().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Z0().fromJSON(e[s],r);n[a.uuid]=a}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new iU;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in GP?a=GP[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),n[l.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new IA;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=Pm.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function o(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return o(f)}else return l.data?{data:rm(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new RA(t);s=new v0(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,f=e.length;u<f;u++){const c=e[u],d=c.url;if(Array.isArray(d)){const g=[];for(let v=0,A=d.length;v<A;v++){const x=d[v],w=a(x);w!==null&&(w instanceof HTMLImageElement?g.push(w):g.push(new Rl(w.data,w.width,w.height)))}r[c.uuid]=new $f(g)}else{const g=a(c.url);r[c.uuid]=new $f(g)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:rm(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new v0(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const f=[];for(let c=0,d=u.length;c<d;c++){const g=u[c],v=await s(g);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new Rl(v.data,v.width,v.height)))}n[l.uuid]=new $f(f)}else{const f=await s(l.url);n[l.uuid]=new $f(f)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let f;Array.isArray(u)?(f=new Y0,u.length===6&&(f.needsUpdate=!0)):(u&&u.data?f=new Rl:f=new mr,u&&(f.needsUpdate=!0)),f.source=l,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=n(a.mapping,NH)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=n(a.wrap[0],jP),f.wrapT=n(a.wrap[1],jP)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.colorSpace!==void 0&&(f.colorSpace=a.colorSpace),a.minFilter!==void 0&&(f.minFilter=n(a.minFilter,qP)),a.magFilter!==void 0&&(f.magFilter=n(a.magFilter,qP)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(f.compareFunction=a.compareFunction),a.userData!==void 0&&(f.userData=a.userData),r[a.uuid]=f}return r}parseObject(e,t,n,r,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const g=[];for(let v=0,A=d.length;v<A;v++){const x=d[v];n[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),g.push(n[x])}return g}return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),n[d]}}function u(d){return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),r[d]}let f,c;switch(e.type){case"Scene":o=new Im,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ht(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new hA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new cA(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Li(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new _c(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new eU(e.color,e.intensity);break;case"DirectionalLight":o=new A2(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new x2(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new tU(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new y2(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new $N(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new rU().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),c=l(e.material),o=new r2(f,c),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),c=l(e.material),o=new Lr(f,c);break;case"InstancedMesh":f=a(e.geometry),c=l(e.material);const d=e.count,g=e.instanceMatrix,v=e.instanceColor;o=new i2(f,c,d),o.instanceMatrix=new Ih(new Float32Array(g.array),16),v!==void 0&&(o.instanceColor=new Ih(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":f=a(e.geometry),c=l(e.material),o=new MN(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,c),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(A=>{const x=new Es;x.min.fromArray(A.boxMin),x.max.fromArray(A.boxMax);const w=new is;return w.radius=A.sphereRadius,w.center.fromArray(A.sphereCenter),{boxInitialized:A.boxInitialized,box:x,sphereInitialized:A.sphereInitialized,sphere:w}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new TN;break;case"Line":o=new cc(a(e.geometry),l(e.material));break;case"LineLoop":o=new s2(a(e.geometry),l(e.material));break;case"LineSegments":o=new Dl(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new o2(a(e.geometry),l(e.material));break;case"Sprite":o=new EN(l(e.material));break;case"Group":o=new rc;break;case"Bone":o=new fA;break;default:o=new ir}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let g=0;g<d.length;g++)o.add(this.parseObject(d[g],t,n,r,s))}if(e.animations!==void 0){const d=e.animations;for(let g=0;g<d.length;g++){const v=d[g];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let g=0;g<d.length;g++){const v=d[g],A=o.getObjectByProperty("uuid",v.object);A!==void 0&&o.addLevel(A,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new ir}})}}const NH={UVMapping:Mh,CubeReflectionMapping:ou,CubeRefractionMapping:bh,EquirectangularReflectionMapping:Sm,EquirectangularRefractionMapping:l0,CubeUVReflectionMapping:Hm},jP={RepeatWrapping:Ch,ClampToEdgeWrapping:Fi,MirroredRepeatWrapping:Em},qP={NearestFilter:Ss,NearestMipmapNearestFilter:tA,NearestMipmapLinearFilter:Yf,LinearFilter:pr,LinearMipmapNearestFilter:cm,LinearMipmapLinearFilter:za};class sU extends Gs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ic.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return ic.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),ic.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});ic.add(e,l),s.manager.itemStart(e)}}let Gy,S2=class{static getContext(){return Gy===void 0&&(Gy=new(window.AudioContext||window.webkitAudioContext)),Gy}static setContext(e){Gy=e}};class UH extends Gs{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Us(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);S2.getContext().decodeAudioData(u,function(c){t(c)}).catch(a)}catch(u){a(u)}},n,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const XP=new pn,JP=new pn,Df=new pn;class zH{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Li,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Li,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Df.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(fd*t.fov*.5)/t.zoom;let a,l;JP.elements[12]=-r,XP.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Df.elements[0]=2*t.near/(l-a),Df.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Df),a=-o*t.aspect-s,l=o*t.aspect-s,Df.elements[0]=2*t.near/(l-a),Df.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Df)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(JP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(XP)}}class oU extends Li{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class E2{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=KP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=KP();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function KP(){return performance.now()}const Bf=new ce,YP=new lo,GH=new ce,Lf=new ce;class HH extends ir{constructor(){super(),this.type="AudioListener",this.context=S2.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new E2}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Bf,YP,GH),Lf.set(0,0,-1).applyQuaternion(YP),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Bf.x,r),t.positionY.linearRampToValueAtTime(Bf.y,r),t.positionZ.linearRampToValueAtTime(Bf.z,r),t.forwardX.linearRampToValueAtTime(Lf.x,r),t.forwardY.linearRampToValueAtTime(Lf.y,r),t.forwardZ.linearRampToValueAtTime(Lf.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(Bf.x,Bf.y,Bf.z),t.setOrientation(Lf.x,Lf.y,Lf.z,n.x,n.y,n.z)}}let aU=class extends ir{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}};const Ff=new ce,QP=new lo,VH=new ce,Of=new ce;class WH extends aU{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ff,QP,VH),Of.set(0,0,1).applyQuaternion(QP);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ff.x,n),t.positionY.linearRampToValueAtTime(Ff.y,n),t.positionZ.linearRampToValueAtTime(Ff.z,n),t.orientationX.linearRampToValueAtTime(Of.x,n),t.orientationY.linearRampToValueAtTime(Of.y,n),t.orientationZ.linearRampToValueAtTime(Of.z,n)}else t.setPosition(Ff.x,Ff.y,Ff.z),t.setOrientation(Of.x,Of.y,Of.z)}}class jH{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class lU{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)n[s+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){lo.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;lo.multiplyQuaternionsFlat(e,o,e,t,e,n),lo.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}}const T2="\\[\\]\\.:\\/",qH=new RegExp("["+T2+"]","g"),M2="[^"+T2+"]",XH="[^"+T2.replace("\\.","")+"]",JH=/((?:WC+[\/:])*)/.source.replace("WC",M2),KH=/(WCOD+)?/.source.replace("WCOD",XH),YH=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",M2),QH=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",M2),ZH=new RegExp("^"+JH+KH+YH+QH+"$"),$H=["material","materials","bones","map"];class eV{constructor(e,t,n){const r=n||ur.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class ur{constructor(e,t,n){this.path=t,this.parsedPath=n||ur.parseTrackName(t),this.node=ur.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new ur.Composite(e,t,n):new ur(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(qH,"")}static parseTrackName(e){const t=ZH.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);$H.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=n(a.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=ur.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===u){u=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ur.Composite=eV;ur.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ur.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ur.prototype.GetterByBindingType=[ur.prototype._getValue_direct,ur.prototype._getValue_array,ur.prototype._getValue_arrayElement,ur.prototype._getValue_toArray];ur.prototype.SetterByBindingTypeAndVersioning=[[ur.prototype._setValue_direct,ur.prototype._setValue_direct_setNeedsUpdate,ur.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ur.prototype._setValue_array,ur.prototype._setValue_array_setNeedsUpdate,ur.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ur.prototype._setValue_arrayElement,ur.prototype._setValue_arrayElement_setNeedsUpdate,ur.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ur.prototype._setValue_fromArray,ur.prototype._setValue_fromArray_setNeedsUpdate,ur.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tV{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ya(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let f=0,c=arguments.length;f!==c;++f){const d=arguments[f],g=d.uuid;let v=t[g];if(v===void 0){v=l++,t[g]=v,e.push(d);for(let A=0,x=o;A!==x;++A)s[A].push(new ur(d,n[A],r[A]))}else if(v<u){a=e[v];const A=--u,x=e[A];t[x.uuid]=v,e[v]=x,t[g]=A,e[A]=d;for(let w=0,M=o;w!==M;++w){const b=s[w],R=b[A];let F=b[v];b[v]=R,F===void 0&&(F=new ur(d,n[w],r[w])),b[A]=F}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,f=t[u];if(f!==void 0&&f>=s){const c=s++,d=e[c];t[d.uuid]=f,e[f]=d,t[u]=c,e[c]=l;for(let g=0,v=r;g!==v;++g){const A=n[g],x=A[c],w=A[f];A[f]=x,A[c]=w}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],f=u.uuid,c=t[f];if(c!==void 0)if(delete t[f],c<s){const d=--s,g=e[d],v=--o,A=e[v];t[g.uuid]=c,e[c]=g,t[A.uuid]=d,e[d]=A,e.pop();for(let x=0,w=r;x!==w;++x){const M=n[x],b=M[d],R=M[v];M[c]=b,M[d]=R,M.pop()}}else{const d=--o,g=e[d];d>0&&(t[g.uuid]=c),e[c]=g,e.pop();for(let v=0,A=r;v!==A;++v){const x=n[v];x[c]=x[d],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,f=this.nCachedObjects_,c=new Array(u);r=s.length,n[e]=r,o.push(e),a.push(t),s.push(c);for(let d=f,g=l.length;d!==g;++d){const v=l[d];c[d]=new ur(v,e,t)}return c}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=n,o[n]=l,o.pop(),s[n]=s[a],s.pop(),r[n]=r[a],r.pop()}}}class uU{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Qf,endingEnd:Qf};for(let u=0;u!==o;++u){const f=s[u].createInterpolant(null);a[u]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=iN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+n,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case jC:for(let f=0,c=l.length;f!==c;++f)l[f].evaluate(o),u[f].accumulateAdditive(a);break;case lA:default:for(let f=0,c=l.length;f!==c;++f)l[f].evaluate(o),u[f].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===sN;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===rN){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Zf,r.endingEnd=Zf):(e?r.endingStart=this.zeroSlopeAtStart?Zf:Qf:r.endingStart=u0,t?r.endingEnd=this.zeroSlopeAtEnd?Zf:Qf:r.endingEnd=u0)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=n,this}}const nV=new Float32Array(1);class rV extends hu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,u=this._bindingsByRootAndName;let f=u[l];f===void 0&&(f={},u[l]=f);for(let c=0;c!==s;++c){const d=r[c],g=d.name;let v=f[g];if(v!==void 0)++v.referenceCount,o[c]=v;else{if(v=o[c],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,g));continue}const A=t&&t._propertyBindings[c].binding.parsedPath;v=new lU(ur.create(n,g,A),d.ValueTypeName,d.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,g),o[c]=v}a[c].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],f=e._byClipCacheIndex;u._byClipCacheIndex=f,l[f]=u,l.pop(),e._byClipCacheIndex=null;const c=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete c[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new m2(new Float32Array(2),new Float32Array(2),1,nV),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Pm.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(n===void 0&&(o!==null?n=o.blendMode:n=lA),l!==void 0){const c=l.actionByRoot[s];if(c!==void 0&&c.blendMode===n)return c;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const f=new uU(this,o,t,n);return this._bindAction(f,u),this._addInactiveAction(f,a,s),f}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?Pm.findByName(n,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==n;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const f=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=f,t[f]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class b2{constructor(e){this.value=e}clone(){return new b2(this.value.clone===void 0?this.value:this.value.clone())}}let iV=0;class sV extends hu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:iV++}),this.name="",this.usage=h0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class oV extends Q0{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class aV{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const ZP=new pn;class C2{constructor(e,t,n=0,r=1/0){this.ray=new Vm(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new dd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return ZP.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ZP),this}intersectObject(e,t=!0,n=[]){return cb(e,this,n,t),n.sort($P),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)cb(e[r],this,n,t);return n.sort($P),n}}function $P(i,e){return i.distance-e.distance}function cb(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let o=0,a=s.length;o<a;o++)cb(s[o],e,t,!0)}}class lV{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Fn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Fn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class uV{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class R2{constructor(e,t,n,r){R2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const e3=new mt;class cV{constructor(e=new mt(1/0,1/0),t=new mt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=e3.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,e3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const t3=new ce,Hy=new ce;class hV{constructor(e=new ce,t=new ce){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){t3.subVectors(e,this.start),Hy.subVectors(this.end,this.start);const n=Hy.dot(Hy);let s=Hy.dot(t3)/n;return t&&(s=Fn(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const n3=new ce;class fV extends ir{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Dn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,f=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(f),Math.sin(f),1)}n.setAttribute("position",new sn(r,3));const s=new co({fog:!1,toneMapped:!1});this.cone=new Dl(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),n3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(n3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const eh=new ce,Vy=new pn,LS=new pn;class dV extends Dl{constructor(e){const t=cU(e),n=new Dn,r=[],s=[],o=new Ht(0,0,1),a=new Ht(0,1,0);for(let u=0;u<t.length;u++){const f=t[u];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new sn(r,3)),n.setAttribute("color",new sn(s,3));const l=new co({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");LS.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Vy.multiplyMatrices(LS,a.matrixWorld),eh.setFromMatrixPosition(Vy),r.setXYZ(o,eh.x,eh.y,eh.z),Vy.multiplyMatrices(LS,a.parent.matrixWorld),eh.setFromMatrixPosition(Vy),r.setXYZ(o+1,eh.x,eh.y,eh.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function cU(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,cU(i.children[t]));return e}class pV extends Lr{constructor(e,t,n){const r=new rv(t,4,2),s=new Io({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const mV=new ce,r3=new Ht,i3=new Ht;class gV extends ir{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new nv(t);r.rotateY(Math.PI*.5),this.material=new Io({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new gr(o,3)),this.add(new Lr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");r3.copy(this.light.color),i3.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?r3:i3;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(mV.setFromMatrixPosition(this.light.matrixWorld).negate())}}class _V extends Dl{constructor(e=10,t=10,n=4473924,r=8947848){n=new Ht(n),r=new Ht(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let d=0,g=0,v=-a;d<=t;d++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const A=d===s?n:r;A.toArray(u,g),g+=3,A.toArray(u,g),g+=3,A.toArray(u,g),g+=3,A.toArray(u,g),g+=3}const f=new Dn;f.setAttribute("position",new sn(l,3)),f.setAttribute("color",new sn(u,3));const c=new co({vertexColors:!0,toneMapped:!1});super(f,c),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class vV extends Dl{constructor(e=10,t=16,n=8,r=64,s=4473924,o=8947848){s=new Ht(s),o=new Ht(o);const a=[],l=[];if(t>1)for(let c=0;c<t;c++){const d=c/t*(Math.PI*2),g=Math.sin(d)*e,v=Math.cos(d)*e;a.push(0,0,0),a.push(g,0,v);const A=c&1?s:o;l.push(A.r,A.g,A.b),l.push(A.r,A.g,A.b)}for(let c=0;c<n;c++){const d=c&1?s:o,g=e-e/n*c;for(let v=0;v<r;v++){let A=v/r*(Math.PI*2),x=Math.sin(A)*g,w=Math.cos(A)*g;a.push(x,0,w),l.push(d.r,d.g,d.b),A=(v+1)/r*(Math.PI*2),x=Math.sin(A)*g,w=Math.cos(A)*g,a.push(x,0,w),l.push(d.r,d.g,d.b)}}const u=new Dn;u.setAttribute("position",new sn(a,3)),u.setAttribute("color",new sn(l,3));const f=new co({vertexColors:!0,toneMapped:!1});super(u,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const s3=new ce,Wy=new ce,o3=new ce;class yV extends ir{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Dn;r.setAttribute("position",new sn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new co({fog:!1,toneMapped:!1});this.lightPlane=new cc(r,s),this.add(this.lightPlane),r=new Dn,r.setAttribute("position",new sn([0,0,0,0,0,1],3)),this.targetLine=new cc(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),s3.setFromMatrixPosition(this.light.matrixWorld),Wy.setFromMatrixPosition(this.light.target.matrixWorld),o3.subVectors(Wy,s3),this.lightPlane.lookAt(Wy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Wy),this.targetLine.scale.z=o3.length()}}const jy=new ce,Ei=new K0;class xV extends Dl{constructor(e){const t=new Dn,n=new co({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,A){l(v),l(A)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new sn(r,3)),t.setAttribute("color",new sn(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Ht(16755200),f=new Ht(16711680),c=new Ht(43775),d=new Ht(16777215),g=new Ht(3355443);this.setColors(u,f,c,d,g)}setColors(e,t,n,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;Ei.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Pi("c",t,e,Ei,0,0,-1),Pi("t",t,e,Ei,0,0,1),Pi("n1",t,e,Ei,-n,-r,-1),Pi("n2",t,e,Ei,n,-r,-1),Pi("n3",t,e,Ei,-n,r,-1),Pi("n4",t,e,Ei,n,r,-1),Pi("f1",t,e,Ei,-n,-r,1),Pi("f2",t,e,Ei,n,-r,1),Pi("f3",t,e,Ei,-n,r,1),Pi("f4",t,e,Ei,n,r,1),Pi("u1",t,e,Ei,n*.7,r*1.1,-1),Pi("u2",t,e,Ei,-n*.7,r*1.1,-1),Pi("u3",t,e,Ei,0,r*2,-1),Pi("cf1",t,e,Ei,-n,0,1),Pi("cf2",t,e,Ei,n,0,1),Pi("cf3",t,e,Ei,0,-r,1),Pi("cf4",t,e,Ei,0,r,1),Pi("cn1",t,e,Ei,-n,0,-1),Pi("cn2",t,e,Ei,n,0,-1),Pi("cn3",t,e,Ei,0,-r,-1),Pi("cn4",t,e,Ei,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pi(i,e,t,n,r,s,o){jy.set(r,s,o).unproject(n);const a=e[i];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,f=a.length;u<f;u++)l.setXYZ(a[u],jy.x,jy.y,jy.z)}}const qy=new Es;class AV extends Dl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Dn;s.setIndex(new gr(n,1)),s.setAttribute("position",new gr(r,3)),super(s,new co({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&qy.setFromObject(this.object),qy.isEmpty())return;const t=qy.min,n=qy.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class wV extends Dl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Dn;s.setIndex(new gr(n,1)),s.setAttribute("position",new sn(r,3)),super(s,new co({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class SV extends cc{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Dn;o.setAttribute("position",new sn(s,3)),o.computeBoundingSphere(),super(o,new co({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Dn;l.setAttribute("position",new sn(a,3)),l.computeBoundingSphere(),this.add(new Lr(l,new Io({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const a3=new ce;let Xy,FS;class EV extends ir{constructor(e=new ce(0,0,1),t=new ce(0,0,0),n=1,r=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",Xy===void 0&&(Xy=new Dn,Xy.setAttribute("position",new sn([0,0,0,0,1,0],3)),FS=new Wm(0,.5,1,5,1),FS.translate(0,-.5,0)),this.position.copy(t),this.line=new cc(Xy,new co({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Lr(FS,new Io({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{a3.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(a3,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class TV extends Dl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Dn;r.setAttribute("position",new sn(t,3)),r.setAttribute("color",new sn(n,3));const s=new co({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new Ht,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class MV{constructor(){this.type="ShapePath",this.color=new Ht,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new p0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const M=[];for(let b=0,R=w.length;b<R;b++){const F=w[b],O=new pd;O.curves=F.curves,M.push(O)}return M}function n(w,M){const b=M.length;let R=!1;for(let F=b-1,O=0;O<b;F=O++){let D=M[F],I=M[O],C=I.x-D.x,B=I.y-D.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(D=M[O],C=-C,I=M[F],B=-B),w.y<D.y||w.y>I.y)continue;if(w.y===D.y){if(w.x===D.x)return!0}else{const k=B*(w.x-D.x)-C*(w.y-D.y);if(k===0)return!0;if(k<0)continue;R=!R}}else{if(w.y!==D.y)continue;if(I.x<=w.x&&w.x<=D.x||D.x<=w.x&&w.x<=I.x)return!0}}return R}const r=nu.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new pd,l.curves=a.curves,u.push(l),u;let f=!r(s[0].getPoints());f=e?!f:f;const c=[],d=[];let g=[],v=0,A;d[v]=void 0,g[v]=[];for(let w=0,M=s.length;w<M;w++)a=s[w],A=a.getPoints(),o=r(A),o=e?!o:o,o?(!f&&d[v]&&v++,d[v]={s:new pd,p:A},d[v].s.curves=a.curves,f&&v++,g[v]=[]):g[v].push({h:a,p:A[0]});if(!d[0])return t(s);if(d.length>1){let w=!1,M=0;for(let b=0,R=d.length;b<R;b++)c[b]=[];for(let b=0,R=d.length;b<R;b++){const F=g[b];for(let O=0;O<F.length;O++){const D=F[O];let I=!0;for(let C=0;C<d.length;C++)n(D.p,d[C].p)&&(b!==C&&M++,I?(I=!1,c[C].push(D)):w=!0);I&&c[b].push(D)}}M>0&&w===!1&&(g=c)}let x;for(let w=0,M=d.length;w<M;w++){l=d[w].s,u.push(l),x=g[w];for(let b=0,R=x.length;b<R;b++)l.holes.push(x[b].h)}return u}}class bV extends hu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function CV(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function RV(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function IV(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function hb(i,e,t,n){const r=PV(n);switch(t){case UC:return i*e;case GC:return i*e;case HC:return i*e*2;case X0:return i*e/r.components*r.byteLength;case J0:return i*e/r.components*r.byteLength;case VC:return i*e*2/r.components*r.byteLength;case oA:return i*e*2/r.components*r.byteLength;case zC:return i*e*3/r.components*r.byteLength;case Oi:return i*e*4/r.components*r.byteLength;case aA:return i*e*4/r.components*r.byteLength;case L_:case F_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case O_:case k_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Q1:case $1:return Math.max(i,16)*Math.max(e,8)/4;case Y1:case Z1:return Math.max(i,8)*Math.max(e,8)/2;case ex:case tx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case nx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case rx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case ix:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case sx:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case ox:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case ax:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case lx:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case ux:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case cx:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case hx:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case fx:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case dx:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case px:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case mx:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case gx:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case N_:case _x:case vx:return Math.ceil(i/4)*Math.ceil(e/4)*16;case WC:case yx:return Math.ceil(i/4)*Math.ceil(e/4)*8;case xx:case Ax:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function PV(i){switch(i){case Qo:case nA:return{byteLength:1,components:1};case Tm:case rA:case ws:return{byteLength:2,components:1};case iA:case sA:return{byteLength:2,components:4};case au:case q0:case pi:return{byteLength:4,components:1};case NC:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}const DV={contain:CV,cover:RV,fill:IV,getByteLength:hb};class BV extends Po{constructor(e=1,t=1,n=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Gm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Gm);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function hU(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function LV(i){const e=new WeakMap;function t(a,l){const u=a.array,f=a.usage,c=u.byteLength,d=i.createBuffer();i.bindBuffer(l,d),i.bufferData(l,u,f),a.onUploadCallback();let g;if(u instanceof Float32Array)g=i.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?g=i.HALF_FLOAT:g=i.UNSIGNED_SHORT;else if(u instanceof Int16Array)g=i.SHORT;else if(u instanceof Uint32Array)g=i.UNSIGNED_INT;else if(u instanceof Int32Array)g=i.INT;else if(u instanceof Int8Array)g=i.BYTE;else if(u instanceof Uint8Array)g=i.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)g=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:d,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:c}}function n(a,l,u){const f=l.array,c=l.updateRanges;if(i.bindBuffer(u,a),c.length===0)i.bufferSubData(u,0,f);else{c.sort((g,v)=>g.start-v.start);let d=0;for(let g=1;g<c.length;g++){const v=c[d],A=c[g];A.start<=v.start+v.count+1?v.count=Math.max(v.count,A.start+A.count-v.start):(++d,c[d]=A)}c.length=d+1;for(let g=0,v=c.length;g<v;g++){const A=c[g];i.bufferSubData(u,A.start*f.BYTES_PER_ELEMENT,f,A.start,A.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(i.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,a,l),u.version=a.version}}return{get:r,remove:s,update:o}}var FV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,OV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,kV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,NV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,UV=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,zV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,GV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,HV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,VV=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,WV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,jV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,qV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,XV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,JV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,KV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,YV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,QV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ZV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,$V=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,e7=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,t7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,n7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,r7=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,i7=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,s7=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,o7=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,a7=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,l7=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,u7=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,c7=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,h7="gl_FragColor = linearToOutputTexel( gl_FragColor );",f7=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,d7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,p7=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,m7=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,g7=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,v7=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,y7=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,x7=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,A7=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,w7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,S7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,E7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,T7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,M7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,b7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,C7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,R7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,I7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,P7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,D7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,B7=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,L7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,F7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,O7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,k7=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,N7=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,U7=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,z7=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,G7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,H7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,V7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,W7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,j7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,q7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,X7=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,J7=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,K7=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Y7=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Q7=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Z7=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,$7=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,eW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nW=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,rW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,iW=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,sW=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,oW=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,aW=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,lW=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,uW=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,cW=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,hW=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,fW=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dW=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,pW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,mW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,gW=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,_W=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,vW=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,yW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,xW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,AW=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,wW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,SW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,EW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,TW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,MW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,bW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,CW=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,RW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,IW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,PW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,DW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,BW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const LW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,FW=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,OW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kW=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,NW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,UW=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,GW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,HW=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,VW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,WW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,jW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,XW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,KW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,$W=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ej=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,tj=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,nj=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rj=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ij=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,sj=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oj=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aj=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lj=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,uj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cj=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hj=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fj=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,zn={alphahash_fragment:FV,alphahash_pars_fragment:OV,alphamap_fragment:kV,alphamap_pars_fragment:NV,alphatest_fragment:UV,alphatest_pars_fragment:zV,aomap_fragment:GV,aomap_pars_fragment:HV,batching_pars_vertex:VV,batching_vertex:WV,begin_vertex:jV,beginnormal_vertex:qV,bsdfs:XV,iridescence_fragment:JV,bumpmap_pars_fragment:KV,clipping_planes_fragment:YV,clipping_planes_pars_fragment:QV,clipping_planes_pars_vertex:ZV,clipping_planes_vertex:$V,color_fragment:e7,color_pars_fragment:t7,color_pars_vertex:n7,color_vertex:r7,common:i7,cube_uv_reflection_fragment:s7,defaultnormal_vertex:o7,displacementmap_pars_vertex:a7,displacementmap_vertex:l7,emissivemap_fragment:u7,emissivemap_pars_fragment:c7,colorspace_fragment:h7,colorspace_pars_fragment:f7,envmap_fragment:d7,envmap_common_pars_fragment:p7,envmap_pars_fragment:m7,envmap_pars_vertex:g7,envmap_physical_pars_fragment:b7,envmap_vertex:_7,fog_vertex:v7,fog_pars_vertex:y7,fog_fragment:x7,fog_pars_fragment:A7,gradientmap_pars_fragment:w7,lightmap_pars_fragment:S7,lights_lambert_fragment:E7,lights_lambert_pars_fragment:T7,lights_pars_begin:M7,lights_toon_fragment:C7,lights_toon_pars_fragment:R7,lights_phong_fragment:I7,lights_phong_pars_fragment:P7,lights_physical_fragment:D7,lights_physical_pars_fragment:B7,lights_fragment_begin:L7,lights_fragment_maps:F7,lights_fragment_end:O7,logdepthbuf_fragment:k7,logdepthbuf_pars_fragment:N7,logdepthbuf_pars_vertex:U7,logdepthbuf_vertex:z7,map_fragment:G7,map_pars_fragment:H7,map_particle_fragment:V7,map_particle_pars_fragment:W7,metalnessmap_fragment:j7,metalnessmap_pars_fragment:q7,morphinstance_vertex:X7,morphcolor_vertex:J7,morphnormal_vertex:K7,morphtarget_pars_vertex:Y7,morphtarget_vertex:Q7,normal_fragment_begin:Z7,normal_fragment_maps:$7,normal_pars_fragment:eW,normal_pars_vertex:tW,normal_vertex:nW,normalmap_pars_fragment:rW,clearcoat_normal_fragment_begin:iW,clearcoat_normal_fragment_maps:sW,clearcoat_pars_fragment:oW,iridescence_pars_fragment:aW,opaque_fragment:lW,packing:uW,premultiplied_alpha_fragment:cW,project_vertex:hW,dithering_fragment:fW,dithering_pars_fragment:dW,roughnessmap_fragment:pW,roughnessmap_pars_fragment:mW,shadowmap_pars_fragment:gW,shadowmap_pars_vertex:_W,shadowmap_vertex:vW,shadowmask_pars_fragment:yW,skinbase_vertex:xW,skinning_pars_vertex:AW,skinning_vertex:wW,skinnormal_vertex:SW,specularmap_fragment:EW,specularmap_pars_fragment:TW,tonemapping_fragment:MW,tonemapping_pars_fragment:bW,transmission_fragment:CW,transmission_pars_fragment:RW,uv_pars_fragment:IW,uv_pars_vertex:PW,uv_vertex:DW,worldpos_vertex:BW,background_vert:LW,background_frag:FW,backgroundCube_vert:OW,backgroundCube_frag:kW,cube_vert:NW,cube_frag:UW,depth_vert:zW,depth_frag:GW,distanceRGBA_vert:HW,distanceRGBA_frag:VW,equirect_vert:WW,equirect_frag:jW,linedashed_vert:qW,linedashed_frag:XW,meshbasic_vert:JW,meshbasic_frag:KW,meshlambert_vert:YW,meshlambert_frag:QW,meshmatcap_vert:ZW,meshmatcap_frag:$W,meshnormal_vert:ej,meshnormal_frag:tj,meshphong_vert:nj,meshphong_frag:rj,meshphysical_vert:ij,meshphysical_frag:sj,meshtoon_vert:oj,meshtoon_frag:aj,points_vert:lj,points_frag:uj,shadow_vert:cj,shadow_frag:hj,sprite_vert:fj,sprite_frag:dj},jt={common:{diffuse:{value:new Ht(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ln},alphaMap:{value:null},alphaMapTransform:{value:new Ln},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ln}},envmap:{envMap:{value:null},envMapRotation:{value:new Ln},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ln}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ln}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ln},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ln},normalScale:{value:new mt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ln},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ln}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ln}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ln}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ln},alphaTest:{value:0},uvTransform:{value:new Ln}},sprite:{diffuse:{value:new Ht(16777215)},opacity:{value:1},center:{value:new mt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ln},alphaMap:{value:null},alphaMapTransform:{value:new Ln},alphaTest:{value:0}}},El={basic:{uniforms:To([jt.common,jt.specularmap,jt.envmap,jt.aomap,jt.lightmap,jt.fog]),vertexShader:zn.meshbasic_vert,fragmentShader:zn.meshbasic_frag},lambert:{uniforms:To([jt.common,jt.specularmap,jt.envmap,jt.aomap,jt.lightmap,jt.emissivemap,jt.bumpmap,jt.normalmap,jt.displacementmap,jt.fog,jt.lights,{emissive:{value:new Ht(0)}}]),vertexShader:zn.meshlambert_vert,fragmentShader:zn.meshlambert_frag},phong:{uniforms:To([jt.common,jt.specularmap,jt.envmap,jt.aomap,jt.lightmap,jt.emissivemap,jt.bumpmap,jt.normalmap,jt.displacementmap,jt.fog,jt.lights,{emissive:{value:new Ht(0)},specular:{value:new Ht(1118481)},shininess:{value:30}}]),vertexShader:zn.meshphong_vert,fragmentShader:zn.meshphong_frag},standard:{uniforms:To([jt.common,jt.envmap,jt.aomap,jt.lightmap,jt.emissivemap,jt.bumpmap,jt.normalmap,jt.displacementmap,jt.roughnessmap,jt.metalnessmap,jt.fog,jt.lights,{emissive:{value:new Ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zn.meshphysical_vert,fragmentShader:zn.meshphysical_frag},toon:{uniforms:To([jt.common,jt.aomap,jt.lightmap,jt.emissivemap,jt.bumpmap,jt.normalmap,jt.displacementmap,jt.gradientmap,jt.fog,jt.lights,{emissive:{value:new Ht(0)}}]),vertexShader:zn.meshtoon_vert,fragmentShader:zn.meshtoon_frag},matcap:{uniforms:To([jt.common,jt.bumpmap,jt.normalmap,jt.displacementmap,jt.fog,{matcap:{value:null}}]),vertexShader:zn.meshmatcap_vert,fragmentShader:zn.meshmatcap_frag},points:{uniforms:To([jt.points,jt.fog]),vertexShader:zn.points_vert,fragmentShader:zn.points_frag},dashed:{uniforms:To([jt.common,jt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zn.linedashed_vert,fragmentShader:zn.linedashed_frag},depth:{uniforms:To([jt.common,jt.displacementmap]),vertexShader:zn.depth_vert,fragmentShader:zn.depth_frag},normal:{uniforms:To([jt.common,jt.bumpmap,jt.normalmap,jt.displacementmap,{opacity:{value:1}}]),vertexShader:zn.meshnormal_vert,fragmentShader:zn.meshnormal_frag},sprite:{uniforms:To([jt.sprite,jt.fog]),vertexShader:zn.sprite_vert,fragmentShader:zn.sprite_frag},background:{uniforms:{uvTransform:{value:new Ln},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:zn.background_vert,fragmentShader:zn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ln}},vertexShader:zn.backgroundCube_vert,fragmentShader:zn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:zn.cube_vert,fragmentShader:zn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zn.equirect_vert,fragmentShader:zn.equirect_frag},distanceRGBA:{uniforms:To([jt.common,jt.displacementmap,{referencePosition:{value:new ce},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zn.distanceRGBA_vert,fragmentShader:zn.distanceRGBA_frag},shadow:{uniforms:To([jt.lights,jt.fog,{color:{value:new Ht(0)},opacity:{value:1}}]),vertexShader:zn.shadow_vert,fragmentShader:zn.shadow_frag}};El.physical={uniforms:To([El.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ln},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ln},clearcoatNormalScale:{value:new mt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ln},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ln},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ln},sheen:{value:0},sheenColor:{value:new Ht(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ln},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ln},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ln},transmissionSamplerSize:{value:new mt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ln},attenuationDistance:{value:0},attenuationColor:{value:new Ht(0)},specularColor:{value:new Ht(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ln},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ln},anisotropyVector:{value:new mt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ln}}]),vertexShader:zn.meshphysical_vert,fragmentShader:zn.meshphysical_frag};const Jy={r:0,b:0,g:0},kf=new Aa,pj=new pn;function mj(i,e,t,n,r,s,o){const a=new Ht(0);let l=s===!0?0:1,u,f,c=null,d=0,g=null;function v(b){let R=b.isScene===!0?b.background:null;return R&&R.isTexture&&(R=(b.backgroundBlurriness>0?t:e).get(R)),R}function A(b){let R=!1;const F=v(b);F===null?w(a,l):F&&F.isColor&&(w(F,1),R=!0);const O=i.xr.getEnvironmentBlendMode();O==="additive"?n.buffers.color.setClear(0,0,0,1,o):O==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||R)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function x(b,R){const F=v(R);F&&(F.isCubeTexture||F.mapping===Hm)?(f===void 0&&(f=new Lr(new Bd(1,1,1),new uo({name:"BackgroundCubeMaterial",uniforms:Rm(El.backgroundCube.uniforms),vertexShader:El.backgroundCube.vertexShader,fragmentShader:El.backgroundCube.fragmentShader,side:ao,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(O,D,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),kf.copy(R.backgroundRotation),kf.x*=-1,kf.y*=-1,kf.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(kf.y*=-1,kf.z*=-1),f.material.uniforms.envMap.value=F,f.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=R.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(pj.makeRotationFromEuler(kf)),f.material.toneMapped=cr.getTransfer(F.colorSpace)!==br,(c!==F||d!==F.version||g!==i.toneMapping)&&(f.material.needsUpdate=!0,c=F,d=F.version,g=i.toneMapping),f.layers.enableAll(),b.unshift(f,f.geometry,f.material,0,0,null)):F&&F.isTexture&&(u===void 0&&(u=new Lr(new Wa(2,2),new uo({name:"BackgroundMaterial",uniforms:Rm(El.background.uniforms),vertexShader:El.background.vertexShader,fragmentShader:El.background.fragmentShader,side:Il,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=F,u.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,u.material.toneMapped=cr.getTransfer(F.colorSpace)!==br,F.matrixAutoUpdate===!0&&F.updateMatrix(),u.material.uniforms.uvTransform.value.copy(F.matrix),(c!==F||d!==F.version||g!==i.toneMapping)&&(u.material.needsUpdate=!0,c=F,d=F.version,g=i.toneMapping),u.layers.enableAll(),b.unshift(u,u.geometry,u.material,0,0,null))}function w(b,R){b.getRGB(Jy,AN(i)),n.buffers.color.setClear(Jy.r,Jy.g,Jy.b,R,o)}function M(){f!==void 0&&(f.geometry.dispose(),f.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(b,R=1){a.set(b),l=R,w(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,w(a,l)},render:A,addToRenderList:x,dispose:M}}function gj(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=d(null);let s=r,o=!1;function a(B,k,H,z,Z){let ue=!1;const ae=c(z,H,k);s!==ae&&(s=ae,u(s.object)),ue=g(B,z,H,Z),ue&&v(B,z,H,Z),Z!==null&&e.update(Z,i.ELEMENT_ARRAY_BUFFER),(ue||o)&&(o=!1,R(B,k,H,z),Z!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(Z).buffer))}function l(){return i.createVertexArray()}function u(B){return i.bindVertexArray(B)}function f(B){return i.deleteVertexArray(B)}function c(B,k,H){const z=H.wireframe===!0;let Z=n[B.id];Z===void 0&&(Z={},n[B.id]=Z);let ue=Z[k.id];ue===void 0&&(ue={},Z[k.id]=ue);let ae=ue[z];return ae===void 0&&(ae=d(l()),ue[z]=ae),ae}function d(B){const k=[],H=[],z=[];for(let Z=0;Z<t;Z++)k[Z]=0,H[Z]=0,z[Z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:H,attributeDivisors:z,object:B,attributes:{},index:null}}function g(B,k,H,z){const Z=s.attributes,ue=k.attributes;let ae=0;const ge=H.getAttributes();for(const ee in ge)if(ge[ee].location>=0){const $=Z[ee];let V=ue[ee];if(V===void 0&&(ee==="instanceMatrix"&&B.instanceMatrix&&(V=B.instanceMatrix),ee==="instanceColor"&&B.instanceColor&&(V=B.instanceColor)),$===void 0||$.attribute!==V||V&&$.data!==V.data)return!0;ae++}return s.attributesNum!==ae||s.index!==z}function v(B,k,H,z){const Z={},ue=k.attributes;let ae=0;const ge=H.getAttributes();for(const ee in ge)if(ge[ee].location>=0){let $=ue[ee];$===void 0&&(ee==="instanceMatrix"&&B.instanceMatrix&&($=B.instanceMatrix),ee==="instanceColor"&&B.instanceColor&&($=B.instanceColor));const V={};V.attribute=$,$&&$.data&&(V.data=$.data),Z[ee]=V,ae++}s.attributes=Z,s.attributesNum=ae,s.index=z}function A(){const B=s.newAttributes;for(let k=0,H=B.length;k<H;k++)B[k]=0}function x(B){w(B,0)}function w(B,k){const H=s.newAttributes,z=s.enabledAttributes,Z=s.attributeDivisors;H[B]=1,z[B]===0&&(i.enableVertexAttribArray(B),z[B]=1),Z[B]!==k&&(i.vertexAttribDivisor(B,k),Z[B]=k)}function M(){const B=s.newAttributes,k=s.enabledAttributes;for(let H=0,z=k.length;H<z;H++)k[H]!==B[H]&&(i.disableVertexAttribArray(H),k[H]=0)}function b(B,k,H,z,Z,ue,ae){ae===!0?i.vertexAttribIPointer(B,k,H,Z,ue):i.vertexAttribPointer(B,k,H,z,Z,ue)}function R(B,k,H,z){A();const Z=z.attributes,ue=H.getAttributes(),ae=k.defaultAttributeValues;for(const ge in ue){const ee=ue[ge];if(ee.location>=0){let le=Z[ge];if(le===void 0&&(ge==="instanceMatrix"&&B.instanceMatrix&&(le=B.instanceMatrix),ge==="instanceColor"&&B.instanceColor&&(le=B.instanceColor)),le!==void 0){const $=le.normalized,V=le.itemSize,Q=e.get(le);if(Q===void 0)continue;const fe=Q.buffer,oe=Q.type,he=Q.bytesPerElement,xe=oe===i.INT||oe===i.UNSIGNED_INT||le.gpuType===q0;if(le.isInterleavedBufferAttribute){const _e=le.data,be=_e.stride,Xe=le.offset;if(_e.isInstancedInterleavedBuffer){for(let Ye=0;Ye<ee.locationSize;Ye++)w(ee.location+Ye,_e.meshPerAttribute);B.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let Ye=0;Ye<ee.locationSize;Ye++)x(ee.location+Ye);i.bindBuffer(i.ARRAY_BUFFER,fe);for(let Ye=0;Ye<ee.locationSize;Ye++)b(ee.location+Ye,V/ee.locationSize,oe,$,be*he,(Xe+V/ee.locationSize*Ye)*he,xe)}else{if(le.isInstancedBufferAttribute){for(let _e=0;_e<ee.locationSize;_e++)w(ee.location+_e,le.meshPerAttribute);B.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let _e=0;_e<ee.locationSize;_e++)x(ee.location+_e);i.bindBuffer(i.ARRAY_BUFFER,fe);for(let _e=0;_e<ee.locationSize;_e++)b(ee.location+_e,V/ee.locationSize,oe,$,V*he,V/ee.locationSize*_e*he,xe)}}else if(ae!==void 0){const $=ae[ge];if($!==void 0)switch($.length){case 2:i.vertexAttrib2fv(ee.location,$);break;case 3:i.vertexAttrib3fv(ee.location,$);break;case 4:i.vertexAttrib4fv(ee.location,$);break;default:i.vertexAttrib1fv(ee.location,$)}}}}M()}function F(){I();for(const B in n){const k=n[B];for(const H in k){const z=k[H];for(const Z in z)f(z[Z].object),delete z[Z];delete k[H]}delete n[B]}}function O(B){if(n[B.id]===void 0)return;const k=n[B.id];for(const H in k){const z=k[H];for(const Z in z)f(z[Z].object),delete z[Z];delete k[H]}delete n[B.id]}function D(B){for(const k in n){const H=n[k];if(H[B.id]===void 0)continue;const z=H[B.id];for(const Z in z)f(z[Z].object),delete z[Z];delete H[B.id]}}function I(){C(),o=!0,s!==r&&(s=r,u(s.object))}function C(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:I,resetDefaultState:C,dispose:F,releaseStatesOfGeometry:O,releaseStatesOfProgram:D,initAttributes:A,enableAttribute:x,disableUnusedAttributes:M}}function _j(i,e,t){let n;function r(u){n=u}function s(u,f){i.drawArrays(n,u,f),t.update(f,n,1)}function o(u,f,c){c!==0&&(i.drawArraysInstanced(n,u,f,c),t.update(f,n,c))}function a(u,f,c){if(c===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,f,0,c);let g=0;for(let v=0;v<c;v++)g+=f[v];t.update(g,n,1)}function l(u,f,c,d){if(c===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<u.length;v++)o(u[v],f[v],d[v]);else{g.multiDrawArraysInstancedWEBGL(n,u,0,f,0,d,0,c);let v=0;for(let A=0;A<c;A++)v+=f[A]*d[A];t.update(v,n,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function vj(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const D=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(D){return!(D!==Oi&&n.convert(D)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(D){const I=D===ws&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(D!==Qo&&n.convert(D)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&D!==pi&&!I)}function l(D){if(D==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return D==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const f=l(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);const c=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),g=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),v=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=i.getParameter(i.MAX_TEXTURE_SIZE),x=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),w=i.getParameter(i.MAX_VERTEX_ATTRIBS),M=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),b=i.getParameter(i.MAX_VARYING_VECTORS),R=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),F=v>0,O=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:c,reverseDepthBuffer:d,maxTextures:g,maxVertexTextures:v,maxTextureSize:A,maxCubemapSize:x,maxAttributes:w,maxVertexUniforms:M,maxVaryings:b,maxFragmentUniforms:R,vertexTextures:F,maxSamples:O}}function yj(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new ah,a=new Ln,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(c,d){const g=c.length!==0||d||n!==0||r;return r=d,n=c.length,g},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(c,d){t=f(c,d,0)},this.setState=function(c,d,g){const v=c.clippingPlanes,A=c.clipIntersection,x=c.clipShadows,w=i.get(c);if(!r||v===null||v.length===0||s&&!x)s?f(null):u();else{const M=s?0:n,b=M*4;let R=w.clippingState||null;l.value=R,R=f(v,d,b,g);for(let F=0;F!==b;++F)R[F]=t[F];w.clippingState=R,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=M}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function f(c,d,g,v){const A=c!==null?c.length:0;let x=null;if(A!==0){if(x=l.value,v!==!0||x===null){const w=g+A*4,M=d.matrixWorldInverse;a.getNormalMatrix(M),(x===null||x.length<w)&&(x=new Float32Array(w));for(let b=0,R=g;b!==A;++b,R+=4)o.copy(c[b]).applyMatrix4(M,a),o.normal.toArray(x,R),x[R+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,x}}function xj(i){let e=new WeakMap;function t(o,a){return a===Sm?o.mapping=ou:a===l0&&(o.mapping=bh),o}function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===Sm||a===l0)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new t2(l.height);return u.fromEquirectangularTexture(i,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const sm=4,l3=[.125,.215,.35,.446,.526,.582],qf=20,OS=new _c,u3=new Ht;let kS=null,NS=0,US=0,zS=!1;const Wf=(1+Math.sqrt(5))/2,zp=1/Wf,c3=[new ce(-Wf,zp,0),new ce(Wf,zp,0),new ce(-zp,0,Wf),new ce(zp,0,Wf),new ce(0,Wf,-zp),new ce(0,Wf,zp),new ce(-1,1,-1),new ce(1,1,-1),new ce(-1,1,1),new ce(1,1,1)];class fb{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){kS=this._renderer.getRenderTarget(),NS=this._renderer.getActiveCubeFace(),US=this._renderer.getActiveMipmapLevel(),zS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=d3(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=f3(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(kS,NS,US),this._renderer.xr.enabled=zS,e.scissorTest=!1,Ky(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ou||e.mapping===bh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),kS=this._renderer.getRenderTarget(),NS=this._renderer.getActiveCubeFace(),US=this._renderer.getActiveMipmapLevel(),zS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:pr,minFilter:pr,generateMipmaps:!1,type:ws,format:Oi,colorSpace:lu,depthBuffer:!1},r=h3(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=h3(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Aj(s)),this._blurMaterial=wj(s,e,t)}return r}_compileMaterial(e){const t=new Lr(this._lodPlanes[0],e);this._renderer.compile(t,OS)}_sceneToCubeUV(e,t,n,r){const a=new Li(90,1,t,n),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,c=f.autoClear,d=f.toneMapping;f.getClearColor(u3),f.toneMapping=tu,f.autoClear=!1;const g=new Io({name:"PMREM.Background",side:ao,depthWrite:!1,depthTest:!1}),v=new Lr(new Bd,g);let A=!1;const x=e.background;x?x.isColor&&(g.color.copy(x),e.background=null,A=!0):(g.color.copy(u3),A=!0);for(let w=0;w<6;w++){const M=w%3;M===0?(a.up.set(0,l[w],0),a.lookAt(u[w],0,0)):M===1?(a.up.set(0,0,l[w]),a.lookAt(0,u[w],0)):(a.up.set(0,l[w],0),a.lookAt(0,0,u[w]));const b=this._cubeSize;Ky(r,M*b,w>2?b:0,b,b),f.setRenderTarget(r),A&&f.render(v,a),f.render(e,a)}v.geometry.dispose(),v.material.dispose(),f.toneMapping=d,f.autoClear=c,e.background=x}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===ou||e.mapping===bh;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=d3()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=f3());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Lr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Ky(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,OS)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=c3[(r-s-1)%c3.length];this._blur(e,s-1,s,o,a)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,c=new Lr(this._lodPlanes[r],u),d=u.uniforms,g=this._sizeLods[n]-1,v=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*qf-1),A=s/v,x=isFinite(s)?1+Math.floor(f*A):qf;x>qf&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${qf}`);const w=[];let M=0;for(let D=0;D<qf;++D){const I=D/A,C=Math.exp(-I*I/2);w.push(C),D===0?M+=C:D<x&&(M+=2*C)}for(let D=0;D<w.length;D++)w[D]=w[D]/M;d.envMap.value=e.texture,d.samples.value=x,d.weights.value=w,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:b}=this;d.dTheta.value=v,d.mipInt.value=b-n;const R=this._sizeLods[r],F=3*R*(r>b-sm?r-b+sm:0),O=4*(this._cubeSize-R);Ky(t,F,O,3*R,2*R),l.setRenderTarget(t),l.render(c,OS)}}function Aj(i){const e=[],t=[],n=[];let r=i;const s=i-sm+1+l3.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-sm?l=l3[o-i+sm-1]:o===0&&(l=0),n.push(l);const u=1/(a-2),f=-u,c=1+u,d=[f,f,c,f,c,c,f,f,c,c,f,c],g=6,v=6,A=3,x=2,w=1,M=new Float32Array(A*v*g),b=new Float32Array(x*v*g),R=new Float32Array(w*v*g);for(let O=0;O<g;O++){const D=O%3*2/3-1,I=O>2?0:-1,C=[D,I,0,D+2/3,I,0,D+2/3,I+1,0,D,I,0,D+2/3,I+1,0,D,I+1,0];M.set(C,A*v*O),b.set(d,x*v*O);const B=[O,O,O,O,O,O];R.set(B,w*v*O)}const F=new Dn;F.setAttribute("position",new gr(M,A)),F.setAttribute("uv",new gr(b,x)),F.setAttribute("faceIndex",new gr(R,w)),e.push(F),r>sm&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function h3(i,e,t){const n=new Po(i,e,t);return n.texture.mapping=Hm,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Ky(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function wj(i,e,t){const n=new Float32Array(qf),r=new ce(0,1,0);return new uo({name:"SphericalGaussianBlur",defines:{n:qf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:I2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:eu,depthTest:!1,depthWrite:!1})}function f3(){return new uo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:I2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:eu,depthTest:!1,depthWrite:!1})}function d3(){return new uo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:I2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:eu,depthTest:!1,depthWrite:!1})}function I2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Sj(i){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const l=a.mapping,u=l===Sm||l===l0,f=l===ou||l===bh;if(u||f){let c=e.get(a);const d=c!==void 0?c.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==d)return t===null&&(t=new fb(i)),c=u?t.fromEquirectangular(a,c):t.fromCubemap(a,c),c.texture.pmremVersion=a.pmremVersion,e.set(a,c),c.texture;if(c!==void 0)return c.texture;{const g=a.image;return u&&g&&g.height>0||f&&g&&r(g)?(t===null&&(t=new fb(i)),c=u?t.fromEquirectangular(a):t.fromCubemap(a),c.texture.pmremVersion=a.pmremVersion,e.set(a,c),a.addEventListener("dispose",s),c.texture):null}}}return a}function r(a){let l=0;const u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function Ej(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&qp("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Tj(i,e,t,n){const r={},s=new WeakMap;function o(c){const d=c.target;d.index!==null&&e.remove(d.index);for(const v in d.attributes)e.remove(d.attributes[v]);d.removeEventListener("dispose",o),delete r[d.id];const g=s.get(d);g&&(e.remove(g),s.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(c,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,t.memory.geometries++),d}function l(c){const d=c.attributes;for(const g in d)e.update(d[g],i.ARRAY_BUFFER)}function u(c){const d=[],g=c.index,v=c.attributes.position;let A=0;if(g!==null){const M=g.array;A=g.version;for(let b=0,R=M.length;b<R;b+=3){const F=M[b+0],O=M[b+1],D=M[b+2];d.push(F,O,O,D,D,F)}}else if(v!==void 0){const M=v.array;A=v.version;for(let b=0,R=M.length/3-1;b<R;b+=3){const F=b+0,O=b+1,D=b+2;d.push(F,O,O,D,D,F)}}else return;const x=new(gN(d)?$C:ZC)(d,1);x.version=A;const w=s.get(c);w&&e.remove(w),s.set(c,x)}function f(c){const d=s.get(c);if(d){const g=c.index;g!==null&&d.version<g.version&&u(c)}else u(c);return s.get(c)}return{get:a,update:l,getWireframeAttribute:f}}function Mj(i,e,t){let n;function r(d){n=d}let s,o;function a(d){s=d.type,o=d.bytesPerElement}function l(d,g){i.drawElements(n,g,s,d*o),t.update(g,n,1)}function u(d,g,v){v!==0&&(i.drawElementsInstanced(n,g,s,d*o,v),t.update(g,n,v))}function f(d,g,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,g,0,s,d,0,v);let x=0;for(let w=0;w<v;w++)x+=g[w];t.update(x,n,1)}function c(d,g,v,A){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let w=0;w<d.length;w++)u(d[w]/o,g[w],A[w]);else{x.multiDrawElementsInstancedWEBGL(n,g,0,s,d,0,A,0,v);let w=0;for(let M=0;M<v;M++)w+=g[M]*A[M];t.update(w,n,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=c}function bj(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=a*(s/3);break;case i.LINES:t.lines+=a*(s/2);break;case i.LINE_STRIP:t.lines+=a*(s-1);break;case i.LINE_LOOP:t.lines+=a*s;break;case i.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function Cj(i,e,t){const n=new WeakMap,r=new nr;function s(o,a,l){const u=o.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,c=f!==void 0?f.length:0;let d=n.get(a);if(d===void 0||d.count!==c){let B=function(){I.dispose(),n.delete(a),a.removeEventListener("dispose",B)};var g=B;d!==void 0&&d.texture.dispose();const v=a.morphAttributes.position!==void 0,A=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,w=a.morphAttributes.position||[],M=a.morphAttributes.normal||[],b=a.morphAttributes.color||[];let R=0;v===!0&&(R=1),A===!0&&(R=2),x===!0&&(R=3);let F=a.attributes.position.count*R,O=1;F>e.maxTextureSize&&(O=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const D=new Float32Array(F*O*4*c),I=new uA(D,F,O,c);I.type=pi,I.needsUpdate=!0;const C=R*4;for(let k=0;k<c;k++){const H=w[k],z=M[k],Z=b[k],ue=F*O*4*k;for(let ae=0;ae<H.count;ae++){const ge=ae*C;v===!0&&(r.fromBufferAttribute(H,ae),D[ue+ge+0]=r.x,D[ue+ge+1]=r.y,D[ue+ge+2]=r.z,D[ue+ge+3]=0),A===!0&&(r.fromBufferAttribute(z,ae),D[ue+ge+4]=r.x,D[ue+ge+5]=r.y,D[ue+ge+6]=r.z,D[ue+ge+7]=0),x===!0&&(r.fromBufferAttribute(Z,ae),D[ue+ge+8]=r.x,D[ue+ge+9]=r.y,D[ue+ge+10]=r.z,D[ue+ge+11]=Z.itemSize===4?r.w:1)}}d={count:c,texture:I,size:new mt(F,O)},n.set(a,d),a.addEventListener("dispose",B)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let v=0;for(let x=0;x<u.length;x++)v+=u[x];const A=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(i,"morphTargetBaseInfluence",A),l.getUniforms().setValue(i,"morphTargetInfluences",u)}l.getUniforms().setValue(i,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",d.size)}return{update:s}}function Rj(i,e,t,n){let r=new WeakMap;function s(l){const u=n.render.frame,f=l.geometry,c=e.get(l,f);if(r.get(c)!==u&&(e.update(c),r.set(c,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const d=l.skeleton;r.get(d)!==u&&(d.update(),r.set(d,u))}return c}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const fU=new mr,p3=new a2(1,1),dU=new uA,pU=new QC,mU=new Y0,m3=[],g3=[],_3=new Float32Array(16),v3=new Float32Array(9),y3=new Float32Array(4);function qm(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=m3[r];if(s===void 0&&(s=new Float32Array(r),m3[r]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function as(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function ls(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function PA(i,e){let t=g3[e];t===void 0&&(t=new Int32Array(e),g3[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function Ij(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Pj(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(as(t,e))return;i.uniform2fv(this.addr,e),ls(t,e)}}function Dj(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(as(t,e))return;i.uniform3fv(this.addr,e),ls(t,e)}}function Bj(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(as(t,e))return;i.uniform4fv(this.addr,e),ls(t,e)}}function Lj(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(as(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),ls(t,e)}else{if(as(t,n))return;y3.set(n),i.uniformMatrix2fv(this.addr,!1,y3),ls(t,n)}}function Fj(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(as(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),ls(t,e)}else{if(as(t,n))return;v3.set(n),i.uniformMatrix3fv(this.addr,!1,v3),ls(t,n)}}function Oj(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(as(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),ls(t,e)}else{if(as(t,n))return;_3.set(n),i.uniformMatrix4fv(this.addr,!1,_3),ls(t,n)}}function kj(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Nj(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(as(t,e))return;i.uniform2iv(this.addr,e),ls(t,e)}}function Uj(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(as(t,e))return;i.uniform3iv(this.addr,e),ls(t,e)}}function zj(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(as(t,e))return;i.uniform4iv(this.addr,e),ls(t,e)}}function Gj(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function Hj(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(as(t,e))return;i.uniform2uiv(this.addr,e),ls(t,e)}}function Vj(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(as(t,e))return;i.uniform3uiv(this.addr,e),ls(t,e)}}function Wj(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(as(t,e))return;i.uniform4uiv(this.addr,e),ls(t,e)}}function jj(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(p3.compareFunction=JC,s=p3):s=fU,t.setTexture2D(e||s,r)}function qj(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||pU,r)}function Xj(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||mU,r)}function Jj(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||dU,r)}function Kj(i){switch(i){case 5126:return Ij;case 35664:return Pj;case 35665:return Dj;case 35666:return Bj;case 35674:return Lj;case 35675:return Fj;case 35676:return Oj;case 5124:case 35670:return kj;case 35667:case 35671:return Nj;case 35668:case 35672:return Uj;case 35669:case 35673:return zj;case 5125:return Gj;case 36294:return Hj;case 36295:return Vj;case 36296:return Wj;case 35678:case 36198:case 36298:case 36306:case 35682:return jj;case 35679:case 36299:case 36307:return qj;case 35680:case 36300:case 36308:case 36293:return Xj;case 36289:case 36303:case 36311:case 36292:return Jj}}function Yj(i,e){i.uniform1fv(this.addr,e)}function Qj(i,e){const t=qm(e,this.size,2);i.uniform2fv(this.addr,t)}function Zj(i,e){const t=qm(e,this.size,3);i.uniform3fv(this.addr,t)}function $j(i,e){const t=qm(e,this.size,4);i.uniform4fv(this.addr,t)}function eq(i,e){const t=qm(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function tq(i,e){const t=qm(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function nq(i,e){const t=qm(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function rq(i,e){i.uniform1iv(this.addr,e)}function iq(i,e){i.uniform2iv(this.addr,e)}function sq(i,e){i.uniform3iv(this.addr,e)}function oq(i,e){i.uniform4iv(this.addr,e)}function aq(i,e){i.uniform1uiv(this.addr,e)}function lq(i,e){i.uniform2uiv(this.addr,e)}function uq(i,e){i.uniform3uiv(this.addr,e)}function cq(i,e){i.uniform4uiv(this.addr,e)}function hq(i,e,t){const n=this.cache,r=e.length,s=PA(t,r);as(n,s)||(i.uniform1iv(this.addr,s),ls(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||fU,s[o])}function fq(i,e,t){const n=this.cache,r=e.length,s=PA(t,r);as(n,s)||(i.uniform1iv(this.addr,s),ls(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||pU,s[o])}function dq(i,e,t){const n=this.cache,r=e.length,s=PA(t,r);as(n,s)||(i.uniform1iv(this.addr,s),ls(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||mU,s[o])}function pq(i,e,t){const n=this.cache,r=e.length,s=PA(t,r);as(n,s)||(i.uniform1iv(this.addr,s),ls(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||dU,s[o])}function mq(i){switch(i){case 5126:return Yj;case 35664:return Qj;case 35665:return Zj;case 35666:return $j;case 35674:return eq;case 35675:return tq;case 35676:return nq;case 5124:case 35670:return rq;case 35667:case 35671:return iq;case 35668:case 35672:return sq;case 35669:case 35673:return oq;case 5125:return aq;case 36294:return lq;case 36295:return uq;case 36296:return cq;case 35678:case 36198:case 36298:case 36306:case 35682:return hq;case 35679:case 36299:case 36307:return fq;case 35680:case 36300:case 36308:case 36293:return dq;case 36289:case 36303:case 36311:case 36292:return pq}}class gq{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=Kj(t.type)}}class _q{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=mq(t.type)}}class vq{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const GS=/(\w+)(\])?(\[|\.)?/g;function x3(i,e){i.seq.push(e),i.map[e.id]=e}function yq(i,e,t){const n=i.name,r=n.length;for(GS.lastIndex=0;;){const s=GS.exec(n),o=GS.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){x3(t,u===void 0?new gq(a,i,e):new _q(a,i,e));break}else{let c=t.map[a];c===void 0&&(c=new vq(a),x3(t,c)),t=c}}}class A1{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);yq(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function A3(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const xq=37297;let Aq=0;function wq(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}const w3=new Ln;function Sq(i){cr._getMatrix(w3,cr.workingColorSpace,i);const e=`mat3( ${w3.elements.map(t=>t.toFixed(4))} )`;switch(cr.getTransfer(i)){case c0:return[e,"LinearTransferOETF"];case br:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function S3(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+wq(i.getShaderSource(e),o)}else return r}function Eq(i,e){const t=Sq(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Tq(i,e){let t;switch(e){case Yk:t="Linear";break;case Qk:t="Reinhard";break;case Zk:t="Cineon";break;case kC:t="ACESFilmic";break;case eN:t="AgX";break;case tN:t="Neutral";break;case $k:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Yy=new ce;function Mq(){cr.getLuminanceCoefficients(Yy);const i=Yy.x.toFixed(4),e=Yy.y.toFixed(4),t=Yy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function bq(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(x_).join(`
`)}function Cq(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Rq(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function x_(i){return i!==""}function E3(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function T3(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Iq=/^[ \t]*#include +<([\w\d./]+)>/gm;function db(i){return i.replace(Iq,Dq)}const Pq=new Map;function Dq(i,e){let t=zn[e];if(t===void 0){const n=Pq.get(e);if(n!==void 0)t=zn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return db(t)}const Bq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function M3(i){return i.replace(Bq,Lq)}function Lq(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function b3(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Fq(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===eA?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===B_?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Sl&&(e="SHADOWMAP_TYPE_VSM"),e}function Oq(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case ou:case bh:e="ENVMAP_TYPE_CUBE";break;case Hm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function kq(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case bh:e="ENVMAP_MODE_REFRACTION";break}return e}function Nq(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case j0:e="ENVMAP_BLENDING_MULTIPLY";break;case Jk:e="ENVMAP_BLENDING_MIX";break;case Kk:e="ENVMAP_BLENDING_ADD";break}return e}function Uq(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function zq(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Fq(t),u=Oq(t),f=kq(t),c=Nq(t),d=Uq(t),g=bq(t),v=Cq(s),A=r.createProgram();let x,w,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(x_).join(`
`),x.length>0&&(x+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(x_).join(`
`),w.length>0&&(w+=`
`)):(x=[b3(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(x_).join(`
`),w=[b3(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+c:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==tu?"#define TONE_MAPPING":"",t.toneMapping!==tu?zn.tonemapping_pars_fragment:"",t.toneMapping!==tu?Tq("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",zn.colorspace_pars_fragment,Eq("linearToOutputTexel",t.outputColorSpace),Mq(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(x_).join(`
`)),o=db(o),o=E3(o,t),o=T3(o,t),a=db(a),a=E3(a,t),a=T3(a,t),o=M3(o),a=M3(a),t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,x=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,w=["#define varying in",t.glslVersion===sb?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===sb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const b=M+x+o,R=M+w+a,F=A3(r,r.VERTEX_SHADER,b),O=A3(r,r.FRAGMENT_SHADER,R);r.attachShader(A,F),r.attachShader(A,O),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A);function D(k){if(i.debug.checkShaderErrors){const H=r.getProgramInfoLog(A).trim(),z=r.getShaderInfoLog(F).trim(),Z=r.getShaderInfoLog(O).trim();let ue=!0,ae=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(ue=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,A,F,O);else{const ge=S3(r,F,"vertex"),ee=S3(r,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+H+`
`+ge+`
`+ee)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(z===""||Z==="")&&(ae=!1);ae&&(k.diagnostics={runnable:ue,programLog:H,vertexShader:{log:z,prefix:x},fragmentShader:{log:Z,prefix:w}})}r.deleteShader(F),r.deleteShader(O),I=new A1(r,A),C=Rq(r,A)}let I;this.getUniforms=function(){return I===void 0&&D(this),I};let C;this.getAttributes=function(){return C===void 0&&D(this),C};let B=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return B===!1&&(B=r.getProgramParameter(A,xq)),B},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Aq++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=F,this.fragmentShader=O,this}let Gq=0;class Hq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Vq(e),t.set(e,n)),n}}class Vq{constructor(e){this.id=Gq++,this.code=e,this.usedTimes=0}}function Wq(i,e,t,n,r,s,o){const a=new dd,l=new Hq,u=new Set,f=[],c=r.logarithmicDepthBuffer,d=r.vertexTextures;let g=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(C){return u.add(C),C===0?"uv":`uv${C}`}function x(C,B,k,H,z){const Z=H.fog,ue=z.geometry,ae=C.isMeshStandardMaterial?H.environment:null,ge=(C.isMeshStandardMaterial?t:e).get(C.envMap||ae),ee=ge&&ge.mapping===Hm?ge.image.height:null,le=v[C.type];C.precision!==null&&(g=r.getMaxPrecision(C.precision),g!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",g,"instead."));const $=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,V=$!==void 0?$.length:0;let Q=0;ue.morphAttributes.position!==void 0&&(Q=1),ue.morphAttributes.normal!==void 0&&(Q=2),ue.morphAttributes.color!==void 0&&(Q=3);let fe,oe,he,xe;if(le){const Yt=El[le];fe=Yt.vertexShader,oe=Yt.fragmentShader}else fe=C.vertexShader,oe=C.fragmentShader,l.update(C),he=l.getVertexShaderID(C),xe=l.getFragmentShaderID(C);const _e=i.getRenderTarget(),be=i.state.buffers.depth.getReversed(),Xe=z.isInstancedMesh===!0,Ye=z.isBatchedMesh===!0,Ne=!!C.map,Ee=!!C.matcap,Ge=!!ge,se=!!C.aoMap,ht=!!C.lightMap,We=!!C.bumpMap,ut=!!C.normalMap,Fe=!!C.displacementMap,dt=!!C.emissiveMap,je=!!C.metalnessMap,K=!!C.roughnessMap,J=C.anisotropy>0,ye=C.clearcoat>0,Re=C.dispersion>0,De=C.iridescence>0,ke=C.sheen>0,qe=C.transmission>0,nt=J&&!!C.anisotropyMap,lt=ye&&!!C.clearcoatMap,Ot=ye&&!!C.clearcoatNormalMap,rt=ye&&!!C.clearcoatRoughnessMap,xt=De&&!!C.iridescenceMap,yt=De&&!!C.iridescenceThicknessMap,gt=ke&&!!C.sheenColorMap,it=ke&&!!C.sheenRoughnessMap,kt=!!C.specularMap,Bt=!!C.specularColorMap,Qt=!!C.specularIntensityMap,Te=qe&&!!C.transmissionMap,Ce=qe&&!!C.thicknessMap,Le=!!C.gradientMap,at=!!C.alphaMap,vt=C.alphaTest>0,ft=!!C.alphaHash,qt=!!C.extensions;let ln=tu;C.toneMapped&&(_e===null||_e.isXRRenderTarget===!0)&&(ln=i.toneMapping);const Kt={shaderID:le,shaderType:C.type,shaderName:C.name,vertexShader:fe,fragmentShader:oe,defines:C.defines,customVertexShaderID:he,customFragmentShaderID:xe,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:g,batching:Ye,batchingColor:Ye&&z._colorsTexture!==null,instancing:Xe,instancingColor:Xe&&z.instanceColor!==null,instancingMorph:Xe&&z.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:_e===null?i.outputColorSpace:_e.isXRRenderTarget===!0?_e.texture.colorSpace:lu,alphaToCoverage:!!C.alphaToCoverage,map:Ne,matcap:Ee,envMap:Ge,envMapMode:Ge&&ge.mapping,envMapCubeUVHeight:ee,aoMap:se,lightMap:ht,bumpMap:We,normalMap:ut,displacementMap:d&&Fe,emissiveMap:dt,normalMapObjectSpace:ut&&C.normalMapType===lN,normalMapTangentSpace:ut&&C.normalMapType===Uh,metalnessMap:je,roughnessMap:K,anisotropy:J,anisotropyMap:nt,clearcoat:ye,clearcoatMap:lt,clearcoatNormalMap:Ot,clearcoatRoughnessMap:rt,dispersion:Re,iridescence:De,iridescenceMap:xt,iridescenceThicknessMap:yt,sheen:ke,sheenColorMap:gt,sheenRoughnessMap:it,specularMap:kt,specularColorMap:Bt,specularIntensityMap:Qt,transmission:qe,transmissionMap:Te,thicknessMap:Ce,gradientMap:Le,opaque:C.transparent===!1&&C.blending===cd&&C.alphaToCoverage===!1,alphaMap:at,alphaTest:vt,alphaHash:ft,combine:C.combine,mapUv:Ne&&A(C.map.channel),aoMapUv:se&&A(C.aoMap.channel),lightMapUv:ht&&A(C.lightMap.channel),bumpMapUv:We&&A(C.bumpMap.channel),normalMapUv:ut&&A(C.normalMap.channel),displacementMapUv:Fe&&A(C.displacementMap.channel),emissiveMapUv:dt&&A(C.emissiveMap.channel),metalnessMapUv:je&&A(C.metalnessMap.channel),roughnessMapUv:K&&A(C.roughnessMap.channel),anisotropyMapUv:nt&&A(C.anisotropyMap.channel),clearcoatMapUv:lt&&A(C.clearcoatMap.channel),clearcoatNormalMapUv:Ot&&A(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:rt&&A(C.clearcoatRoughnessMap.channel),iridescenceMapUv:xt&&A(C.iridescenceMap.channel),iridescenceThicknessMapUv:yt&&A(C.iridescenceThicknessMap.channel),sheenColorMapUv:gt&&A(C.sheenColorMap.channel),sheenRoughnessMapUv:it&&A(C.sheenRoughnessMap.channel),specularMapUv:kt&&A(C.specularMap.channel),specularColorMapUv:Bt&&A(C.specularColorMap.channel),specularIntensityMapUv:Qt&&A(C.specularIntensityMap.channel),transmissionMapUv:Te&&A(C.transmissionMap.channel),thicknessMapUv:Ce&&A(C.thicknessMap.channel),alphaMapUv:at&&A(C.alphaMap.channel),vertexTangents:!!ue.attributes.tangent&&(ut||J),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,pointsUvs:z.isPoints===!0&&!!ue.attributes.uv&&(Ne||at),fog:!!Z,useFog:C.fog===!0,fogExp2:!!Z&&Z.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:c,reverseDepthBuffer:be,skinning:z.isSkinnedMesh===!0,morphTargets:ue.morphAttributes.position!==void 0,morphNormals:ue.morphAttributes.normal!==void 0,morphColors:ue.morphAttributes.color!==void 0,morphTargetsCount:V,morphTextureStride:Q,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numLightProbes:B.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:i.shadowMap.enabled&&k.length>0,shadowMapType:i.shadowMap.type,toneMapping:ln,decodeVideoTexture:Ne&&C.map.isVideoTexture===!0&&cr.getTransfer(C.map.colorSpace)===br,decodeVideoTextureEmissive:dt&&C.emissiveMap.isVideoTexture===!0&&cr.getTransfer(C.emissiveMap.colorSpace)===br,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Co,flipSided:C.side===ao,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:qt&&C.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qt&&C.extensions.multiDraw===!0||Ye)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return Kt.vertexUv1s=u.has(1),Kt.vertexUv2s=u.has(2),Kt.vertexUv3s=u.has(3),u.clear(),Kt}function w(C){const B=[];if(C.shaderID?B.push(C.shaderID):(B.push(C.customVertexShaderID),B.push(C.customFragmentShaderID)),C.defines!==void 0)for(const k in C.defines)B.push(k),B.push(C.defines[k]);return C.isRawShaderMaterial===!1&&(M(B,C),b(B,C),B.push(i.outputColorSpace)),B.push(C.customProgramCacheKey),B.join()}function M(C,B){C.push(B.precision),C.push(B.outputColorSpace),C.push(B.envMapMode),C.push(B.envMapCubeUVHeight),C.push(B.mapUv),C.push(B.alphaMapUv),C.push(B.lightMapUv),C.push(B.aoMapUv),C.push(B.bumpMapUv),C.push(B.normalMapUv),C.push(B.displacementMapUv),C.push(B.emissiveMapUv),C.push(B.metalnessMapUv),C.push(B.roughnessMapUv),C.push(B.anisotropyMapUv),C.push(B.clearcoatMapUv),C.push(B.clearcoatNormalMapUv),C.push(B.clearcoatRoughnessMapUv),C.push(B.iridescenceMapUv),C.push(B.iridescenceThicknessMapUv),C.push(B.sheenColorMapUv),C.push(B.sheenRoughnessMapUv),C.push(B.specularMapUv),C.push(B.specularColorMapUv),C.push(B.specularIntensityMapUv),C.push(B.transmissionMapUv),C.push(B.thicknessMapUv),C.push(B.combine),C.push(B.fogExp2),C.push(B.sizeAttenuation),C.push(B.morphTargetsCount),C.push(B.morphAttributeCount),C.push(B.numDirLights),C.push(B.numPointLights),C.push(B.numSpotLights),C.push(B.numSpotLightMaps),C.push(B.numHemiLights),C.push(B.numRectAreaLights),C.push(B.numDirLightShadows),C.push(B.numPointLightShadows),C.push(B.numSpotLightShadows),C.push(B.numSpotLightShadowsWithMaps),C.push(B.numLightProbes),C.push(B.shadowMapType),C.push(B.toneMapping),C.push(B.numClippingPlanes),C.push(B.numClipIntersection),C.push(B.depthPacking)}function b(C,B){a.disableAll(),B.supportsVertexTextures&&a.enable(0),B.instancing&&a.enable(1),B.instancingColor&&a.enable(2),B.instancingMorph&&a.enable(3),B.matcap&&a.enable(4),B.envMap&&a.enable(5),B.normalMapObjectSpace&&a.enable(6),B.normalMapTangentSpace&&a.enable(7),B.clearcoat&&a.enable(8),B.iridescence&&a.enable(9),B.alphaTest&&a.enable(10),B.vertexColors&&a.enable(11),B.vertexAlphas&&a.enable(12),B.vertexUv1s&&a.enable(13),B.vertexUv2s&&a.enable(14),B.vertexUv3s&&a.enable(15),B.vertexTangents&&a.enable(16),B.anisotropy&&a.enable(17),B.alphaHash&&a.enable(18),B.batching&&a.enable(19),B.dispersion&&a.enable(20),B.batchingColor&&a.enable(21),C.push(a.mask),a.disableAll(),B.fog&&a.enable(0),B.useFog&&a.enable(1),B.flatShading&&a.enable(2),B.logarithmicDepthBuffer&&a.enable(3),B.reverseDepthBuffer&&a.enable(4),B.skinning&&a.enable(5),B.morphTargets&&a.enable(6),B.morphNormals&&a.enable(7),B.morphColors&&a.enable(8),B.premultipliedAlpha&&a.enable(9),B.shadowMapEnabled&&a.enable(10),B.doubleSided&&a.enable(11),B.flipSided&&a.enable(12),B.useDepthPacking&&a.enable(13),B.dithering&&a.enable(14),B.transmission&&a.enable(15),B.sheen&&a.enable(16),B.opaque&&a.enable(17),B.pointsUvs&&a.enable(18),B.decodeVideoTexture&&a.enable(19),B.decodeVideoTextureEmissive&&a.enable(20),B.alphaToCoverage&&a.enable(21),C.push(a.mask)}function R(C){const B=v[C.type];let k;if(B){const H=El[B];k=e2.clone(H.uniforms)}else k=C.uniforms;return k}function F(C,B){let k;for(let H=0,z=f.length;H<z;H++){const Z=f[H];if(Z.cacheKey===B){k=Z,++k.usedTimes;break}}return k===void 0&&(k=new zq(i,B,C,s),f.push(k)),k}function O(C){if(--C.usedTimes===0){const B=f.indexOf(C);f[B]=f[f.length-1],f.pop(),C.destroy()}}function D(C){l.remove(C)}function I(){l.dispose()}return{getParameters:x,getProgramCacheKey:w,getUniforms:R,acquireProgram:F,releaseProgram:O,releaseShaderCache:D,programs:f,dispose:I}}function jq(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let a=i.get(o);return a===void 0&&(a={},i.set(o,a)),a}function n(o){i.delete(o)}function r(o,a,l){i.get(o)[a]=l}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function qq(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function C3(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function R3(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(c,d,g,v,A,x){let w=i[e];return w===void 0?(w={id:c.id,object:c,geometry:d,material:g,groupOrder:v,renderOrder:c.renderOrder,z:A,group:x},i[e]=w):(w.id=c.id,w.object=c,w.geometry=d,w.material=g,w.groupOrder=v,w.renderOrder=c.renderOrder,w.z=A,w.group=x),e++,w}function a(c,d,g,v,A,x){const w=o(c,d,g,v,A,x);g.transmission>0?n.push(w):g.transparent===!0?r.push(w):t.push(w)}function l(c,d,g,v,A,x){const w=o(c,d,g,v,A,x);g.transmission>0?n.unshift(w):g.transparent===!0?r.unshift(w):t.unshift(w)}function u(c,d){t.length>1&&t.sort(c||qq),n.length>1&&n.sort(d||C3),r.length>1&&r.sort(d||C3)}function f(){for(let c=e,d=i.length;c<d;c++){const g=i[c];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:a,unshift:l,finish:f,sort:u}}function Xq(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new R3,i.set(n,[o])):r>=s.length?(o=new R3,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function Jq(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ce,color:new Ht};break;case"SpotLight":t={position:new ce,direction:new ce,color:new Ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ce,color:new Ht,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ce,skyColor:new Ht,groundColor:new Ht};break;case"RectAreaLight":t={color:new Ht,position:new ce,halfWidth:new ce,halfHeight:new ce};break}return i[e.id]=t,t}}}function Kq(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let Yq=0;function Qq(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function Zq(i){const e=new Jq,t=Kq(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new ce);const r=new ce,s=new pn,o=new pn;function a(u){let f=0,c=0,d=0;for(let C=0;C<9;C++)n.probe[C].set(0,0,0);let g=0,v=0,A=0,x=0,w=0,M=0,b=0,R=0,F=0,O=0,D=0;u.sort(Qq);for(let C=0,B=u.length;C<B;C++){const k=u[C],H=k.color,z=k.intensity,Z=k.distance,ue=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)f+=H.r*z,c+=H.g*z,d+=H.b*z;else if(k.isLightProbe){for(let ae=0;ae<9;ae++)n.probe[ae].addScaledVector(k.sh.coefficients[ae],z);D++}else if(k.isDirectionalLight){const ae=e.get(k);if(ae.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const ge=k.shadow,ee=t.get(k);ee.shadowIntensity=ge.intensity,ee.shadowBias=ge.bias,ee.shadowNormalBias=ge.normalBias,ee.shadowRadius=ge.radius,ee.shadowMapSize=ge.mapSize,n.directionalShadow[g]=ee,n.directionalShadowMap[g]=ue,n.directionalShadowMatrix[g]=k.shadow.matrix,M++}n.directional[g]=ae,g++}else if(k.isSpotLight){const ae=e.get(k);ae.position.setFromMatrixPosition(k.matrixWorld),ae.color.copy(H).multiplyScalar(z),ae.distance=Z,ae.coneCos=Math.cos(k.angle),ae.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),ae.decay=k.decay,n.spot[A]=ae;const ge=k.shadow;if(k.map&&(n.spotLightMap[F]=k.map,F++,ge.updateMatrices(k),k.castShadow&&O++),n.spotLightMatrix[A]=ge.matrix,k.castShadow){const ee=t.get(k);ee.shadowIntensity=ge.intensity,ee.shadowBias=ge.bias,ee.shadowNormalBias=ge.normalBias,ee.shadowRadius=ge.radius,ee.shadowMapSize=ge.mapSize,n.spotShadow[A]=ee,n.spotShadowMap[A]=ue,R++}A++}else if(k.isRectAreaLight){const ae=e.get(k);ae.color.copy(H).multiplyScalar(z),ae.halfWidth.set(k.width*.5,0,0),ae.halfHeight.set(0,k.height*.5,0),n.rectArea[x]=ae,x++}else if(k.isPointLight){const ae=e.get(k);if(ae.color.copy(k.color).multiplyScalar(k.intensity),ae.distance=k.distance,ae.decay=k.decay,k.castShadow){const ge=k.shadow,ee=t.get(k);ee.shadowIntensity=ge.intensity,ee.shadowBias=ge.bias,ee.shadowNormalBias=ge.normalBias,ee.shadowRadius=ge.radius,ee.shadowMapSize=ge.mapSize,ee.shadowCameraNear=ge.camera.near,ee.shadowCameraFar=ge.camera.far,n.pointShadow[v]=ee,n.pointShadowMap[v]=ue,n.pointShadowMatrix[v]=k.shadow.matrix,b++}n.point[v]=ae,v++}else if(k.isHemisphereLight){const ae=e.get(k);ae.skyColor.copy(k.color).multiplyScalar(z),ae.groundColor.copy(k.groundColor).multiplyScalar(z),n.hemi[w]=ae,w++}}x>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=jt.LTC_FLOAT_1,n.rectAreaLTC2=jt.LTC_FLOAT_2):(n.rectAreaLTC1=jt.LTC_HALF_1,n.rectAreaLTC2=jt.LTC_HALF_2)),n.ambient[0]=f,n.ambient[1]=c,n.ambient[2]=d;const I=n.hash;(I.directionalLength!==g||I.pointLength!==v||I.spotLength!==A||I.rectAreaLength!==x||I.hemiLength!==w||I.numDirectionalShadows!==M||I.numPointShadows!==b||I.numSpotShadows!==R||I.numSpotMaps!==F||I.numLightProbes!==D)&&(n.directional.length=g,n.spot.length=A,n.rectArea.length=x,n.point.length=v,n.hemi.length=w,n.directionalShadow.length=M,n.directionalShadowMap.length=M,n.pointShadow.length=b,n.pointShadowMap.length=b,n.spotShadow.length=R,n.spotShadowMap.length=R,n.directionalShadowMatrix.length=M,n.pointShadowMatrix.length=b,n.spotLightMatrix.length=R+F-O,n.spotLightMap.length=F,n.numSpotLightShadowsWithMaps=O,n.numLightProbes=D,I.directionalLength=g,I.pointLength=v,I.spotLength=A,I.rectAreaLength=x,I.hemiLength=w,I.numDirectionalShadows=M,I.numPointShadows=b,I.numSpotShadows=R,I.numSpotMaps=F,I.numLightProbes=D,n.version=Yq++)}function l(u,f){let c=0,d=0,g=0,v=0,A=0;const x=f.matrixWorldInverse;for(let w=0,M=u.length;w<M;w++){const b=u[w];if(b.isDirectionalLight){const R=n.directional[c];R.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(x),c++}else if(b.isSpotLight){const R=n.spot[g];R.position.setFromMatrixPosition(b.matrixWorld),R.position.applyMatrix4(x),R.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(x),g++}else if(b.isRectAreaLight){const R=n.rectArea[v];R.position.setFromMatrixPosition(b.matrixWorld),R.position.applyMatrix4(x),o.identity(),s.copy(b.matrixWorld),s.premultiply(x),o.extractRotation(s),R.halfWidth.set(b.width*.5,0,0),R.halfHeight.set(0,b.height*.5,0),R.halfWidth.applyMatrix4(o),R.halfHeight.applyMatrix4(o),v++}else if(b.isPointLight){const R=n.point[d];R.position.setFromMatrixPosition(b.matrixWorld),R.position.applyMatrix4(x),d++}else if(b.isHemisphereLight){const R=n.hemi[A];R.direction.setFromMatrixPosition(b.matrixWorld),R.direction.transformDirection(x),A++}}}return{setup:a,setupView:l,state:n}}function I3(i){const e=new Zq(i),t=[],n=[];function r(f){u.camera=f,t.length=0,n.length=0}function s(f){t.push(f)}function o(f){n.push(f)}function a(){e.setup(t)}function l(f){e.setupView(t,f)}const u={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function $q(i){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new I3(i),e.set(r,[a])):s>=o.length?(a=new I3(i),o.push(a)):a=o[s],a}function n(){e=new WeakMap}return{get:t,dispose:n}}const eX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,tX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function nX(i,e,t){let n=new $0;const r=new mt,s=new mt,o=new nr,a=new sv({depthPacking:XC}),l=new CA,u={},f=t.maxTextureSize,c={[Il]:ao,[ao]:Il,[Co]:Co},d=new uo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mt},radius:{value:4}},vertexShader:eX,fragmentShader:tX}),g=d.clone();g.defines.HORIZONTAL_PASS=1;const v=new Dn;v.setAttribute("position",new gr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Lr(v,d),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=eA;let w=this.type;this.render=function(O,D,I){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||O.length===0)return;const C=i.getRenderTarget(),B=i.getActiveCubeFace(),k=i.getActiveMipmapLevel(),H=i.state;H.setBlending(eu),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const z=w!==Sl&&this.type===Sl,Z=w===Sl&&this.type!==Sl;for(let ue=0,ae=O.length;ue<ae;ue++){const ge=O[ue],ee=ge.shadow;if(ee===void 0){console.warn("THREE.WebGLShadowMap:",ge,"has no shadow.");continue}if(ee.autoUpdate===!1&&ee.needsUpdate===!1)continue;r.copy(ee.mapSize);const le=ee.getFrameExtents();if(r.multiply(le),s.copy(ee.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/le.x),r.x=s.x*le.x,ee.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/le.y),r.y=s.y*le.y,ee.mapSize.y=s.y)),ee.map===null||z===!0||Z===!0){const V=this.type!==Sl?{minFilter:Ss,magFilter:Ss}:{};ee.map!==null&&ee.map.dispose(),ee.map=new Po(r.x,r.y,V),ee.map.texture.name=ge.name+".shadowMap",ee.camera.updateProjectionMatrix()}i.setRenderTarget(ee.map),i.clear();const $=ee.getViewportCount();for(let V=0;V<$;V++){const Q=ee.getViewport(V);o.set(s.x*Q.x,s.y*Q.y,s.x*Q.z,s.y*Q.w),H.viewport(o),ee.updateMatrices(ge,V),n=ee.getFrustum(),R(D,I,ee.camera,ge,this.type)}ee.isPointLightShadow!==!0&&this.type===Sl&&M(ee,I),ee.needsUpdate=!1}w=this.type,x.needsUpdate=!1,i.setRenderTarget(C,B,k)};function M(O,D){const I=e.update(A);d.defines.VSM_SAMPLES!==O.blurSamples&&(d.defines.VSM_SAMPLES=O.blurSamples,g.defines.VSM_SAMPLES=O.blurSamples,d.needsUpdate=!0,g.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new Po(r.x,r.y)),d.uniforms.shadow_pass.value=O.map.texture,d.uniforms.resolution.value=O.mapSize,d.uniforms.radius.value=O.radius,i.setRenderTarget(O.mapPass),i.clear(),i.renderBufferDirect(D,null,I,d,A,null),g.uniforms.shadow_pass.value=O.mapPass.texture,g.uniforms.resolution.value=O.mapSize,g.uniforms.radius.value=O.radius,i.setRenderTarget(O.map),i.clear(),i.renderBufferDirect(D,null,I,g,A,null)}function b(O,D,I,C){let B=null;const k=I.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(k!==void 0)B=k;else if(B=I.isPointLight===!0?l:a,i.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const H=B.uuid,z=D.uuid;let Z=u[H];Z===void 0&&(Z={},u[H]=Z);let ue=Z[z];ue===void 0&&(ue=B.clone(),Z[z]=ue,D.addEventListener("dispose",F)),B=ue}if(B.visible=D.visible,B.wireframe=D.wireframe,C===Sl?B.side=D.shadowSide!==null?D.shadowSide:D.side:B.side=D.shadowSide!==null?D.shadowSide:c[D.side],B.alphaMap=D.alphaMap,B.alphaTest=D.alphaTest,B.map=D.map,B.clipShadows=D.clipShadows,B.clippingPlanes=D.clippingPlanes,B.clipIntersection=D.clipIntersection,B.displacementMap=D.displacementMap,B.displacementScale=D.displacementScale,B.displacementBias=D.displacementBias,B.wireframeLinewidth=D.wireframeLinewidth,B.linewidth=D.linewidth,I.isPointLight===!0&&B.isMeshDistanceMaterial===!0){const H=i.properties.get(B);H.light=I}return B}function R(O,D,I,C,B){if(O.visible===!1)return;if(O.layers.test(D.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&B===Sl)&&(!O.frustumCulled||n.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,O.matrixWorld);const z=e.update(O),Z=O.material;if(Array.isArray(Z)){const ue=z.groups;for(let ae=0,ge=ue.length;ae<ge;ae++){const ee=ue[ae],le=Z[ee.materialIndex];if(le&&le.visible){const $=b(O,le,C,B);O.onBeforeShadow(i,O,D,I,z,$,ee),i.renderBufferDirect(I,null,z,$,O,ee),O.onAfterShadow(i,O,D,I,z,$,ee)}}}else if(Z.visible){const ue=b(O,Z,C,B);O.onBeforeShadow(i,O,D,I,z,ue,null),i.renderBufferDirect(I,null,z,ue,O,null),O.onAfterShadow(i,O,D,I,z,ue,null)}}const H=O.children;for(let z=0,Z=H.length;z<Z;z++)R(H[z],D,I,C,B)}function F(O){O.target.removeEventListener("dispose",F);for(const I in u){const C=u[I],B=O.target.uuid;B in C&&(C[B].dispose(),delete C[B])}}}const rX={[V1]:W1,[j1]:J1,[q1]:K1,[xd]:X1,[W1]:V1,[J1]:j1,[K1]:q1,[X1]:xd};function iX(i,e){function t(){let Te=!1;const Ce=new nr;let Le=null;const at=new nr(0,0,0,0);return{setMask:function(vt){Le!==vt&&!Te&&(i.colorMask(vt,vt,vt,vt),Le=vt)},setLocked:function(vt){Te=vt},setClear:function(vt,ft,qt,ln,Kt){Kt===!0&&(vt*=ln,ft*=ln,qt*=ln),Ce.set(vt,ft,qt,ln),at.equals(Ce)===!1&&(i.clearColor(vt,ft,qt,ln),at.copy(Ce))},reset:function(){Te=!1,Le=null,at.set(-1,0,0,0)}}}function n(){let Te=!1,Ce=!1,Le=null,at=null,vt=null;return{setReversed:function(ft){if(Ce!==ft){const qt=e.get("EXT_clip_control");Ce?qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.ZERO_TO_ONE_EXT):qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.NEGATIVE_ONE_TO_ONE_EXT);const ln=vt;vt=null,this.setClear(ln)}Ce=ft},getReversed:function(){return Ce},setTest:function(ft){ft?_e(i.DEPTH_TEST):be(i.DEPTH_TEST)},setMask:function(ft){Le!==ft&&!Te&&(i.depthMask(ft),Le=ft)},setFunc:function(ft){if(Ce&&(ft=rX[ft]),at!==ft){switch(ft){case V1:i.depthFunc(i.NEVER);break;case W1:i.depthFunc(i.ALWAYS);break;case j1:i.depthFunc(i.LESS);break;case xd:i.depthFunc(i.LEQUAL);break;case q1:i.depthFunc(i.EQUAL);break;case X1:i.depthFunc(i.GEQUAL);break;case J1:i.depthFunc(i.GREATER);break;case K1:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}at=ft}},setLocked:function(ft){Te=ft},setClear:function(ft){vt!==ft&&(Ce&&(ft=1-ft),i.clearDepth(ft),vt=ft)},reset:function(){Te=!1,Le=null,at=null,vt=null,Ce=!1}}}function r(){let Te=!1,Ce=null,Le=null,at=null,vt=null,ft=null,qt=null,ln=null,Kt=null;return{setTest:function(Yt){Te||(Yt?_e(i.STENCIL_TEST):be(i.STENCIL_TEST))},setMask:function(Yt){Ce!==Yt&&!Te&&(i.stencilMask(Yt),Ce=Yt)},setFunc:function(Yt,Wn,mn){(Le!==Yt||at!==Wn||vt!==mn)&&(i.stencilFunc(Yt,Wn,mn),Le=Yt,at=Wn,vt=mn)},setOp:function(Yt,Wn,mn){(ft!==Yt||qt!==Wn||ln!==mn)&&(i.stencilOp(Yt,Wn,mn),ft=Yt,qt=Wn,ln=mn)},setLocked:function(Yt){Te=Yt},setClear:function(Yt){Kt!==Yt&&(i.clearStencil(Yt),Kt=Yt)},reset:function(){Te=!1,Ce=null,Le=null,at=null,vt=null,ft=null,qt=null,ln=null,Kt=null}}}const s=new t,o=new n,a=new r,l=new WeakMap,u=new WeakMap;let f={},c={},d=new WeakMap,g=[],v=null,A=!1,x=null,w=null,M=null,b=null,R=null,F=null,O=null,D=new Ht(0,0,0),I=0,C=!1,B=null,k=null,H=null,z=null,Z=null;const ue=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ae=!1,ge=0;const ee=i.getParameter(i.VERSION);ee.indexOf("WebGL")!==-1?(ge=parseFloat(/^WebGL (\d)/.exec(ee)[1]),ae=ge>=1):ee.indexOf("OpenGL ES")!==-1&&(ge=parseFloat(/^OpenGL ES (\d)/.exec(ee)[1]),ae=ge>=2);let le=null,$={};const V=i.getParameter(i.SCISSOR_BOX),Q=i.getParameter(i.VIEWPORT),fe=new nr().fromArray(V),oe=new nr().fromArray(Q);function he(Te,Ce,Le,at){const vt=new Uint8Array(4),ft=i.createTexture();i.bindTexture(Te,ft),i.texParameteri(Te,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Te,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let qt=0;qt<Le;qt++)Te===i.TEXTURE_3D||Te===i.TEXTURE_2D_ARRAY?i.texImage3D(Ce,0,i.RGBA,1,1,at,0,i.RGBA,i.UNSIGNED_BYTE,vt):i.texImage2D(Ce+qt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,vt);return ft}const xe={};xe[i.TEXTURE_2D]=he(i.TEXTURE_2D,i.TEXTURE_2D,1),xe[i.TEXTURE_CUBE_MAP]=he(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),xe[i.TEXTURE_2D_ARRAY]=he(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),xe[i.TEXTURE_3D]=he(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),_e(i.DEPTH_TEST),o.setFunc(xd),We(!1),ut(ZM),_e(i.CULL_FACE),se(eu);function _e(Te){f[Te]!==!0&&(i.enable(Te),f[Te]=!0)}function be(Te){f[Te]!==!1&&(i.disable(Te),f[Te]=!1)}function Xe(Te,Ce){return c[Te]!==Ce?(i.bindFramebuffer(Te,Ce),c[Te]=Ce,Te===i.DRAW_FRAMEBUFFER&&(c[i.FRAMEBUFFER]=Ce),Te===i.FRAMEBUFFER&&(c[i.DRAW_FRAMEBUFFER]=Ce),!0):!1}function Ye(Te,Ce){let Le=g,at=!1;if(Te){Le=d.get(Ce),Le===void 0&&(Le=[],d.set(Ce,Le));const vt=Te.textures;if(Le.length!==vt.length||Le[0]!==i.COLOR_ATTACHMENT0){for(let ft=0,qt=vt.length;ft<qt;ft++)Le[ft]=i.COLOR_ATTACHMENT0+ft;Le.length=vt.length,at=!0}}else Le[0]!==i.BACK&&(Le[0]=i.BACK,at=!0);at&&i.drawBuffers(Le)}function Ne(Te){return v!==Te?(i.useProgram(Te),v=Te,!0):!1}const Ee={[lh]:i.FUNC_ADD,[Pk]:i.FUNC_SUBTRACT,[Dk]:i.FUNC_REVERSE_SUBTRACT};Ee[Bk]=i.MIN,Ee[Lk]=i.MAX;const Ge={[Fk]:i.ZERO,[Ok]:i.ONE,[kk]:i.SRC_COLOR,[G1]:i.SRC_ALPHA,[Vk]:i.SRC_ALPHA_SATURATE,[Gk]:i.DST_COLOR,[Uk]:i.DST_ALPHA,[Nk]:i.ONE_MINUS_SRC_COLOR,[H1]:i.ONE_MINUS_SRC_ALPHA,[Hk]:i.ONE_MINUS_DST_COLOR,[zk]:i.ONE_MINUS_DST_ALPHA,[Wk]:i.CONSTANT_COLOR,[jk]:i.ONE_MINUS_CONSTANT_COLOR,[qk]:i.CONSTANT_ALPHA,[Xk]:i.ONE_MINUS_CONSTANT_ALPHA};function se(Te,Ce,Le,at,vt,ft,qt,ln,Kt,Yt){if(Te===eu){A===!0&&(be(i.BLEND),A=!1);return}if(A===!1&&(_e(i.BLEND),A=!0),Te!==Ik){if(Te!==x||Yt!==C){if((w!==lh||R!==lh)&&(i.blendEquation(i.FUNC_ADD),w=lh,R=lh),Yt)switch(Te){case cd:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case $M:i.blendFunc(i.ONE,i.ONE);break;case eb:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case tb:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}else switch(Te){case cd:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case $M:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case eb:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case tb:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}M=null,b=null,F=null,O=null,D.set(0,0,0),I=0,x=Te,C=Yt}return}vt=vt||Ce,ft=ft||Le,qt=qt||at,(Ce!==w||vt!==R)&&(i.blendEquationSeparate(Ee[Ce],Ee[vt]),w=Ce,R=vt),(Le!==M||at!==b||ft!==F||qt!==O)&&(i.blendFuncSeparate(Ge[Le],Ge[at],Ge[ft],Ge[qt]),M=Le,b=at,F=ft,O=qt),(ln.equals(D)===!1||Kt!==I)&&(i.blendColor(ln.r,ln.g,ln.b,Kt),D.copy(ln),I=Kt),x=Te,C=!1}function ht(Te,Ce){Te.side===Co?be(i.CULL_FACE):_e(i.CULL_FACE);let Le=Te.side===ao;Ce&&(Le=!Le),We(Le),Te.blending===cd&&Te.transparent===!1?se(eu):se(Te.blending,Te.blendEquation,Te.blendSrc,Te.blendDst,Te.blendEquationAlpha,Te.blendSrcAlpha,Te.blendDstAlpha,Te.blendColor,Te.blendAlpha,Te.premultipliedAlpha),o.setFunc(Te.depthFunc),o.setTest(Te.depthTest),o.setMask(Te.depthWrite),s.setMask(Te.colorWrite);const at=Te.stencilWrite;a.setTest(at),at&&(a.setMask(Te.stencilWriteMask),a.setFunc(Te.stencilFunc,Te.stencilRef,Te.stencilFuncMask),a.setOp(Te.stencilFail,Te.stencilZFail,Te.stencilZPass)),dt(Te.polygonOffset,Te.polygonOffsetFactor,Te.polygonOffsetUnits),Te.alphaToCoverage===!0?_e(i.SAMPLE_ALPHA_TO_COVERAGE):be(i.SAMPLE_ALPHA_TO_COVERAGE)}function We(Te){B!==Te&&(Te?i.frontFace(i.CW):i.frontFace(i.CCW),B=Te)}function ut(Te){Te!==bk?(_e(i.CULL_FACE),Te!==k&&(Te===ZM?i.cullFace(i.BACK):Te===Ck?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):be(i.CULL_FACE),k=Te}function Fe(Te){Te!==H&&(ae&&i.lineWidth(Te),H=Te)}function dt(Te,Ce,Le){Te?(_e(i.POLYGON_OFFSET_FILL),(z!==Ce||Z!==Le)&&(i.polygonOffset(Ce,Le),z=Ce,Z=Le)):be(i.POLYGON_OFFSET_FILL)}function je(Te){Te?_e(i.SCISSOR_TEST):be(i.SCISSOR_TEST)}function K(Te){Te===void 0&&(Te=i.TEXTURE0+ue-1),le!==Te&&(i.activeTexture(Te),le=Te)}function J(Te,Ce,Le){Le===void 0&&(le===null?Le=i.TEXTURE0+ue-1:Le=le);let at=$[Le];at===void 0&&(at={type:void 0,texture:void 0},$[Le]=at),(at.type!==Te||at.texture!==Ce)&&(le!==Le&&(i.activeTexture(Le),le=Le),i.bindTexture(Te,Ce||xe[Te]),at.type=Te,at.texture=Ce)}function ye(){const Te=$[le];Te!==void 0&&Te.type!==void 0&&(i.bindTexture(Te.type,null),Te.type=void 0,Te.texture=void 0)}function Re(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function De(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function ke(){try{i.texSubImage2D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function qe(){try{i.texSubImage3D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function nt(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function lt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Ot(){try{i.texStorage2D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function rt(){try{i.texStorage3D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function xt(){try{i.texImage2D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function yt(){try{i.texImage3D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function gt(Te){fe.equals(Te)===!1&&(i.scissor(Te.x,Te.y,Te.z,Te.w),fe.copy(Te))}function it(Te){oe.equals(Te)===!1&&(i.viewport(Te.x,Te.y,Te.z,Te.w),oe.copy(Te))}function kt(Te,Ce){let Le=u.get(Ce);Le===void 0&&(Le=new WeakMap,u.set(Ce,Le));let at=Le.get(Te);at===void 0&&(at=i.getUniformBlockIndex(Ce,Te.name),Le.set(Te,at))}function Bt(Te,Ce){const at=u.get(Ce).get(Te);l.get(Ce)!==at&&(i.uniformBlockBinding(Ce,at,Te.__bindingPointIndex),l.set(Ce,at))}function Qt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),f={},le=null,$={},c={},d=new WeakMap,g=[],v=null,A=!1,x=null,w=null,M=null,b=null,R=null,F=null,O=null,D=new Ht(0,0,0),I=0,C=!1,B=null,k=null,H=null,z=null,Z=null,fe.set(0,0,i.canvas.width,i.canvas.height),oe.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:_e,disable:be,bindFramebuffer:Xe,drawBuffers:Ye,useProgram:Ne,setBlending:se,setMaterial:ht,setFlipSided:We,setCullFace:ut,setLineWidth:Fe,setPolygonOffset:dt,setScissorTest:je,activeTexture:K,bindTexture:J,unbindTexture:ye,compressedTexImage2D:Re,compressedTexImage3D:De,texImage2D:xt,texImage3D:yt,updateUBOMapping:kt,uniformBlockBinding:Bt,texStorage2D:Ot,texStorage3D:rt,texSubImage2D:ke,texSubImage3D:qe,compressedTexSubImage2D:nt,compressedTexSubImage3D:lt,scissor:gt,viewport:it,reset:Qt}}function sX(i,e,t,n,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new mt,f=new WeakMap;let c;const d=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(K,J){return g?new OffscreenCanvas(K,J):d0("canvas")}function A(K,J,ye){let Re=1;const De=je(K);if((De.width>ye||De.height>ye)&&(Re=ye/Math.max(De.width,De.height)),Re<1)if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap||typeof VideoFrame<"u"&&K instanceof VideoFrame){const ke=Math.floor(Re*De.width),qe=Math.floor(Re*De.height);c===void 0&&(c=v(ke,qe));const nt=J?v(ke,qe):c;return nt.width=ke,nt.height=qe,nt.getContext("2d").drawImage(K,0,0,ke,qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+De.width+"x"+De.height+") to ("+ke+"x"+qe+")."),nt}else return"data"in K&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+De.width+"x"+De.height+")."),K;return K}function x(K){return K.generateMipmaps}function w(K){i.generateMipmap(K)}function M(K){return K.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:K.isWebGL3DRenderTarget?i.TEXTURE_3D:K.isWebGLArrayRenderTarget||K.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function b(K,J,ye,Re,De=!1){if(K!==null){if(i[K]!==void 0)return i[K];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+K+"'")}let ke=J;if(J===i.RED&&(ye===i.FLOAT&&(ke=i.R32F),ye===i.HALF_FLOAT&&(ke=i.R16F),ye===i.UNSIGNED_BYTE&&(ke=i.R8)),J===i.RED_INTEGER&&(ye===i.UNSIGNED_BYTE&&(ke=i.R8UI),ye===i.UNSIGNED_SHORT&&(ke=i.R16UI),ye===i.UNSIGNED_INT&&(ke=i.R32UI),ye===i.BYTE&&(ke=i.R8I),ye===i.SHORT&&(ke=i.R16I),ye===i.INT&&(ke=i.R32I)),J===i.RG&&(ye===i.FLOAT&&(ke=i.RG32F),ye===i.HALF_FLOAT&&(ke=i.RG16F),ye===i.UNSIGNED_BYTE&&(ke=i.RG8)),J===i.RG_INTEGER&&(ye===i.UNSIGNED_BYTE&&(ke=i.RG8UI),ye===i.UNSIGNED_SHORT&&(ke=i.RG16UI),ye===i.UNSIGNED_INT&&(ke=i.RG32UI),ye===i.BYTE&&(ke=i.RG8I),ye===i.SHORT&&(ke=i.RG16I),ye===i.INT&&(ke=i.RG32I)),J===i.RGB_INTEGER&&(ye===i.UNSIGNED_BYTE&&(ke=i.RGB8UI),ye===i.UNSIGNED_SHORT&&(ke=i.RGB16UI),ye===i.UNSIGNED_INT&&(ke=i.RGB32UI),ye===i.BYTE&&(ke=i.RGB8I),ye===i.SHORT&&(ke=i.RGB16I),ye===i.INT&&(ke=i.RGB32I)),J===i.RGBA_INTEGER&&(ye===i.UNSIGNED_BYTE&&(ke=i.RGBA8UI),ye===i.UNSIGNED_SHORT&&(ke=i.RGBA16UI),ye===i.UNSIGNED_INT&&(ke=i.RGBA32UI),ye===i.BYTE&&(ke=i.RGBA8I),ye===i.SHORT&&(ke=i.RGBA16I),ye===i.INT&&(ke=i.RGBA32I)),J===i.RGB&&ye===i.UNSIGNED_INT_5_9_9_9_REV&&(ke=i.RGB9_E5),J===i.RGBA){const qe=De?c0:cr.getTransfer(Re);ye===i.FLOAT&&(ke=i.RGBA32F),ye===i.HALF_FLOAT&&(ke=i.RGBA16F),ye===i.UNSIGNED_BYTE&&(ke=qe===br?i.SRGB8_ALPHA8:i.RGBA8),ye===i.UNSIGNED_SHORT_4_4_4_4&&(ke=i.RGBA4),ye===i.UNSIGNED_SHORT_5_5_5_1&&(ke=i.RGB5_A1)}return(ke===i.R16F||ke===i.R32F||ke===i.RG16F||ke===i.RG32F||ke===i.RGBA16F||ke===i.RGBA32F)&&e.get("EXT_color_buffer_float"),ke}function R(K,J){let ye;return K?J===null||J===au||J===Ad?ye=i.DEPTH24_STENCIL8:J===pi?ye=i.DEPTH32F_STENCIL8:J===Tm&&(ye=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):J===null||J===au||J===Ad?ye=i.DEPTH_COMPONENT24:J===pi?ye=i.DEPTH_COMPONENT32F:J===Tm&&(ye=i.DEPTH_COMPONENT16),ye}function F(K,J){return x(K)===!0||K.isFramebufferTexture&&K.minFilter!==Ss&&K.minFilter!==pr?Math.log2(Math.max(J.width,J.height))+1:K.mipmaps!==void 0&&K.mipmaps.length>0?K.mipmaps.length:K.isCompressedTexture&&Array.isArray(K.image)?J.mipmaps.length:1}function O(K){const J=K.target;J.removeEventListener("dispose",O),I(J),J.isVideoTexture&&f.delete(J)}function D(K){const J=K.target;J.removeEventListener("dispose",D),B(J)}function I(K){const J=n.get(K);if(J.__webglInit===void 0)return;const ye=K.source,Re=d.get(ye);if(Re){const De=Re[J.__cacheKey];De.usedTimes--,De.usedTimes===0&&C(K),Object.keys(Re).length===0&&d.delete(ye)}n.remove(K)}function C(K){const J=n.get(K);i.deleteTexture(J.__webglTexture);const ye=K.source,Re=d.get(ye);delete Re[J.__cacheKey],o.memory.textures--}function B(K){const J=n.get(K);if(K.depthTexture&&(K.depthTexture.dispose(),n.remove(K.depthTexture)),K.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++){if(Array.isArray(J.__webglFramebuffer[Re]))for(let De=0;De<J.__webglFramebuffer[Re].length;De++)i.deleteFramebuffer(J.__webglFramebuffer[Re][De]);else i.deleteFramebuffer(J.__webglFramebuffer[Re]);J.__webglDepthbuffer&&i.deleteRenderbuffer(J.__webglDepthbuffer[Re])}else{if(Array.isArray(J.__webglFramebuffer))for(let Re=0;Re<J.__webglFramebuffer.length;Re++)i.deleteFramebuffer(J.__webglFramebuffer[Re]);else i.deleteFramebuffer(J.__webglFramebuffer);if(J.__webglDepthbuffer&&i.deleteRenderbuffer(J.__webglDepthbuffer),J.__webglMultisampledFramebuffer&&i.deleteFramebuffer(J.__webglMultisampledFramebuffer),J.__webglColorRenderbuffer)for(let Re=0;Re<J.__webglColorRenderbuffer.length;Re++)J.__webglColorRenderbuffer[Re]&&i.deleteRenderbuffer(J.__webglColorRenderbuffer[Re]);J.__webglDepthRenderbuffer&&i.deleteRenderbuffer(J.__webglDepthRenderbuffer)}const ye=K.textures;for(let Re=0,De=ye.length;Re<De;Re++){const ke=n.get(ye[Re]);ke.__webglTexture&&(i.deleteTexture(ke.__webglTexture),o.memory.textures--),n.remove(ye[Re])}n.remove(K)}let k=0;function H(){k=0}function z(){const K=k;return K>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+K+" texture units while this GPU supports only "+r.maxTextures),k+=1,K}function Z(K){const J=[];return J.push(K.wrapS),J.push(K.wrapT),J.push(K.wrapR||0),J.push(K.magFilter),J.push(K.minFilter),J.push(K.anisotropy),J.push(K.internalFormat),J.push(K.format),J.push(K.type),J.push(K.generateMipmaps),J.push(K.premultiplyAlpha),J.push(K.flipY),J.push(K.unpackAlignment),J.push(K.colorSpace),J.join()}function ue(K,J){const ye=n.get(K);if(K.isVideoTexture&&Fe(K),K.isRenderTargetTexture===!1&&K.version>0&&ye.__version!==K.version){const Re=K.image;if(Re===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Re.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(ye,K,J);return}}t.bindTexture(i.TEXTURE_2D,ye.__webglTexture,i.TEXTURE0+J)}function ae(K,J){const ye=n.get(K);if(K.version>0&&ye.__version!==K.version){oe(ye,K,J);return}t.bindTexture(i.TEXTURE_2D_ARRAY,ye.__webglTexture,i.TEXTURE0+J)}function ge(K,J){const ye=n.get(K);if(K.version>0&&ye.__version!==K.version){oe(ye,K,J);return}t.bindTexture(i.TEXTURE_3D,ye.__webglTexture,i.TEXTURE0+J)}function ee(K,J){const ye=n.get(K);if(K.version>0&&ye.__version!==K.version){he(ye,K,J);return}t.bindTexture(i.TEXTURE_CUBE_MAP,ye.__webglTexture,i.TEXTURE0+J)}const le={[Ch]:i.REPEAT,[Fi]:i.CLAMP_TO_EDGE,[Em]:i.MIRRORED_REPEAT},$={[Ss]:i.NEAREST,[tA]:i.NEAREST_MIPMAP_NEAREST,[Yf]:i.NEAREST_MIPMAP_LINEAR,[pr]:i.LINEAR,[cm]:i.LINEAR_MIPMAP_NEAREST,[za]:i.LINEAR_MIPMAP_LINEAR},V={[uN]:i.NEVER,[mN]:i.ALWAYS,[cN]:i.LESS,[JC]:i.LEQUAL,[hN]:i.EQUAL,[pN]:i.GEQUAL,[fN]:i.GREATER,[dN]:i.NOTEQUAL};function Q(K,J){if(J.type===pi&&e.has("OES_texture_float_linear")===!1&&(J.magFilter===pr||J.magFilter===cm||J.magFilter===Yf||J.magFilter===za||J.minFilter===pr||J.minFilter===cm||J.minFilter===Yf||J.minFilter===za)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(K,i.TEXTURE_WRAP_S,le[J.wrapS]),i.texParameteri(K,i.TEXTURE_WRAP_T,le[J.wrapT]),(K===i.TEXTURE_3D||K===i.TEXTURE_2D_ARRAY)&&i.texParameteri(K,i.TEXTURE_WRAP_R,le[J.wrapR]),i.texParameteri(K,i.TEXTURE_MAG_FILTER,$[J.magFilter]),i.texParameteri(K,i.TEXTURE_MIN_FILTER,$[J.minFilter]),J.compareFunction&&(i.texParameteri(K,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(K,i.TEXTURE_COMPARE_FUNC,V[J.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(J.magFilter===Ss||J.minFilter!==Yf&&J.minFilter!==za||J.type===pi&&e.has("OES_texture_float_linear")===!1)return;if(J.anisotropy>1||n.get(J).__currentAnisotropy){const ye=e.get("EXT_texture_filter_anisotropic");i.texParameterf(K,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,r.getMaxAnisotropy())),n.get(J).__currentAnisotropy=J.anisotropy}}}function fe(K,J){let ye=!1;K.__webglInit===void 0&&(K.__webglInit=!0,J.addEventListener("dispose",O));const Re=J.source;let De=d.get(Re);De===void 0&&(De={},d.set(Re,De));const ke=Z(J);if(ke!==K.__cacheKey){De[ke]===void 0&&(De[ke]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,ye=!0),De[ke].usedTimes++;const qe=De[K.__cacheKey];qe!==void 0&&(De[K.__cacheKey].usedTimes--,qe.usedTimes===0&&C(J)),K.__cacheKey=ke,K.__webglTexture=De[ke].texture}return ye}function oe(K,J,ye){let Re=i.TEXTURE_2D;(J.isDataArrayTexture||J.isCompressedArrayTexture)&&(Re=i.TEXTURE_2D_ARRAY),J.isData3DTexture&&(Re=i.TEXTURE_3D);const De=fe(K,J),ke=J.source;t.bindTexture(Re,K.__webglTexture,i.TEXTURE0+ye);const qe=n.get(ke);if(ke.version!==qe.__version||De===!0){t.activeTexture(i.TEXTURE0+ye);const nt=cr.getPrimaries(cr.workingColorSpace),lt=J.colorSpace===tc?null:cr.getPrimaries(J.colorSpace),Ot=J.colorSpace===tc||nt===lt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,J.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,J.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ot);let rt=A(J.image,!1,r.maxTextureSize);rt=dt(J,rt);const xt=s.convert(J.format,J.colorSpace),yt=s.convert(J.type);let gt=b(J.internalFormat,xt,yt,J.colorSpace,J.isVideoTexture);Q(Re,J);let it;const kt=J.mipmaps,Bt=J.isVideoTexture!==!0,Qt=qe.__version===void 0||De===!0,Te=ke.dataReady,Ce=F(J,rt);if(J.isDepthTexture)gt=R(J.format===wd,J.type),Qt&&(Bt?t.texStorage2D(i.TEXTURE_2D,1,gt,rt.width,rt.height):t.texImage2D(i.TEXTURE_2D,0,gt,rt.width,rt.height,0,xt,yt,null));else if(J.isDataTexture)if(kt.length>0){Bt&&Qt&&t.texStorage2D(i.TEXTURE_2D,Ce,gt,kt[0].width,kt[0].height);for(let Le=0,at=kt.length;Le<at;Le++)it=kt[Le],Bt?Te&&t.texSubImage2D(i.TEXTURE_2D,Le,0,0,it.width,it.height,xt,yt,it.data):t.texImage2D(i.TEXTURE_2D,Le,gt,it.width,it.height,0,xt,yt,it.data);J.generateMipmaps=!1}else Bt?(Qt&&t.texStorage2D(i.TEXTURE_2D,Ce,gt,rt.width,rt.height),Te&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,rt.width,rt.height,xt,yt,rt.data)):t.texImage2D(i.TEXTURE_2D,0,gt,rt.width,rt.height,0,xt,yt,rt.data);else if(J.isCompressedTexture)if(J.isCompressedArrayTexture){Bt&&Qt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ce,gt,kt[0].width,kt[0].height,rt.depth);for(let Le=0,at=kt.length;Le<at;Le++)if(it=kt[Le],J.format!==Oi)if(xt!==null)if(Bt){if(Te)if(J.layerUpdates.size>0){const vt=hb(it.width,it.height,J.format,J.type);for(const ft of J.layerUpdates){const qt=it.data.subarray(ft*vt/it.data.BYTES_PER_ELEMENT,(ft+1)*vt/it.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Le,0,0,ft,it.width,it.height,1,xt,qt)}J.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Le,0,0,0,it.width,it.height,rt.depth,xt,it.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Le,gt,it.width,it.height,rt.depth,0,it.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Bt?Te&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,Le,0,0,0,it.width,it.height,rt.depth,xt,yt,it.data):t.texImage3D(i.TEXTURE_2D_ARRAY,Le,gt,it.width,it.height,rt.depth,0,xt,yt,it.data)}else{Bt&&Qt&&t.texStorage2D(i.TEXTURE_2D,Ce,gt,kt[0].width,kt[0].height);for(let Le=0,at=kt.length;Le<at;Le++)it=kt[Le],J.format!==Oi?xt!==null?Bt?Te&&t.compressedTexSubImage2D(i.TEXTURE_2D,Le,0,0,it.width,it.height,xt,it.data):t.compressedTexImage2D(i.TEXTURE_2D,Le,gt,it.width,it.height,0,it.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Bt?Te&&t.texSubImage2D(i.TEXTURE_2D,Le,0,0,it.width,it.height,xt,yt,it.data):t.texImage2D(i.TEXTURE_2D,Le,gt,it.width,it.height,0,xt,yt,it.data)}else if(J.isDataArrayTexture)if(Bt){if(Qt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ce,gt,rt.width,rt.height,rt.depth),Te)if(J.layerUpdates.size>0){const Le=hb(rt.width,rt.height,J.format,J.type);for(const at of J.layerUpdates){const vt=rt.data.subarray(at*Le/rt.data.BYTES_PER_ELEMENT,(at+1)*Le/rt.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,at,rt.width,rt.height,1,xt,yt,vt)}J.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,rt.width,rt.height,rt.depth,xt,yt,rt.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,gt,rt.width,rt.height,rt.depth,0,xt,yt,rt.data);else if(J.isData3DTexture)Bt?(Qt&&t.texStorage3D(i.TEXTURE_3D,Ce,gt,rt.width,rt.height,rt.depth),Te&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,rt.width,rt.height,rt.depth,xt,yt,rt.data)):t.texImage3D(i.TEXTURE_3D,0,gt,rt.width,rt.height,rt.depth,0,xt,yt,rt.data);else if(J.isFramebufferTexture){if(Qt)if(Bt)t.texStorage2D(i.TEXTURE_2D,Ce,gt,rt.width,rt.height);else{let Le=rt.width,at=rt.height;for(let vt=0;vt<Ce;vt++)t.texImage2D(i.TEXTURE_2D,vt,gt,Le,at,0,xt,yt,null),Le>>=1,at>>=1}}else if(kt.length>0){if(Bt&&Qt){const Le=je(kt[0]);t.texStorage2D(i.TEXTURE_2D,Ce,gt,Le.width,Le.height)}for(let Le=0,at=kt.length;Le<at;Le++)it=kt[Le],Bt?Te&&t.texSubImage2D(i.TEXTURE_2D,Le,0,0,xt,yt,it):t.texImage2D(i.TEXTURE_2D,Le,gt,xt,yt,it);J.generateMipmaps=!1}else if(Bt){if(Qt){const Le=je(rt);t.texStorage2D(i.TEXTURE_2D,Ce,gt,Le.width,Le.height)}Te&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,xt,yt,rt)}else t.texImage2D(i.TEXTURE_2D,0,gt,xt,yt,rt);x(J)&&w(Re),qe.__version=ke.version,J.onUpdate&&J.onUpdate(J)}K.__version=J.version}function he(K,J,ye){if(J.image.length!==6)return;const Re=fe(K,J),De=J.source;t.bindTexture(i.TEXTURE_CUBE_MAP,K.__webglTexture,i.TEXTURE0+ye);const ke=n.get(De);if(De.version!==ke.__version||Re===!0){t.activeTexture(i.TEXTURE0+ye);const qe=cr.getPrimaries(cr.workingColorSpace),nt=J.colorSpace===tc?null:cr.getPrimaries(J.colorSpace),lt=J.colorSpace===tc||qe===nt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,J.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,J.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,lt);const Ot=J.isCompressedTexture||J.image[0].isCompressedTexture,rt=J.image[0]&&J.image[0].isDataTexture,xt=[];for(let at=0;at<6;at++)!Ot&&!rt?xt[at]=A(J.image[at],!0,r.maxCubemapSize):xt[at]=rt?J.image[at].image:J.image[at],xt[at]=dt(J,xt[at]);const yt=xt[0],gt=s.convert(J.format,J.colorSpace),it=s.convert(J.type),kt=b(J.internalFormat,gt,it,J.colorSpace),Bt=J.isVideoTexture!==!0,Qt=ke.__version===void 0||Re===!0,Te=De.dataReady;let Ce=F(J,yt);Q(i.TEXTURE_CUBE_MAP,J);let Le;if(Ot){Bt&&Qt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Ce,kt,yt.width,yt.height);for(let at=0;at<6;at++){Le=xt[at].mipmaps;for(let vt=0;vt<Le.length;vt++){const ft=Le[vt];J.format!==Oi?gt!==null?Bt?Te&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,vt,0,0,ft.width,ft.height,gt,ft.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,vt,kt,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bt?Te&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,vt,0,0,ft.width,ft.height,gt,it,ft.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,vt,kt,ft.width,ft.height,0,gt,it,ft.data)}}}else{if(Le=J.mipmaps,Bt&&Qt){Le.length>0&&Ce++;const at=je(xt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Ce,kt,at.width,at.height)}for(let at=0;at<6;at++)if(rt){Bt?Te&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,xt[at].width,xt[at].height,gt,it,xt[at].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,kt,xt[at].width,xt[at].height,0,gt,it,xt[at].data);for(let vt=0;vt<Le.length;vt++){const qt=Le[vt].image[at].image;Bt?Te&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,vt+1,0,0,qt.width,qt.height,gt,it,qt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,vt+1,kt,qt.width,qt.height,0,gt,it,qt.data)}}else{Bt?Te&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,gt,it,xt[at]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,kt,gt,it,xt[at]);for(let vt=0;vt<Le.length;vt++){const ft=Le[vt];Bt?Te&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,vt+1,0,0,gt,it,ft.image[at]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,vt+1,kt,gt,it,ft.image[at])}}}x(J)&&w(i.TEXTURE_CUBE_MAP),ke.__version=De.version,J.onUpdate&&J.onUpdate(J)}K.__version=J.version}function xe(K,J,ye,Re,De,ke){const qe=s.convert(ye.format,ye.colorSpace),nt=s.convert(ye.type),lt=b(ye.internalFormat,qe,nt,ye.colorSpace),Ot=n.get(J),rt=n.get(ye);if(rt.__renderTarget=J,!Ot.__hasExternalTextures){const xt=Math.max(1,J.width>>ke),yt=Math.max(1,J.height>>ke);De===i.TEXTURE_3D||De===i.TEXTURE_2D_ARRAY?t.texImage3D(De,ke,lt,xt,yt,J.depth,0,qe,nt,null):t.texImage2D(De,ke,lt,xt,yt,0,qe,nt,null)}t.bindFramebuffer(i.FRAMEBUFFER,K),ut(J)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Re,De,rt.__webglTexture,0,We(J)):(De===i.TEXTURE_2D||De>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Re,De,rt.__webglTexture,ke),t.bindFramebuffer(i.FRAMEBUFFER,null)}function _e(K,J,ye){if(i.bindRenderbuffer(i.RENDERBUFFER,K),J.depthBuffer){const Re=J.depthTexture,De=Re&&Re.isDepthTexture?Re.type:null,ke=R(J.stencilBuffer,De),qe=J.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,nt=We(J);ut(J)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,nt,ke,J.width,J.height):ye?i.renderbufferStorageMultisample(i.RENDERBUFFER,nt,ke,J.width,J.height):i.renderbufferStorage(i.RENDERBUFFER,ke,J.width,J.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,qe,i.RENDERBUFFER,K)}else{const Re=J.textures;for(let De=0;De<Re.length;De++){const ke=Re[De],qe=s.convert(ke.format,ke.colorSpace),nt=s.convert(ke.type),lt=b(ke.internalFormat,qe,nt,ke.colorSpace),Ot=We(J);ye&&ut(J)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ot,lt,J.width,J.height):ut(J)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ot,lt,J.width,J.height):i.renderbufferStorage(i.RENDERBUFFER,lt,J.width,J.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function be(K,J){if(J&&J.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,K),!(J.depthTexture&&J.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Re=n.get(J.depthTexture);Re.__renderTarget=J,(!Re.__webglTexture||J.depthTexture.image.width!==J.width||J.depthTexture.image.height!==J.height)&&(J.depthTexture.image.width=J.width,J.depthTexture.image.height=J.height,J.depthTexture.needsUpdate=!0),ue(J.depthTexture,0);const De=Re.__webglTexture,ke=We(J);if(J.depthTexture.format===hd)ut(J)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,De,0,ke):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,De,0);else if(J.depthTexture.format===wd)ut(J)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,De,0,ke):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,De,0);else throw new Error("Unknown depthTexture format")}function Xe(K){const J=n.get(K),ye=K.isWebGLCubeRenderTarget===!0;if(J.__boundDepthTexture!==K.depthTexture){const Re=K.depthTexture;if(J.__depthDisposeCallback&&J.__depthDisposeCallback(),Re){const De=()=>{delete J.__boundDepthTexture,delete J.__depthDisposeCallback,Re.removeEventListener("dispose",De)};Re.addEventListener("dispose",De),J.__depthDisposeCallback=De}J.__boundDepthTexture=Re}if(K.depthTexture&&!J.__autoAllocateDepthBuffer){if(ye)throw new Error("target.depthTexture not supported in Cube render targets");be(J.__webglFramebuffer,K)}else if(ye){J.__webglDepthbuffer=[];for(let Re=0;Re<6;Re++)if(t.bindFramebuffer(i.FRAMEBUFFER,J.__webglFramebuffer[Re]),J.__webglDepthbuffer[Re]===void 0)J.__webglDepthbuffer[Re]=i.createRenderbuffer(),_e(J.__webglDepthbuffer[Re],K,!1);else{const De=K.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ke=J.__webglDepthbuffer[Re];i.bindRenderbuffer(i.RENDERBUFFER,ke),i.framebufferRenderbuffer(i.FRAMEBUFFER,De,i.RENDERBUFFER,ke)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,J.__webglFramebuffer),J.__webglDepthbuffer===void 0)J.__webglDepthbuffer=i.createRenderbuffer(),_e(J.__webglDepthbuffer,K,!1);else{const Re=K.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,De=J.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,De),i.framebufferRenderbuffer(i.FRAMEBUFFER,Re,i.RENDERBUFFER,De)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ye(K,J,ye){const Re=n.get(K);J!==void 0&&xe(Re.__webglFramebuffer,K,K.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),ye!==void 0&&Xe(K)}function Ne(K){const J=K.texture,ye=n.get(K),Re=n.get(J);K.addEventListener("dispose",D);const De=K.textures,ke=K.isWebGLCubeRenderTarget===!0,qe=De.length>1;if(qe||(Re.__webglTexture===void 0&&(Re.__webglTexture=i.createTexture()),Re.__version=J.version,o.memory.textures++),ke){ye.__webglFramebuffer=[];for(let nt=0;nt<6;nt++)if(J.mipmaps&&J.mipmaps.length>0){ye.__webglFramebuffer[nt]=[];for(let lt=0;lt<J.mipmaps.length;lt++)ye.__webglFramebuffer[nt][lt]=i.createFramebuffer()}else ye.__webglFramebuffer[nt]=i.createFramebuffer()}else{if(J.mipmaps&&J.mipmaps.length>0){ye.__webglFramebuffer=[];for(let nt=0;nt<J.mipmaps.length;nt++)ye.__webglFramebuffer[nt]=i.createFramebuffer()}else ye.__webglFramebuffer=i.createFramebuffer();if(qe)for(let nt=0,lt=De.length;nt<lt;nt++){const Ot=n.get(De[nt]);Ot.__webglTexture===void 0&&(Ot.__webglTexture=i.createTexture(),o.memory.textures++)}if(K.samples>0&&ut(K)===!1){ye.__webglMultisampledFramebuffer=i.createFramebuffer(),ye.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,ye.__webglMultisampledFramebuffer);for(let nt=0;nt<De.length;nt++){const lt=De[nt];ye.__webglColorRenderbuffer[nt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ye.__webglColorRenderbuffer[nt]);const Ot=s.convert(lt.format,lt.colorSpace),rt=s.convert(lt.type),xt=b(lt.internalFormat,Ot,rt,lt.colorSpace,K.isXRRenderTarget===!0),yt=We(K);i.renderbufferStorageMultisample(i.RENDERBUFFER,yt,xt,K.width,K.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+nt,i.RENDERBUFFER,ye.__webglColorRenderbuffer[nt])}i.bindRenderbuffer(i.RENDERBUFFER,null),K.depthBuffer&&(ye.__webglDepthRenderbuffer=i.createRenderbuffer(),_e(ye.__webglDepthRenderbuffer,K,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(ke){t.bindTexture(i.TEXTURE_CUBE_MAP,Re.__webglTexture),Q(i.TEXTURE_CUBE_MAP,J);for(let nt=0;nt<6;nt++)if(J.mipmaps&&J.mipmaps.length>0)for(let lt=0;lt<J.mipmaps.length;lt++)xe(ye.__webglFramebuffer[nt][lt],K,J,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+nt,lt);else xe(ye.__webglFramebuffer[nt],K,J,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+nt,0);x(J)&&w(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(qe){for(let nt=0,lt=De.length;nt<lt;nt++){const Ot=De[nt],rt=n.get(Ot);t.bindTexture(i.TEXTURE_2D,rt.__webglTexture),Q(i.TEXTURE_2D,Ot),xe(ye.__webglFramebuffer,K,Ot,i.COLOR_ATTACHMENT0+nt,i.TEXTURE_2D,0),x(Ot)&&w(i.TEXTURE_2D)}t.unbindTexture()}else{let nt=i.TEXTURE_2D;if((K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(nt=K.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(nt,Re.__webglTexture),Q(nt,J),J.mipmaps&&J.mipmaps.length>0)for(let lt=0;lt<J.mipmaps.length;lt++)xe(ye.__webglFramebuffer[lt],K,J,i.COLOR_ATTACHMENT0,nt,lt);else xe(ye.__webglFramebuffer,K,J,i.COLOR_ATTACHMENT0,nt,0);x(J)&&w(nt),t.unbindTexture()}K.depthBuffer&&Xe(K)}function Ee(K){const J=K.textures;for(let ye=0,Re=J.length;ye<Re;ye++){const De=J[ye];if(x(De)){const ke=M(K),qe=n.get(De).__webglTexture;t.bindTexture(ke,qe),w(ke),t.unbindTexture()}}}const Ge=[],se=[];function ht(K){if(K.samples>0){if(ut(K)===!1){const J=K.textures,ye=K.width,Re=K.height;let De=i.COLOR_BUFFER_BIT;const ke=K.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,qe=n.get(K),nt=J.length>1;if(nt)for(let lt=0;lt<J.length;lt++)t.bindFramebuffer(i.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,qe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,qe.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,qe.__webglFramebuffer);for(let lt=0;lt<J.length;lt++){if(K.resolveDepthBuffer&&(K.depthBuffer&&(De|=i.DEPTH_BUFFER_BIT),K.stencilBuffer&&K.resolveStencilBuffer&&(De|=i.STENCIL_BUFFER_BIT)),nt){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,qe.__webglColorRenderbuffer[lt]);const Ot=n.get(J[lt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Ot,0)}i.blitFramebuffer(0,0,ye,Re,0,0,ye,Re,De,i.NEAREST),l===!0&&(Ge.length=0,se.length=0,Ge.push(i.COLOR_ATTACHMENT0+lt),K.depthBuffer&&K.resolveDepthBuffer===!1&&(Ge.push(ke),se.push(ke),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,se)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Ge))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),nt)for(let lt=0;lt<J.length;lt++){t.bindFramebuffer(i.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.RENDERBUFFER,qe.__webglColorRenderbuffer[lt]);const Ot=n.get(J[lt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,qe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.TEXTURE_2D,Ot,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,qe.__webglMultisampledFramebuffer)}else if(K.depthBuffer&&K.resolveDepthBuffer===!1&&l){const J=K.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[J])}}}function We(K){return Math.min(r.maxSamples,K.samples)}function ut(K){const J=n.get(K);return K.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&J.__useRenderToTexture!==!1}function Fe(K){const J=o.render.frame;f.get(K)!==J&&(f.set(K,J),K.update())}function dt(K,J){const ye=K.colorSpace,Re=K.format,De=K.type;return K.isCompressedTexture===!0||K.isVideoTexture===!0||ye!==lu&&ye!==tc&&(cr.getTransfer(ye)===br?(Re!==Oi||De!==Qo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ye)),J}function je(K){return typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement?(u.width=K.naturalWidth||K.width,u.height=K.naturalHeight||K.height):typeof VideoFrame<"u"&&K instanceof VideoFrame?(u.width=K.displayWidth,u.height=K.displayHeight):(u.width=K.width,u.height=K.height),u}this.allocateTextureUnit=z,this.resetTextureUnits=H,this.setTexture2D=ue,this.setTexture2DArray=ae,this.setTexture3D=ge,this.setTextureCube=ee,this.rebindTextures=Ye,this.setupRenderTarget=Ne,this.updateRenderTargetMipmap=Ee,this.updateMultisampleRenderTarget=ht,this.setupDepthRenderbuffer=Xe,this.setupFrameBufferTexture=xe,this.useMultisampledRTT=ut}function gU(i,e){function t(n,r=tc){let s;const o=cr.getTransfer(r);if(n===Qo)return i.UNSIGNED_BYTE;if(n===iA)return i.UNSIGNED_SHORT_4_4_4_4;if(n===sA)return i.UNSIGNED_SHORT_5_5_5_1;if(n===NC)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===nA)return i.BYTE;if(n===rA)return i.SHORT;if(n===Tm)return i.UNSIGNED_SHORT;if(n===q0)return i.INT;if(n===au)return i.UNSIGNED_INT;if(n===pi)return i.FLOAT;if(n===ws)return i.HALF_FLOAT;if(n===UC)return i.ALPHA;if(n===zC)return i.RGB;if(n===Oi)return i.RGBA;if(n===GC)return i.LUMINANCE;if(n===HC)return i.LUMINANCE_ALPHA;if(n===hd)return i.DEPTH_COMPONENT;if(n===wd)return i.DEPTH_STENCIL;if(n===X0)return i.RED;if(n===J0)return i.RED_INTEGER;if(n===VC)return i.RG;if(n===oA)return i.RG_INTEGER;if(n===aA)return i.RGBA_INTEGER;if(n===L_||n===F_||n===O_||n===k_)if(o===br)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===L_)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===F_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===O_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===k_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===L_)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===F_)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===O_)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===k_)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Y1||n===Q1||n===Z1||n===$1)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===Y1)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Q1)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Z1)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===$1)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===ex||n===tx||n===nx)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===ex||n===tx)return o===br?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===nx)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===rx||n===ix||n===sx||n===ox||n===ax||n===lx||n===ux||n===cx||n===hx||n===fx||n===dx||n===px||n===mx||n===gx)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===rx)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===ix)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===sx)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===ox)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ax)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===lx)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===ux)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===cx)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===hx)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===fx)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===dx)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===px)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===mx)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===gx)return o===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===N_||n===_x||n===vx)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===N_)return o===br?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===_x)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===vx)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===WC||n===yx||n===xx||n===Ax)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===N_)return s.COMPRESSED_RED_RGTC1_EXT;if(n===yx)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===xx)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Ax)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Ad?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const oX={type:"move"};class HS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new rc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new rc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ce,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ce),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new rc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ce,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ce),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const A of e.hand.values()){const x=t.getJointPose(A,n),w=this._getHandJoint(u,A);x!==null&&(w.matrix.fromArray(x.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=x.radius),w.visible=x!==null}const f=u.joints["index-finger-tip"],c=u.joints["thumb-tip"],d=f.position.distanceTo(c.position),g=.02,v=.005;u.inputState.pinching&&d>g+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=g-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(oX)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new rc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const aX=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,lX=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class uX{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new mr,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new uo({vertexShader:aX,fragmentShader:lX,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Lr(new Wa(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class cX extends hu{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,f=null,c=null,d=null,g=null,v=null;const A=new uX,x=t.getContextAttributes();let w=null,M=null;const b=[],R=[],F=new mt;let O=null;const D=new Li;D.viewport=new nr;const I=new Li;I.viewport=new nr;const C=[D,I],B=new oU;let k=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let he=b[oe];return he===void 0&&(he=new HS,b[oe]=he),he.getTargetRaySpace()},this.getControllerGrip=function(oe){let he=b[oe];return he===void 0&&(he=new HS,b[oe]=he),he.getGripSpace()},this.getHand=function(oe){let he=b[oe];return he===void 0&&(he=new HS,b[oe]=he),he.getHandSpace()};function z(oe){const he=R.indexOf(oe.inputSource);if(he===-1)return;const xe=b[he];xe!==void 0&&(xe.update(oe.inputSource,oe.frame,u||o),xe.dispatchEvent({type:oe.type,data:oe.inputSource}))}function Z(){r.removeEventListener("select",z),r.removeEventListener("selectstart",z),r.removeEventListener("selectend",z),r.removeEventListener("squeeze",z),r.removeEventListener("squeezestart",z),r.removeEventListener("squeezeend",z),r.removeEventListener("end",Z),r.removeEventListener("inputsourceschange",ue);for(let oe=0;oe<b.length;oe++){const he=R[oe];he!==null&&(R[oe]=null,b[oe].disconnect(he))}k=null,H=null,A.reset(),e.setRenderTarget(w),g=null,d=null,c=null,r=null,M=null,fe.stop(),n.isPresenting=!1,e.setPixelRatio(O),e.setSize(F.width,F.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){s=oe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){a=oe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(oe){u=oe},this.getBaseLayer=function(){return d!==null?d:g},this.getBinding=function(){return c},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(oe){if(r=oe,r!==null){if(w=e.getRenderTarget(),r.addEventListener("select",z),r.addEventListener("selectstart",z),r.addEventListener("selectend",z),r.addEventListener("squeeze",z),r.addEventListener("squeezestart",z),r.addEventListener("squeezeend",z),r.addEventListener("end",Z),r.addEventListener("inputsourceschange",ue),x.xrCompatible!==!0&&await t.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(F),r.renderState.layers===void 0){const he={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,t,he),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),M=new Po(g.framebufferWidth,g.framebufferHeight,{format:Oi,type:Qo,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let he=null,xe=null,_e=null;x.depth&&(_e=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,he=x.stencil?wd:hd,xe=x.stencil?Ad:au);const be={colorFormat:t.RGBA8,depthFormat:_e,scaleFactor:s};c=new XRWebGLBinding(r,t),d=c.createProjectionLayer(be),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),M=new Po(d.textureWidth,d.textureHeight,{format:Oi,type:Qo,depthTexture:new a2(d.textureWidth,d.textureHeight,xe,void 0,void 0,void 0,void 0,void 0,void 0,he),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}M.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),fe.setContext(r),fe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};function ue(oe){for(let he=0;he<oe.removed.length;he++){const xe=oe.removed[he],_e=R.indexOf(xe);_e>=0&&(R[_e]=null,b[_e].disconnect(xe))}for(let he=0;he<oe.added.length;he++){const xe=oe.added[he];let _e=R.indexOf(xe);if(_e===-1){for(let Xe=0;Xe<b.length;Xe++)if(Xe>=R.length){R.push(xe),_e=Xe;break}else if(R[Xe]===null){R[Xe]=xe,_e=Xe;break}if(_e===-1)break}const be=b[_e];be&&be.connect(xe)}}const ae=new ce,ge=new ce;function ee(oe,he,xe){ae.setFromMatrixPosition(he.matrixWorld),ge.setFromMatrixPosition(xe.matrixWorld);const _e=ae.distanceTo(ge),be=he.projectionMatrix.elements,Xe=xe.projectionMatrix.elements,Ye=be[14]/(be[10]-1),Ne=be[14]/(be[10]+1),Ee=(be[9]+1)/be[5],Ge=(be[9]-1)/be[5],se=(be[8]-1)/be[0],ht=(Xe[8]+1)/Xe[0],We=Ye*se,ut=Ye*ht,Fe=_e/(-se+ht),dt=Fe*-se;if(he.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(dt),oe.translateZ(Fe),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert(),be[10]===-1)oe.projectionMatrix.copy(he.projectionMatrix),oe.projectionMatrixInverse.copy(he.projectionMatrixInverse);else{const je=Ye+Fe,K=Ne+Fe,J=We-dt,ye=ut+(_e-dt),Re=Ee*Ne/K*je,De=Ge*Ne/K*je;oe.projectionMatrix.makePerspective(J,ye,Re,De,je,K),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}}function le(oe,he){he===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(he.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(r===null)return;let he=oe.near,xe=oe.far;A.texture!==null&&(A.depthNear>0&&(he=A.depthNear),A.depthFar>0&&(xe=A.depthFar)),B.near=I.near=D.near=he,B.far=I.far=D.far=xe,(k!==B.near||H!==B.far)&&(r.updateRenderState({depthNear:B.near,depthFar:B.far}),k=B.near,H=B.far),D.layers.mask=oe.layers.mask|2,I.layers.mask=oe.layers.mask|4,B.layers.mask=D.layers.mask|I.layers.mask;const _e=oe.parent,be=B.cameras;le(B,_e);for(let Xe=0;Xe<be.length;Xe++)le(be[Xe],_e);be.length===2?ee(B,D,I):B.projectionMatrix.copy(D.projectionMatrix),$(oe,B,_e)};function $(oe,he,xe){xe===null?oe.matrix.copy(he.matrixWorld):(oe.matrix.copy(xe.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(he.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0),oe.projectionMatrix.copy(he.projectionMatrix),oe.projectionMatrixInverse.copy(he.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=Cm*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return B},this.getFoveation=function(){if(!(d===null&&g===null))return l},this.setFoveation=function(oe){l=oe,d!==null&&(d.fixedFoveation=oe),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=oe)},this.hasDepthSensing=function(){return A.texture!==null},this.getDepthSensingMesh=function(){return A.getMesh(B)};let V=null;function Q(oe,he){if(f=he.getViewerPose(u||o),v=he,f!==null){const xe=f.views;g!==null&&(e.setRenderTargetFramebuffer(M,g.framebuffer),e.setRenderTarget(M));let _e=!1;xe.length!==B.cameras.length&&(B.cameras.length=0,_e=!0);for(let Xe=0;Xe<xe.length;Xe++){const Ye=xe[Xe];let Ne=null;if(g!==null)Ne=g.getViewport(Ye);else{const Ge=c.getViewSubImage(d,Ye);Ne=Ge.viewport,Xe===0&&(e.setRenderTargetTextures(M,Ge.colorTexture,d.ignoreDepthValues?void 0:Ge.depthStencilTexture),e.setRenderTarget(M))}let Ee=C[Xe];Ee===void 0&&(Ee=new Li,Ee.layers.enable(Xe),Ee.viewport=new nr,C[Xe]=Ee),Ee.matrix.fromArray(Ye.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(Ye.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(Ne.x,Ne.y,Ne.width,Ne.height),Xe===0&&(B.matrix.copy(Ee.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale)),_e===!0&&B.cameras.push(Ee)}const be=r.enabledFeatures;if(be&&be.includes("depth-sensing")){const Xe=c.getDepthInformation(xe[0]);Xe&&Xe.isValid&&Xe.texture&&A.init(e,Xe,r.renderState)}}for(let xe=0;xe<b.length;xe++){const _e=R[xe],be=b[xe];_e!==null&&be!==void 0&&be.update(_e,he,u||o)}V&&V(oe,he),he.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:he}),v=null}const fe=new hU;fe.setAnimationLoop(Q),this.setAnimationLoop=function(oe){V=oe},this.dispose=function(){}}}const Nf=new Aa,hX=new pn;function fX(i,e){function t(x,w){x.matrixAutoUpdate===!0&&x.updateMatrix(),w.value.copy(x.matrix)}function n(x,w){w.color.getRGB(x.fogColor.value,AN(i)),w.isFog?(x.fogNear.value=w.near,x.fogFar.value=w.far):w.isFogExp2&&(x.fogDensity.value=w.density)}function r(x,w,M,b,R){w.isMeshBasicMaterial||w.isMeshLambertMaterial?s(x,w):w.isMeshToonMaterial?(s(x,w),c(x,w)):w.isMeshPhongMaterial?(s(x,w),f(x,w)):w.isMeshStandardMaterial?(s(x,w),d(x,w),w.isMeshPhysicalMaterial&&g(x,w,R)):w.isMeshMatcapMaterial?(s(x,w),v(x,w)):w.isMeshDepthMaterial?s(x,w):w.isMeshDistanceMaterial?(s(x,w),A(x,w)):w.isMeshNormalMaterial?s(x,w):w.isLineBasicMaterial?(o(x,w),w.isLineDashedMaterial&&a(x,w)):w.isPointsMaterial?l(x,w,M,b):w.isSpriteMaterial?u(x,w):w.isShadowMaterial?(x.color.value.copy(w.color),x.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function s(x,w){x.opacity.value=w.opacity,w.color&&x.diffuse.value.copy(w.color),w.emissive&&x.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(x.map.value=w.map,t(w.map,x.mapTransform)),w.alphaMap&&(x.alphaMap.value=w.alphaMap,t(w.alphaMap,x.alphaMapTransform)),w.bumpMap&&(x.bumpMap.value=w.bumpMap,t(w.bumpMap,x.bumpMapTransform),x.bumpScale.value=w.bumpScale,w.side===ao&&(x.bumpScale.value*=-1)),w.normalMap&&(x.normalMap.value=w.normalMap,t(w.normalMap,x.normalMapTransform),x.normalScale.value.copy(w.normalScale),w.side===ao&&x.normalScale.value.negate()),w.displacementMap&&(x.displacementMap.value=w.displacementMap,t(w.displacementMap,x.displacementMapTransform),x.displacementScale.value=w.displacementScale,x.displacementBias.value=w.displacementBias),w.emissiveMap&&(x.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,x.emissiveMapTransform)),w.specularMap&&(x.specularMap.value=w.specularMap,t(w.specularMap,x.specularMapTransform)),w.alphaTest>0&&(x.alphaTest.value=w.alphaTest);const M=e.get(w),b=M.envMap,R=M.envMapRotation;b&&(x.envMap.value=b,Nf.copy(R),Nf.x*=-1,Nf.y*=-1,Nf.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(Nf.y*=-1,Nf.z*=-1),x.envMapRotation.value.setFromMatrix4(hX.makeRotationFromEuler(Nf)),x.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=w.reflectivity,x.ior.value=w.ior,x.refractionRatio.value=w.refractionRatio),w.lightMap&&(x.lightMap.value=w.lightMap,x.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,x.lightMapTransform)),w.aoMap&&(x.aoMap.value=w.aoMap,x.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,x.aoMapTransform))}function o(x,w){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity,w.map&&(x.map.value=w.map,t(w.map,x.mapTransform))}function a(x,w){x.dashSize.value=w.dashSize,x.totalSize.value=w.dashSize+w.gapSize,x.scale.value=w.scale}function l(x,w,M,b){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity,x.size.value=w.size*M,x.scale.value=b*.5,w.map&&(x.map.value=w.map,t(w.map,x.uvTransform)),w.alphaMap&&(x.alphaMap.value=w.alphaMap,t(w.alphaMap,x.alphaMapTransform)),w.alphaTest>0&&(x.alphaTest.value=w.alphaTest)}function u(x,w){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity,x.rotation.value=w.rotation,w.map&&(x.map.value=w.map,t(w.map,x.mapTransform)),w.alphaMap&&(x.alphaMap.value=w.alphaMap,t(w.alphaMap,x.alphaMapTransform)),w.alphaTest>0&&(x.alphaTest.value=w.alphaTest)}function f(x,w){x.specular.value.copy(w.specular),x.shininess.value=Math.max(w.shininess,1e-4)}function c(x,w){w.gradientMap&&(x.gradientMap.value=w.gradientMap)}function d(x,w){x.metalness.value=w.metalness,w.metalnessMap&&(x.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,x.metalnessMapTransform)),x.roughness.value=w.roughness,w.roughnessMap&&(x.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,x.roughnessMapTransform)),w.envMap&&(x.envMapIntensity.value=w.envMapIntensity)}function g(x,w,M){x.ior.value=w.ior,w.sheen>0&&(x.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),x.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(x.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,x.sheenColorMapTransform)),w.sheenRoughnessMap&&(x.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,x.sheenRoughnessMapTransform))),w.clearcoat>0&&(x.clearcoat.value=w.clearcoat,x.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(x.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,x.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(x.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===ao&&x.clearcoatNormalScale.value.negate())),w.dispersion>0&&(x.dispersion.value=w.dispersion),w.iridescence>0&&(x.iridescence.value=w.iridescence,x.iridescenceIOR.value=w.iridescenceIOR,x.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(x.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,x.iridescenceMapTransform)),w.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),w.transmission>0&&(x.transmission.value=w.transmission,x.transmissionSamplerMap.value=M.texture,x.transmissionSamplerSize.value.set(M.width,M.height),w.transmissionMap&&(x.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,x.transmissionMapTransform)),x.thickness.value=w.thickness,w.thicknessMap&&(x.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=w.attenuationDistance,x.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(x.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(x.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=w.specularIntensity,x.specularColor.value.copy(w.specularColor),w.specularColorMap&&(x.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,x.specularColorMapTransform)),w.specularIntensityMap&&(x.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,w){w.matcap&&(x.matcap.value=w.matcap)}function A(x,w){const M=e.get(w).light;x.referencePosition.value.setFromMatrixPosition(M.matrixWorld),x.nearDistance.value=M.shadow.camera.near,x.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function dX(i,e,t,n){let r={},s={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(M,b){const R=b.program;n.uniformBlockBinding(M,R)}function u(M,b){let R=r[M.id];R===void 0&&(v(M),R=f(M),r[M.id]=R,M.addEventListener("dispose",x));const F=b.program;n.updateUBOMapping(M,F);const O=e.render.frame;s[M.id]!==O&&(d(M),s[M.id]=O)}function f(M){const b=c();M.__bindingPointIndex=b;const R=i.createBuffer(),F=M.__size,O=M.usage;return i.bindBuffer(i.UNIFORM_BUFFER,R),i.bufferData(i.UNIFORM_BUFFER,F,O),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,b,R),R}function c(){for(let M=0;M<a;M++)if(o.indexOf(M)===-1)return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(M){const b=r[M.id],R=M.uniforms,F=M.__cache;i.bindBuffer(i.UNIFORM_BUFFER,b);for(let O=0,D=R.length;O<D;O++){const I=Array.isArray(R[O])?R[O]:[R[O]];for(let C=0,B=I.length;C<B;C++){const k=I[C];if(g(k,O,C,F)===!0){const H=k.__offset,z=Array.isArray(k.value)?k.value:[k.value];let Z=0;for(let ue=0;ue<z.length;ue++){const ae=z[ue],ge=A(ae);typeof ae=="number"||typeof ae=="boolean"?(k.__data[0]=ae,i.bufferSubData(i.UNIFORM_BUFFER,H+Z,k.__data)):ae.isMatrix3?(k.__data[0]=ae.elements[0],k.__data[1]=ae.elements[1],k.__data[2]=ae.elements[2],k.__data[3]=0,k.__data[4]=ae.elements[3],k.__data[5]=ae.elements[4],k.__data[6]=ae.elements[5],k.__data[7]=0,k.__data[8]=ae.elements[6],k.__data[9]=ae.elements[7],k.__data[10]=ae.elements[8],k.__data[11]=0):(ae.toArray(k.__data,Z),Z+=ge.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,H,k.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function g(M,b,R,F){const O=M.value,D=b+"_"+R;if(F[D]===void 0)return typeof O=="number"||typeof O=="boolean"?F[D]=O:F[D]=O.clone(),!0;{const I=F[D];if(typeof O=="number"||typeof O=="boolean"){if(I!==O)return F[D]=O,!0}else if(I.equals(O)===!1)return I.copy(O),!0}return!1}function v(M){const b=M.uniforms;let R=0;const F=16;for(let D=0,I=b.length;D<I;D++){const C=Array.isArray(b[D])?b[D]:[b[D]];for(let B=0,k=C.length;B<k;B++){const H=C[B],z=Array.isArray(H.value)?H.value:[H.value];for(let Z=0,ue=z.length;Z<ue;Z++){const ae=z[Z],ge=A(ae),ee=R%F,le=ee%ge.boundary,$=ee+le;R+=le,$!==0&&F-$<ge.storage&&(R+=F-$),H.__data=new Float32Array(ge.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=R,R+=ge.storage}}}const O=R%F;return O>0&&(R+=F-O),M.__size=R,M.__cache={},this}function A(M){const b={boundary:0,storage:0};return typeof M=="number"||typeof M=="boolean"?(b.boundary=4,b.storage=4):M.isVector2?(b.boundary=8,b.storage=8):M.isVector3||M.isColor?(b.boundary=16,b.storage=12):M.isVector4?(b.boundary=16,b.storage=16):M.isMatrix3?(b.boundary=48,b.storage=48):M.isMatrix4?(b.boundary=64,b.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),b}function x(M){const b=M.target;b.removeEventListener("dispose",x);const R=o.indexOf(b.__bindingPointIndex);o.splice(R,1),i.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function w(){for(const M in r)i.deleteBuffer(r[M]);o=[],r={},s={}}return{bind:l,update:u,dispose:w}}class P2{constructor(e={}){const{canvas:t=_N(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:c=!1,reverseDepthBuffer:d=!1}=e;this.isWebGLRenderer=!0;let g;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=n.getContextAttributes().alpha}else g=o;const v=new Uint32Array(4),A=new Int32Array(4);let x=null,w=null;const M=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Mo,this.toneMapping=tu,this.toneMappingExposure=1;const R=this;let F=!1,O=0,D=0,I=null,C=-1,B=null;const k=new nr,H=new nr;let z=null;const Z=new Ht(0);let ue=0,ae=t.width,ge=t.height,ee=1,le=null,$=null;const V=new nr(0,0,ae,ge),Q=new nr(0,0,ae,ge);let fe=!1;const oe=new $0;let he=!1,xe=!1;const _e=new pn,be=new pn,Xe=new ce,Ye=new nr,Ne={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ee=!1;function Ge(){return I===null?ee:1}let se=n;function ht(q,de){return t.getContext(q,de)}try{const q={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Gm}`),t.addEventListener("webglcontextlost",at,!1),t.addEventListener("webglcontextrestored",vt,!1),t.addEventListener("webglcontextcreationerror",ft,!1),se===null){const de="webgl2";if(se=ht(de,q),se===null)throw ht(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let We,ut,Fe,dt,je,K,J,ye,Re,De,ke,qe,nt,lt,Ot,rt,xt,yt,gt,it,kt,Bt,Qt,Te;function Ce(){We=new Ej(se),We.init(),Bt=new gU(se,We),ut=new vj(se,We,e,Bt),Fe=new iX(se,We),ut.reverseDepthBuffer&&d&&Fe.buffers.depth.setReversed(!0),dt=new bj(se),je=new jq,K=new sX(se,We,Fe,je,ut,Bt,dt),J=new xj(R),ye=new Sj(R),Re=new LV(se),Qt=new gj(se,Re),De=new Tj(se,Re,dt,Qt),ke=new Rj(se,De,Re,dt),gt=new Cj(se,ut,K),rt=new yj(je),qe=new Wq(R,J,ye,We,ut,Qt,rt),nt=new fX(R,je),lt=new Xq,Ot=new $q(We),yt=new mj(R,J,ye,Fe,ke,g,l),xt=new nX(R,ke,ut),Te=new dX(se,dt,ut,Fe),it=new _j(se,We,dt),kt=new Mj(se,We,dt),dt.programs=qe.programs,R.capabilities=ut,R.extensions=We,R.properties=je,R.renderLists=lt,R.shadowMap=xt,R.state=Fe,R.info=dt}Ce();const Le=new cX(R,se);this.xr=Le,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){const q=We.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=We.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return ee},this.setPixelRatio=function(q){q!==void 0&&(ee=q,this.setSize(ae,ge,!1))},this.getSize=function(q){return q.set(ae,ge)},this.setSize=function(q,de,Ae=!0){if(Le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ae=q,ge=de,t.width=Math.floor(q*ee),t.height=Math.floor(de*ee),Ae===!0&&(t.style.width=q+"px",t.style.height=de+"px"),this.setViewport(0,0,q,de)},this.getDrawingBufferSize=function(q){return q.set(ae*ee,ge*ee).floor()},this.setDrawingBufferSize=function(q,de,Ae){ae=q,ge=de,ee=Ae,t.width=Math.floor(q*Ae),t.height=Math.floor(de*Ae),this.setViewport(0,0,q,de)},this.getCurrentViewport=function(q){return q.copy(k)},this.getViewport=function(q){return q.copy(V)},this.setViewport=function(q,de,Ae,we){q.isVector4?V.set(q.x,q.y,q.z,q.w):V.set(q,de,Ae,we),Fe.viewport(k.copy(V).multiplyScalar(ee).round())},this.getScissor=function(q){return q.copy(Q)},this.setScissor=function(q,de,Ae,we){q.isVector4?Q.set(q.x,q.y,q.z,q.w):Q.set(q,de,Ae,we),Fe.scissor(H.copy(Q).multiplyScalar(ee).round())},this.getScissorTest=function(){return fe},this.setScissorTest=function(q){Fe.setScissorTest(fe=q)},this.setOpaqueSort=function(q){le=q},this.setTransparentSort=function(q){$=q},this.getClearColor=function(q){return q.copy(yt.getClearColor())},this.setClearColor=function(){yt.setClearColor.apply(yt,arguments)},this.getClearAlpha=function(){return yt.getClearAlpha()},this.setClearAlpha=function(){yt.setClearAlpha.apply(yt,arguments)},this.clear=function(q=!0,de=!0,Ae=!0){let we=0;if(q){let te=!1;if(I!==null){const st=I.texture.format;te=st===aA||st===oA||st===J0}if(te){const st=I.texture.type,$e=st===Qo||st===au||st===Tm||st===Ad||st===iA||st===sA,et=yt.getClearColor(),ct=yt.getClearAlpha(),Mt=et.r,Dt=et.g,wt=et.b;$e?(v[0]=Mt,v[1]=Dt,v[2]=wt,v[3]=ct,se.clearBufferuiv(se.COLOR,0,v)):(A[0]=Mt,A[1]=Dt,A[2]=wt,A[3]=ct,se.clearBufferiv(se.COLOR,0,A))}else we|=se.COLOR_BUFFER_BIT}de&&(we|=se.DEPTH_BUFFER_BIT),Ae&&(we|=se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),se.clear(we)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",at,!1),t.removeEventListener("webglcontextrestored",vt,!1),t.removeEventListener("webglcontextcreationerror",ft,!1),yt.dispose(),lt.dispose(),Ot.dispose(),je.dispose(),J.dispose(),ye.dispose(),ke.dispose(),Qt.dispose(),Te.dispose(),qe.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",fr),Le.removeEventListener("sessionend",yr),_r.stop()};function at(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function vt(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const q=dt.autoReset,de=xt.enabled,Ae=xt.autoUpdate,we=xt.needsUpdate,te=xt.type;Ce(),dt.autoReset=q,xt.enabled=de,xt.autoUpdate=Ae,xt.needsUpdate=we,xt.type=te}function ft(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function qt(q){const de=q.target;de.removeEventListener("dispose",qt),ln(de)}function ln(q){Kt(q),je.remove(q)}function Kt(q){const de=je.get(q).programs;de!==void 0&&(de.forEach(function(Ae){qe.releaseProgram(Ae)}),q.isShaderMaterial&&qe.releaseShaderCache(q))}this.renderBufferDirect=function(q,de,Ae,we,te,st){de===null&&(de=Ne);const $e=te.isMesh&&te.matrixWorld.determinant()<0,et=Se(q,de,Ae,we,te);Fe.setMaterial(we,$e);let ct=Ae.index,Mt=1;if(we.wireframe===!0){if(ct=De.getWireframeAttribute(Ae),ct===void 0)return;Mt=2}const Dt=Ae.drawRange,wt=Ae.attributes.position;let Tt=Dt.start*Mt,zt=(Dt.start+Dt.count)*Mt;st!==null&&(Tt=Math.max(Tt,st.start*Mt),zt=Math.min(zt,(st.start+st.count)*Mt)),ct!==null?(Tt=Math.max(Tt,0),zt=Math.min(zt,ct.count)):wt!=null&&(Tt=Math.max(Tt,0),zt=Math.min(zt,wt.count));const Vt=zt-Tt;if(Vt<0||Vt===1/0)return;Qt.setup(te,we,et,Ae,ct);let un,Nt=it;if(ct!==null&&(un=Re.get(ct),Nt=kt,Nt.setIndex(un)),te.isMesh)we.wireframe===!0?(Fe.setLineWidth(we.wireframeLinewidth*Ge()),Nt.setMode(se.LINES)):Nt.setMode(se.TRIANGLES);else if(te.isLine){let Lt=we.linewidth;Lt===void 0&&(Lt=1),Fe.setLineWidth(Lt*Ge()),te.isLineSegments?Nt.setMode(se.LINES):te.isLineLoop?Nt.setMode(se.LINE_LOOP):Nt.setMode(se.LINE_STRIP)}else te.isPoints?Nt.setMode(se.POINTS):te.isSprite&&Nt.setMode(se.TRIANGLES);if(te.isBatchedMesh)if(te._multiDrawInstances!==null)Nt.renderMultiDrawInstances(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount,te._multiDrawInstances);else if(We.get("WEBGL_multi_draw"))Nt.renderMultiDraw(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount);else{const Lt=te._multiDrawStarts,Sn=te._multiDrawCounts,nn=te._multiDrawCount,In=ct?Re.get(ct).bytesPerElement:1,An=je.get(we).currentProgram.getUniforms();for(let Vn=0;Vn<nn;Vn++)An.setValue(se,"_gl_DrawID",Vn),Nt.render(Lt[Vn]/In,Sn[Vn])}else if(te.isInstancedMesh)Nt.renderInstances(Tt,Vt,te.count);else if(Ae.isInstancedBufferGeometry){const Lt=Ae._maxInstanceCount!==void 0?Ae._maxInstanceCount:1/0,Sn=Math.min(Ae.instanceCount,Lt);Nt.renderInstances(Tt,Vt,Sn)}else Nt.render(Tt,Vt)};function Yt(q,de,Ae){q.transparent===!0&&q.side===Co&&q.forceSinglePass===!1?(q.side=ao,q.needsUpdate=!0,oi(q,de,Ae),q.side=Il,q.needsUpdate=!0,oi(q,de,Ae),q.side=Co):oi(q,de,Ae)}this.compile=function(q,de,Ae=null){Ae===null&&(Ae=q),w=Ot.get(Ae),w.init(de),b.push(w),Ae.traverseVisible(function(te){te.isLight&&te.layers.test(de.layers)&&(w.pushLight(te),te.castShadow&&w.pushShadow(te))}),q!==Ae&&q.traverseVisible(function(te){te.isLight&&te.layers.test(de.layers)&&(w.pushLight(te),te.castShadow&&w.pushShadow(te))}),w.setupLights();const we=new Set;return q.traverse(function(te){if(!(te.isMesh||te.isPoints||te.isLine||te.isSprite))return;const st=te.material;if(st)if(Array.isArray(st))for(let $e=0;$e<st.length;$e++){const et=st[$e];Yt(et,Ae,te),we.add(et)}else Yt(st,Ae,te),we.add(st)}),b.pop(),w=null,we},this.compileAsync=function(q,de,Ae=null){const we=this.compile(q,de,Ae);return new Promise(te=>{function st(){if(we.forEach(function($e){je.get($e).currentProgram.isReady()&&we.delete($e)}),we.size===0){te(q);return}setTimeout(st,10)}We.get("KHR_parallel_shader_compile")!==null?st():setTimeout(st,10)})};let Wn=null;function mn(q){Wn&&Wn(q)}function fr(){_r.stop()}function yr(){_r.start()}const _r=new hU;_r.setAnimationLoop(mn),typeof self<"u"&&_r.setContext(self),this.setAnimationLoop=function(q){Wn=q,Le.setAnimationLoop(q),q===null?_r.stop():_r.start()},Le.addEventListener("sessionstart",fr),Le.addEventListener("sessionend",yr),this.render=function(q,de){if(de!==void 0&&de.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(F===!0)return;if(q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),de.parent===null&&de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),Le.enabled===!0&&Le.isPresenting===!0&&(Le.cameraAutoUpdate===!0&&Le.updateCamera(de),de=Le.getCamera()),q.isScene===!0&&q.onBeforeRender(R,q,de,I),w=Ot.get(q,b.length),w.init(de),b.push(w),be.multiplyMatrices(de.projectionMatrix,de.matrixWorldInverse),oe.setFromProjectionMatrix(be),xe=this.localClippingEnabled,he=rt.init(this.clippingPlanes,xe),x=lt.get(q,M.length),x.init(),M.push(x),Le.enabled===!0&&Le.isPresenting===!0){const st=R.xr.getDepthSensingMesh();st!==null&&Or(st,de,-1/0,R.sortObjects)}Or(q,de,0,R.sortObjects),x.finish(),R.sortObjects===!0&&x.sort(le,$),Ee=Le.enabled===!1||Le.isPresenting===!1||Le.hasDepthSensing()===!1,Ee&&yt.addToRenderList(x,q),this.info.render.frame++,he===!0&&rt.beginShadows();const Ae=w.state.shadowsArray;xt.render(Ae,q,de),he===!0&&rt.endShadows(),this.info.autoReset===!0&&this.info.reset();const we=x.opaque,te=x.transmissive;if(w.setupLights(),de.isArrayCamera){const st=de.cameras;if(te.length>0)for(let $e=0,et=st.length;$e<et;$e++){const ct=st[$e];sr(we,te,q,ct)}Ee&&yt.render(q);for(let $e=0,et=st.length;$e<et;$e++){const ct=st[$e];Gr(x,q,ct,ct.viewport)}}else te.length>0&&sr(we,te,q,de),Ee&&yt.render(q),Gr(x,q,de);I!==null&&(K.updateMultisampleRenderTarget(I),K.updateRenderTargetMipmap(I)),q.isScene===!0&&q.onAfterRender(R,q,de),Qt.resetDefaultState(),C=-1,B=null,b.pop(),b.length>0?(w=b[b.length-1],he===!0&&rt.setGlobalState(R.clippingPlanes,w.state.camera)):w=null,M.pop(),M.length>0?x=M[M.length-1]:x=null};function Or(q,de,Ae,we){if(q.visible===!1)return;if(q.layers.test(de.layers)){if(q.isGroup)Ae=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(de);else if(q.isLight)w.pushLight(q),q.castShadow&&w.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||oe.intersectsSprite(q)){we&&Ye.setFromMatrixPosition(q.matrixWorld).applyMatrix4(be);const $e=ke.update(q),et=q.material;et.visible&&x.push(q,$e,et,Ae,Ye.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(!q.frustumCulled||oe.intersectsObject(q))){const $e=ke.update(q),et=q.material;if(we&&(q.boundingSphere!==void 0?(q.boundingSphere===null&&q.computeBoundingSphere(),Ye.copy(q.boundingSphere.center)):($e.boundingSphere===null&&$e.computeBoundingSphere(),Ye.copy($e.boundingSphere.center)),Ye.applyMatrix4(q.matrixWorld).applyMatrix4(be)),Array.isArray(et)){const ct=$e.groups;for(let Mt=0,Dt=ct.length;Mt<Dt;Mt++){const wt=ct[Mt],Tt=et[wt.materialIndex];Tt&&Tt.visible&&x.push(q,$e,Tt,Ae,Ye.z,wt)}}else et.visible&&x.push(q,$e,et,Ae,Ye.z,null)}}const st=q.children;for(let $e=0,et=st.length;$e<et;$e++)Or(st[$e],de,Ae,we)}function Gr(q,de,Ae,we){const te=q.opaque,st=q.transmissive,$e=q.transparent;w.setupLightsView(Ae),he===!0&&rt.setGlobalState(R.clippingPlanes,Ae),we&&Fe.viewport(k.copy(we)),te.length>0&&cn(te,de,Ae),st.length>0&&cn(st,de,Ae),$e.length>0&&cn($e,de,Ae),Fe.buffers.depth.setTest(!0),Fe.buffers.depth.setMask(!0),Fe.buffers.color.setMask(!0),Fe.setPolygonOffset(!1)}function sr(q,de,Ae,we){if((Ae.isScene===!0?Ae.overrideMaterial:null)!==null)return;w.state.transmissionRenderTarget[we.id]===void 0&&(w.state.transmissionRenderTarget[we.id]=new Po(1,1,{generateMipmaps:!0,type:We.has("EXT_color_buffer_half_float")||We.has("EXT_color_buffer_float")?ws:Qo,minFilter:za,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:cr.workingColorSpace}));const st=w.state.transmissionRenderTarget[we.id],$e=we.viewport||k;st.setSize($e.z,$e.w);const et=R.getRenderTarget();R.setRenderTarget(st),R.getClearColor(Z),ue=R.getClearAlpha(),ue<1&&R.setClearColor(16777215,.5),R.clear(),Ee&&yt.render(Ae);const ct=R.toneMapping;R.toneMapping=tu;const Mt=we.viewport;if(we.viewport!==void 0&&(we.viewport=void 0),w.setupLightsView(we),he===!0&&rt.setGlobalState(R.clippingPlanes,we),cn(q,Ae,we),K.updateMultisampleRenderTarget(st),K.updateRenderTargetMipmap(st),We.has("WEBGL_multisampled_render_to_texture")===!1){let Dt=!1;for(let wt=0,Tt=de.length;wt<Tt;wt++){const zt=de[wt],Vt=zt.object,un=zt.geometry,Nt=zt.material,Lt=zt.group;if(Nt.side===Co&&Vt.layers.test(we.layers)){const Sn=Nt.side;Nt.side=ao,Nt.needsUpdate=!0,kr(Vt,Ae,we,un,Nt,Lt),Nt.side=Sn,Nt.needsUpdate=!0,Dt=!0}}Dt===!0&&(K.updateMultisampleRenderTarget(st),K.updateRenderTargetMipmap(st))}R.setRenderTarget(et),R.setClearColor(Z,ue),Mt!==void 0&&(we.viewport=Mt),R.toneMapping=ct}function cn(q,de,Ae){const we=de.isScene===!0?de.overrideMaterial:null;for(let te=0,st=q.length;te<st;te++){const $e=q[te],et=$e.object,ct=$e.geometry,Mt=we===null?$e.material:we,Dt=$e.group;et.layers.test(Ae.layers)&&kr(et,de,Ae,ct,Mt,Dt)}}function kr(q,de,Ae,we,te,st){q.onBeforeRender(R,de,Ae,we,te,st),q.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),te.onBeforeRender(R,de,Ae,we,q,st),te.transparent===!0&&te.side===Co&&te.forceSinglePass===!1?(te.side=ao,te.needsUpdate=!0,R.renderBufferDirect(Ae,de,we,te,q,st),te.side=Il,te.needsUpdate=!0,R.renderBufferDirect(Ae,de,we,te,q,st),te.side=Co):R.renderBufferDirect(Ae,de,we,te,q,st),q.onAfterRender(R,de,Ae,we,te,st)}function oi(q,de,Ae){de.isScene!==!0&&(de=Ne);const we=je.get(q),te=w.state.lights,st=w.state.shadowsArray,$e=te.state.version,et=qe.getParameters(q,te.state,st,de,Ae),ct=qe.getProgramCacheKey(et);let Mt=we.programs;we.environment=q.isMeshStandardMaterial?de.environment:null,we.fog=de.fog,we.envMap=(q.isMeshStandardMaterial?ye:J).get(q.envMap||we.environment),we.envMapRotation=we.environment!==null&&q.envMap===null?de.environmentRotation:q.envMapRotation,Mt===void 0&&(q.addEventListener("dispose",qt),Mt=new Map,we.programs=Mt);let Dt=Mt.get(ct);if(Dt!==void 0){if(we.currentProgram===Dt&&we.lightsStateVersion===$e)return ne(q,et),Dt}else et.uniforms=qe.getUniforms(q),q.onBeforeCompile(et,R),Dt=qe.acquireProgram(et,ct),Mt.set(ct,Dt),we.uniforms=et.uniforms;const wt=we.uniforms;return(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(wt.clippingPlanes=rt.uniform),ne(q,et),we.needsLights=Qe(q),we.lightsStateVersion=$e,we.needsLights&&(wt.ambientLightColor.value=te.state.ambient,wt.lightProbe.value=te.state.probe,wt.directionalLights.value=te.state.directional,wt.directionalLightShadows.value=te.state.directionalShadow,wt.spotLights.value=te.state.spot,wt.spotLightShadows.value=te.state.spotShadow,wt.rectAreaLights.value=te.state.rectArea,wt.ltc_1.value=te.state.rectAreaLTC1,wt.ltc_2.value=te.state.rectAreaLTC2,wt.pointLights.value=te.state.point,wt.pointLightShadows.value=te.state.pointShadow,wt.hemisphereLights.value=te.state.hemi,wt.directionalShadowMap.value=te.state.directionalShadowMap,wt.directionalShadowMatrix.value=te.state.directionalShadowMatrix,wt.spotShadowMap.value=te.state.spotShadowMap,wt.spotLightMatrix.value=te.state.spotLightMatrix,wt.spotLightMap.value=te.state.spotLightMap,wt.pointShadowMap.value=te.state.pointShadowMap,wt.pointShadowMatrix.value=te.state.pointShadowMatrix),we.currentProgram=Dt,we.uniformsList=null,Dt}function X(q){if(q.uniformsList===null){const de=q.currentProgram.getUniforms();q.uniformsList=A1.seqWithValue(de.seq,q.uniforms)}return q.uniformsList}function ne(q,de){const Ae=je.get(q);Ae.outputColorSpace=de.outputColorSpace,Ae.batching=de.batching,Ae.batchingColor=de.batchingColor,Ae.instancing=de.instancing,Ae.instancingColor=de.instancingColor,Ae.instancingMorph=de.instancingMorph,Ae.skinning=de.skinning,Ae.morphTargets=de.morphTargets,Ae.morphNormals=de.morphNormals,Ae.morphColors=de.morphColors,Ae.morphTargetsCount=de.morphTargetsCount,Ae.numClippingPlanes=de.numClippingPlanes,Ae.numIntersection=de.numClipIntersection,Ae.vertexAlphas=de.vertexAlphas,Ae.vertexTangents=de.vertexTangents,Ae.toneMapping=de.toneMapping}function Se(q,de,Ae,we,te){de.isScene!==!0&&(de=Ne),K.resetTextureUnits();const st=de.fog,$e=we.isMeshStandardMaterial?de.environment:null,et=I===null?R.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:lu,ct=(we.isMeshStandardMaterial?ye:J).get(we.envMap||$e),Mt=we.vertexColors===!0&&!!Ae.attributes.color&&Ae.attributes.color.itemSize===4,Dt=!!Ae.attributes.tangent&&(!!we.normalMap||we.anisotropy>0),wt=!!Ae.morphAttributes.position,Tt=!!Ae.morphAttributes.normal,zt=!!Ae.morphAttributes.color;let Vt=tu;we.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(Vt=R.toneMapping);const un=Ae.morphAttributes.position||Ae.morphAttributes.normal||Ae.morphAttributes.color,Nt=un!==void 0?un.length:0,Lt=je.get(we),Sn=w.state.lights;if(he===!0&&(xe===!0||q!==B)){const Mn=q===B&&we.id===C;rt.setState(we,q,Mn)}let nn=!1;we.version===Lt.__version?(Lt.needsLights&&Lt.lightsStateVersion!==Sn.state.version||Lt.outputColorSpace!==et||te.isBatchedMesh&&Lt.batching===!1||!te.isBatchedMesh&&Lt.batching===!0||te.isBatchedMesh&&Lt.batchingColor===!0&&te.colorTexture===null||te.isBatchedMesh&&Lt.batchingColor===!1&&te.colorTexture!==null||te.isInstancedMesh&&Lt.instancing===!1||!te.isInstancedMesh&&Lt.instancing===!0||te.isSkinnedMesh&&Lt.skinning===!1||!te.isSkinnedMesh&&Lt.skinning===!0||te.isInstancedMesh&&Lt.instancingColor===!0&&te.instanceColor===null||te.isInstancedMesh&&Lt.instancingColor===!1&&te.instanceColor!==null||te.isInstancedMesh&&Lt.instancingMorph===!0&&te.morphTexture===null||te.isInstancedMesh&&Lt.instancingMorph===!1&&te.morphTexture!==null||Lt.envMap!==ct||we.fog===!0&&Lt.fog!==st||Lt.numClippingPlanes!==void 0&&(Lt.numClippingPlanes!==rt.numPlanes||Lt.numIntersection!==rt.numIntersection)||Lt.vertexAlphas!==Mt||Lt.vertexTangents!==Dt||Lt.morphTargets!==wt||Lt.morphNormals!==Tt||Lt.morphColors!==zt||Lt.toneMapping!==Vt||Lt.morphTargetsCount!==Nt)&&(nn=!0):(nn=!0,Lt.__version=we.version);let In=Lt.currentProgram;nn===!0&&(In=oi(we,de,te));let An=!1,Vn=!1,wn=!1;const Ut=In.getUniforms(),En=Lt.uniforms;if(Fe.useProgram(In.program)&&(An=!0,Vn=!0,wn=!0),we.id!==C&&(C=we.id,Vn=!0),An||B!==q){Fe.buffers.depth.getReversed()?(_e.copy(q.projectionMatrix),c8(_e),h8(_e),Ut.setValue(se,"projectionMatrix",_e)):Ut.setValue(se,"projectionMatrix",q.projectionMatrix),Ut.setValue(se,"viewMatrix",q.matrixWorldInverse);const hn=Ut.map.cameraPosition;hn!==void 0&&hn.setValue(se,Xe.setFromMatrixPosition(q.matrixWorld)),ut.logarithmicDepthBuffer&&Ut.setValue(se,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&&Ut.setValue(se,"isOrthographic",q.isOrthographicCamera===!0),B!==q&&(B=q,Vn=!0,wn=!0)}if(te.isSkinnedMesh){Ut.setOptional(se,te,"bindMatrix"),Ut.setOptional(se,te,"bindMatrixInverse");const Mn=te.skeleton;Mn&&(Mn.boneTexture===null&&Mn.computeBoneTexture(),Ut.setValue(se,"boneTexture",Mn.boneTexture,K))}te.isBatchedMesh&&(Ut.setOptional(se,te,"batchingTexture"),Ut.setValue(se,"batchingTexture",te._matricesTexture,K),Ut.setOptional(se,te,"batchingIdTexture"),Ut.setValue(se,"batchingIdTexture",te._indirectTexture,K),Ut.setOptional(se,te,"batchingColorTexture"),te._colorsTexture!==null&&Ut.setValue(se,"batchingColorTexture",te._colorsTexture,K));const Yn=Ae.morphAttributes;if((Yn.position!==void 0||Yn.normal!==void 0||Yn.color!==void 0)&&gt.update(te,Ae,In),(Vn||Lt.receiveShadow!==te.receiveShadow)&&(Lt.receiveShadow=te.receiveShadow,Ut.setValue(se,"receiveShadow",te.receiveShadow)),we.isMeshGouraudMaterial&&we.envMap!==null&&(En.envMap.value=ct,En.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),we.isMeshStandardMaterial&&we.envMap===null&&de.environment!==null&&(En.envMapIntensity.value=de.environmentIntensity),Vn&&(Ut.setValue(se,"toneMappingExposure",R.toneMappingExposure),Lt.needsLights&&Ue(En,wn),st&&we.fog===!0&&nt.refreshFogUniforms(En,st),nt.refreshMaterialUniforms(En,we,ee,ge,w.state.transmissionRenderTarget[q.id]),A1.upload(se,X(Lt),En,K)),we.isShaderMaterial&&we.uniformsNeedUpdate===!0&&(A1.upload(se,X(Lt),En,K),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&&Ut.setValue(se,"center",te.center),Ut.setValue(se,"modelViewMatrix",te.modelViewMatrix),Ut.setValue(se,"normalMatrix",te.normalMatrix),Ut.setValue(se,"modelMatrix",te.matrixWorld),we.isShaderMaterial||we.isRawShaderMaterial){const Mn=we.uniformsGroups;for(let hn=0,gi=Mn.length;hn<gi;hn++){const dn=Mn[hn];Te.update(dn,In),Te.bind(dn,In)}}return In}function Ue(q,de){q.ambientLightColor.needsUpdate=de,q.lightProbe.needsUpdate=de,q.directionalLights.needsUpdate=de,q.directionalLightShadows.needsUpdate=de,q.pointLights.needsUpdate=de,q.pointLightShadows.needsUpdate=de,q.spotLights.needsUpdate=de,q.spotLightShadows.needsUpdate=de,q.rectAreaLights.needsUpdate=de,q.hemisphereLights.needsUpdate=de}function Qe(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(q,de,Ae){je.get(q.texture).__webglTexture=de,je.get(q.depthTexture).__webglTexture=Ae;const we=je.get(q);we.__hasExternalTextures=!0,we.__autoAllocateDepthBuffer=Ae===void 0,we.__autoAllocateDepthBuffer||We.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),we.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(q,de){const Ae=je.get(q);Ae.__webglFramebuffer=de,Ae.__useDefaultFramebuffer=de===void 0},this.setRenderTarget=function(q,de=0,Ae=0){I=q,O=de,D=Ae;let we=!0,te=null,st=!1,$e=!1;if(q){const ct=je.get(q);if(ct.__useDefaultFramebuffer!==void 0)Fe.bindFramebuffer(se.FRAMEBUFFER,null),we=!1;else if(ct.__webglFramebuffer===void 0)K.setupRenderTarget(q);else if(ct.__hasExternalTextures)K.rebindTextures(q,je.get(q.texture).__webglTexture,je.get(q.depthTexture).__webglTexture);else if(q.depthBuffer){const wt=q.depthTexture;if(ct.__boundDepthTexture!==wt){if(wt!==null&&je.has(wt)&&(q.width!==wt.image.width||q.height!==wt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");K.setupDepthRenderbuffer(q)}}const Mt=q.texture;(Mt.isData3DTexture||Mt.isDataArrayTexture||Mt.isCompressedArrayTexture)&&($e=!0);const Dt=je.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(Dt[de])?te=Dt[de][Ae]:te=Dt[de],st=!0):q.samples>0&&K.useMultisampledRTT(q)===!1?te=je.get(q).__webglMultisampledFramebuffer:Array.isArray(Dt)?te=Dt[Ae]:te=Dt,k.copy(q.viewport),H.copy(q.scissor),z=q.scissorTest}else k.copy(V).multiplyScalar(ee).floor(),H.copy(Q).multiplyScalar(ee).floor(),z=fe;if(Fe.bindFramebuffer(se.FRAMEBUFFER,te)&&we&&Fe.drawBuffers(q,te),Fe.viewport(k),Fe.scissor(H),Fe.setScissorTest(z),st){const ct=je.get(q.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_CUBE_MAP_POSITIVE_X+de,ct.__webglTexture,Ae)}else if($e){const ct=je.get(q.texture),Mt=de||0;se.framebufferTextureLayer(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,ct.__webglTexture,Ae||0,Mt)}C=-1},this.readRenderTargetPixels=function(q,de,Ae,we,te,st,$e){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let et=je.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&$e!==void 0&&(et=et[$e]),et){Fe.bindFramebuffer(se.FRAMEBUFFER,et);try{const ct=q.texture,Mt=ct.format,Dt=ct.type;if(!ut.textureFormatReadable(Mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ut.textureTypeReadable(Dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}de>=0&&de<=q.width-we&&Ae>=0&&Ae<=q.height-te&&se.readPixels(de,Ae,we,te,Bt.convert(Mt),Bt.convert(Dt),st)}finally{const ct=I!==null?je.get(I).__webglFramebuffer:null;Fe.bindFramebuffer(se.FRAMEBUFFER,ct)}}},this.readRenderTargetPixelsAsync=async function(q,de,Ae,we,te,st,$e){if(!(q&&q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let et=je.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&$e!==void 0&&(et=et[$e]),et){const ct=q.texture,Mt=ct.format,Dt=ct.type;if(!ut.textureFormatReadable(Mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ut.textureTypeReadable(Dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(de>=0&&de<=q.width-we&&Ae>=0&&Ae<=q.height-te){Fe.bindFramebuffer(se.FRAMEBUFFER,et);const wt=se.createBuffer();se.bindBuffer(se.PIXEL_PACK_BUFFER,wt),se.bufferData(se.PIXEL_PACK_BUFFER,st.byteLength,se.STREAM_READ),se.readPixels(de,Ae,we,te,Bt.convert(Mt),Bt.convert(Dt),0);const Tt=I!==null?je.get(I).__webglFramebuffer:null;Fe.bindFramebuffer(se.FRAMEBUFFER,Tt);const zt=se.fenceSync(se.SYNC_GPU_COMMANDS_COMPLETE,0);return se.flush(),await u8(se,zt,4),se.bindBuffer(se.PIXEL_PACK_BUFFER,wt),se.getBufferSubData(se.PIXEL_PACK_BUFFER,0,st),se.deleteBuffer(wt),se.deleteSync(zt),st}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(q,de=null,Ae=0){q.isTexture!==!0&&(qp("WebGLRenderer: copyFramebufferToTexture function signature has changed."),de=arguments[0]||null,q=arguments[1]);const we=Math.pow(2,-Ae),te=Math.floor(q.image.width*we),st=Math.floor(q.image.height*we),$e=de!==null?de.x:0,et=de!==null?de.y:0;K.setTexture2D(q,0),se.copyTexSubImage2D(se.TEXTURE_2D,Ae,0,0,$e,et,te,st),Fe.unbindTexture()};const Ze=se.createFramebuffer(),Et=se.createFramebuffer();this.copyTextureToTexture=function(q,de,Ae=null,we=null,te=0,st=null){q.isTexture!==!0&&(qp("WebGLRenderer: copyTextureToTexture function signature has changed."),we=arguments[0]||null,q=arguments[1],de=arguments[2],st=arguments[3]||0,Ae=null),st===null&&(te!==0?(qp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),st=te,te=0):st=0);let $e,et,ct,Mt,Dt,wt,Tt,zt,Vt;const un=q.isCompressedTexture?q.mipmaps[st]:q.image;if(Ae!==null)$e=Ae.max.x-Ae.min.x,et=Ae.max.y-Ae.min.y,ct=Ae.isBox3?Ae.max.z-Ae.min.z:1,Mt=Ae.min.x,Dt=Ae.min.y,wt=Ae.isBox3?Ae.min.z:0;else{const Yn=Math.pow(2,-te);$e=Math.floor(un.width*Yn),et=Math.floor(un.height*Yn),q.isDataArrayTexture?ct=un.depth:q.isData3DTexture?ct=Math.floor(un.depth*Yn):ct=1,Mt=0,Dt=0,wt=0}we!==null?(Tt=we.x,zt=we.y,Vt=we.z):(Tt=0,zt=0,Vt=0);const Nt=Bt.convert(de.format),Lt=Bt.convert(de.type);let Sn;de.isData3DTexture?(K.setTexture3D(de,0),Sn=se.TEXTURE_3D):de.isDataArrayTexture||de.isCompressedArrayTexture?(K.setTexture2DArray(de,0),Sn=se.TEXTURE_2D_ARRAY):(K.setTexture2D(de,0),Sn=se.TEXTURE_2D),se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,de.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,de.unpackAlignment);const nn=se.getParameter(se.UNPACK_ROW_LENGTH),In=se.getParameter(se.UNPACK_IMAGE_HEIGHT),An=se.getParameter(se.UNPACK_SKIP_PIXELS),Vn=se.getParameter(se.UNPACK_SKIP_ROWS),wn=se.getParameter(se.UNPACK_SKIP_IMAGES);se.pixelStorei(se.UNPACK_ROW_LENGTH,un.width),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,un.height),se.pixelStorei(se.UNPACK_SKIP_PIXELS,Mt),se.pixelStorei(se.UNPACK_SKIP_ROWS,Dt),se.pixelStorei(se.UNPACK_SKIP_IMAGES,wt);const Ut=q.isDataArrayTexture||q.isData3DTexture,En=de.isDataArrayTexture||de.isData3DTexture;if(q.isDepthTexture){const Yn=je.get(q),Mn=je.get(de),hn=je.get(Yn.__renderTarget),gi=je.get(Mn.__renderTarget);Fe.bindFramebuffer(se.READ_FRAMEBUFFER,hn.__webglFramebuffer),Fe.bindFramebuffer(se.DRAW_FRAMEBUFFER,gi.__webglFramebuffer);for(let dn=0;dn<ct;dn++)Ut&&(se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,je.get(q).__webglTexture,te,wt+dn),se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,je.get(de).__webglTexture,st,Vt+dn)),se.blitFramebuffer(Mt,Dt,$e,et,Tt,zt,$e,et,se.DEPTH_BUFFER_BIT,se.NEAREST);Fe.bindFramebuffer(se.READ_FRAMEBUFFER,null),Fe.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else if(te!==0||q.isRenderTargetTexture||je.has(q)){const Yn=je.get(q),Mn=je.get(de);Fe.bindFramebuffer(se.READ_FRAMEBUFFER,Ze),Fe.bindFramebuffer(se.DRAW_FRAMEBUFFER,Et);for(let hn=0;hn<ct;hn++)Ut?se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,Yn.__webglTexture,te,wt+hn):se.framebufferTexture2D(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,Yn.__webglTexture,te),En?se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,Mn.__webglTexture,st,Vt+hn):se.framebufferTexture2D(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,Mn.__webglTexture,st),te!==0?se.blitFramebuffer(Mt,Dt,$e,et,Tt,zt,$e,et,se.COLOR_BUFFER_BIT,se.NEAREST):En?se.copyTexSubImage3D(Sn,st,Tt,zt,Vt+hn,Mt,Dt,$e,et):se.copyTexSubImage2D(Sn,st,Tt,zt,Mt,Dt,$e,et);Fe.bindFramebuffer(se.READ_FRAMEBUFFER,null),Fe.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else En?q.isDataTexture||q.isData3DTexture?se.texSubImage3D(Sn,st,Tt,zt,Vt,$e,et,ct,Nt,Lt,un.data):de.isCompressedArrayTexture?se.compressedTexSubImage3D(Sn,st,Tt,zt,Vt,$e,et,ct,Nt,un.data):se.texSubImage3D(Sn,st,Tt,zt,Vt,$e,et,ct,Nt,Lt,un):q.isDataTexture?se.texSubImage2D(se.TEXTURE_2D,st,Tt,zt,$e,et,Nt,Lt,un.data):q.isCompressedTexture?se.compressedTexSubImage2D(se.TEXTURE_2D,st,Tt,zt,un.width,un.height,Nt,un.data):se.texSubImage2D(se.TEXTURE_2D,st,Tt,zt,$e,et,Nt,Lt,un);se.pixelStorei(se.UNPACK_ROW_LENGTH,nn),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,In),se.pixelStorei(se.UNPACK_SKIP_PIXELS,An),se.pixelStorei(se.UNPACK_SKIP_ROWS,Vn),se.pixelStorei(se.UNPACK_SKIP_IMAGES,wn),st===0&&de.generateMipmaps&&se.generateMipmap(Sn),Fe.unbindTexture()},this.copyTextureToTexture3D=function(q,de,Ae=null,we=null,te=0){return q.isTexture!==!0&&(qp("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ae=arguments[0]||null,we=arguments[1]||null,q=arguments[2],de=arguments[3],te=arguments[4]||0),qp('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(q,de,Ae,we,te)},this.initRenderTarget=function(q){je.get(q).__webglFramebuffer===void 0&&K.setupRenderTarget(q)},this.initTexture=function(q){q.isCubeTexture?K.setTextureCube(q,0):q.isData3DTexture?K.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?K.setTexture2DArray(q,0):K.setTexture2D(q,0),Fe.unbindTexture()},this.resetState=function(){O=0,D=0,I=null,Fe.reset(),Qt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Zl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=cr._getDrawingBufferColorSpace(e),t.unpackColorSpace=cr._getUnpackColorSpace()}}const _U=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:kC,AddEquation:lh,AddOperation:Kk,AdditiveAnimationBlendMode:jC,AdditiveBlending:$M,AgXToneMapping:eN,AlphaFormat:UC,AlwaysCompare:mN,AlwaysDepth:W1,AlwaysStencilFunc:ib,AmbientLight:eU,AnimationAction:uU,AnimationClip:Pm,AnimationLoader:DH,AnimationMixer:rV,AnimationObjectGroup:tV,AnimationUtils:CH,ArcCurve:bN,ArrayCamera:oU,ArrowHelper:EV,AttachedBindMode:nb,Audio:aU,AudioAnalyser:jH,AudioContext:S2,AudioListener:HH,AudioLoader:UH,AxesHelper:TV,BackSide:ao,BasicDepthPacking:aN,BasicShadowMap:Rk,BatchedMesh:MN,Bone:fA,BooleanKeyframeTrack:Ld,Box2:cV,Box3:Es,Box3Helper:wV,BoxGeometry:Bd,BoxHelper:AV,BufferAttribute:gr,BufferGeometry:Dn,BufferGeometryLoader:iU,ByteType:nA,Cache:ic,Camera:K0,CameraHelper:xV,CanvasTexture:Z8,CapsuleGeometry:gA,CatmullRomCurve3:CN,CineonToneMapping:Zk,CircleGeometry:_A,ClampToEdgeWrapping:Fi,Clock:E2,Color:Ht,ColorKeyframeTrack:g2,ColorManagement:cr,CompressedArrayTexture:Y8,CompressedCubeTexture:Q8,CompressedTexture:pA,CompressedTextureLoader:BH,ConeGeometry:vA,ConstantAlphaFactor:qk,ConstantColorFactor:Wk,Controls:bV,CubeCamera:wN,CubeReflectionMapping:ou,CubeRefractionMapping:bh,CubeTexture:Y0,CubeTextureLoader:QN,CubeUVReflectionMapping:Hm,CubicBezierCurve:u2,CubicBezierCurve3:RN,CubicInterpolant:XN,CullFaceBack:ZM,CullFaceFront:Ck,CullFaceFrontBack:gG,CullFaceNone:bk,Curve:Bl,CurvePath:PN,CustomBlending:Ik,CustomToneMapping:$k,CylinderGeometry:Wm,Cylindrical:uV,Data3DTexture:QC,DataArrayTexture:uA,DataTexture:Rl,DataTextureLoader:_2,DataUtils:ed,DecrementStencilOp:MG,DecrementWrapStencilOp:CG,DefaultLoadingManager:YN,DepthFormat:hd,DepthStencilFormat:wd,DepthTexture:a2,DetachedBindMode:nN,DirectionalLight:A2,DirectionalLightHelper:yV,DiscreteInterpolant:JN,DodecahedronGeometry:yA,DoubleSide:Co,DstAlphaFactor:Uk,DstColorFactor:Gk,DynamicCopyUsage:VG,DynamicDrawUsage:kG,DynamicReadUsage:zG,EdgesGeometry:DN,EllipseCurve:mA,EqualCompare:hN,EqualDepth:q1,EqualStencilFunc:DG,EquirectangularReflectionMapping:Sm,EquirectangularRefractionMapping:l0,Euler:Aa,EventDispatcher:hu,ExtrudeGeometry:AA,FileLoader:Us,Float16BufferAttribute:P8,Float32BufferAttribute:sn,FloatType:pi,Fog:hA,FogExp2:cA,FramebufferTexture:K8,FrontSide:Il,Frustum:$0,GLBufferAttribute:aV,GLSL1:jG,GLSL3:sb,GreaterCompare:fN,GreaterDepth:J1,GreaterEqualCompare:pN,GreaterEqualDepth:X1,GreaterEqualStencilFunc:OG,GreaterStencilFunc:LG,GridHelper:_V,Group:rc,HalfFloatType:ws,HemisphereLight:$N,HemisphereLightHelper:gV,IcosahedronGeometry:tv,ImageBitmapLoader:sU,ImageLoader:v0,ImageUtils:vN,IncrementStencilOp:TG,IncrementWrapStencilOp:bG,InstancedBufferAttribute:Ih,InstancedBufferGeometry:w2,InstancedInterleavedBuffer:oV,InstancedMesh:i2,Int16BufferAttribute:R8,Int32BufferAttribute:I8,Int8BufferAttribute:M8,IntType:q0,InterleavedBuffer:Q0,InterleavedBufferAttribute:Rh,Interpolant:jm,InterpolateDiscrete:Mm,InterpolateLinear:bm,InterpolateSmooth:x1,InvertStencilOp:RG,KeepStencilOp:Vf,KeyframeTrack:Ll,LOD:TN,LatheGeometry:ev,Layers:dd,LessCompare:cN,LessDepth:j1,LessEqualCompare:JC,LessEqualDepth:xd,LessEqualStencilFunc:BG,LessStencilFunc:PG,Light:Gh,LightProbe:rU,Line:cc,Line3:hV,LineBasicMaterial:co,LineCurve:c2,LineCurve3:IN,LineDashedMaterial:WN,LineLoop:s2,LineSegments:Dl,LinearFilter:pr,LinearInterpolant:m2,LinearMipMapLinearFilter:rb,LinearMipMapNearestFilter:yG,LinearMipmapLinearFilter:za,LinearMipmapNearestFilter:cm,LinearSRGBColorSpace:lu,LinearToneMapping:Yk,LinearTransfer:c0,Loader:Gs,LoaderUtils:vh,LoadingManager:RA,LoopOnce:rN,LoopPingPong:sN,LoopRepeat:iN,LuminanceAlphaFormat:HC,LuminanceFormat:GC,MOUSE:pG,Material:Xi,MaterialLoader:IA,MathUtils:YC,Matrix2:R2,Matrix3:Ln,Matrix4:pn,MaxEquation:Lk,Mesh:Lr,MeshBasicMaterial:Io,MeshDepthMaterial:sv,MeshDistanceMaterial:CA,MeshLambertMaterial:HN,MeshMatcapMaterial:VN,MeshNormalMaterial:GN,MeshPhongMaterial:UN,MeshPhysicalMaterial:ja,MeshStandardMaterial:iv,MeshToonMaterial:zN,MinEquation:Bk,MirroredRepeatWrapping:Em,MixOperation:Jk,MultiplyBlending:tb,MultiplyOperation:j0,NearestFilter:Ss,NearestMipMapLinearFilter:vG,NearestMipMapNearestFilter:_G,NearestMipmapLinearFilter:Yf,NearestMipmapNearestFilter:tA,NeutralToneMapping:tN,NeverCompare:uN,NeverDepth:V1,NeverStencilFunc:IG,NoBlending:eu,NoColorSpace:tc,NoToneMapping:tu,NormalAnimationBlendMode:lA,NormalBlending:cd,NotEqualCompare:dN,NotEqualDepth:K1,NotEqualStencilFunc:FG,NumberKeyframeTrack:Ed,Object3D:ir,ObjectLoader:kH,ObjectSpaceNormalMap:lN,OctahedronGeometry:nv,OneFactor:Ok,OneMinusConstantAlphaFactor:Xk,OneMinusConstantColorFactor:jk,OneMinusDstAlphaFactor:zk,OneMinusDstColorFactor:Hk,OneMinusSrcAlphaFactor:H1,OneMinusSrcColorFactor:Nk,OrthographicCamera:_c,PCFShadowMap:eA,PCFSoftShadowMap:B_,PMREMGenerator:fb,Path:p0,PerspectiveCamera:Li,Plane:ah,PlaneGeometry:Wa,PlaneHelper:SV,PointLight:x2,PointLightHelper:pV,Points:o2,PointsMaterial:dA,PolarGridHelper:vV,PolyhedronGeometry:zh,PositionalAudio:WH,PropertyBinding:ur,PropertyMixer:lU,QuadraticBezierCurve:h2,QuadraticBezierCurve3:f2,Quaternion:lo,QuaternionKeyframeTrack:Td,QuaternionLinearInterpolant:KN,RED_GREEN_RGTC2_Format:xx,RED_RGTC1_Format:WC,REVISION:Gm,RGBADepthPacking:XC,RGBAFormat:Oi,RGBAIntegerFormat:aA,RGBA_ASTC_10x10_Format:px,RGBA_ASTC_10x5_Format:hx,RGBA_ASTC_10x6_Format:fx,RGBA_ASTC_10x8_Format:dx,RGBA_ASTC_12x10_Format:mx,RGBA_ASTC_12x12_Format:gx,RGBA_ASTC_4x4_Format:rx,RGBA_ASTC_5x4_Format:ix,RGBA_ASTC_5x5_Format:sx,RGBA_ASTC_6x5_Format:ox,RGBA_ASTC_6x6_Format:ax,RGBA_ASTC_8x5_Format:lx,RGBA_ASTC_8x6_Format:ux,RGBA_ASTC_8x8_Format:cx,RGBA_BPTC_Format:N_,RGBA_ETC2_EAC_Format:nx,RGBA_PVRTC_2BPPV1_Format:$1,RGBA_PVRTC_4BPPV1_Format:Z1,RGBA_S3TC_DXT1_Format:F_,RGBA_S3TC_DXT3_Format:O_,RGBA_S3TC_DXT5_Format:k_,RGBDepthPacking:AG,RGBFormat:zC,RGBIntegerFormat:xG,RGB_BPTC_SIGNED_Format:_x,RGB_BPTC_UNSIGNED_Format:vx,RGB_ETC1_Format:ex,RGB_ETC2_Format:tx,RGB_PVRTC_2BPPV1_Format:Q1,RGB_PVRTC_4BPPV1_Format:Y1,RGB_S3TC_DXT1_Format:L_,RGDepthPacking:wG,RGFormat:VC,RGIntegerFormat:oA,RawShaderMaterial:NN,Ray:Vm,Raycaster:C2,RectAreaLight:tU,RedFormat:X0,RedIntegerFormat:J0,ReinhardToneMapping:Qk,RenderTarget:yN,RepeatWrapping:Ch,ReplaceStencilOp:EG,ReverseSubtractEquation:Dk,RingGeometry:wA,SIGNED_RED_GREEN_RGTC2_Format:Ax,SIGNED_RED_RGTC1_Format:yx,SRGBColorSpace:Mo,SRGBTransfer:br,Scene:Im,ShaderChunk:zn,ShaderLib:El,ShaderMaterial:uo,ShadowMaterial:kN,Shape:pd,ShapeGeometry:SA,ShapePath:MV,ShapeUtils:nu,ShortType:rA,Skeleton:Z0,SkeletonHelper:dV,SkinnedMesh:r2,Source:$f,Sphere:is,SphereGeometry:rv,Spherical:lV,SphericalHarmonics3:nU,SplineCurve:d2,SpotLight:y2,SpotLightHelper:fV,Sprite:EN,SpriteMaterial:n2,SrcAlphaFactor:G1,SrcAlphaSaturateFactor:Vk,SrcColorFactor:kk,StaticCopyUsage:HG,StaticDrawUsage:h0,StaticReadUsage:UG,StereoCamera:zH,StreamCopyUsage:WG,StreamDrawUsage:NG,StreamReadUsage:GG,StringKeyframeTrack:Fd,SubtractEquation:Pk,SubtractiveBlending:eb,TOUCH:mG,TangentSpaceNormalMap:Uh,TetrahedronGeometry:EA,Texture:mr,TextureLoader:ZN,TextureUtils:DV,TorusGeometry:TA,TorusKnotGeometry:MA,Triangle:Wo,TriangleFanDrawMode:wx,TriangleStripDrawMode:qC,TrianglesDrawMode:oN,TubeGeometry:bA,UVMapping:Mh,Uint16BufferAttribute:ZC,Uint32BufferAttribute:$C,Uint8BufferAttribute:b8,Uint8ClampedBufferAttribute:C8,Uniform:b2,UniformsGroup:sV,UniformsLib:jt,UniformsUtils:e2,UnsignedByteType:Qo,UnsignedInt248Type:Ad,UnsignedInt5999Type:NC,UnsignedIntType:au,UnsignedShort4444Type:iA,UnsignedShort5551Type:sA,UnsignedShortType:Tm,VSMShadowMap:Sl,Vector2:mt,Vector3:ce,Vector4:nr,VectorKeyframeTrack:Md,VideoTexture:J8,WebGL3DRenderTarget:g8,WebGLArrayRenderTarget:m8,WebGLCoordinateSystem:Zl,WebGLCubeRenderTarget:t2,WebGLMultipleRenderTargets:BV,WebGLRenderTarget:Po,WebGLRenderer:P2,WebGLUtils:gU,WebGPUCoordinateSystem:f0,WireframeGeometry:ON,WrapAroundEnding:u0,ZeroCurvatureEnding:Qf,ZeroFactor:Fk,ZeroSlopeEnding:Zf,ZeroStencilOp:SG,createCanvasElement:_N},Symbol.toStringTag,{value:"Module"}));var VS={exports:{}},th={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P3;function pX(){return P3||(P3=1,th.ConcurrentRoot=1,th.ContinuousEventPriority=4,th.DefaultEventPriority=16,th.DiscreteEventPriority=1,th.IdleEventPriority=536870912,th.LegacyRoot=0),th}var D3;function mX(){return D3||(D3=1,VS.exports=pX()),VS.exports}var om=mX();function gX(i){let e;const t=new Set,n=(u,f)=>{const c=typeof u=="function"?u(e):u;if(c!==e){const d=e;e=f?c:Object.assign({},e,c),t.forEach(g=>g(e,d))}},r=()=>e,s=(u,f=r,c=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=f(e);function g(){const v=f(e);if(!c(d,v)){const A=d;u(d=v,A)}}return t.add(g),()=>t.delete(g)},l={setState:n,getState:r,subscribe:(u,f,c)=>f||c?s(u,f,c):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=i(n,r,l),l}const _X=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),B3=_X?me.useEffect:me.useLayoutEffect;function vU(i){const e=typeof i=="function"?gX(i):i,t=(n=e.getState,r=Object.is)=>{const[,s]=me.useReducer(x=>x+1,0),o=e.getState(),a=me.useRef(o),l=me.useRef(n),u=me.useRef(r),f=me.useRef(!1),c=me.useRef();c.current===void 0&&(c.current=n(o));let d,g=!1;(a.current!==o||l.current!==n||u.current!==r||f.current)&&(d=n(o),g=!r(c.current,d)),B3(()=>{g&&(c.current=d),a.current=o,l.current=n,u.current=r,f.current=!1});const v=me.useRef(o);B3(()=>{const x=()=>{try{const M=e.getState(),b=l.current(M);u.current(c.current,b)||(a.current=M,c.current=b,s())}catch{f.current=!0,s()}},w=e.subscribe(x);return e.getState()!==v.current&&x(),w},[]);const A=g?d:c.current;return me.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}const vX=i=>typeof i=="object"&&typeof i.then=="function",nd=[];function yU(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let r=0;r<n;r++)if(!t(i[r],e[r]))return!1;return!0}function xU(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const s of nd)if(yU(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:n.equal,remove:()=>{const s=nd.indexOf(r);s!==-1&&nd.splice(s,1)},promise:(vX(i)?i:i(...e)).then(s=>{r.response=s,n.lifespan&&n.lifespan>0&&(r.timeout=setTimeout(r.remove,n.lifespan))}).catch(s=>r.error=s)};if(nd.push(r),!t)throw r.promise}const AU=(i,e,t)=>xU(i,e,!1,t),yX=(i,e,t)=>void xU(i,e,!0,t),xX=i=>{if(i===void 0||i.length===0)nd.splice(0,nd.length);else{const e=nd.find(t=>yU(i,t.keys,t.equal));e&&e.remove()}};var WS={exports:{}},jS={exports:{}},qS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L3;function AX(){return L3||(L3=1,function(i){function e(ee,le){var $=ee.length;ee.push(le);e:for(;0<$;){var V=$-1>>>1,Q=ee[V];if(0<r(Q,le))ee[V]=le,ee[$]=Q,$=V;else break e}}function t(ee){return ee.length===0?null:ee[0]}function n(ee){if(ee.length===0)return null;var le=ee[0],$=ee.pop();if($!==le){ee[0]=$;e:for(var V=0,Q=ee.length,fe=Q>>>1;V<fe;){var oe=2*(V+1)-1,he=ee[oe],xe=oe+1,_e=ee[xe];if(0>r(he,$))xe<Q&&0>r(_e,he)?(ee[V]=_e,ee[xe]=$,V=xe):(ee[V]=he,ee[oe]=$,V=oe);else if(xe<Q&&0>r(_e,$))ee[V]=_e,ee[xe]=$,V=xe;else break e}}return le}function r(ee,le){var $=ee.sortIndex-le.sortIndex;return $!==0?$:ee.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,c=null,d=3,g=!1,v=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ee){for(var le=t(u);le!==null;){if(le.callback===null)n(u);else if(le.startTime<=ee)n(u),le.sortIndex=le.expirationTime,e(l,le);else break;le=t(u)}}function R(ee){if(A=!1,b(ee),!v)if(t(l)!==null)v=!0,ae(F);else{var le=t(u);le!==null&&ge(R,le.startTime-ee)}}function F(ee,le){v=!1,A&&(A=!1,w(I),I=-1),g=!0;var $=d;try{for(b(le),c=t(l);c!==null&&(!(c.expirationTime>le)||ee&&!k());){var V=c.callback;if(typeof V=="function"){c.callback=null,d=c.priorityLevel;var Q=V(c.expirationTime<=le);le=i.unstable_now(),typeof Q=="function"?c.callback=Q:c===t(l)&&n(l),b(le)}else n(l);c=t(l)}if(c!==null)var fe=!0;else{var oe=t(u);oe!==null&&ge(R,oe.startTime-le),fe=!1}return fe}finally{c=null,d=$,g=!1}}var O=!1,D=null,I=-1,C=5,B=-1;function k(){return!(i.unstable_now()-B<C)}function H(){if(D!==null){var ee=i.unstable_now();B=ee;var le=!0;try{le=D(!0,ee)}finally{le?z():(O=!1,D=null)}}else O=!1}var z;if(typeof M=="function")z=function(){M(H)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ue=Z.port2;Z.port1.onmessage=H,z=function(){ue.postMessage(null)}}else z=function(){x(H,0)};function ae(ee){D=ee,O||(O=!0,z())}function ge(ee,le){I=x(function(){ee(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ee){ee.callback=null},i.unstable_continueExecution=function(){v||g||(v=!0,ae(F))},i.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ee?Math.floor(1e3/ee):5},i.unstable_getCurrentPriorityLevel=function(){return d},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(ee){switch(d){case 1:case 2:case 3:var le=3;break;default:le=d}var $=d;d=le;try{return ee()}finally{d=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ee,le){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var $=d;d=ee;try{return le()}finally{d=$}},i.unstable_scheduleCallback=function(ee,le,$){var V=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?V+$:V):$=V,ee){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=$+Q,ee={id:f++,callback:le,priorityLevel:ee,startTime:$,expirationTime:Q,sortIndex:-1},$>V?(ee.sortIndex=$,e(u,ee),t(l)===null&&ee===t(u)&&(A?(w(I),I=-1):A=!0,ge(R,$-V))):(ee.sortIndex=Q,e(l,ee),v||g||(v=!0,ae(F))),ee},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(ee){var le=d;return function(){var $=d;d=le;try{return ee.apply(this,arguments)}finally{d=$}}}}(qS)),qS}var F3;function wU(){return F3||(F3=1,jS.exports=AX()),jS.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS,O3;function wX(){return O3||(O3=1,XS=function(e){var t={},n=Kx(),r=wU(),s=Object.assign;function o(m){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+m,E=1;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+m+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),v=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),F=Symbol.iterator;function O(m){return m===null||typeof m!="object"?null:(m=F&&m[F]||m["@@iterator"],typeof m=="function"?m:null)}function D(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case f:return"Fragment";case u:return"Portal";case d:return"Profiler";case c:return"StrictMode";case x:return"Suspense";case w:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case v:return(m.displayName||"Context")+".Consumer";case g:return(m._context.displayName||"Context")+".Provider";case A:var _=m.render;return m=m.displayName,m||(m=_.displayName||_.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case M:return _=m.displayName||null,_!==null?_:D(m.type)||"Memo";case b:_=m._payload,m=m._init;try{return D(m(_))}catch{}}return null}function I(m){var _=m.type;switch(m.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=_.render,m=m.displayName||m.name||"",_.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(_);case 8:return _===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function C(m){var _=m,E=m;if(m.alternate)for(;_.return;)_=_.return;else{m=_;do _=m,_.flags&4098&&(E=_.return),m=_.return;while(m)}return _.tag===3?E:null}function B(m){if(C(m)!==m)throw Error(o(188))}function k(m){var _=m.alternate;if(!_){if(_=C(m),_===null)throw Error(o(188));return _!==m?null:m}for(var E=m,P=_;;){var N=E.return;if(N===null)break;var W=N.alternate;if(W===null){if(P=N.return,P!==null){E=P;continue}break}if(N.child===W.child){for(W=N.child;W;){if(W===E)return B(N),m;if(W===P)return B(N),_;W=W.sibling}throw Error(o(188))}if(E.return!==P.return)E=N,P=W;else{for(var pe=!1,Pe=N.child;Pe;){if(Pe===E){pe=!0,E=N,P=W;break}if(Pe===P){pe=!0,P=N,E=W;break}Pe=Pe.sibling}if(!pe){for(Pe=W.child;Pe;){if(Pe===E){pe=!0,E=W,P=N;break}if(Pe===P){pe=!0,P=W,E=N;break}Pe=Pe.sibling}if(!pe)throw Error(o(189))}}if(E.alternate!==P)throw Error(o(190))}if(E.tag!==3)throw Error(o(188));return E.stateNode.current===E?m:_}function H(m){return m=k(m),m!==null?z(m):null}function z(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var _=z(m);if(_!==null)return _;m=m.sibling}return null}function Z(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){if(m.tag!==4){var _=Z(m);if(_!==null)return _}m=m.sibling}return null}var ue=Array.isArray,ae=e.getPublicInstance,ge=e.getRootHostContext,ee=e.getChildHostContext,le=e.prepareForCommit,$=e.resetAfterCommit,V=e.createInstance,Q=e.appendInitialChild,fe=e.finalizeInitialChildren,oe=e.prepareUpdate,he=e.shouldSetTextContent,xe=e.createTextInstance,_e=e.scheduleTimeout,be=e.cancelTimeout,Xe=e.noTimeout,Ye=e.isPrimaryRenderer,Ne=e.supportsMutation,Ee=e.supportsPersistence,Ge=e.supportsHydration,se=e.getInstanceFromNode,ht=e.preparePortalMount,We=e.getCurrentEventPriority,ut=e.detachDeletedInstance,Fe=e.supportsMicrotasks,dt=e.scheduleMicrotask,je=e.supportsTestSelectors,K=e.findFiberRoot,J=e.getBoundingRect,ye=e.getTextContent,Re=e.isHiddenSubtree,De=e.matchAccessibilityRole,ke=e.setFocusIfFocusable,qe=e.setupIntersectionObserver,nt=e.appendChild,lt=e.appendChildToContainer,Ot=e.commitTextUpdate,rt=e.commitMount,xt=e.commitUpdate,yt=e.insertBefore,gt=e.insertInContainerBefore,it=e.removeChild,kt=e.removeChildFromContainer,Bt=e.resetTextContent,Qt=e.hideInstance,Te=e.hideTextInstance,Ce=e.unhideInstance,Le=e.unhideTextInstance,at=e.clearContainer,vt=e.cloneInstance,ft=e.createContainerChildSet,qt=e.appendChildToContainerChildSet,ln=e.finalizeContainerChildren,Kt=e.replaceContainerChildren,Yt=e.cloneHiddenInstance,Wn=e.cloneHiddenTextInstance,mn=e.canHydrateInstance,fr=e.canHydrateTextInstance,yr=e.canHydrateSuspenseInstance,_r=e.isSuspenseInstancePending,Or=e.isSuspenseInstanceFallback,Gr=e.registerSuspenseInstanceRetry,sr=e.getNextHydratableSibling,cn=e.getFirstHydratableChild,kr=e.getFirstHydratableChildWithinContainer,oi=e.getFirstHydratableChildWithinSuspenseInstance,X=e.hydrateInstance,ne=e.hydrateTextInstance,Se=e.hydrateSuspenseInstance,Ue=e.getNextHydratableInstanceAfterSuspenseInstance,Qe=e.commitHydratedContainer,Ze=e.commitHydratedSuspenseInstance,Et=e.clearSuspenseBoundary,q=e.clearSuspenseBoundaryFromContainer,de=e.shouldDeleteUnhydratedTailInstances,Ae=e.didNotMatchHydratedContainerTextInstance,we=e.didNotMatchHydratedTextInstance,te;function st(m){if(te===void 0)try{throw Error()}catch(E){var _=E.stack.trim().match(/\n( *(at )?)/);te=_&&_[1]||""}return`
`+te+m}var $e=!1;function et(m,_){if(!m||$e)return"";$e=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(It){var P=It}Reflect.construct(m,[],_)}else{try{_.call()}catch(It){P=It}m.call(_.prototype)}else{try{throw Error()}catch(It){P=It}m()}}catch(It){if(It&&P&&typeof It.stack=="string"){for(var N=It.stack.split(`
`),W=P.stack.split(`
`),pe=N.length-1,Pe=W.length-1;1<=pe&&0<=Pe&&N[pe]!==W[Pe];)Pe--;for(;1<=pe&&0<=Pe;pe--,Pe--)if(N[pe]!==W[Pe]){if(pe!==1||Pe!==1)do if(pe--,Pe--,0>Pe||N[pe]!==W[Pe]){var ot=`
`+N[pe].replace(" at new "," at ");return m.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",m.displayName)),ot}while(1<=pe&&0<=Pe);break}}}finally{$e=!1,Error.prepareStackTrace=E}return(m=m?m.displayName||m.name:"")?st(m):""}var ct=Object.prototype.hasOwnProperty,Mt=[],Dt=-1;function wt(m){return{current:m}}function Tt(m){0>Dt||(m.current=Mt[Dt],Mt[Dt]=null,Dt--)}function zt(m,_){Dt++,Mt[Dt]=m.current,m.current=_}var Vt={},un=wt(Vt),Nt=wt(!1),Lt=Vt;function Sn(m,_){var E=m.type.contextTypes;if(!E)return Vt;var P=m.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===_)return P.__reactInternalMemoizedMaskedChildContext;var N={},W;for(W in E)N[W]=_[W];return P&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=_,m.__reactInternalMemoizedMaskedChildContext=N),N}function nn(m){return m=m.childContextTypes,m!=null}function In(){Tt(Nt),Tt(un)}function An(m,_,E){if(un.current!==Vt)throw Error(o(168));zt(un,_),zt(Nt,E)}function Vn(m,_,E){var P=m.stateNode;if(_=_.childContextTypes,typeof P.getChildContext!="function")return E;P=P.getChildContext();for(var N in P)if(!(N in _))throw Error(o(108,I(m)||"Unknown",N));return s({},E,P)}function wn(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Vt,Lt=un.current,zt(un,m),zt(Nt,Nt.current),!0}function Ut(m,_,E){var P=m.stateNode;if(!P)throw Error(o(169));E?(m=Vn(m,_,Lt),P.__reactInternalMemoizedMergedChildContext=m,Tt(Nt),Tt(un),zt(un,m)):Tt(Nt),zt(Nt,E)}var En=Math.clz32?Math.clz32:hn,Yn=Math.log,Mn=Math.LN2;function hn(m){return m>>>=0,m===0?32:31-(Yn(m)/Mn|0)|0}var gi=64,dn=4194304;function us(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function wa(m,_){var E=m.pendingLanes;if(E===0)return 0;var P=0,N=m.suspendedLanes,W=m.pingedLanes,pe=E&268435455;if(pe!==0){var Pe=pe&~N;Pe!==0?P=us(Pe):(W&=pe,W!==0&&(P=us(W)))}else pe=E&~N,pe!==0?P=us(pe):W!==0&&(P=us(W));if(P===0)return 0;if(_!==0&&_!==P&&!(_&N)&&(N=P&-P,W=_&-_,N>=W||N===16&&(W&4194240)!==0))return _;if(P&4&&(P|=E&16),_=m.entangledLanes,_!==0)for(m=m.entanglements,_&=P;0<_;)E=31-En(_),N=1<<E,P|=m[E],_&=~N;return P}function qa(m,_){switch(m){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fl(m,_){for(var E=m.suspendedLanes,P=m.pingedLanes,N=m.expirationTimes,W=m.pendingLanes;0<W;){var pe=31-En(W),Pe=1<<pe,ot=N[pe];ot===-1?(!(Pe&E)||Pe&P)&&(N[pe]=qa(Pe,_)):ot<=_&&(m.expiredLanes|=Pe),W&=~Pe}}function Do(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function Xa(m){for(var _=[],E=0;31>E;E++)_.push(m);return _}function Hs(m,_,E){m.pendingLanes|=_,_!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,_=31-En(_),m[_]=E}function Ji(m,_){var E=m.pendingLanes&~_;m.pendingLanes=_,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=_,m.mutableReadLanes&=_,m.entangledLanes&=_,_=m.entanglements;var P=m.eventTimes;for(m=m.expirationTimes;0<E;){var N=31-En(E),W=1<<N;_[N]=0,P[N]=-1,m[N]=-1,E&=~W}}function Cr(m,_){var E=m.entangledLanes|=_;for(m=m.entanglements;E;){var P=31-En(E),N=1<<P;N&_|m[P]&_&&(m[P]|=_),E&=~N}}var xn=0;function Ms(m){return m&=-m,1<m?4<m?m&268435455?16:536870912:4:1}var cs=r.unstable_scheduleCallback,Ki=r.unstable_cancelCallback,Vs=r.unstable_shouldYield,vc=r.unstable_requestPaint,Rr=r.unstable_now,_i=r.unstable_ImmediatePriority,yc=r.unstable_UserBlockingPriority,ki=r.unstable_NormalPriority,ho=r.unstable_IdlePriority,fo=null,hs=null;function bs(m){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(fo,m,void 0,(m.current.flags&128)===128)}catch{}}function Ws(m,_){return m===_&&(m!==0||1/m===1/_)||m!==m&&_!==_}var ai=typeof Object.is=="function"?Object.is:Ws,$r=null,$n=!1,js=!1;function Ja(m){$r===null?$r=[m]:$r.push(m)}function Zo(m){$n=!0,Ja(m)}function bi(){if(!js&&$r!==null){js=!0;var m=0,_=xn;try{var E=$r;for(xn=1;m<E.length;m++){var P=E[m];do P=P(!0);while(P!==null)}$r=null,$n=!1}catch(N){throw $r!==null&&($r=$r.slice(m+1)),cs(_i,bi),N}finally{xn=_,js=!1}}return null}var $o=a.ReactCurrentBatchConfig;function Ci(m,_){if(ai(m,_))return!0;if(typeof m!="object"||m===null||typeof _!="object"||_===null)return!1;var E=Object.keys(m),P=Object.keys(_);if(E.length!==P.length)return!1;for(P=0;P<E.length;P++){var N=E[P];if(!ct.call(_,N)||!ai(m[N],_[N]))return!1}return!0}function Bo(m){switch(m.tag){case 5:return st(m.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 2:case 15:return m=et(m.type,!1),m;case 11:return m=et(m.type.render,!1),m;case 1:return m=et(m.type,!0),m;default:return""}}function xr(m,_){if(m&&m.defaultProps){_=s({},_),m=m.defaultProps;for(var E in m)_[E]===void 0&&(_[E]=m[E]);return _}return _}var ei=wt(null),ea=null,vi=null,Lo=null;function ti(){Lo=vi=ea=null}function qs(m,_,E){Ye?(zt(ei,_._currentValue),_._currentValue=E):(zt(ei,_._currentValue2),_._currentValue2=E)}function Xr(m){var _=ei.current;Tt(ei),Ye?m._currentValue=_:m._currentValue2=_}function Hr(m,_,E){for(;m!==null;){var P=m.alternate;if((m.childLanes&_)!==_?(m.childLanes|=_,P!==null&&(P.childLanes|=_)):P!==null&&(P.childLanes&_)!==_&&(P.childLanes|=_),m===E)break;m=m.return}}function Jr(m,_){ea=m,Lo=vi=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&_&&(Gi=!0),m.firstContext=null)}function Ir(m){var _=Ye?m._currentValue:m._currentValue2;if(Lo!==m)if(m={context:m,memoizedValue:_,next:null},vi===null){if(ea===null)throw Error(o(308));vi=m,ea.dependencies={lanes:0,firstContext:m}}else vi=vi.next=m;return _}var li=null,Cs=!1;function Ka(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function du(m,_){m=m.updateQueue,_.updateQueue===m&&(_.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function po(m,_){return{eventTime:m,lane:_,tag:0,payload:null,callback:null,next:null}}function ta(m,_){var E=m.updateQueue;E!==null&&(E=E.shared,ci!==null&&m.mode&1&&!(Nn&2)?(m=E.interleaved,m===null?(_.next=_,li===null?li=[E]:li.push(E)):(_.next=m.next,m.next=_),E.interleaved=_):(m=E.pending,m===null?_.next=_:(_.next=m.next,m.next=_),E.pending=_))}function Ya(m,_,E){if(_=_.updateQueue,_!==null&&(_=_.shared,(E&4194240)!==0)){var P=_.lanes;P&=m.pendingLanes,E|=P,_.lanes=E,Cr(m,E)}}function pu(m,_){var E=m.updateQueue,P=m.alternate;if(P!==null&&(P=P.updateQueue,E===P)){var N=null,W=null;if(E=E.firstBaseUpdate,E!==null){do{var pe={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};W===null?N=W=pe:W=W.next=pe,E=E.next}while(E!==null);W===null?N=W=_:W=W.next=_}else N=W=_;E={baseState:P.baseState,firstBaseUpdate:N,lastBaseUpdate:W,shared:P.shared,effects:P.effects},m.updateQueue=E;return}m=E.lastBaseUpdate,m===null?E.firstBaseUpdate=_:m.next=_,E.lastBaseUpdate=_}function mu(m,_,E,P){var N=m.updateQueue;Cs=!1;var W=N.firstBaseUpdate,pe=N.lastBaseUpdate,Pe=N.shared.pending;if(Pe!==null){N.shared.pending=null;var ot=Pe,It=ot.next;ot.next=null,pe===null?W=It:pe.next=It,pe=ot;var Zt=m.alternate;Zt!==null&&(Zt=Zt.updateQueue,Pe=Zt.lastBaseUpdate,Pe!==pe&&(Pe===null?Zt.firstBaseUpdate=It:Pe.next=It,Zt.lastBaseUpdate=ot))}if(W!==null){var bn=N.baseState;pe=0,Zt=It=ot=null,Pe=W;do{var fn=Pe.lane,Un=Pe.eventTime;if((P&fn)===fn){Zt!==null&&(Zt=Zt.next={eventTime:Un,lane:0,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null});e:{var Xt=m,es=Pe;switch(fn=_,Un=E,es.tag){case 1:if(Xt=es.payload,typeof Xt=="function"){bn=Xt.call(Un,bn,fn);break e}bn=Xt;break e;case 3:Xt.flags=Xt.flags&-65537|128;case 0:if(Xt=es.payload,fn=typeof Xt=="function"?Xt.call(Un,bn,fn):Xt,fn==null)break e;bn=s({},bn,fn);break e;case 2:Cs=!0}}Pe.callback!==null&&Pe.lane!==0&&(m.flags|=64,fn=N.effects,fn===null?N.effects=[Pe]:fn.push(Pe))}else Un={eventTime:Un,lane:fn,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},Zt===null?(It=Zt=Un,ot=bn):Zt=Zt.next=Un,pe|=fn;if(Pe=Pe.next,Pe===null){if(Pe=N.shared.pending,Pe===null)break;fn=Pe,Pe=fn.next,fn.next=null,N.lastBaseUpdate=fn,N.shared.pending=null}}while(!0);if(Zt===null&&(ot=bn),N.baseState=ot,N.firstBaseUpdate=It,N.lastBaseUpdate=Zt,_=N.shared.interleaved,_!==null){N=_;do pe|=N.lane,N=N.next;while(N!==_)}else W===null&&(N.shared.lanes=0);ba|=pe,m.lanes=pe,m.memoizedState=bn}}function Sa(m,_,E){if(m=_.effects,_.effects=null,m!==null)for(_=0;_<m.length;_++){var P=m[_],N=P.callback;if(N!==null){if(P.callback=null,P=E,typeof N!="function")throw Error(o(191,N));N.call(P)}}}var Vh=new n.Component().refs;function xc(m,_,E,P){_=m.memoizedState,E=E(P,_),E=E==null?_:s({},_,E),m.memoizedState=E,m.lanes===0&&(m.updateQueue.baseState=E)}var gu={isMounted:function(m){return(m=m._reactInternals)?C(m)===m:!1},enqueueSetState:function(m,_,E){m=m._reactInternals;var P=ar(),N=ua(m),W=po(P,N);W.payload=_,E!=null&&(W.callback=E),ta(m,W),_=gs(m,N,P),_!==null&&Ya(_,m,N)},enqueueReplaceState:function(m,_,E){m=m._reactInternals;var P=ar(),N=ua(m),W=po(P,N);W.tag=1,W.payload=_,E!=null&&(W.callback=E),ta(m,W),_=gs(m,N,P),_!==null&&Ya(_,m,N)},enqueueForceUpdate:function(m,_){m=m._reactInternals;var E=ar(),P=ua(m),N=po(E,P);N.tag=2,_!=null&&(N.callback=_),ta(m,N),_=gs(m,P,E),_!==null&&Ya(_,m,P)}};function Ac(m,_,E,P,N,W,pe){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(P,W,pe):_.prototype&&_.prototype.isPureReactComponent?!Ci(E,P)||!Ci(N,W):!0}function _u(m,_,E){var P=!1,N=Vt,W=_.contextType;return typeof W=="object"&&W!==null?W=Ir(W):(N=nn(_)?Lt:un.current,P=_.contextTypes,W=(P=P!=null)?Sn(m,N):Vt),_=new _(E,W),m.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=gu,m.stateNode=_,_._reactInternals=m,P&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=N,m.__reactInternalMemoizedMaskedChildContext=W),_}function fs(m,_,E,P){m=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(E,P),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(E,P),_.state!==m&&gu.enqueueReplaceState(_,_.state,null)}function wc(m,_,E,P){var N=m.stateNode;N.props=E,N.state=m.memoizedState,N.refs=Vh,Ka(m);var W=_.contextType;typeof W=="object"&&W!==null?N.context=Ir(W):(W=nn(_)?Lt:un.current,N.context=Sn(m,W)),N.state=m.memoizedState,W=_.getDerivedStateFromProps,typeof W=="function"&&(xc(m,_,W,E),N.state=m.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(_=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),_!==N.state&&gu.enqueueReplaceState(N,N.state,null),mu(m,E,N,P),N.state=m.memoizedState),typeof N.componentDidMount=="function"&&(m.flags|=4194308)}var Qa=[],Rs=0,S=null,U=0,j=[],ie=0,Oe=null,Je=1,Rt="";function Jn(m,_){Qa[Rs++]=U,Qa[Rs++]=S,S=m,U=_}function yi(m,_,E){j[ie++]=Je,j[ie++]=Rt,j[ie++]=Oe,Oe=m;var P=Je;m=Rt;var N=32-En(P)-1;P&=~(1<<N),E+=1;var W=32-En(_)+N;if(30<W){var pe=N-N%5;W=(P&(1<<pe)-1).toString(32),P>>=pe,N-=pe,Je=1<<32-En(_)+N|E<<N|P,Rt=W+m}else Je=1<<W|E<<N|P,Rt=m}function jn(m){m.return!==null&&(Jn(m,1),yi(m,1,0))}function xi(m){for(;m===S;)S=Qa[--Rs],Qa[Rs]=null,U=Qa[--Rs],Qa[Rs]=null;for(;m===Oe;)Oe=j[--ie],j[ie]=null,Rt=j[--ie],j[ie]=null,Je=j[--ie],j[ie]=null}var or=null,Vr=null,qn=!1,na=!1,ds=null;function rg(m,_){var E=Ao(5,null,null,0);E.elementType="DELETED",E.stateNode=_,E.return=m,_=m.deletions,_===null?(m.deletions=[E],m.flags|=16):_.push(E)}function ig(m,_){switch(m.tag){case 5:return _=mn(_,m.type,m.pendingProps),_!==null?(m.stateNode=_,or=m,Vr=cn(_),!0):!1;case 6:return _=fr(_,m.pendingProps),_!==null?(m.stateNode=_,or=m,Vr=null,!0):!1;case 13:if(_=yr(_),_!==null){var E=Oe!==null?{id:Je,overflow:Rt}:null;return m.memoizedState={dehydrated:_,treeContext:E,retryLane:1073741824},E=Ao(18,null,null,0),E.stateNode=_,E.return=m,m.child=E,or=m,Vr=null,!0}return!1;default:return!1}}function zd(m){return(m.mode&1)!==0&&(m.flags&128)===0}function Ol(m){if(qn){var _=Vr;if(_){var E=_;if(!ig(m,_)){if(zd(m))throw Error(o(418));_=sr(E);var P=or;_&&ig(m,_)?rg(P,E):(m.flags=m.flags&-4097|2,qn=!1,or=m)}}else{if(zd(m))throw Error(o(418));m.flags=m.flags&-4097|2,qn=!1,or=m}}}function yv(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;or=m}function Wh(m){if(!Ge||m!==or)return!1;if(!qn)return yv(m),qn=!0,!1;if(m.tag!==3&&(m.tag!==5||de(m.type)&&!he(m.type,m.memoizedProps))){var _=Vr;if(_){if(zd(m)){for(m=Vr;m;)m=sr(m);throw Error(o(418))}for(;_;)rg(m,_),_=sr(_)}}if(yv(m),m.tag===13){if(!Ge)throw Error(o(316));if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));Vr=Ue(m)}else Vr=or?sr(m.stateNode):null;return!0}function Sc(){Ge&&(Vr=or=null,na=qn=!1)}function Gd(m){ds===null?ds=[m]:ds.push(m)}function Ec(m,_,E){if(m=E.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(o(309));var P=E.stateNode}if(!P)throw Error(o(147,m));var N=P,W=""+m;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===W?_.ref:(_=function(pe){var Pe=N.refs;Pe===Vh&&(Pe=N.refs={}),pe===null?delete Pe[W]:Pe[W]=pe},_._stringRef=W,_)}if(typeof m!="string")throw Error(o(284));if(!E._owner)throw Error(o(290,m))}return m}function kl(m,_){throw m=Object.prototype.toString.call(_),Error(o(31,m==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":m))}function Tc(m){var _=m._init;return _(m._payload)}function xv(m){function _(Ve,Be){if(m){var tt=Ve.deletions;tt===null?(Ve.deletions=[Be],Ve.flags|=16):tt.push(Be)}}function E(Ve,Be){if(!m)return null;for(;Be!==null;)_(Ve,Be),Be=Be.sibling;return null}function P(Ve,Be){for(Ve=new Map;Be!==null;)Be.key!==null?Ve.set(Be.key,Be):Ve.set(Be.index,Be),Be=Be.sibling;return Ve}function N(Ve,Be){return Ve=hl(Ve,Be),Ve.index=0,Ve.sibling=null,Ve}function W(Ve,Be,tt){return Ve.index=tt,m?(tt=Ve.alternate,tt!==null?(tt=tt.index,tt<Be?(Ve.flags|=2,Be):tt):(Ve.flags|=2,Be)):(Ve.flags|=1048576,Be)}function pe(Ve){return m&&Ve.alternate===null&&(Ve.flags|=2),Ve}function Pe(Ve,Be,tt,Wt){return Be===null||Be.tag!==6?(Be=pp(tt,Ve.mode,Wt),Be.return=Ve,Be):(Be=N(Be,tt),Be.return=Ve,Be)}function ot(Ve,Be,tt,Wt){var on=tt.type;return on===f?Zt(Ve,Be,tt.props.children,Wt,tt.key):Be!==null&&(Be.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===b&&Tc(on)===Be.type)?(Wt=N(Be,tt.props),Wt.ref=Ec(Ve,Be,tt),Wt.return=Ve,Wt):(Wt=dp(tt.type,tt.key,tt.props,null,Ve.mode,Wt),Wt.ref=Ec(Ve,Be,tt),Wt.return=Ve,Wt)}function It(Ve,Be,tt,Wt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==tt.containerInfo||Be.stateNode.implementation!==tt.implementation?(Be=mp(tt,Ve.mode,Wt),Be.return=Ve,Be):(Be=N(Be,tt.children||[]),Be.return=Ve,Be)}function Zt(Ve,Be,tt,Wt,on){return Be===null||Be.tag!==7?(Be=Uu(tt,Ve.mode,Wt,on),Be.return=Ve,Be):(Be=N(Be,tt),Be.return=Ve,Be)}function bn(Ve,Be,tt){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return Be=pp(""+Be,Ve.mode,tt),Be.return=Ve,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case l:return tt=dp(Be.type,Be.key,Be.props,null,Ve.mode,tt),tt.ref=Ec(Ve,null,Be),tt.return=Ve,tt;case u:return Be=mp(Be,Ve.mode,tt),Be.return=Ve,Be;case b:var Wt=Be._init;return bn(Ve,Wt(Be._payload),tt)}if(ue(Be)||O(Be))return Be=Uu(Be,Ve.mode,tt,null),Be.return=Ve,Be;kl(Ve,Be)}return null}function fn(Ve,Be,tt,Wt){var on=Be!==null?Be.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number")return on!==null?null:Pe(Ve,Be,""+tt,Wt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case l:return tt.key===on?ot(Ve,Be,tt,Wt):null;case u:return tt.key===on?It(Ve,Be,tt,Wt):null;case b:return on=tt._init,fn(Ve,Be,on(tt._payload),Wt)}if(ue(tt)||O(tt))return on!==null?null:Zt(Ve,Be,tt,Wt,null);kl(Ve,tt)}return null}function Un(Ve,Be,tt,Wt,on){if(typeof Wt=="string"&&Wt!==""||typeof Wt=="number")return Ve=Ve.get(tt)||null,Pe(Be,Ve,""+Wt,on);if(typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case l:return Ve=Ve.get(Wt.key===null?tt:Wt.key)||null,ot(Be,Ve,Wt,on);case u:return Ve=Ve.get(Wt.key===null?tt:Wt.key)||null,It(Be,Ve,Wt,on);case b:var Bn=Wt._init;return Un(Ve,Be,tt,Bn(Wt._payload),on)}if(ue(Wt)||O(Wt))return Ve=Ve.get(tt)||null,Zt(Be,Ve,Wt,on,null);kl(Be,Wt)}return null}function Xt(Ve,Be,tt,Wt){for(var on=null,Bn=null,Cn=Be,er=Be=0,wi=null;Cn!==null&&er<tt.length;er++){Cn.index>er?(wi=Cn,Cn=null):wi=Cn.sibling;var Qn=fn(Ve,Cn,tt[er],Wt);if(Qn===null){Cn===null&&(Cn=wi);break}m&&Cn&&Qn.alternate===null&&_(Ve,Cn),Be=W(Qn,Be,er),Bn===null?on=Qn:Bn.sibling=Qn,Bn=Qn,Cn=wi}if(er===tt.length)return E(Ve,Cn),qn&&Jn(Ve,er),on;if(Cn===null){for(;er<tt.length;er++)Cn=bn(Ve,tt[er],Wt),Cn!==null&&(Be=W(Cn,Be,er),Bn===null?on=Cn:Bn.sibling=Cn,Bn=Cn);return qn&&Jn(Ve,er),on}for(Cn=P(Ve,Cn);er<tt.length;er++)wi=Un(Cn,Ve,er,tt[er],Wt),wi!==null&&(m&&wi.alternate!==null&&Cn.delete(wi.key===null?er:wi.key),Be=W(wi,Be,er),Bn===null?on=wi:Bn.sibling=wi,Bn=wi);return m&&Cn.forEach(function(fl){return _(Ve,fl)}),qn&&Jn(Ve,er),on}function es(Ve,Be,tt,Wt){var on=O(tt);if(typeof on!="function")throw Error(o(150));if(tt=on.call(tt),tt==null)throw Error(o(151));for(var Bn=on=null,Cn=Be,er=Be=0,wi=null,Qn=tt.next();Cn!==null&&!Qn.done;er++,Qn=tt.next()){Cn.index>er?(wi=Cn,Cn=null):wi=Cn.sibling;var fl=fn(Ve,Cn,Qn.value,Wt);if(fl===null){Cn===null&&(Cn=wi);break}m&&Cn&&fl.alternate===null&&_(Ve,Cn),Be=W(fl,Be,er),Bn===null?on=fl:Bn.sibling=fl,Bn=fl,Cn=wi}if(Qn.done)return E(Ve,Cn),qn&&Jn(Ve,er),on;if(Cn===null){for(;!Qn.done;er++,Qn=tt.next())Qn=bn(Ve,Qn.value,Wt),Qn!==null&&(Be=W(Qn,Be,er),Bn===null?on=Qn:Bn.sibling=Qn,Bn=Qn);return qn&&Jn(Ve,er),on}for(Cn=P(Ve,Cn);!Qn.done;er++,Qn=tt.next())Qn=Un(Cn,Ve,er,Qn.value,Wt),Qn!==null&&(m&&Qn.alternate!==null&&Cn.delete(Qn.key===null?er:Qn.key),Be=W(Qn,Be,er),Bn===null?on=Qn:Bn.sibling=Qn,Bn=Qn);return m&&Cn.forEach(function(Fg){return _(Ve,Fg)}),qn&&Jn(Ve,er),on}function wo(Ve,Be,tt,Wt){if(typeof tt=="object"&&tt!==null&&tt.type===f&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case l:e:{for(var on=tt.key,Bn=Be;Bn!==null;){if(Bn.key===on){if(on=tt.type,on===f){if(Bn.tag===7){E(Ve,Bn.sibling),Be=N(Bn,tt.props.children),Be.return=Ve,Ve=Be;break e}}else if(Bn.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===b&&Tc(on)===Bn.type){E(Ve,Bn.sibling),Be=N(Bn,tt.props),Be.ref=Ec(Ve,Bn,tt),Be.return=Ve,Ve=Be;break e}E(Ve,Bn);break}else _(Ve,Bn);Bn=Bn.sibling}tt.type===f?(Be=Uu(tt.props.children,Ve.mode,Wt,tt.key),Be.return=Ve,Ve=Be):(Wt=dp(tt.type,tt.key,tt.props,null,Ve.mode,Wt),Wt.ref=Ec(Ve,Be,tt),Wt.return=Ve,Ve=Wt)}return pe(Ve);case u:e:{for(Bn=tt.key;Be!==null;){if(Be.key===Bn)if(Be.tag===4&&Be.stateNode.containerInfo===tt.containerInfo&&Be.stateNode.implementation===tt.implementation){E(Ve,Be.sibling),Be=N(Be,tt.children||[]),Be.return=Ve,Ve=Be;break e}else{E(Ve,Be);break}else _(Ve,Be);Be=Be.sibling}Be=mp(tt,Ve.mode,Wt),Be.return=Ve,Ve=Be}return pe(Ve);case b:return Bn=tt._init,wo(Ve,Be,Bn(tt._payload),Wt)}if(ue(tt))return Xt(Ve,Be,tt,Wt);if(O(tt))return es(Ve,Be,tt,Wt);kl(Ve,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"?(tt=""+tt,Be!==null&&Be.tag===6?(E(Ve,Be.sibling),Be=N(Be,tt),Be.return=Ve,Ve=Be):(E(Ve,Be),Be=pp(tt,Ve.mode,Wt),Be.return=Ve,Ve=Be),pe(Ve)):E(Ve,Be)}return wo}var Za=xv(!0),Av=xv(!1),Mc={},Xs=wt(Mc),vu=wt(Mc),yu=wt(Mc);function ra(m){if(m===Mc)throw Error(o(174));return m}function Hd(m,_){zt(yu,_),zt(vu,m),zt(Xs,Mc),m=ge(_),Tt(Xs),zt(Xs,m)}function bc(){Tt(Xs),Tt(vu),Tt(yu)}function wv(m){var _=ra(yu.current),E=ra(Xs.current);_=ee(E,m.type,_),E!==_&&(zt(vu,m),zt(Xs,_))}function sg(m){vu.current===m&&(Tt(Xs),Tt(vu))}var Kr=wt(0);function Vd(m){for(var _=m;_!==null;){if(_.tag===13){var E=_.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||_r(E)||Or(E)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var mo=[];function xu(){for(var m=0;m<mo.length;m++){var _=mo[m];Ye?_._workInProgressVersionPrimary=null:_._workInProgressVersionSecondary=null}mo.length=0}var jh=a.ReactCurrentDispatcher,go=a.ReactCurrentBatchConfig,Au=0,Yr=null,Ni=null,Ui=null,Wd=!1,Ea=!1,wu=0,qh=0;function zi(){throw Error(o(321))}function jd(m,_){if(_===null)return!1;for(var E=0;E<_.length&&E<m.length;E++)if(!ai(m[E],_[E]))return!1;return!0}function Cc(m,_,E,P,N,W){if(Au=W,Yr=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,jh.current=m===null||m.memoizedState===null?hg:fg,m=E(P,N),Ea){W=0;do{if(Ea=!1,wu=0,25<=W)throw Error(o(301));W+=1,Ui=Ni=null,_.updateQueue=null,jh.current=dg,m=E(P,N)}while(Ea)}if(jh.current=Dc,_=Ni!==null&&Ni.next!==null,Au=0,Ui=Ni=Yr=null,Wd=!1,_)throw Error(o(300));return m}function Nl(){var m=wu!==0;return wu=0,m}function ia(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ui===null?Yr.memoizedState=Ui=m:Ui=Ui.next=m,Ui}function sa(){if(Ni===null){var m=Yr.alternate;m=m!==null?m.memoizedState:null}else m=Ni.next;var _=Ui===null?Yr.memoizedState:Ui.next;if(_!==null)Ui=_,Ni=m;else{if(m===null)throw Error(o(310));Ni=m,m={memoizedState:Ni.memoizedState,baseState:Ni.baseState,baseQueue:Ni.baseQueue,queue:Ni.queue,next:null},Ui===null?Yr.memoizedState=Ui=m:Ui=Ui.next=m}return Ui}function Ta(m,_){return typeof _=="function"?_(m):_}function Xh(m){var _=sa(),E=_.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=m;var P=Ni,N=P.baseQueue,W=E.pending;if(W!==null){if(N!==null){var pe=N.next;N.next=W.next,W.next=pe}P.baseQueue=N=W,E.pending=null}if(N!==null){W=N.next,P=P.baseState;var Pe=pe=null,ot=null,It=W;do{var Zt=It.lane;if((Au&Zt)===Zt)ot!==null&&(ot=ot.next={lane:0,action:It.action,hasEagerState:It.hasEagerState,eagerState:It.eagerState,next:null}),P=It.hasEagerState?It.eagerState:m(P,It.action);else{var bn={lane:Zt,action:It.action,hasEagerState:It.hasEagerState,eagerState:It.eagerState,next:null};ot===null?(Pe=ot=bn,pe=P):ot=ot.next=bn,Yr.lanes|=Zt,ba|=Zt}It=It.next}while(It!==null&&It!==W);ot===null?pe=P:ot.next=Pe,ai(P,_.memoizedState)||(Gi=!0),_.memoizedState=P,_.baseState=pe,_.baseQueue=ot,E.lastRenderedState=P}if(m=E.interleaved,m!==null){N=m;do W=N.lane,Yr.lanes|=W,ba|=W,N=N.next;while(N!==m)}else N===null&&(E.lanes=0);return[_.memoizedState,E.dispatch]}function Jh(m){var _=sa(),E=_.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=m;var P=E.dispatch,N=E.pending,W=_.memoizedState;if(N!==null){E.pending=null;var pe=N=N.next;do W=m(W,pe.action),pe=pe.next;while(pe!==N);ai(W,_.memoizedState)||(Gi=!0),_.memoizedState=W,_.baseQueue===null&&(_.baseState=W),E.lastRenderedState=W}return[W,P]}function og(){}function ag(m,_){var E=Yr,P=sa(),N=_(),W=!ai(P.memoizedState,N);if(W&&(P.memoizedState=N,Gi=!0),P=P.queue,Rc($a.bind(null,E,P,m),[m]),P.getSnapshot!==_||W||Ui!==null&&Ui.memoizedState.tag&1){if(E.flags|=2048,Yh(9,ug.bind(null,E,P,N,_),void 0,null),ci===null)throw Error(o(349));Au&30||lg(E,_,N)}return N}function lg(m,_,E){m.flags|=16384,m={getSnapshot:_,value:E},_=Yr.updateQueue,_===null?(_={lastEffect:null,stores:null},Yr.updateQueue=_,_.stores=[m]):(E=_.stores,E===null?_.stores=[m]:E.push(m))}function ug(m,_,E,P){_.value=E,_.getSnapshot=P,qd(_)&&gs(m,1,-1)}function $a(m,_,E){return E(function(){qd(_)&&gs(m,1,-1)})}function qd(m){var _=m.getSnapshot;m=m.value;try{var E=_();return!ai(m,E)}catch{return!0}}function Kh(m){var _=ia();return typeof m=="function"&&(m=m()),_.memoizedState=_.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:m},_.queue=m,m=m.dispatch=pw.bind(null,Yr,m),[_.memoizedState,m]}function Yh(m,_,E,P){return m={tag:m,create:_,destroy:E,deps:P,next:null},_=Yr.updateQueue,_===null?(_={lastEffect:null,stores:null},Yr.updateQueue=_,_.lastEffect=m.next=m):(E=_.lastEffect,E===null?_.lastEffect=m.next=m:(P=E.next,E.next=m,m.next=P,_.lastEffect=m)),m}function Sv(){return sa().memoizedState}function Ul(m,_,E,P){var N=ia();Yr.flags|=m,N.memoizedState=Yh(1|_,E,void 0,P===void 0?null:P)}function Xd(m,_,E,P){var N=sa();P=P===void 0?null:P;var W=void 0;if(Ni!==null){var pe=Ni.memoizedState;if(W=pe.destroy,P!==null&&jd(P,pe.deps)){N.memoizedState=Yh(_,E,W,P);return}}Yr.flags|=m,N.memoizedState=Yh(1|_,E,W,P)}function Jd(m,_){return Ul(8390656,8,m,_)}function Rc(m,_){return Xd(2048,8,m,_)}function Pr(m,_){return Xd(4,2,m,_)}function Kd(m,_){return Xd(4,4,m,_)}function Qh(m,_){if(typeof _=="function")return m=m(),_(m),function(){_(null)};if(_!=null)return m=m(),_.current=m,function(){_.current=null}}function Ic(m,_,E){return E=E!=null?E.concat([m]):null,Xd(4,4,Qh.bind(null,_,m),E)}function Yd(){}function Qd(m,_){var E=sa();_=_===void 0?null:_;var P=E.memoizedState;return P!==null&&_!==null&&jd(_,P[1])?P[0]:(E.memoizedState=[m,_],m)}function Pc(m,_){var E=sa();_=_===void 0?null:_;var P=E.memoizedState;return P!==null&&_!==null&&jd(_,P[1])?P[0]:(m=m(),E.memoizedState=[m,_],m)}function Zd(m,_){var E=xn;xn=E!==0&&4>E?E:4,m(!0);var P=go.transition;go.transition={};try{m(!1),_()}finally{xn=E,go.transition=P}}function Su(){return sa().memoizedState}function Ev(m,_,E){var P=ua(m);E={lane:P,action:E,hasEagerState:!1,eagerState:null,next:null},Tv(m)?cg(_,E):(Zh(m,_,E),E=ar(),m=gs(m,P,E),m!==null&&$h(m,_,P))}function pw(m,_,E){var P=ua(m),N={lane:P,action:E,hasEagerState:!1,eagerState:null,next:null};if(Tv(m))cg(_,N);else{Zh(m,_,N);var W=m.alternate;if(m.lanes===0&&(W===null||W.lanes===0)&&(W=_.lastRenderedReducer,W!==null))try{var pe=_.lastRenderedState,Pe=W(pe,E);if(N.hasEagerState=!0,N.eagerState=Pe,ai(Pe,pe))return}catch{}finally{}E=ar(),m=gs(m,P,E),m!==null&&$h(m,_,P)}}function Tv(m){var _=m.alternate;return m===Yr||_!==null&&_===Yr}function cg(m,_){Ea=Wd=!0;var E=m.pending;E===null?_.next=_:(_.next=E.next,E.next=_),m.pending=_}function Zh(m,_,E){ci!==null&&m.mode&1&&!(Nn&2)?(m=_.interleaved,m===null?(E.next=E,li===null?li=[_]:li.push(_)):(E.next=m.next,m.next=E),_.interleaved=E):(m=_.pending,m===null?E.next=E:(E.next=m.next,m.next=E),_.pending=E)}function $h(m,_,E){if(E&4194240){var P=_.lanes;P&=m.pendingLanes,E|=P,_.lanes=E,Cr(m,E)}}var Dc={readContext:Ir,useCallback:zi,useContext:zi,useEffect:zi,useImperativeHandle:zi,useInsertionEffect:zi,useLayoutEffect:zi,useMemo:zi,useReducer:zi,useRef:zi,useState:zi,useDebugValue:zi,useDeferredValue:zi,useTransition:zi,useMutableSource:zi,useSyncExternalStore:zi,useId:zi,unstable_isNewReconciler:!1},hg={readContext:Ir,useCallback:function(m,_){return ia().memoizedState=[m,_===void 0?null:_],m},useContext:Ir,useEffect:Jd,useImperativeHandle:function(m,_,E){return E=E!=null?E.concat([m]):null,Ul(4194308,4,Qh.bind(null,_,m),E)},useLayoutEffect:function(m,_){return Ul(4194308,4,m,_)},useInsertionEffect:function(m,_){return Ul(4,2,m,_)},useMemo:function(m,_){var E=ia();return _=_===void 0?null:_,m=m(),E.memoizedState=[m,_],m},useReducer:function(m,_,E){var P=ia();return _=E!==void 0?E(_):_,P.memoizedState=P.baseState=_,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:_},P.queue=m,m=m.dispatch=Ev.bind(null,Yr,m),[P.memoizedState,m]},useRef:function(m){var _=ia();return m={current:m},_.memoizedState=m},useState:Kh,useDebugValue:Yd,useDeferredValue:function(m){var _=Kh(m),E=_[0],P=_[1];return Jd(function(){var N=go.transition;go.transition={};try{P(m)}finally{go.transition=N}},[m]),E},useTransition:function(){var m=Kh(!1),_=m[0];return m=Zd.bind(null,m[1]),ia().memoizedState=m,[_,m]},useMutableSource:function(){},useSyncExternalStore:function(m,_,E){var P=Yr,N=ia();if(qn){if(E===void 0)throw Error(o(407));E=E()}else{if(E=_(),ci===null)throw Error(o(349));Au&30||lg(P,_,E)}N.memoizedState=E;var W={value:E,getSnapshot:_};return N.queue=W,Jd($a.bind(null,P,W,m),[m]),P.flags|=2048,Yh(9,ug.bind(null,P,W,E,_),void 0,null),E},useId:function(){var m=ia(),_=ci.identifierPrefix;if(qn){var E=Rt,P=Je;E=(P&~(1<<32-En(P)-1)).toString(32)+E,_=":"+_+"R"+E,E=wu++,0<E&&(_+="H"+E.toString(32)),_+=":"}else E=qh++,_=":"+_+"r"+E.toString(32)+":";return m.memoizedState=_},unstable_isNewReconciler:!1},fg={readContext:Ir,useCallback:Qd,useContext:Ir,useEffect:Rc,useImperativeHandle:Ic,useInsertionEffect:Pr,useLayoutEffect:Kd,useMemo:Pc,useReducer:Xh,useRef:Sv,useState:function(){return Xh(Ta)},useDebugValue:Yd,useDeferredValue:function(m){var _=Xh(Ta),E=_[0],P=_[1];return Rc(function(){var N=go.transition;go.transition={};try{P(m)}finally{go.transition=N}},[m]),E},useTransition:function(){var m=Xh(Ta)[0],_=sa().memoizedState;return[m,_]},useMutableSource:og,useSyncExternalStore:ag,useId:Su,unstable_isNewReconciler:!1},dg={readContext:Ir,useCallback:Qd,useContext:Ir,useEffect:Rc,useImperativeHandle:Ic,useInsertionEffect:Pr,useLayoutEffect:Kd,useMemo:Pc,useReducer:Jh,useRef:Sv,useState:function(){return Jh(Ta)},useDebugValue:Yd,useDeferredValue:function(m){var _=Jh(Ta),E=_[0],P=_[1];return Rc(function(){var N=go.transition;go.transition={};try{P(m)}finally{go.transition=N}},[m]),E},useTransition:function(){var m=Jh(Ta)[0],_=sa().memoizedState;return[m,_]},useMutableSource:og,useSyncExternalStore:ag,useId:Su,unstable_isNewReconciler:!1};function pg(m,_){try{var E="",P=_;do E+=Bo(P),P=P.return;while(P);var N=E}catch(W){N=`
Error generating stack: `+W.message+`
`+W.stack}return{value:m,source:_,stack:N}}function $d(m,_){try{console.error(_.value)}catch(E){setTimeout(function(){throw E})}}var mw=typeof WeakMap=="function"?WeakMap:Map;function Mv(m,_,E){E=po(-1,E),E.tag=3,E.payload={element:null};var P=_.value;return E.callback=function(){Nc||(Nc=!0,Ur=P),$d(m,_)},E}function ep(m,_,E){E=po(-1,E),E.tag=3;var P=m.type.getDerivedStateFromError;if(typeof P=="function"){var N=_.value;E.payload=function(){return P(N)},E.callback=function(){$d(m,_)}}var W=m.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&(E.callback=function(){$d(m,_),typeof P!="function"&&(la===null?la=new Set([this]):la.add(this));var pe=_.stack;this.componentDidCatch(_.value,{componentStack:pe!==null?pe:""})}),E}function el(m,_,E){var P=m.pingCache;if(P===null){P=m.pingCache=new mw;var N=new Set;P.set(_,N)}else N=P.get(_),N===void 0&&(N=new Set,P.set(_,N));N.has(E)||(N.add(E),m=Dg.bind(null,m,_,E),_.then(m,m))}function mg(m){do{var _;if((_=m.tag===13)&&(_=m.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return m;m=m.return}while(m!==null);return null}function Eu(m,_,E,P,N){return m.mode&1?(m.flags|=65536,m.lanes=N,m):(m===_?m.flags|=65536:(m.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(_=po(-1,1),_.tag=2,ta(E,_))),E.lanes|=1),m)}function Ri(m){m.flags|=4}function Bc(m,_){if(m!==null&&m.child===_.child)return!0;if(_.flags&16)return!1;for(m=_.child;m!==null;){if(m.flags&12854||m.subtreeFlags&12854)return!1;m=m.sibling}return!0}var _o,Tu,tp,np;if(Ne)_o=function(m,_){for(var E=_.child;E!==null;){if(E.tag===5||E.tag===6)Q(m,E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===_)break;for(;E.sibling===null;){if(E.return===null||E.return===_)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},Tu=function(){},tp=function(m,_,E,P,N){if(m=m.memoizedProps,m!==P){var W=_.stateNode,pe=ra(Xs.current);E=oe(W,E,m,P,N,pe),(_.updateQueue=E)&&Ri(_)}},np=function(m,_,E,P){E!==P&&Ri(_)};else if(Ee){_o=function(m,_,E,P){for(var N=_.child;N!==null;){if(N.tag===5){var W=N.stateNode;E&&P&&(W=Yt(W,N.type,N.memoizedProps,N)),Q(m,W)}else if(N.tag===6)W=N.stateNode,E&&P&&(W=Wn(W,N.memoizedProps,N)),Q(m,W);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)W=N.child,W!==null&&(W.return=N),_o(m,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===_)break;for(;N.sibling===null;){if(N.return===null||N.return===_)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var zl=function(m,_,E,P){for(var N=_.child;N!==null;){if(N.tag===5){var W=N.stateNode;E&&P&&(W=Yt(W,N.type,N.memoizedProps,N)),qt(m,W)}else if(N.tag===6)W=N.stateNode,E&&P&&(W=Wn(W,N.memoizedProps,N)),qt(m,W);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)W=N.child,W!==null&&(W.return=N),zl(m,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===_)break;for(;N.sibling===null;){if(N.return===null||N.return===_)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};Tu=function(m,_){var E=_.stateNode;if(!Bc(m,_)){m=E.containerInfo;var P=ft(m);zl(P,_,!1,!1),E.pendingChildren=P,Ri(_),ln(m,P)}},tp=function(m,_,E,P,N){var W=m.stateNode,pe=m.memoizedProps;if((m=Bc(m,_))&&pe===P)_.stateNode=W;else{var Pe=_.stateNode,ot=ra(Xs.current),It=null;pe!==P&&(It=oe(Pe,E,pe,P,N,ot)),m&&It===null?_.stateNode=W:(W=vt(W,It,E,pe,P,_,m,Pe),fe(W,E,P,N,ot)&&Ri(_),_.stateNode=W,m?Ri(_):_o(W,_,!1,!1))}},np=function(m,_,E,P){E!==P?(m=ra(yu.current),E=ra(Xs.current),_.stateNode=xe(P,m,E,_),Ri(_)):_.stateNode=m.stateNode}}else Tu=function(){},tp=function(){},np=function(){};function tl(m,_){if(!qn)switch(m.tailMode){case"hidden":_=m.tail;for(var E=null;_!==null;)_.alternate!==null&&(E=_),_=_.sibling;E===null?m.tail=null:E.sibling=null;break;case"collapsed":E=m.tail;for(var P=null;E!==null;)E.alternate!==null&&(P=E),E=E.sibling;P===null?_||m.tail===null?m.tail=null:m.tail.sibling=null:P.sibling=null}}function ui(m){var _=m.alternate!==null&&m.alternate.child===m.child,E=0,P=0;if(_)for(var N=m.child;N!==null;)E|=N.lanes|N.childLanes,P|=N.subtreeFlags&14680064,P|=N.flags&14680064,N.return=m,N=N.sibling;else for(N=m.child;N!==null;)E|=N.lanes|N.childLanes,P|=N.subtreeFlags,P|=N.flags,N.return=m,N=N.sibling;return m.subtreeFlags|=P,m.childLanes=E,_}function rp(m,_,E){var P=_.pendingProps;switch(xi(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ui(_),null;case 1:return nn(_.type)&&In(),ui(_),null;case 3:return P=_.stateNode,bc(),Tt(Nt),Tt(un),xu(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(m===null||m.child===null)&&(Wh(_)?Ri(_):m===null||m.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,ds!==null&&(df(ds),ds=null))),Tu(m,_),ui(_),null;case 5:sg(_),E=ra(yu.current);var N=_.type;if(m!==null&&_.stateNode!=null)tp(m,_,N,P,E),m.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!P){if(_.stateNode===null)throw Error(o(166));return ui(_),null}if(m=ra(Xs.current),Wh(_)){if(!Ge)throw Error(o(175));m=X(_.stateNode,_.type,_.memoizedProps,E,m,_,!na),_.updateQueue=m,m!==null&&Ri(_)}else{var W=V(N,P,E,m,_);_o(W,_,!1,!1),_.stateNode=W,fe(W,N,P,E,m)&&Ri(_)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return ui(_),null;case 6:if(m&&_.stateNode!=null)np(m,_,m.memoizedProps,P);else{if(typeof P!="string"&&_.stateNode===null)throw Error(o(166));if(m=ra(yu.current),E=ra(Xs.current),Wh(_)){if(!Ge)throw Error(o(176));if(m=_.stateNode,P=_.memoizedProps,(E=ne(m,P,_,!na))&&(N=or,N!==null))switch(W=(N.mode&1)!==0,N.tag){case 3:Ae(N.stateNode.containerInfo,m,P,W);break;case 5:we(N.type,N.memoizedProps,N.stateNode,m,P,W)}E&&Ri(_)}else _.stateNode=xe(P,m,E,_)}return ui(_),null;case 13:if(Tt(Kr),P=_.memoizedState,qn&&Vr!==null&&_.mode&1&&!(_.flags&128)){for(m=Vr;m;)m=sr(m);return Sc(),_.flags|=98560,_}if(P!==null&&P.dehydrated!==null){if(P=Wh(_),m===null){if(!P)throw Error(o(318));if(!Ge)throw Error(o(344));if(m=_.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));Se(m,_)}else Sc(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;return ui(_),null}return ds!==null&&(df(ds),ds=null),_.flags&128?(_.lanes=E,_):(P=P!==null,E=!1,m===null?Wh(_):E=m.memoizedState!==null,P&&!E&&(_.child.flags|=8192,_.mode&1&&(m===null||Kr.current&1?ri===0&&(ri=3):cp())),_.updateQueue!==null&&(_.flags|=4),ui(_),null);case 4:return bc(),Tu(m,_),m===null&&ht(_.stateNode.containerInfo),ui(_),null;case 10:return Xr(_.type._context),ui(_),null;case 17:return nn(_.type)&&In(),ui(_),null;case 19:if(Tt(Kr),N=_.memoizedState,N===null)return ui(_),null;if(P=(_.flags&128)!==0,W=N.rendering,W===null)if(P)tl(N,!1);else{if(ri!==0||m!==null&&m.flags&128)for(m=_.child;m!==null;){if(W=Vd(m),W!==null){for(_.flags|=128,tl(N,!1),m=W.updateQueue,m!==null&&(_.updateQueue=m,_.flags|=4),_.subtreeFlags=0,m=E,P=_.child;P!==null;)E=P,N=m,E.flags&=14680066,W=E.alternate,W===null?(E.childLanes=0,E.lanes=N,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=W.childLanes,E.lanes=W.lanes,E.child=W.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=W.memoizedProps,E.memoizedState=W.memoizedState,E.updateQueue=W.updateQueue,E.type=W.type,N=W.dependencies,E.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),P=P.sibling;return zt(Kr,Kr.current&1|2),_.child}m=m.sibling}N.tail!==null&&Rr()>Vl&&(_.flags|=128,P=!0,tl(N,!1),_.lanes=4194304)}else{if(!P)if(m=Vd(W),m!==null){if(_.flags|=128,P=!0,m=m.updateQueue,m!==null&&(_.updateQueue=m,_.flags|=4),tl(N,!0),N.tail===null&&N.tailMode==="hidden"&&!W.alternate&&!qn)return ui(_),null}else 2*Rr()-N.renderingStartTime>Vl&&E!==1073741824&&(_.flags|=128,P=!0,tl(N,!1),_.lanes=4194304);N.isBackwards?(W.sibling=_.child,_.child=W):(m=N.last,m!==null?m.sibling=W:_.child=W,N.last=W)}return N.tail!==null?(_=N.tail,N.rendering=_,N.tail=_.sibling,N.renderingStartTime=Rr(),_.sibling=null,m=Kr.current,zt(Kr,P?m&1|2:m&1),_):(ui(_),null);case 22:case 23:return pf(),P=_.memoizedState!==null,m!==null&&m.memoizedState!==null!==P&&(_.flags|=8192),P&&_.mode&1?ms&1073741824&&(ui(_),Ne&&_.subtreeFlags&6&&(_.flags|=8192)):ui(_),null;case 24:return null;case 25:return null}throw Error(o(156,_.tag))}var gg=a.ReactCurrentOwner,Gi=!1;function ni(m,_,E,P){_.child=m===null?Av(_,null,E,P):Za(_,m.child,E,P)}function Dr(m,_,E,P,N){E=E.render;var W=_.ref;return Jr(_,N),P=Cc(m,_,E,P,W,N),E=Nl(),m!==null&&!Gi?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~N,Js(m,_,N)):(qn&&E&&jn(_),_.flags|=1,ni(m,_,P,N),_.child)}function Mr(m,_,E,P,N){if(m===null){var W=E.type;return typeof W=="function"&&!fp(W)&&W.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(_.tag=15,_.type=W,nl(m,_,W,P,N)):(m=dp(E.type,null,P,_,_.mode,N),m.ref=_.ref,m.return=_,_.child=m)}if(W=m.child,!(m.lanes&N)){var pe=W.memoizedProps;if(E=E.compare,E=E!==null?E:Ci,E(pe,P)&&m.ref===_.ref)return Js(m,_,N)}return _.flags|=1,m=hl(W,P),m.ref=_.ref,m.return=_,_.child=m}function nl(m,_,E,P,N){if(m!==null&&Ci(m.memoizedProps,P)&&m.ref===_.ref)if(Gi=!1,(m.lanes&N)!==0)m.flags&131072&&(Gi=!0);else return _.lanes=m.lanes,Js(m,_,N);return rl(m,_,E,P,N)}function Yi(m,_,E){var P=_.pendingProps,N=P.children,W=m!==null?m.memoizedState:null;if(P.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null},zt(Lu,ms),ms|=E;else if(E&1073741824)_.memoizedState={baseLanes:0,cachePool:null},P=W!==null?W.baseLanes:E,zt(Lu,ms),ms|=P;else return m=W!==null?W.baseLanes|E:E,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:m,cachePool:null},_.updateQueue=null,zt(Lu,ms),ms|=m,null;else W!==null?(P=W.baseLanes|E,_.memoizedState=null):P=E,zt(Lu,ms),ms|=P;return ni(m,_,N,E),_.child}function Is(m,_){var E=_.ref;(m===null&&E!==null||m!==null&&m.ref!==E)&&(_.flags|=512,_.flags|=2097152)}function rl(m,_,E,P,N){var W=nn(E)?Lt:un.current;return W=Sn(_,W),Jr(_,N),E=Cc(m,_,E,P,W,N),P=Nl(),m!==null&&!Gi?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~N,Js(m,_,N)):(qn&&P&&jn(_),_.flags|=1,ni(m,_,E,N),_.child)}function Mu(m,_,E,P,N){if(nn(E)){var W=!0;wn(_)}else W=!1;if(Jr(_,N),_.stateNode===null)m!==null&&(m.alternate=null,_.alternate=null,_.flags|=2),_u(_,E,P),wc(_,E,P,N),P=!0;else if(m===null){var pe=_.stateNode,Pe=_.memoizedProps;pe.props=Pe;var ot=pe.context,It=E.contextType;typeof It=="object"&&It!==null?It=Ir(It):(It=nn(E)?Lt:un.current,It=Sn(_,It));var Zt=E.getDerivedStateFromProps,bn=typeof Zt=="function"||typeof pe.getSnapshotBeforeUpdate=="function";bn||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Pe!==P||ot!==It)&&fs(_,pe,P,It),Cs=!1;var fn=_.memoizedState;pe.state=fn,mu(_,P,pe,N),ot=_.memoizedState,Pe!==P||fn!==ot||Nt.current||Cs?(typeof Zt=="function"&&(xc(_,E,Zt,P),ot=_.memoizedState),(Pe=Cs||Ac(_,E,Pe,P,fn,ot,It))?(bn||typeof pe.UNSAFE_componentWillMount!="function"&&typeof pe.componentWillMount!="function"||(typeof pe.componentWillMount=="function"&&pe.componentWillMount(),typeof pe.UNSAFE_componentWillMount=="function"&&pe.UNSAFE_componentWillMount()),typeof pe.componentDidMount=="function"&&(_.flags|=4194308)):(typeof pe.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=P,_.memoizedState=ot),pe.props=P,pe.state=ot,pe.context=It,P=Pe):(typeof pe.componentDidMount=="function"&&(_.flags|=4194308),P=!1)}else{pe=_.stateNode,du(m,_),Pe=_.memoizedProps,It=_.type===_.elementType?Pe:xr(_.type,Pe),pe.props=It,bn=_.pendingProps,fn=pe.context,ot=E.contextType,typeof ot=="object"&&ot!==null?ot=Ir(ot):(ot=nn(E)?Lt:un.current,ot=Sn(_,ot));var Un=E.getDerivedStateFromProps;(Zt=typeof Un=="function"||typeof pe.getSnapshotBeforeUpdate=="function")||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Pe!==bn||fn!==ot)&&fs(_,pe,P,ot),Cs=!1,fn=_.memoizedState,pe.state=fn,mu(_,P,pe,N);var Xt=_.memoizedState;Pe!==bn||fn!==Xt||Nt.current||Cs?(typeof Un=="function"&&(xc(_,E,Un,P),Xt=_.memoizedState),(It=Cs||Ac(_,E,It,P,fn,Xt,ot)||!1)?(Zt||typeof pe.UNSAFE_componentWillUpdate!="function"&&typeof pe.componentWillUpdate!="function"||(typeof pe.componentWillUpdate=="function"&&pe.componentWillUpdate(P,Xt,ot),typeof pe.UNSAFE_componentWillUpdate=="function"&&pe.UNSAFE_componentWillUpdate(P,Xt,ot)),typeof pe.componentDidUpdate=="function"&&(_.flags|=4),typeof pe.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof pe.componentDidUpdate!="function"||Pe===m.memoizedProps&&fn===m.memoizedState||(_.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Pe===m.memoizedProps&&fn===m.memoizedState||(_.flags|=1024),_.memoizedProps=P,_.memoizedState=Xt),pe.props=P,pe.state=Xt,pe.context=ot,P=It):(typeof pe.componentDidUpdate!="function"||Pe===m.memoizedProps&&fn===m.memoizedState||(_.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Pe===m.memoizedProps&&fn===m.memoizedState||(_.flags|=1024),P=!1)}return ps(m,_,E,P,W,N)}function ps(m,_,E,P,N,W){Is(m,_);var pe=(_.flags&128)!==0;if(!P&&!pe)return N&&Ut(_,E,!1),Js(m,_,W);P=_.stateNode,gg.current=_;var Pe=pe&&typeof E.getDerivedStateFromError!="function"?null:P.render();return _.flags|=1,m!==null&&pe?(_.child=Za(_,m.child,null,W),_.child=Za(_,null,Pe,W)):ni(m,_,Pe,W),_.memoizedState=P.state,N&&Ut(_,E,!0),_.child}function ef(m){var _=m.stateNode;_.pendingContext?An(m,_.pendingContext,_.pendingContext!==_.context):_.context&&An(m,_.context,!1),Hd(m,_.containerInfo)}function _g(m,_,E,P,N){return Sc(),Gd(N),_.flags|=256,ni(m,_,E,P),_.child}var tf={dehydrated:null,treeContext:null,retryLane:0};function bu(m){return{baseLanes:m,cachePool:null}}function vg(m,_,E){var P=_.pendingProps,N=Kr.current,W=!1,pe=(_.flags&128)!==0,Pe;if((Pe=pe)||(Pe=m!==null&&m.memoizedState===null?!1:(N&2)!==0),Pe?(W=!0,_.flags&=-129):(m===null||m.memoizedState!==null)&&(N|=1),zt(Kr,N&1),m===null)return Ol(_),m=_.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(_.mode&1?Or(m)?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(N=P.children,m=P.fallback,W?(P=_.mode,W=_.child,N={mode:"hidden",children:N},!(P&1)&&W!==null?(W.childLanes=0,W.pendingProps=N):W=_f(N,P,0,null),m=Uu(m,P,E,null),W.return=_,m.return=_,W.sibling=m,_.child=W,_.child.memoizedState=bu(E),_.memoizedState=tf,m):oa(_,N));if(N=m.memoizedState,N!==null){if(Pe=N.dehydrated,Pe!==null){if(pe)return _.flags&256?(_.flags&=-257,rf(m,_,E,Error(o(422)))):_.memoizedState!==null?(_.child=m.child,_.flags|=128,null):(W=P.fallback,N=_.mode,P=_f({mode:"visible",children:P.children},N,0,null),W=Uu(W,N,E,null),W.flags|=2,P.return=_,W.return=_,P.sibling=W,_.child=P,_.mode&1&&Za(_,m.child,null,E),_.child.memoizedState=bu(E),_.memoizedState=tf,W);if(!(_.mode&1))_=rf(m,_,E,null);else if(Or(Pe))_=rf(m,_,E,Error(o(419)));else if(P=(E&m.childLanes)!==0,Gi||P){if(P=ci,P!==null){switch(E&-E){case 4:W=2;break;case 16:W=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:W=32;break;case 536870912:W=268435456;break;default:W=0}P=W&(P.suspendedLanes|E)?0:W,P!==0&&P!==N.retryLane&&(N.retryLane=P,gs(m,P,-1))}cp(),_=rf(m,_,E,Error(o(421)))}else _r(Pe)?(_.flags|=128,_.child=m.child,_=Pv.bind(null,m),Gr(Pe,_),_=null):(E=N.treeContext,Ge&&(Vr=oi(Pe),or=_,qn=!0,ds=null,na=!1,E!==null&&(j[ie++]=Je,j[ie++]=Rt,j[ie++]=Oe,Je=E.id,Rt=E.overflow,Oe=_)),_=oa(_,_.pendingProps.children),_.flags|=4096);return _}return W?(P=ip(m,_,P.children,P.fallback,E),W=_.child,N=m.child.memoizedState,W.memoizedState=N===null?bu(E):{baseLanes:N.baseLanes|E,cachePool:null},W.childLanes=m.childLanes&~E,_.memoizedState=tf,P):(E=nf(m,_,P.children,E),_.memoizedState=null,E)}return W?(P=ip(m,_,P.children,P.fallback,E),W=_.child,N=m.child.memoizedState,W.memoizedState=N===null?bu(E):{baseLanes:N.baseLanes|E,cachePool:null},W.childLanes=m.childLanes&~E,_.memoizedState=tf,P):(E=nf(m,_,P.children,E),_.memoizedState=null,E)}function oa(m,_){return _=_f({mode:"visible",children:_},m.mode,0,null),_.return=m,m.child=_}function nf(m,_,E,P){var N=m.child;return m=N.sibling,E=hl(N,{mode:"visible",children:E}),!(_.mode&1)&&(E.lanes=P),E.return=_,E.sibling=null,m!==null&&(P=_.deletions,P===null?(_.deletions=[m],_.flags|=16):P.push(m)),_.child=E}function ip(m,_,E,P,N){var W=_.mode;m=m.child;var pe=m.sibling,Pe={mode:"hidden",children:E};return!(W&1)&&_.child!==m?(E=_.child,E.childLanes=0,E.pendingProps=Pe,_.deletions=null):(E=hl(m,Pe),E.subtreeFlags=m.subtreeFlags&14680064),pe!==null?P=hl(pe,P):(P=Uu(P,W,N,null),P.flags|=2),P.return=_,E.return=_,E.sibling=P,_.child=E,P}function rf(m,_,E,P){return P!==null&&Gd(P),Za(_,m.child,null,E),m=oa(_,_.pendingProps.children),m.flags|=2,_.memoizedState=null,m}function bv(m,_,E){m.lanes|=_;var P=m.alternate;P!==null&&(P.lanes|=_),Hr(m.return,_,E)}function Ma(m,_,E,P,N){var W=m.memoizedState;W===null?m.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:P,tail:E,tailMode:N}:(W.isBackwards=_,W.rendering=null,W.renderingStartTime=0,W.last=P,W.tail=E,W.tailMode=N)}function Cu(m,_,E){var P=_.pendingProps,N=P.revealOrder,W=P.tail;if(ni(m,_,P.children,E),P=Kr.current,P&2)P=P&1|2,_.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=_.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&bv(m,E,_);else if(m.tag===19)bv(m,E,_);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===_)break e;for(;m.sibling===null;){if(m.return===null||m.return===_)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}P&=1}if(zt(Kr,P),!(_.mode&1))_.memoizedState=null;else switch(N){case"forwards":for(E=_.child,N=null;E!==null;)m=E.alternate,m!==null&&Vd(m)===null&&(N=E),E=E.sibling;E=N,E===null?(N=_.child,_.child=null):(N=E.sibling,E.sibling=null),Ma(_,!1,N,E,W);break;case"backwards":for(E=null,N=_.child,_.child=null;N!==null;){if(m=N.alternate,m!==null&&Vd(m)===null){_.child=N;break}m=N.sibling,N.sibling=E,E=N,N=m}Ma(_,!0,E,null,W);break;case"together":Ma(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Js(m,_,E){if(m!==null&&(_.dependencies=m.dependencies),ba|=_.lanes,!(E&_.childLanes))return null;if(m!==null&&_.child!==m.child)throw Error(o(153));if(_.child!==null){for(m=_.child,E=hl(m,m.pendingProps),_.child=E,E.return=_;m.sibling!==null;)m=m.sibling,E=E.sibling=hl(m,m.pendingProps),E.return=_;E.sibling=null}return _.child}function sp(m,_,E){switch(_.tag){case 3:ef(_),Sc();break;case 5:wv(_);break;case 1:nn(_.type)&&wn(_);break;case 4:Hd(_,_.stateNode.containerInfo);break;case 10:qs(_,_.type._context,_.memoizedProps.value);break;case 13:var P=_.memoizedState;if(P!==null)return P.dehydrated!==null?(zt(Kr,Kr.current&1),_.flags|=128,null):E&_.child.childLanes?vg(m,_,E):(zt(Kr,Kr.current&1),m=Js(m,_,E),m!==null?m.sibling:null);zt(Kr,Kr.current&1);break;case 19:if(P=(E&_.childLanes)!==0,m.flags&128){if(P)return Cu(m,_,E);_.flags|=128}var N=_.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),zt(Kr,Kr.current),P)break;return null;case 22:case 23:return _.lanes=0,Yi(m,_,E)}return Js(m,_,E)}function op(m,_){switch(xi(_),_.tag){case 1:return nn(_.type)&&In(),m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 3:return bc(),Tt(Nt),Tt(un),xu(),m=_.flags,m&65536&&!(m&128)?(_.flags=m&-65537|128,_):null;case 5:return sg(_),null;case 13:if(Tt(Kr),m=_.memoizedState,m!==null&&m.dehydrated!==null){if(_.alternate===null)throw Error(o(340));Sc()}return m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 19:return Tt(Kr),null;case 4:return bc(),null;case 10:return Xr(_.type._context),null;case 22:case 23:return pf(),null;case 24:return null;default:return null}}var Ps=!1,Hi=!1,Ru=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function Fo(m,_){var E=m.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(P){Bs(m,_,P)}else E.current=null}function il(m,_,E){try{E()}catch(P){Bs(m,_,P)}}var yg=!1;function xg(m,_){for(le(m.containerInfo),Ft=_;Ft!==null;)if(m=Ft,_=m.child,(m.subtreeFlags&1028)!==0&&_!==null)_.return=m,Ft=_;else for(;Ft!==null;){m=Ft;try{var E=m.alternate;if(m.flags&1024)switch(m.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var P=E.memoizedProps,N=E.memoizedState,W=m.stateNode,pe=W.getSnapshotBeforeUpdate(m.elementType===m.type?P:xr(m.type,P),N);W.__reactInternalSnapshotBeforeUpdate=pe}break;case 3:Ne&&at(m.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Pe){Bs(m,m.return,Pe)}if(_=m.sibling,_!==null){_.return=m.return,Ft=_;break}Ft=m.return}return E=yg,yg=!1,E}function sl(m,_,E){var P=_.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var N=P=P.next;do{if((N.tag&m)===m){var W=N.destroy;N.destroy=void 0,W!==void 0&&il(_,E,W)}N=N.next}while(N!==P)}}function Qi(m,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var E=_=_.next;do{if((E.tag&m)===m){var P=E.create;E.destroy=P()}E=E.next}while(E!==_)}}function Ds(m){var _=m.ref;if(_!==null){var E=m.stateNode;switch(m.tag){case 5:m=ae(E);break;default:m=E}typeof _=="function"?_(m):_.current=m}}function Nr(m,_,E){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(fo,_)}catch{}switch(_.tag){case 0:case 11:case 14:case 15:if(m=_.updateQueue,m!==null&&(m=m.lastEffect,m!==null)){var P=m=m.next;do{var N=P,W=N.destroy;N=N.tag,W!==void 0&&(N&2||N&4)&&il(_,E,W),P=P.next}while(P!==m)}break;case 1:if(Fo(_,E),m=_.stateNode,typeof m.componentWillUnmount=="function")try{m.props=_.memoizedProps,m.state=_.memoizedState,m.componentWillUnmount()}catch(pe){Bs(_,E,pe)}break;case 5:Fo(_,E);break;case 4:Ne?Sg(m,_,E):Ee&&Ee&&(_=_.stateNode.containerInfo,E=ft(_),Kt(_,E))}}function Oo(m,_,E){for(var P=_;;)if(Nr(m,P,E),P.child===null||Ne&&P.tag===4){if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return}P.sibling.return=P.return,P=P.sibling}else P.child.return=P,P=P.child}function Ag(m){var _=m.alternate;_!==null&&(m.alternate=null,Ag(_)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(_=m.stateNode,_!==null&&ut(_)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function wg(m){return m.tag===5||m.tag===3||m.tag===4}function ap(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||wg(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function lp(m){if(Ne){e:{for(var _=m.return;_!==null;){if(wg(_))break e;_=_.return}throw Error(o(160))}var E=_;switch(E.tag){case 5:_=E.stateNode,E.flags&32&&(Bt(_),E.flags&=-33),E=ap(m),Lc(m,E,_);break;case 3:case 4:_=E.stateNode.containerInfo,E=ap(m),up(m,E,_);break;default:throw Error(o(161))}}}function up(m,_,E){var P=m.tag;if(P===5||P===6)m=m.stateNode,_?gt(E,m,_):lt(E,m);else if(P!==4&&(m=m.child,m!==null))for(up(m,_,E),m=m.sibling;m!==null;)up(m,_,E),m=m.sibling}function Lc(m,_,E){var P=m.tag;if(P===5||P===6)m=m.stateNode,_?yt(E,m,_):nt(E,m);else if(P!==4&&(m=m.child,m!==null))for(Lc(m,_,E),m=m.sibling;m!==null;)Lc(m,_,E),m=m.sibling}function Sg(m,_,E){for(var P=_,N=!1,W,pe;;){if(!N){N=P.return;e:for(;;){if(N===null)throw Error(o(160));switch(W=N.stateNode,N.tag){case 5:pe=!1;break e;case 3:W=W.containerInfo,pe=!0;break e;case 4:W=W.containerInfo,pe=!0;break e}N=N.return}N=!0}if(P.tag===5||P.tag===6)Oo(m,P,E),pe?kt(W,P.stateNode):it(W,P.stateNode);else if(P.tag===18)pe?q(W,P.stateNode):Et(W,P.stateNode);else if(P.tag===4){if(P.child!==null){W=P.stateNode.containerInfo,pe=!0,P.child.return=P,P=P.child;continue}}else if(Nr(m,P,E),P.child!==null){P.child.return=P,P=P.child;continue}if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return,P.tag===4&&(N=!1)}P.sibling.return=P.return,P=P.sibling}}function Gl(m,_){if(Ne){switch(_.tag){case 0:case 11:case 14:case 15:sl(3,_,_.return),Qi(3,_),sl(5,_,_.return);return;case 1:return;case 5:var E=_.stateNode;if(E!=null){var P=_.memoizedProps;m=m!==null?m.memoizedProps:P;var N=_.type,W=_.updateQueue;_.updateQueue=null,W!==null&&xt(E,W,N,m,P,_)}return;case 6:if(_.stateNode===null)throw Error(o(162));E=_.memoizedProps,Ot(_.stateNode,m!==null?m.memoizedProps:E,E);return;case 3:Ge&&m!==null&&m.memoizedState.isDehydrated&&Qe(_.stateNode.containerInfo);return;case 12:return;case 13:Fc(_);return;case 19:Fc(_);return;case 17:return}throw Error(o(163))}switch(_.tag){case 0:case 11:case 14:case 15:sl(3,_,_.return),Qi(3,_),sl(5,_,_.return);return;case 12:return;case 13:Fc(_);return;case 19:Fc(_);return;case 3:Ge&&m!==null&&m.memoizedState.isDehydrated&&Qe(_.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ee){switch(_.tag){case 1:case 5:case 6:break e;case 3:case 4:_=_.stateNode,Kt(_.containerInfo,_.pendingChildren);break e}throw Error(o(163))}}function Fc(m){var _=m.updateQueue;if(_!==null){m.updateQueue=null;var E=m.stateNode;E===null&&(E=m.stateNode=new Ru),_.forEach(function(P){var N=Dv.bind(null,m,P);E.has(P)||(E.add(P),P.then(N,N))})}}function gw(m,_){for(Ft=_;Ft!==null;){_=Ft;var E=_.deletions;if(E!==null)for(var P=0;P<E.length;P++){var N=E[P];try{var W=m;Ne?Sg(W,N,_):Oo(W,N,_);var pe=N.alternate;pe!==null&&(pe.return=null),N.return=null}catch(on){Bs(N,_,on)}}if(E=_.child,_.subtreeFlags&12854&&E!==null)E.return=_,Ft=E;else for(;Ft!==null;){_=Ft;try{var Pe=_.flags;if(Pe&32&&Ne&&Bt(_.stateNode),Pe&512){var ot=_.alternate;if(ot!==null){var It=ot.ref;It!==null&&(typeof It=="function"?It(null):It.current=null)}}if(Pe&8192)switch(_.tag){case 13:if(_.memoizedState!==null){var Zt=_.alternate;(Zt===null||Zt.memoizedState===null)&&(hf=Rr())}break;case 22:var bn=_.memoizedState!==null,fn=_.alternate,Un=fn!==null&&fn.memoizedState!==null;if(E=_,Ne){e:if(P=E,N=bn,W=null,Ne)for(var Xt=P;;){if(Xt.tag===5){if(W===null){W=Xt;var es=Xt.stateNode;N?Qt(es):Ce(Xt.stateNode,Xt.memoizedProps)}}else if(Xt.tag===6){if(W===null){var wo=Xt.stateNode;N?Te(wo):Le(wo,Xt.memoizedProps)}}else if((Xt.tag!==22&&Xt.tag!==23||Xt.memoizedState===null||Xt===P)&&Xt.child!==null){Xt.child.return=Xt,Xt=Xt.child;continue}if(Xt===P)break;for(;Xt.sibling===null;){if(Xt.return===null||Xt.return===P)break e;W===Xt&&(W=null),Xt=Xt.return}W===Xt&&(W=null),Xt.sibling.return=Xt.return,Xt=Xt.sibling}}if(bn&&!Un&&E.mode&1){Ft=E;for(var Ve=E.child;Ve!==null;){for(E=Ft=Ve;Ft!==null;){P=Ft;var Be=P.child;switch(P.tag){case 0:case 11:case 14:case 15:sl(4,P,P.return);break;case 1:Fo(P,P.return);var tt=P.stateNode;if(typeof tt.componentWillUnmount=="function"){var Wt=P.return;try{tt.props=P.memoizedProps,tt.state=P.memoizedState,tt.componentWillUnmount()}catch(on){Bs(P,Wt,on)}}break;case 5:Fo(P,P.return);break;case 22:if(P.memoizedState!==null){Tg(E);continue}}Be!==null?(Be.return=P,Ft=Be):Tg(E)}Ve=Ve.sibling}}}switch(Pe&4102){case 2:lp(_),_.flags&=-3;break;case 6:lp(_),_.flags&=-3,Gl(_.alternate,_);break;case 4096:_.flags&=-4097;break;case 4100:_.flags&=-4097,Gl(_.alternate,_);break;case 4:Gl(_.alternate,_)}}catch(on){Bs(_,_.return,on)}if(E=_.sibling,E!==null){E.return=_.return,Ft=E;break}Ft=_.return}}}function sf(m,_,E){Ft=m,of(m)}function of(m,_,E){for(var P=(m.mode&1)!==0;Ft!==null;){var N=Ft,W=N.child;if(N.tag===22&&P){var pe=N.memoizedState!==null||Ps;if(!pe){var Pe=N.alternate,ot=Pe!==null&&Pe.memoizedState!==null||Hi;Pe=Ps;var It=Hi;if(Ps=pe,(Hi=ot)&&!It)for(Ft=N;Ft!==null;)pe=Ft,ot=pe.child,pe.tag===22&&pe.memoizedState!==null?Iu(N):ot!==null?(ot.return=pe,Ft=ot):Iu(N);for(;W!==null;)Ft=W,of(W),W=W.sibling;Ft=N,Ps=Pe,Hi=It}Eg(m)}else N.subtreeFlags&8772&&W!==null?(W.return=N,Ft=W):Eg(m)}}function Eg(m){for(;Ft!==null;){var _=Ft;if(_.flags&8772){var E=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:Hi||Qi(5,_);break;case 1:var P=_.stateNode;if(_.flags&4&&!Hi)if(E===null)P.componentDidMount();else{var N=_.elementType===_.type?E.memoizedProps:xr(_.type,E.memoizedProps);P.componentDidUpdate(N,E.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var W=_.updateQueue;W!==null&&Sa(_,W,P);break;case 3:var pe=_.updateQueue;if(pe!==null){if(E=null,_.child!==null)switch(_.child.tag){case 5:E=ae(_.child.stateNode);break;case 1:E=_.child.stateNode}Sa(_,pe,E)}break;case 5:var Pe=_.stateNode;E===null&&_.flags&4&&rt(Pe,_.type,_.memoizedProps,_);break;case 6:break;case 4:break;case 12:break;case 13:if(Ge&&_.memoizedState===null){var ot=_.alternate;if(ot!==null){var It=ot.memoizedState;if(It!==null){var Zt=It.dehydrated;Zt!==null&&Ze(Zt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Hi||_.flags&512&&Ds(_)}catch(bn){Bs(_,_.return,bn)}}if(_===m){Ft=null;break}if(E=_.sibling,E!==null){E.return=_.return,Ft=E;break}Ft=_.return}}function Tg(m){for(;Ft!==null;){var _=Ft;if(_===m){Ft=null;break}var E=_.sibling;if(E!==null){E.return=_.return,Ft=E;break}Ft=_.return}}function Iu(m){for(;Ft!==null;){var _=Ft;try{switch(_.tag){case 0:case 11:case 15:var E=_.return;try{Qi(4,_)}catch(ot){Bs(_,E,ot)}break;case 1:var P=_.stateNode;if(typeof P.componentDidMount=="function"){var N=_.return;try{P.componentDidMount()}catch(ot){Bs(_,N,ot)}}var W=_.return;try{Ds(_)}catch(ot){Bs(_,W,ot)}break;case 5:var pe=_.return;try{Ds(_)}catch(ot){Bs(_,pe,ot)}}}catch(ot){Bs(_,_.return,ot)}if(_===m){Ft=null;break}var Pe=_.sibling;if(Pe!==null){Pe.return=_.return,Ft=Pe;break}Ft=_.return}}var af=0,Pu=1,Du=2,ol=3,Oc=4;if(typeof Symbol=="function"&&Symbol.for){var Bu=Symbol.for;af=Bu("selector.component"),Pu=Bu("selector.has_pseudo_class"),Du=Bu("selector.role"),ol=Bu("selector.test_id"),Oc=Bu("selector.text")}function lf(m){var _=se(m);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(o(364));return _}if(m=K(m),m===null)throw Error(o(362));return m.stateNode.current}function uf(m,_){switch(_.$$typeof){case af:if(m.type===_.value)return!0;break;case Pu:e:{_=_.value,m=[m,0];for(var E=0;E<m.length;){var P=m[E++],N=m[E++],W=_[N];if(P.tag!==5||!Re(P)){for(;W!=null&&uf(P,W);)N++,W=_[N];if(N===_.length){_=!0;break e}else for(P=P.child;P!==null;)m.push(P,N),P=P.sibling}}_=!1}return _;case Du:if(m.tag===5&&De(m.stateNode,_.value))return!0;break;case Oc:if((m.tag===5||m.tag===6)&&(m=ye(m),m!==null&&0<=m.indexOf(_.value)))return!0;break;case ol:if(m.tag===5&&(m=m.memoizedProps["data-testname"],typeof m=="string"&&m.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Hl(m){switch(m.$$typeof){case af:return"<"+(D(m.value)||"Unknown")+">";case Pu:return":has("+(Hl(m)||"")+")";case Du:return'[role="'+m.value+'"]';case Oc:return'"'+m.value+'"';case ol:return'[data-testname="'+m.value+'"]';default:throw Error(o(365))}}function vo(m,_){var E=[];m=[m,0];for(var P=0;P<m.length;){var N=m[P++],W=m[P++],pe=_[W];if(N.tag!==5||!Re(N)){for(;pe!=null&&uf(N,pe);)W++,pe=_[W];if(W===_.length)E.push(N);else for(N=N.child;N!==null;)m.push(N,W),N=N.sibling}}return E}function al(m,_){if(!je)throw Error(o(363));m=lf(m),m=vo(m,_),_=[],m=Array.from(m);for(var E=0;E<m.length;){var P=m[E++];if(P.tag===5)Re(P)||_.push(P.stateNode);else for(P=P.child;P!==null;)m.push(P),P=P.sibling}return _}var Mg=Math.ceil,cf=a.ReactCurrentDispatcher,aa=a.ReactCurrentOwner,Ar=a.ReactCurrentBatchConfig,Nn=0,ci=null,wr=null,Wr=0,ms=0,Lu=wt(0),ri=0,kc=null,ba=0,yo=0,Fu=0,ll=null,Ai=null,hf=0,Vl=1/0;function Ou(){Vl=Rr()+500}var Nc=!1,Ur=null,la=null,Uc=!1,Ca=null,ku=0,Nu=0,ul=null,Br=-1,ii=0;function ar(){return Nn&6?Rr():Br!==-1?Br:Br=Rr()}function ua(m){return m.mode&1?Nn&2&&Wr!==0?Wr&-Wr:$o.transition!==null?(ii===0&&(m=gi,gi<<=1,!(gi&4194240)&&(gi=64),ii=m),ii):(m=xn,m!==0?m:We()):1}function gs(m,_,E){if(50<Nu)throw Nu=0,ul=null,Error(o(185));var P=Wl(m,_);return P===null?null:(Hs(P,_,E),(!(Nn&2)||P!==ci)&&(P===ci&&(!(Nn&2)&&(yo|=_),ri===4&&$i(P,Wr)),Ks(P,E),_===1&&Nn===0&&!(m.mode&1)&&(Ou(),$n&&bi())),P)}function Wl(m,_){m.lanes|=_;var E=m.alternate;for(E!==null&&(E.lanes|=_),E=m,m=m.return;m!==null;)m.childLanes|=_,E=m.alternate,E!==null&&(E.childLanes|=_),E=m,m=m.return;return E.tag===3?E.stateNode:null}function Ks(m,_){var E=m.callbackNode;Fl(m,_);var P=wa(m,m===ci?Wr:0);if(P===0)E!==null&&Ki(E),m.callbackNode=null,m.callbackPriority=0;else if(_=P&-P,m.callbackPriority!==_){if(E!=null&&Ki(E),_===1)m.tag===0?Zo(xo.bind(null,m)):Ja(xo.bind(null,m)),Fe?dt(function(){Nn===0&&bi()}):cs(_i,bi),E=null;else{switch(Ms(P)){case 1:E=_i;break;case 4:E=yc;break;case 16:E=ki;break;case 536870912:E=ho;break;default:E=ki}E=hp(E,Zi.bind(null,m))}m.callbackPriority=_,m.callbackNode=E}}function Zi(m,_){if(Br=-1,ii=0,Nn&6)throw Error(o(327));var E=m.callbackNode;if(Ra()&&m.callbackNode!==E)return null;var P=wa(m,m===ci?Wr:0);if(P===0)return null;if(P&30||P&m.expiredLanes||_)_=mf(m,P);else{_=P;var N=Nn;Nn|=2;var W=Rg();(ci!==m||Wr!==_)&&(Ou(),cl(m,_));do try{Rv();break}catch(Pe){Cg(m,Pe)}while(!0);ti(),cf.current=W,Nn=N,wr!==null?_=0:(ci=null,Wr=0,_=ri)}if(_!==0){if(_===2&&(N=Do(m),N!==0&&(P=N,_=ff(m,N))),_===1)throw E=kc,cl(m,0),$i(m,P),Ks(m,Rr()),E;if(_===6)$i(m,P);else{if(N=m.current.alternate,!(P&30)&&!bg(N)&&(_=mf(m,P),_===2&&(W=Do(m),W!==0&&(P=W,_=ff(m,W))),_===1))throw E=kc,cl(m,0),$i(m,P),Ks(m,Rr()),E;switch(m.finishedWork=N,m.finishedLanes=P,_){case 0:case 1:throw Error(o(345));case 2:ca(m,Ai);break;case 3:if($i(m,P),(P&130023424)===P&&(_=hf+500-Rr(),10<_)){if(wa(m,0)!==0)break;if(N=m.suspendedLanes,(N&P)!==P){ar(),m.pingedLanes|=m.suspendedLanes&N;break}m.timeoutHandle=_e(ca.bind(null,m,Ai),_);break}ca(m,Ai);break;case 4:if($i(m,P),(P&4194240)===P)break;for(_=m.eventTimes,N=-1;0<P;){var pe=31-En(P);W=1<<pe,pe=_[pe],pe>N&&(N=pe),P&=~W}if(P=N,P=Rr()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*Mg(P/1960))-P,10<P){m.timeoutHandle=_e(ca.bind(null,m,Ai),P);break}ca(m,Ai);break;case 5:ca(m,Ai);break;default:throw Error(o(329))}}}return Ks(m,Rr()),m.callbackNode===E?Zi.bind(null,m):null}function ff(m,_){var E=ll;return m.current.memoizedState.isDehydrated&&(cl(m,_).flags|=256),m=mf(m,_),m!==2&&(_=Ai,Ai=E,_!==null&&df(_)),m}function df(m){Ai===null?Ai=m:Ai.push.apply(Ai,m)}function bg(m){for(var _=m;;){if(_.flags&16384){var E=_.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var P=0;P<E.length;P++){var N=E[P],W=N.getSnapshot;N=N.value;try{if(!ai(W(),N))return!1}catch{return!1}}}if(E=_.child,_.subtreeFlags&16384&&E!==null)E.return=_,_=E;else{if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function $i(m,_){for(_&=~Fu,_&=~yo,m.suspendedLanes|=_,m.pingedLanes&=~_,m=m.expirationTimes;0<_;){var E=31-En(_),P=1<<E;m[E]=-1,_&=~P}}function xo(m){if(Nn&6)throw Error(o(327));Ra();var _=wa(m,0);if(!(_&1))return Ks(m,Rr()),null;var E=mf(m,_);if(m.tag!==0&&E===2){var P=Do(m);P!==0&&(_=P,E=ff(m,P))}if(E===1)throw E=kc,cl(m,0),$i(m,_),Ks(m,Rr()),E;if(E===6)throw Error(o(345));return m.finishedWork=m.current.alternate,m.finishedLanes=_,ca(m,Ai),Ks(m,Rr()),null}function zc(m){Ca!==null&&Ca.tag===0&&!(Nn&6)&&Ra();var _=Nn;Nn|=1;var E=Ar.transition,P=xn;try{if(Ar.transition=null,xn=1,m)return m()}finally{xn=P,Ar.transition=E,Nn=_,!(Nn&6)&&bi()}}function pf(){ms=Lu.current,Tt(Lu)}function cl(m,_){m.finishedWork=null,m.finishedLanes=0;var E=m.timeoutHandle;if(E!==Xe&&(m.timeoutHandle=Xe,be(E)),wr!==null)for(E=wr.return;E!==null;){var P=E;switch(xi(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&In();break;case 3:bc(),Tt(Nt),Tt(un),xu();break;case 5:sg(P);break;case 4:bc();break;case 13:Tt(Kr);break;case 19:Tt(Kr);break;case 10:Xr(P.type._context);break;case 22:case 23:pf()}E=E.return}if(ci=m,wr=m=hl(m.current,null),Wr=ms=_,ri=0,kc=null,Fu=yo=ba=0,Ai=ll=null,li!==null){for(_=0;_<li.length;_++)if(E=li[_],P=E.interleaved,P!==null){E.interleaved=null;var N=P.next,W=E.pending;if(W!==null){var pe=W.next;W.next=N,P.next=pe}E.pending=P}li=null}return m}function Cg(m,_){do{var E=wr;try{if(ti(),jh.current=Dc,Wd){for(var P=Yr.memoizedState;P!==null;){var N=P.queue;N!==null&&(N.pending=null),P=P.next}Wd=!1}if(Au=0,Ui=Ni=Yr=null,Ea=!1,wu=0,aa.current=null,E===null||E.return===null){ri=1,kc=_,wr=null;break}e:{var W=m,pe=E.return,Pe=E,ot=_;if(_=Wr,Pe.flags|=32768,ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var It=ot,Zt=Pe,bn=Zt.tag;if(!(Zt.mode&1)&&(bn===0||bn===11||bn===15)){var fn=Zt.alternate;fn?(Zt.updateQueue=fn.updateQueue,Zt.memoizedState=fn.memoizedState,Zt.lanes=fn.lanes):(Zt.updateQueue=null,Zt.memoizedState=null)}var Un=mg(pe);if(Un!==null){Un.flags&=-257,Eu(Un,pe,Pe,W,_),Un.mode&1&&el(W,It,_),_=Un,ot=It;var Xt=_.updateQueue;if(Xt===null){var es=new Set;es.add(ot),_.updateQueue=es}else Xt.add(ot);break e}else{if(!(_&1)){el(W,It,_),cp();break e}ot=Error(o(426))}}else if(qn&&Pe.mode&1){var wo=mg(pe);if(wo!==null){!(wo.flags&65536)&&(wo.flags|=256),Eu(wo,pe,Pe,W,_),Gd(ot);break e}}W=ot,ri!==4&&(ri=2),ll===null?ll=[W]:ll.push(W),ot=pg(ot,Pe),Pe=pe;do{switch(Pe.tag){case 3:Pe.flags|=65536,_&=-_,Pe.lanes|=_;var Ve=Mv(Pe,ot,_);pu(Pe,Ve);break e;case 1:W=ot;var Be=Pe.type,tt=Pe.stateNode;if(!(Pe.flags&128)&&(typeof Be.getDerivedStateFromError=="function"||tt!==null&&typeof tt.componentDidCatch=="function"&&(la===null||!la.has(tt)))){Pe.flags|=65536,_&=-_,Pe.lanes|=_;var Wt=ep(Pe,W,_);pu(Pe,Wt);break e}}Pe=Pe.return}while(Pe!==null)}Pg(E)}catch(on){_=on,wr===E&&E!==null&&(wr=E=E.return);continue}break}while(!0)}function Rg(){var m=cf.current;return cf.current=Dc,m===null?Dc:m}function cp(){(ri===0||ri===3||ri===2)&&(ri=4),ci===null||!(ba&268435455)&&!(yo&268435455)||$i(ci,Wr)}function mf(m,_){var E=Nn;Nn|=2;var P=Rg();ci===m&&Wr===_||cl(m,_);do try{Cv();break}catch(N){Cg(m,N)}while(!0);if(ti(),Nn=E,cf.current=P,wr!==null)throw Error(o(261));return ci=null,Wr=0,ri}function Cv(){for(;wr!==null;)Ig(wr)}function Rv(){for(;wr!==null&&!Vs();)Ig(wr)}function Ig(m){var _=Lg(m.alternate,m,ms);m.memoizedProps=m.pendingProps,_===null?Pg(m):wr=_,aa.current=null}function Pg(m){var _=m;do{var E=_.alternate;if(m=_.return,_.flags&32768){if(E=op(E,_),E!==null){E.flags&=32767,wr=E;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{ri=6,wr=null;return}}else if(E=rp(E,_,ms),E!==null){wr=E;return}if(_=_.sibling,_!==null){wr=_;return}wr=_=m}while(_!==null);ri===0&&(ri=5)}function ca(m,_){var E=xn,P=Ar.transition;try{Ar.transition=null,xn=1,Iv(m,_,E)}finally{Ar.transition=P,xn=E}return null}function Iv(m,_,E){do Ra();while(Ca!==null);if(Nn&6)throw Error(o(327));var P=m.finishedWork,N=m.finishedLanes;if(P===null)return null;if(m.finishedWork=null,m.finishedLanes=0,P===m.current)throw Error(o(177));m.callbackNode=null,m.callbackPriority=0;var W=P.lanes|P.childLanes;if(Ji(m,W),m===ci&&(wr=ci=null,Wr=0),!(P.subtreeFlags&2064)&&!(P.flags&2064)||Uc||(Uc=!0,hp(ki,function(){return Ra(),null})),W=(P.flags&15990)!==0,P.subtreeFlags&15990||W){W=Ar.transition,Ar.transition=null;var pe=xn;xn=1;var Pe=Nn;Nn|=4,aa.current=null,xg(m,P),gw(m,P),$(m.containerInfo),m.current=P,sf(P),vc(),Nn=Pe,xn=pe,Ar.transition=W}else m.current=P;if(Uc&&(Uc=!1,Ca=m,ku=N),W=m.pendingLanes,W===0&&(la=null),bs(P.stateNode),Ks(m,Rr()),_!==null)for(E=m.onRecoverableError,P=0;P<_.length;P++)E(_[P]);if(Nc)throw Nc=!1,m=Ur,Ur=null,m;return ku&1&&m.tag!==0&&Ra(),W=m.pendingLanes,W&1?m===ul?Nu++:(Nu=0,ul=m):Nu=0,bi(),null}function Ra(){if(Ca!==null){var m=Ms(ku),_=Ar.transition,E=xn;try{if(Ar.transition=null,xn=16>m?16:m,Ca===null)var P=!1;else{if(m=Ca,Ca=null,ku=0,Nn&6)throw Error(o(331));var N=Nn;for(Nn|=4,Ft=m.current;Ft!==null;){var W=Ft,pe=W.child;if(Ft.flags&16){var Pe=W.deletions;if(Pe!==null){for(var ot=0;ot<Pe.length;ot++){var It=Pe[ot];for(Ft=It;Ft!==null;){var Zt=Ft;switch(Zt.tag){case 0:case 11:case 15:sl(8,Zt,W)}var bn=Zt.child;if(bn!==null)bn.return=Zt,Ft=bn;else for(;Ft!==null;){Zt=Ft;var fn=Zt.sibling,Un=Zt.return;if(Ag(Zt),Zt===It){Ft=null;break}if(fn!==null){fn.return=Un,Ft=fn;break}Ft=Un}}}var Xt=W.alternate;if(Xt!==null){var es=Xt.child;if(es!==null){Xt.child=null;do{var wo=es.sibling;es.sibling=null,es=wo}while(es!==null)}}Ft=W}}if(W.subtreeFlags&2064&&pe!==null)pe.return=W,Ft=pe;else e:for(;Ft!==null;){if(W=Ft,W.flags&2048)switch(W.tag){case 0:case 11:case 15:sl(9,W,W.return)}var Ve=W.sibling;if(Ve!==null){Ve.return=W.return,Ft=Ve;break e}Ft=W.return}}var Be=m.current;for(Ft=Be;Ft!==null;){pe=Ft;var tt=pe.child;if(pe.subtreeFlags&2064&&tt!==null)tt.return=pe,Ft=tt;else e:for(pe=Be;Ft!==null;){if(Pe=Ft,Pe.flags&2048)try{switch(Pe.tag){case 0:case 11:case 15:Qi(9,Pe)}}catch(on){Bs(Pe,Pe.return,on)}if(Pe===pe){Ft=null;break e}var Wt=Pe.sibling;if(Wt!==null){Wt.return=Pe.return,Ft=Wt;break e}Ft=Pe.return}}if(Nn=N,bi(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(fo,m)}catch{}P=!0}return P}finally{xn=E,Ar.transition=_}}return!1}function gf(m,_,E){_=pg(E,_),_=Mv(m,_,1),ta(m,_),_=ar(),m=Wl(m,1),m!==null&&(Hs(m,1,_),Ks(m,_))}function Bs(m,_,E){if(m.tag===3)gf(m,m,E);else for(;_!==null;){if(_.tag===3){gf(_,m,E);break}else if(_.tag===1){var P=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(la===null||!la.has(P))){m=pg(E,m),m=ep(_,m,1),ta(_,m),m=ar(),_=Wl(_,1),_!==null&&(Hs(_,1,m),Ks(_,m));break}}_=_.return}}function Dg(m,_,E){var P=m.pingCache;P!==null&&P.delete(_),_=ar(),m.pingedLanes|=m.suspendedLanes&E,ci===m&&(Wr&E)===E&&(ri===4||ri===3&&(Wr&130023424)===Wr&&500>Rr()-hf?cl(m,0):Fu|=E),Ks(m,_)}function Bg(m,_){_===0&&(m.mode&1?(_=dn,dn<<=1,!(dn&130023424)&&(dn=4194304)):_=1);var E=ar();m=Wl(m,_),m!==null&&(Hs(m,_,E),Ks(m,E))}function Pv(m){var _=m.memoizedState,E=0;_!==null&&(E=_.retryLane),Bg(m,E)}function Dv(m,_){var E=0;switch(m.tag){case 13:var P=m.stateNode,N=m.memoizedState;N!==null&&(E=N.retryLane);break;case 19:P=m.stateNode;break;default:throw Error(o(314))}P!==null&&P.delete(_),Bg(m,E)}var Lg;Lg=function(m,_,E){if(m!==null)if(m.memoizedProps!==_.pendingProps||Nt.current)Gi=!0;else{if(!(m.lanes&E)&&!(_.flags&128))return Gi=!1,sp(m,_,E);Gi=!!(m.flags&131072)}else Gi=!1,qn&&_.flags&1048576&&yi(_,U,_.index);switch(_.lanes=0,_.tag){case 2:var P=_.type;m!==null&&(m.alternate=null,_.alternate=null,_.flags|=2),m=_.pendingProps;var N=Sn(_,un.current);Jr(_,E),N=Cc(null,_,P,m,N,E);var W=Nl();return _.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,nn(P)?(W=!0,wn(_)):W=!1,_.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Ka(_),N.updater=gu,_.stateNode=N,N._reactInternals=_,wc(_,P,m,E),_=ps(null,_,P,!0,W,E)):(_.tag=0,qn&&W&&jn(_),ni(null,_,N,E),_=_.child),_;case 16:P=_.elementType;e:{switch(m!==null&&(m.alternate=null,_.alternate=null,_.flags|=2),m=_.pendingProps,N=P._init,P=N(P._payload),_.type=P,N=_.tag=_w(P),m=xr(P,m),N){case 0:_=rl(null,_,P,m,E);break e;case 1:_=Mu(null,_,P,m,E);break e;case 11:_=Dr(null,_,P,m,E);break e;case 14:_=Mr(null,_,P,xr(P.type,m),E);break e}throw Error(o(306,P,""))}return _;case 0:return P=_.type,N=_.pendingProps,N=_.elementType===P?N:xr(P,N),rl(m,_,P,N,E);case 1:return P=_.type,N=_.pendingProps,N=_.elementType===P?N:xr(P,N),Mu(m,_,P,N,E);case 3:e:{if(ef(_),m===null)throw Error(o(387));P=_.pendingProps,W=_.memoizedState,N=W.element,du(m,_),mu(_,P,null,E);var pe=_.memoizedState;if(P=pe.element,Ge&&W.isDehydrated)if(W={element:P,isDehydrated:!1,cache:pe.cache,transitions:pe.transitions},_.updateQueue.baseState=W,_.memoizedState=W,_.flags&256){N=Error(o(423)),_=_g(m,_,P,E,N);break e}else if(P!==N){N=Error(o(424)),_=_g(m,_,P,E,N);break e}else for(Ge&&(Vr=kr(_.stateNode.containerInfo),or=_,qn=!0,ds=null,na=!1),E=Av(_,null,P,E),_.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(Sc(),P===N){_=Js(m,_,E);break e}ni(m,_,P,E)}_=_.child}return _;case 5:return wv(_),m===null&&Ol(_),P=_.type,N=_.pendingProps,W=m!==null?m.memoizedProps:null,pe=N.children,he(P,N)?pe=null:W!==null&&he(P,W)&&(_.flags|=32),Is(m,_),ni(m,_,pe,E),_.child;case 6:return m===null&&Ol(_),null;case 13:return vg(m,_,E);case 4:return Hd(_,_.stateNode.containerInfo),P=_.pendingProps,m===null?_.child=Za(_,null,P,E):ni(m,_,P,E),_.child;case 11:return P=_.type,N=_.pendingProps,N=_.elementType===P?N:xr(P,N),Dr(m,_,P,N,E);case 7:return ni(m,_,_.pendingProps,E),_.child;case 8:return ni(m,_,_.pendingProps.children,E),_.child;case 12:return ni(m,_,_.pendingProps.children,E),_.child;case 10:e:{if(P=_.type._context,N=_.pendingProps,W=_.memoizedProps,pe=N.value,qs(_,P,pe),W!==null)if(ai(W.value,pe)){if(W.children===N.children&&!Nt.current){_=Js(m,_,E);break e}}else for(W=_.child,W!==null&&(W.return=_);W!==null;){var Pe=W.dependencies;if(Pe!==null){pe=W.child;for(var ot=Pe.firstContext;ot!==null;){if(ot.context===P){if(W.tag===1){ot=po(-1,E&-E),ot.tag=2;var It=W.updateQueue;if(It!==null){It=It.shared;var Zt=It.pending;Zt===null?ot.next=ot:(ot.next=Zt.next,Zt.next=ot),It.pending=ot}}W.lanes|=E,ot=W.alternate,ot!==null&&(ot.lanes|=E),Hr(W.return,E,_),Pe.lanes|=E;break}ot=ot.next}}else if(W.tag===10)pe=W.type===_.type?null:W.child;else if(W.tag===18){if(pe=W.return,pe===null)throw Error(o(341));pe.lanes|=E,Pe=pe.alternate,Pe!==null&&(Pe.lanes|=E),Hr(pe,E,_),pe=W.sibling}else pe=W.child;if(pe!==null)pe.return=W;else for(pe=W;pe!==null;){if(pe===_){pe=null;break}if(W=pe.sibling,W!==null){W.return=pe.return,pe=W;break}pe=pe.return}W=pe}ni(m,_,N.children,E),_=_.child}return _;case 9:return N=_.type,P=_.pendingProps.children,Jr(_,E),N=Ir(N),P=P(N),_.flags|=1,ni(m,_,P,E),_.child;case 14:return P=_.type,N=xr(P,_.pendingProps),N=xr(P.type,N),Mr(m,_,P,N,E);case 15:return nl(m,_,_.type,_.pendingProps,E);case 17:return P=_.type,N=_.pendingProps,N=_.elementType===P?N:xr(P,N),m!==null&&(m.alternate=null,_.alternate=null,_.flags|=2),_.tag=1,nn(P)?(m=!0,wn(_)):m=!1,Jr(_,E),_u(_,P,N),wc(_,P,N,E),ps(null,_,P,!0,m,E);case 19:return Cu(m,_,E);case 22:return Yi(m,_,E)}throw Error(o(156,_.tag))};function hp(m,_){return cs(m,_)}function Bv(m,_,E,P){this.tag=m,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ao(m,_,E,P){return new Bv(m,_,E,P)}function fp(m){return m=m.prototype,!(!m||!m.isReactComponent)}function _w(m){if(typeof m=="function")return fp(m)?1:0;if(m!=null){if(m=m.$$typeof,m===A)return 11;if(m===M)return 14}return 2}function hl(m,_){var E=m.alternate;return E===null?(E=Ao(m.tag,_,m.key,m.mode),E.elementType=m.elementType,E.type=m.type,E.stateNode=m.stateNode,E.alternate=m,m.alternate=E):(E.pendingProps=_,E.type=m.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=m.flags&14680064,E.childLanes=m.childLanes,E.lanes=m.lanes,E.child=m.child,E.memoizedProps=m.memoizedProps,E.memoizedState=m.memoizedState,E.updateQueue=m.updateQueue,_=m.dependencies,E.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},E.sibling=m.sibling,E.index=m.index,E.ref=m.ref,E}function dp(m,_,E,P,N,W){var pe=2;if(P=m,typeof m=="function")fp(m)&&(pe=1);else if(typeof m=="string")pe=5;else e:switch(m){case f:return Uu(E.children,N,W,_);case c:pe=8,N|=8;break;case d:return m=Ao(12,E,_,N|2),m.elementType=d,m.lanes=W,m;case x:return m=Ao(13,E,_,N),m.elementType=x,m.lanes=W,m;case w:return m=Ao(19,E,_,N),m.elementType=w,m.lanes=W,m;case R:return _f(E,N,W,_);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case g:pe=10;break e;case v:pe=9;break e;case A:pe=11;break e;case M:pe=14;break e;case b:pe=16,P=null;break e}throw Error(o(130,m==null?m:typeof m,""))}return _=Ao(pe,E,_,N),_.elementType=m,_.type=P,_.lanes=W,_}function Uu(m,_,E,P){return m=Ao(7,m,P,_),m.lanes=E,m}function _f(m,_,E,P){return m=Ao(22,m,P,_),m.elementType=R,m.lanes=E,m.stateNode={},m}function pp(m,_,E){return m=Ao(6,m,null,_),m.lanes=E,m}function mp(m,_,E){return _=Ao(4,m.children!==null?m.children:[],m.key,_),_.lanes=E,_.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},_}function gp(m,_,E,P,N){this.tag=_,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xa(0),this.expirationTimes=Xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xa(0),this.identifierPrefix=P,this.onRecoverableError=N,Ge&&(this.mutableSourceEagerHydrationData=null)}function Lv(m,_,E,P,N,W,pe,Pe,ot){return m=new gp(m,_,E,Pe,ot),_===1?(_=1,W===!0&&(_|=8)):_=0,W=Ao(3,null,null,_),m.current=W,W.stateNode=m,W.memoizedState={element:P,isDehydrated:E,cache:null,transitions:null},Ka(W),m}function Fv(m){if(!m)return Vt;m=m._reactInternals;e:{if(C(m)!==m||m.tag!==1)throw Error(o(170));var _=m;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(nn(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(o(171))}if(m.tag===1){var E=m.type;if(nn(E))return Vn(m,E,_)}return _}function Ov(m){var _=m._reactInternals;if(_===void 0)throw typeof m.render=="function"?Error(o(188)):(m=Object.keys(m).join(","),Error(o(268,m)));return m=H(_),m===null?null:m.stateNode}function ko(m,_){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var E=m.retryLane;m.retryLane=E!==0&&E<_?E:_}}function vf(m,_){ko(m,_),(m=m.alternate)&&ko(m,_)}function _p(m){return m=H(m),m===null?null:m.stateNode}function kv(){return null}return t.attemptContinuousHydration=function(m){if(m.tag===13){var _=ar();gs(m,134217728,_),vf(m,134217728)}},t.attemptHydrationAtCurrentPriority=function(m){if(m.tag===13){var _=ar(),E=ua(m);gs(m,E,_),vf(m,E)}},t.attemptSynchronousHydration=function(m){switch(m.tag){case 3:var _=m.stateNode;if(_.current.memoizedState.isDehydrated){var E=us(_.pendingLanes);E!==0&&(Cr(_,E|1),Ks(_,Rr()),!(Nn&6)&&(Ou(),bi()))}break;case 13:var P=ar();zc(function(){return gs(m,1,P)}),vf(m,1)}},t.batchedUpdates=function(m,_){var E=Nn;Nn|=1;try{return m(_)}finally{Nn=E,Nn===0&&(Ou(),$n&&bi())}},t.createComponentSelector=function(m){return{$$typeof:af,value:m}},t.createContainer=function(m,_,E,P,N,W,pe){return Lv(m,_,!1,null,E,P,N,W,pe)},t.createHasPseudoClassSelector=function(m){return{$$typeof:Pu,value:m}},t.createHydrationContainer=function(m,_,E,P,N,W,pe,Pe,ot){return m=Lv(E,P,!0,m,N,W,pe,Pe,ot),m.context=Fv(null),E=m.current,P=ar(),N=ua(E),W=po(P,N),W.callback=_??null,ta(E,W),m.current.lanes=N,Hs(m,N,P),Ks(m,P),m},t.createPortal=function(m,_,E){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:P==null?null:""+P,children:m,containerInfo:_,implementation:E}},t.createRoleSelector=function(m){return{$$typeof:Du,value:m}},t.createTestNameSelector=function(m){return{$$typeof:ol,value:m}},t.createTextSelector=function(m){return{$$typeof:Oc,value:m}},t.deferredUpdates=function(m){var _=xn,E=Ar.transition;try{return Ar.transition=null,xn=16,m()}finally{xn=_,Ar.transition=E}},t.discreteUpdates=function(m,_,E,P,N){var W=xn,pe=Ar.transition;try{return Ar.transition=null,xn=1,m(_,E,P,N)}finally{xn=W,Ar.transition=pe,Nn===0&&Ou()}},t.findAllNodes=al,t.findBoundingRects=function(m,_){if(!je)throw Error(o(363));_=al(m,_),m=[];for(var E=0;E<_.length;E++)m.push(J(_[E]));for(_=m.length-1;0<_;_--){E=m[_];for(var P=E.x,N=P+E.width,W=E.y,pe=W+E.height,Pe=_-1;0<=Pe;Pe--)if(_!==Pe){var ot=m[Pe],It=ot.x,Zt=It+ot.width,bn=ot.y,fn=bn+ot.height;if(P>=It&&W>=bn&&N<=Zt&&pe<=fn){m.splice(_,1);break}else if(P!==It||E.width!==ot.width||fn<W||bn>pe){if(!(W!==bn||E.height!==ot.height||Zt<P||It>N)){It>P&&(ot.width+=It-P,ot.x=P),Zt<N&&(ot.width=N-It),m.splice(_,1);break}}else{bn>W&&(ot.height+=bn-W,ot.y=W),fn<pe&&(ot.height=pe-bn),m.splice(_,1);break}}}return m},t.findHostInstance=Ov,t.findHostInstanceWithNoPortals=function(m){return m=k(m),m=m!==null?Z(m):null,m===null?null:m.stateNode},t.findHostInstanceWithWarning=function(m){return Ov(m)},t.flushControlled=function(m){var _=Nn;Nn|=1;var E=Ar.transition,P=xn;try{Ar.transition=null,xn=1,m()}finally{xn=P,Ar.transition=E,Nn=_,Nn===0&&(Ou(),bi())}},t.flushPassiveEffects=Ra,t.flushSync=zc,t.focusWithin=function(m,_){if(!je)throw Error(o(363));for(m=lf(m),_=vo(m,_),_=Array.from(_),m=0;m<_.length;){var E=_[m++];if(!Re(E)){if(E.tag===5&&ke(E.stateNode))return!0;for(E=E.child;E!==null;)_.push(E),E=E.sibling}}return!1},t.getCurrentUpdatePriority=function(){return xn},t.getFindAllNodesFailureDescription=function(m,_){if(!je)throw Error(o(363));var E=0,P=[];m=[lf(m),0];for(var N=0;N<m.length;){var W=m[N++],pe=m[N++],Pe=_[pe];if((W.tag!==5||!Re(W))&&(uf(W,Pe)&&(P.push(Hl(Pe)),pe++,pe>E&&(E=pe)),pe<_.length))for(W=W.child;W!==null;)m.push(W,pe),W=W.sibling}if(E<_.length){for(m=[];E<_.length;E++)m.push(Hl(_[E]));return`findAllNodes was able to match part of the selector:
  `+(P.join(" > ")+`

No matching component was found for:
  `)+m.join(" > ")}return null},t.getPublicRootInstance=function(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return ae(m.child.stateNode);default:return m.child.stateNode}},t.injectIntoDevTools=function(m){if(m={bundleType:m.bundleType,version:m.version,rendererPackageName:m.rendererPackageName,rendererConfig:m.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:_p,findFiberByHostInstance:m.findFiberByHostInstance||kv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")m=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)m=!0;else{try{fo=_.inject(m),hs=_}catch{}m=!!_.checkDCE}}return m},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(m,_,E,P){if(!je)throw Error(o(363));m=al(m,_);var N=qe(m,E,P).disconnect;return{disconnect:function(){N()}}},t.registerMutableSourceForHydration=function(m,_){var E=_._getVersion;E=E(_._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[_,E]:m.mutableSourceEagerHydrationData.push(_,E)},t.runWithPriority=function(m,_){var E=xn;try{return xn=m,_()}finally{xn=E}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(m,_,E,P){var N=_.current,W=ar(),pe=ua(N);return E=Fv(E),_.context===null?_.context=E:_.pendingContext=E,_=po(W,pe),_.payload={element:m},P=P===void 0?null:P,P!==null&&(_.callback=P),ta(N,_),m=gs(N,pe,W),m!==null&&Ya(m,N,pe),pe},t}),XS}var k3;function SX(){return k3||(k3=1,WS.exports=wX()),WS.exports}var EX=SX();const TX=kh(EX);var N3=wU();const D2={},SU=i=>void Object.assign(D2,i);function MX(i,e){function t(f,{args:c=[],attach:d,...g},v){let A=`${f[0].toUpperCase()}${f.slice(1)}`,x;if(f==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const w=g.object;x=Xp(w,{type:f,root:v,attach:d,primitive:!0})}else{const w=D2[A];if(!w)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(c))throw new Error("R3F: The args prop must be an array!");x=Xp(new w(...c),{type:f,root:v,attach:d,memoizedProps:{args:c}})}return x.__r3f.attach===void 0&&(x instanceof Dn?x.__r3f.attach="geometry":x instanceof Xi&&(x.__r3f.attach="material")),A!=="inject"&&YS(x,g),x}function n(f,c){let d=!1;if(c){var g,v;(g=c.__r3f)!=null&&g.attach?KS(f,c,c.__r3f.attach):c.isObject3D&&f.isObject3D&&(f.add(c),d=!0),d||(v=f.__r3f)==null||v.objects.push(c),c.__r3f||Xp(c,{}),c.__r3f.parent=f,mb(c),Jp(c)}}function r(f,c,d){let g=!1;if(c){var v,A;if((v=c.__r3f)!=null&&v.attach)KS(f,c,c.__r3f.attach);else if(c.isObject3D&&f.isObject3D){c.parent=f,c.dispatchEvent({type:"added"}),f.dispatchEvent({type:"childadded",child:c});const x=f.children.filter(M=>M!==c),w=x.indexOf(d);f.children=[...x.slice(0,w),c,...x.slice(w)],g=!0}g||(A=f.__r3f)==null||A.objects.push(c),c.__r3f||Xp(c,{}),c.__r3f.parent=f,mb(c),Jp(c)}}function s(f,c,d=!1){f&&[...f].forEach(g=>o(c,g,d))}function o(f,c,d){if(c){var g,v,A;if(c.__r3f&&(c.__r3f.parent=null),(g=f.__r3f)!=null&&g.objects&&(f.__r3f.objects=f.__r3f.objects.filter(R=>R!==c)),(v=c.__r3f)!=null&&v.attach)V3(f,c,c.__r3f.attach);else if(c.isObject3D&&f.isObject3D){var x;f.remove(c),(x=c.__r3f)!=null&&x.root&&LX(w1(c),c)}const M=(A=c.__r3f)==null?void 0:A.primitive,b=!M&&(d===void 0?c.dispose!==null:d);if(!M){var w;s((w=c.__r3f)==null?void 0:w.objects,c,b),s(c.children,c,b)}if(delete c.__r3f,b&&c.dispose&&c.type!=="Scene"){const R=()=>{try{c.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?N3.unstable_scheduleCallback(N3.unstable_IdlePriority,R):R()}Jp(f)}}function a(f,c,d,g){var v;const A=(v=f.__r3f)==null?void 0:v.parent;if(!A)return;const x=t(c,d,f.__r3f.root);if(f.children){for(const w of f.children)w.__r3f&&n(x,w);f.children=f.children.filter(w=>!w.__r3f)}f.__r3f.objects.forEach(w=>n(x,w)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(A,f),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),n(A,x),x.raycast&&x.__r3f.eventCount&&w1(x).getState().internal.interaction.push(x),[g,g.alternate].forEach(w=>{w!==null&&(w.stateNode=x,w.ref&&(typeof w.ref=="function"?w.ref(x):w.ref.current=x))})}const l=()=>{};return{reconciler:TX({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,c)=>{if(!c)return;const d=f.getState().scene;d.__r3f&&(d.__r3f.root=f,n(d,c))},removeChildFromContainer:(f,c)=>{c&&o(f.getState().scene,c)},insertInContainerBefore:(f,c,d)=>{if(!c||!d)return;const g=f.getState().scene;g.__r3f&&r(g,c,d)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var c;return!!((c=f==null?void 0:f.__r3f)!=null?c:{}).handlers},prepareUpdate(f,c,d,g){var v;if(((v=f==null?void 0:f.__r3f)!=null?v:{}).primitive&&g.object&&g.object!==f)return[!0];{const{args:x=[],children:w,...M}=g,{args:b=[],children:R,...F}=d;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((D,I)=>D!==b[I]))return[!0];const O=IU(f,M,F,!0);return O.changes.length?[!1,O]:null}},commitUpdate(f,[c,d],g,v,A,x){c?a(f,g,A,x):YS(f,d)},commitMount(f,c,d,g){var v;const A=(v=f.__r3f)!=null?v:{};f.raycast&&A.handlers&&A.eventCount&&w1(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Xp(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var c;const{attach:d,parent:g}=(c=f.__r3f)!=null?c:{};d&&g&&V3(g,f,d),f.isObject3D&&(f.visible=!1),Jp(f)},unhideInstance(f,c){var d;const{attach:g,parent:v}=(d=f.__r3f)!=null?d:{};g&&v&&KS(v,f,g),(f.isObject3D&&c.visible==null||c.visible)&&(f.visible=!0),Jp(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():om.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&jr.fun(performance.now)?performance.now:jr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:YS}}var U3,z3;const JS=i=>"colorSpace"in i||"outputColorSpace"in i,EU=()=>{var i;return(i=D2.ColorManagement)!=null?i:null},TU=i=>i&&i.isOrthographicCamera,bX=i=>i&&i.hasOwnProperty("current"),ov=typeof window<"u"&&((U3=window.document)!=null&&U3.createElement||((z3=window.navigator)==null?void 0:z3.product)==="ReactNative")?me.useLayoutEffect:me.useEffect;function MU(i){const e=me.useRef(i);return ov(()=>void(e.current=i),[i]),e}function CX({set:i}){return ov(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class bU extends me.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}bU.getDerivedStateFromError=()=>({error:!0});const CU="__default",G3=new Map,RX=i=>i&&!!i.memoized&&!!i.changes;function RU(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}const n_=i=>{var e;return(e=i.__r3f)==null?void 0:e.root.getState()};function w1(i){let e=i.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const jr={obj:i=>i===Object(i)&&!jr.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(jr.str(i)||jr.num(i)||jr.boo(i))return i===e;const s=jr.obj(i);if(s&&n==="reference")return i===e;const o=jr.arr(i);if(o&&t==="reference")return i===e;if((o||s)&&i===e)return!0;let a;for(a in i)if(!(a in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(a in r?e:i)if(!jr.equ(i[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:i)if(i[a]!==e[a])return!1;if(jr.und(a)){if(o&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function IX(i){const e={nodes:{},materials:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function PX(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const e in i)e.dispose==null||e.dispose(),delete i[e]}function Xp(i,e){const t=i;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},i}function pb(i,e){let t=i;if(e.includes("-")){const n=e.split("-"),r=n.pop();return t=n.reduce((s,o)=>s[o],i),{target:t,key:r}}else return{target:t,key:e}}const H3=/-\d+$/;function KS(i,e,t){if(jr.str(t)){if(H3.test(t)){const s=t.replace(H3,""),{target:o,key:a}=pb(i,s);Array.isArray(o[a])||(o[a]=[])}const{target:n,key:r}=pb(i,t);e.__r3f.previousAttach=n[r],n[r]=e}else e.__r3f.previousAttach=t(i,e)}function V3(i,e,t){var n,r;if(jr.str(t)){const{target:s,key:o}=pb(i,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(i,e);(r=e.__r3f)==null||delete r.previousAttach}function IU(i,{children:e,key:t,ref:n,...r},{children:s,key:o,ref:a,...l}={},u=!1){const f=i.__r3f,c=Object.entries(r),d=[];if(u){const v=Object.keys(l);for(let A=0;A<v.length;A++)r.hasOwnProperty(v[A])||c.unshift([v[A],CU+"remove"])}c.forEach(([v,A])=>{var x;if((x=i.__r3f)!=null&&x.primitive&&v==="object"||jr.equ(A,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return d.push([v,A,!0,[]]);let w=[];v.includes("-")&&(w=v.split("-")),d.push([v,A,!1,w]);for(const M in r){const b=r[M];M.startsWith(`${v}-`)&&d.push([M,b,!1,M.split("-")])}});const g={...r};return f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.args&&(g.args=f.memoizedProps.args),f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.attach&&(g.attach=f.memoizedProps.attach),{memoized:g,changes:d}}const DX=typeof process<"u"&&!1;function YS(i,e){var t;const n=i.__r3f,r=n==null?void 0:n.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=RX(e)?e:IU(i,e),l=n==null?void 0:n.eventCount;i.__r3f&&(i.__r3f.memoizedProps=o);for(let f=0;f<a.length;f++){let[c,d,g,v]=a[f];if(JS(i)){const M="srgb",b="srgb-linear";c==="encoding"?(c="colorSpace",d=d===3001?M:b):c==="outputEncoding"&&(c="outputColorSpace",d=d===3001?M:b)}let A=i,x=A[c];if(v.length&&(x=v.reduce((w,M)=>w[M],i),!(x&&x.set))){const[w,...M]=v.reverse();A=M.reverse().reduce((b,R)=>b[R],i),c=w}if(d===CU+"remove")if(A.constructor){let w=G3.get(A.constructor);w||(w=new A.constructor,G3.set(A.constructor,w)),d=w[c]}else d=0;if(g&&n)d?n.handlers[c]=d:delete n.handlers[c],n.eventCount=Object.keys(n.handlers).length;else if(x&&x.set&&(x.copy||x instanceof dd)){if(Array.isArray(d))x.fromArray?x.fromArray(d):x.set(...d);else if(x.copy&&d&&d.constructor&&(DX?x.constructor.name===d.constructor.name:x.constructor===d.constructor))x.copy(d);else if(d!==void 0){const w=x instanceof Ht;!w&&x.setScalar?x.setScalar(d):x instanceof dd&&d instanceof dd?x.mask=d.mask:x.set(d),!EU()&&s&&!s.linear&&w&&x.convertSRGBToLinear()}}else if(A[c]=d,A[c]instanceof mr&&A[c].format===Oi&&A[c].type===Qo&&s){const w=A[c];JS(w)&&JS(s.gl)?w.colorSpace=s.gl.outputColorSpace:w.encoding=s.gl.outputEncoding}Jp(i)}if(n&&n.parent&&i.raycast&&l!==n.eventCount){const f=w1(i).getState().internal,c=f.interaction.indexOf(i);c>-1&&f.interaction.splice(c,1),n.eventCount&&f.interaction.push(i)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=i.__r3f)!=null&&t.parent&&mb(i),i}function Jp(i){var e,t;const n=(e=i.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function mb(i){i.onUpdate==null||i.onUpdate(i)}function PU(i,e){i.manual||(TU(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function Qy(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function BX(){var i;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return om.DefaultEventPriority;switch((i=e.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return om.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return om.ContinuousEventPriority;default:return om.DefaultEventPriority}}function DU(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function LX(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{DU(t.capturedMap,e,n,r)})}function FX(i){function e(l){const{internal:u}=i.getState(),f=l.offsetX-u.initialClick[0],c=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(f*f+c*c))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(f=>{var c;return(c=u.__r3f)==null?void 0:c.handlers["onPointer"+f]}))}function n(l,u){const f=i.getState(),c=new Set,d=[],g=u?u(f.internal.interaction):f.internal.interaction;for(let w=0;w<g.length;w++){const M=n_(g[w]);M&&(M.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function v(w){const M=n_(w);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var b;M.events.compute==null||M.events.compute(l,M,(b=M.previousRoot)==null?void 0:b.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(w,!0):[]}let A=g.flatMap(v).sort((w,M)=>{const b=n_(w.object),R=n_(M.object);return!b||!R?w.distance-M.distance:R.events.priority-b.events.priority||w.distance-M.distance}).filter(w=>{const M=Qy(w);return c.has(M)?!1:(c.add(M),!0)});f.events.filter&&(A=f.events.filter(A,f));for(const w of A){let M=w.object;for(;M;){var x;(x=M.__r3f)!=null&&x.eventCount&&d.push({...w,eventObject:M}),M=M.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let w of f.internal.capturedMap.get(l.pointerId).values())c.has(Qy(w.intersection))||d.push(w.intersection);return d}function r(l,u,f,c){const d=i.getState();if(l.length){const g={stopped:!1};for(const v of l){const A=n_(v.object)||d,{raycaster:x,pointer:w,camera:M,internal:b}=A,R=new ce(w.x,w.y,0).unproject(M),F=B=>{var k,H;return(k=(H=b.capturedMap.get(B))==null?void 0:H.has(v.eventObject))!=null?k:!1},O=B=>{const k={intersection:v,target:u.target};b.capturedMap.has(B)?b.capturedMap.get(B).set(v.eventObject,k):b.capturedMap.set(B,new Map([[v.eventObject,k]])),u.target.setPointerCapture(B)},D=B=>{const k=b.capturedMap.get(B);k&&DU(b.capturedMap,v.eventObject,k,B)};let I={};for(let B in u){let k=u[B];typeof k!="function"&&(I[B]=k)}let C={...v,...I,pointer:w,intersections:l,stopped:g.stopped,delta:f,unprojectedPoint:R,ray:x.ray,camera:M,stopPropagation(){const B="pointerId"in u&&b.capturedMap.get(u.pointerId);if((!B||B.has(v.eventObject))&&(C.stopped=g.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(k=>k.eventObject===v.eventObject))){const k=l.slice(0,l.indexOf(v));s([...k,v])}},target:{hasPointerCapture:F,setPointerCapture:O,releasePointerCapture:D},currentTarget:{hasPointerCapture:F,setPointerCapture:O,releasePointerCapture:D},nativeEvent:u};if(c(C),g.stopped===!0)break}}return l}function s(l){const{internal:u}=i.getState();for(const f of u.hovered.values())if(!l.length||!l.find(c=>c.object===f.object&&c.index===f.index&&c.instanceId===f.instanceId)){const d=f.eventObject.__r3f,g=d==null?void 0:d.handlers;if(u.hovered.delete(Qy(f)),d!=null&&d.eventCount){const v={...f,intersections:l};g.onPointerOut==null||g.onPointerOut(v),g.onPointerLeave==null||g.onPointerLeave(v)}}}function o(l,u){for(let f=0;f<u.length;f++){const c=u[f].__r3f;c==null||c.handlers.onPointerMissed==null||c.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:f}=i.getState();"pointerId"in u&&f.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(u.pointerId)&&(f.capturedMap.delete(u.pointerId),s([]))})}}return function(f){const{onPointerMissed:c,internal:d}=i.getState();d.lastEvent.current=f;const g=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=n(f,g?t:void 0),w=v?e(f):0;l==="onPointerDown"&&(d.initialClick=[f.offsetX,f.offsetY],d.initialHits=x.map(b=>b.eventObject)),v&&!x.length&&w<=2&&(o(f,d.interaction),c&&c(f)),g&&s(x);function M(b){const R=b.eventObject,F=R.__r3f,O=F==null?void 0:F.handlers;if(F!=null&&F.eventCount)if(g){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const D=Qy(b),I=d.hovered.get(D);I?I.stopped&&b.stopPropagation():(d.hovered.set(D,b),O.onPointerOver==null||O.onPointerOver(b),O.onPointerEnter==null||O.onPointerEnter(b))}O.onPointerMove==null||O.onPointerMove(b)}else{const D=O[l];D?(!v||d.initialHits.includes(R))&&(o(f,d.interaction.filter(I=>!d.initialHits.includes(I))),D(b)):v&&d.initialHits.includes(R)&&o(f,d.interaction.filter(I=>!d.initialHits.includes(I)))}}r(x,f,w,M)}}return{handlePointer:a}}const OX=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],BU=i=>!!(i!=null&&i.render),B2=me.createContext(null),kX=(i,e)=>{const t=vU((a,l)=>{const u=new ce,f=new ce,c=new ce;function d(w=l().camera,M=f,b=l().size){const{width:R,height:F,top:O,left:D}=b,I=R/F;M instanceof ce?c.copy(M):c.set(...M);const C=w.getWorldPosition(u).distanceTo(c);if(TU(w))return{width:R/w.zoom,height:F/w.zoom,top:O,left:D,factor:1,distance:C,aspect:I};{const B=w.fov*Math.PI/180,k=2*Math.tan(B/2)*C,H=k*(R/F);return{width:H,height:k,top:O,left:D,factor:R/H,distance:C,aspect:I}}}let g;const v=w=>a(M=>({performance:{...M.performance,current:w}})),A=new mt;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(w=1)=>i(l(),w),advance:(w,M)=>e(w,M,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new E2,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=l();g&&clearTimeout(g),w.performance.current!==w.performance.min&&v(w.performance.min),g=setTimeout(()=>v(l().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:w=>a(M=>({...M,events:{...M.events,...w}})),setSize:(w,M,b,R,F)=>{const O=l().camera,D={width:w,height:M,top:R||0,left:F||0,updateStyle:b};a(I=>({size:D,viewport:{...I.viewport,...d(O,f,D)}}))},setDpr:w=>a(M=>{const b=RU(w);return{viewport:{...M.viewport,dpr:b,initialDpr:M.viewport.initialDpr||b}}}),setFrameloop:(w="always")=>{const M=l().clock;M.stop(),M.elapsedTime=0,w!=="never"&&(M.start(),M.elapsedTime=0),a(()=>({frameloop:w}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:me.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(w,M,b)=>{const R=l().internal;return R.priority=R.priority+(M>0?1:0),R.subscribers.push({ref:w,priority:M,store:b}),R.subscribers=R.subscribers.sort((F,O)=>F.priority-O.priority),()=>{const F=l().internal;F!=null&&F.subscribers&&(F.priority=F.priority-(M>0?1:0),F.subscribers=F.subscribers.filter(O=>O.ref!==w))}}}}}),n=t.getState();let r=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:f,set:c}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var d;r=l,s=u.dpr,PU(a,l),f.setPixelRatio(u.dpr);const g=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,g)}a!==o&&(o=a,c(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>i(a)),t};function NX(i,e){const t={callback:i};return e.add(t),()=>void e.delete(t)}let Zy,LU=new Set,UX=new Set,zX=new Set;const GX=i=>NX(i,LU);function QS(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function r_(i,e){switch(i){case"before":return QS(LU,e);case"after":return QS(UX,e);case"tail":return QS(zX,e)}}let ZS,$S;function eE(i,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),ZS=e.internal.subscribers,Zy=0;Zy<ZS.length;Zy++)$S=ZS[Zy],$S.ref.current($S.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function HX(i){let e=!1,t=!1,n,r,s;function o(u){r=requestAnimationFrame(o),e=!0,n=0,r_("before",u),t=!0;for(const c of i.values()){var f;s=c.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((f=s.gl.xr)!=null&&f.isPresenting)&&(n+=eE(u,s))}if(t=!1,r_("after",u),n===0)return r_("tail",u),e=!1,cancelAnimationFrame(r)}function a(u,f=1){var c;if(!u)return i.forEach(d=>a(d.store.getState(),f));(c=u.gl.xr)!=null&&c.isPresenting||!u.internal.active||u.frameloop==="never"||(f>1?u.internal.frames=Math.min(60,u.internal.frames+f):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,f=!0,c,d){if(f&&r_("before",u),c)eE(u,c,d);else for(const g of i.values())eE(u,g.store.getState());f&&r_("after",u)}return{loop:o,invalidate:a,advance:l}}function L2(){const i=me.useContext(B2);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function hc(i=t=>t,e){return L2()(i,e)}function av(i,e=0){const t=L2(),n=t.getState().internal.subscribe,r=MU(i);return ov(()=>n(r,e,t),[e,n,t]),null}const W3=new WeakMap;function FU(i,e){return function(t,...n){let r=W3.get(t);return r||(r=new t,W3.set(t,r)),i&&i(r),Promise.all(n.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,IX(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function fc(i,e,t,n){const r=Array.isArray(e)?e:[e],s=AU(FU(t,n),[i,...r],{equal:jr.equ});return Array.isArray(e)?s:s[0]}fc.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return yX(FU(t),[i,...n])};fc.clear=function(i,e){const t=Array.isArray(e)?e:[e];return xX([i,...t])};const Dm=new Map,{invalidate:j3,advance:q3}=HX(Dm),{reconciler:y0,applyProps:Zu}=MX(Dm,BX),Gp={objects:"shallow",strict:!1},VX=(i,e)=>{const t=typeof i=="function"?i(e):i;return BU(t)?t:new P2({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...i})};function WX(i,e){const t=typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement;if(e){const{width:n,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:n,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:n,height:r,top:s,left:o}=i.parentElement.getBoundingClientRect();return{width:n,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function jX(i){const e=Dm.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=n||kX(j3,q3),o=t||y0.createContainer(s,om.ConcurrentRoot,null,!1,null,"",r,null);e||Dm.set(i,{fiber:o,store:s});let a,l=!1,u;return{configure(f={}){let{gl:c,size:d,scene:g,events:v,onCreated:A,shadows:x=!1,linear:w=!1,flat:M=!1,legacy:b=!1,orthographic:R=!1,frameloop:F="always",dpr:O=[1,2],performance:D,raycaster:I,camera:C,onPointerMissed:B}=f,k=s.getState(),H=k.gl;k.gl||k.set({gl:H=VX(c,i)});let z=k.raycaster;z||k.set({raycaster:z=new C2});const{params:Z,...ue}=I||{};if(jr.equ(ue,z,Gp)||Zu(z,{...ue}),jr.equ(Z,z.params,Gp)||Zu(z,{params:{...z.params,...Z}}),!k.camera||k.camera===u&&!jr.equ(u,C,Gp)){u=C;const $=C instanceof K0,V=$?C:R?new _c(0,0,0,0,.1,1e3):new Li(75,0,.1,1e3);$||(V.position.z=5,C&&(Zu(V,C),("aspect"in C||"left"in C||"right"in C||"bottom"in C||"top"in C)&&(V.manual=!0,V.updateProjectionMatrix())),!k.camera&&!(C!=null&&C.rotation)&&V.lookAt(0,0,0)),k.set({camera:V}),z.camera=V}if(!k.scene){let $;g instanceof Im?$=g:($=new Im,g&&Zu($,g)),k.set({scene:Xp($)})}if(!k.xr){var ae;const $=(fe,oe)=>{const he=s.getState();he.frameloop!=="never"&&q3(fe,!0,he,oe)},V=()=>{const fe=s.getState();fe.gl.xr.enabled=fe.gl.xr.isPresenting,fe.gl.xr.setAnimationLoop(fe.gl.xr.isPresenting?$:null),fe.gl.xr.isPresenting||j3(fe)},Q={connect(){const fe=s.getState().gl;fe.xr.addEventListener("sessionstart",V),fe.xr.addEventListener("sessionend",V)},disconnect(){const fe=s.getState().gl;fe.xr.removeEventListener("sessionstart",V),fe.xr.removeEventListener("sessionend",V)}};typeof((ae=H.xr)==null?void 0:ae.addEventListener)=="function"&&Q.connect(),k.set({xr:Q})}if(H.shadowMap){const $=H.shadowMap.enabled,V=H.shadowMap.type;if(H.shadowMap.enabled=!!x,jr.boo(x))H.shadowMap.type=B_;else if(jr.str(x)){var ge;const Q={basic:Rk,percentage:eA,soft:B_,variance:Sl};H.shadowMap.type=(ge=Q[x])!=null?ge:B_}else jr.obj(x)&&Object.assign(H.shadowMap,x);($!==H.shadowMap.enabled||V!==H.shadowMap.type)&&(H.shadowMap.needsUpdate=!0)}const ee=EU();ee&&("enabled"in ee?ee.enabled=!b:"legacyMode"in ee&&(ee.legacyMode=b)),l||Zu(H,{outputEncoding:w?3e3:3001,toneMapping:M?tu:kC}),k.legacy!==b&&k.set(()=>({legacy:b})),k.linear!==w&&k.set(()=>({linear:w})),k.flat!==M&&k.set(()=>({flat:M})),c&&!jr.fun(c)&&!BU(c)&&!jr.equ(c,H,Gp)&&Zu(H,c),v&&!k.events.handlers&&k.set({events:v(s)});const le=WX(i,d);return jr.equ(le,k.size,Gp)||k.setSize(le.width,le.height,le.updateStyle,le.top,le.left),O&&k.viewport.dpr!==RU(O)&&k.setDpr(O),k.frameloop!==F&&k.setFrameloop(F),k.onPointerMissed||k.set({onPointerMissed:B}),D&&!jr.equ(D,k.performance,Gp)&&k.set($=>({performance:{...$.performance,...D}})),a=A,l=!0,this},render(f){return l||this.configure(),y0.updateContainer(re.jsx(qX,{store:s,children:f,onCreated:a,rootElement:i}),o,null,()=>{}),s},unmount(){OU(i)}}}function qX({store:i,children:e,onCreated:t,rootElement:n}){return ov(()=>{const r=i.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),re.jsx(B2.Provider,{value:i,children:e})}function OU(i,e){const t=Dm.get(i),n=t==null?void 0:t.fiber;if(n){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),y0.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),PX(r),Dm.delete(i)}catch{}},500)})}}function XX(i,e,t){return re.jsx(JX,{children:i,container:e,state:t},e.uuid)}function JX({state:i={},children:e,container:t}){const{events:n,size:r,...s}=i,o=L2(),[a]=me.useState(()=>new C2),[l]=me.useState(()=>new mt),u=me.useCallback((c,d)=>{const g={...c};Object.keys(c).forEach(A=>{(OX.includes(A)||c[A]!==d[A]&&d[A])&&delete g[A]});let v;if(d&&r){const A=d.camera;v=c.viewport.getCurrentViewport(A,new ce,r),A!==c.camera&&PU(A,r)}return{...g,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...c.events,...d==null?void 0:d.events,...n},size:{...c.size,...r},viewport:{...c.viewport,...v},...s}},[i]),[f]=me.useState(()=>{const c=o.getState();return vU((g,v)=>({...c,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...c.events,...n},size:{...c.size,...r},...s,set:g,get:v,setEvents:A=>g(x=>({...x,events:{...x.events,...A}}))}))});return me.useEffect(()=>{const c=o.subscribe(d=>f.setState(g=>u(d,g)));return()=>{c()}},[u]),me.useEffect(()=>{f.setState(c=>u(o.getState(),c))},[u]),me.useEffect(()=>()=>{f.destroy()},[]),re.jsx(re.Fragment,{children:y0.createPortal(re.jsx(B2.Provider,{value:f,children:e}),f,null)})}y0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:me.version});const tE={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function KX(i){const{handlePointer:e}=FX(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(tE).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:s}=i.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,a])=>{const[l,u]=tE[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){var r;Object.entries((r=n.handlers)!=null?r:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[a]=tE[s];n.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}var nE,X3;function YX(){if(X3)return nE;X3=1;function i(e,t,n){var r,s,o,a,l;t==null&&(t=100);function u(){var c=Date.now()-a;c<t&&c>=0?r=setTimeout(u,t-c):(r=null,n||(l=e.apply(o,s),o=s=null))}var f=function(){o=this,s=arguments,a=Date.now();var c=n&&!r;return r||(r=setTimeout(u,t)),c&&(l=e.apply(o,s),o=s=null),l};return f.clear=function(){r&&(clearTimeout(r),r=null)},f.flush=function(){r&&(l=e.apply(o,s),o=s=null,clearTimeout(r),r=null)},f}return i.debounce=i,nE=i,nE}var QX=YX();const J3=kh(QX);var ZX=Object.defineProperty,$X=Object.defineProperties,eJ=Object.getOwnPropertyDescriptors,K3=Object.getOwnPropertySymbols,tJ=Object.prototype.hasOwnProperty,nJ=Object.prototype.propertyIsEnumerable,Y3=(i,e,t)=>e in i?ZX(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Q3=(i,e)=>{for(var t in e||(e={}))tJ.call(e,t)&&Y3(i,t,e[t]);if(K3)for(var t of K3(e))nJ.call(e,t)&&Y3(i,t,e[t]);return i},rJ=(i,e)=>$X(i,eJ(e)),Z3,$3;typeof window<"u"&&((Z3=window.document)!=null&&Z3.createElement||(($3=window.navigator)==null?void 0:$3.product)==="ReactNative")?me.useLayoutEffect:me.useEffect;function kU(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=i.child;for(;n;){const r=kU(n,e,t);if(r)return r;n=n.sibling}}function NU(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const eD=console.error;console.error=function(){const i=[...arguments].join("");if(i!=null&&i.startsWith("Warning:")&&i.includes("useContext")){console.error=eD;return}return eD.apply(this,arguments)};const F2=NU(me.createContext(null));class UU extends me.Component{render(){return me.createElement(F2.Provider,{value:this._reactInternals},this.props.children)}}function iJ(){const i=me.useContext(F2);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=me.useId();return me.useMemo(()=>{for(const n of[i,i==null?void 0:i.alternate]){if(!n)continue;const r=kU(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[i,e])}function sJ(){const i=iJ(),[e]=me.useState(()=>new Map);e.clear();let t=i;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==F2&&!e.has(r)&&e.set(r,me.useContext(NU(r)))}t=t.return}return e}function oJ(){const i=sJ();return me.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>me.createElement(e,null,me.createElement(t.Provider,rJ(Q3({},n),{value:i.get(t)}))),e=>me.createElement(UU,Q3({},e))),[i])}function aJ({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||typeof window<"u"&&window.ResizeObserver,[s,o]=me.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!r)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const a=me.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=i?typeof i=="number"?i:i.scroll:null,u=i?typeof i=="number"?i:i.resize:null,f=me.useRef(!1);me.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[c,d,g]=me.useMemo(()=>{const w=()=>{if(!a.current.element)return;const{left:M,top:b,width:R,height:F,bottom:O,right:D,x:I,y:C}=a.current.element.getBoundingClientRect(),B={left:M,top:b,width:R,height:F,bottom:O,right:D,x:I,y:C};a.current.element instanceof HTMLElement&&n&&(B.height=a.current.element.offsetHeight,B.width=a.current.element.offsetWidth),Object.freeze(B),f.current&&!hJ(a.current.lastBounds,B)&&o(a.current.lastBounds=B)};return[w,u?J3(w,u):w,l?J3(w,l):w]},[o,n,l,u]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",g,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&screen.orientation.removeEventListener("orientationchange",a.current.orientationHandler)}function A(){a.current.element&&(a.current.resizeObserver=new r(g),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(w=>w.addEventListener("scroll",g,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{g()})}const x=w=>{!w||w===a.current.element||(v(),a.current.element=w,a.current.scrollContainers=zU(w),A())};return uJ(g,!!e),lJ(d),me.useEffect(()=>{v(),A()},[e,g,d]),me.useEffect(()=>v,[]),[x,s,c]}function lJ(i){me.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function uJ(i,e){me.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function zU(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...zU(i.parentElement)]}const cJ=["x","y","top","bottom","left","right","width","height"],hJ=(i,e)=>cJ.every(t=>i[t]===e[t]),fJ=me.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:s,events:o=KX,eventSource:a,eventPrefix:l,shadows:u,linear:f,flat:c,legacy:d,orthographic:g,frameloop:v,dpr:A,performance:x,raycaster:w,camera:M,scene:b,onPointerMissed:R,onCreated:F,...O},D){me.useMemo(()=>SU(_U),[]);const I=oJ(),[C,B]=aJ({scroll:!0,debounce:{scroll:50,resize:0},...n}),k=me.useRef(null),H=me.useRef(null);me.useImperativeHandle(D,()=>k.current);const z=MU(R),[Z,ue]=me.useState(!1),[ae,ge]=me.useState(!1);if(Z)throw Z;if(ae)throw ae;const ee=me.useRef(null);ov(()=>{const $=k.current;B.width>0&&B.height>0&&$&&(ee.current||(ee.current=jX($)),ee.current.configure({gl:s,events:o,shadows:u,linear:f,flat:c,legacy:d,orthographic:g,frameloop:v,dpr:A,performance:x,raycaster:w,camera:M,scene:b,size:B,onPointerMissed:(...V)=>z.current==null?void 0:z.current(...V),onCreated:V=>{V.events.connect==null||V.events.connect(a?bX(a)?a.current:a:H.current),l&&V.setEvents({compute:(Q,fe)=>{const oe=Q[l+"X"],he=Q[l+"Y"];fe.pointer.set(oe/fe.size.width*2-1,-(he/fe.size.height)*2+1),fe.raycaster.setFromCamera(fe.pointer,fe.camera)}}),F==null||F(V)}}),ee.current.render(re.jsx(I,{children:re.jsx(bU,{set:ge,children:re.jsx(me.Suspense,{fallback:re.jsx(CX,{set:ue}),children:e})})})))}),me.useEffect(()=>{const $=k.current;if($)return()=>OU($)},[]);const le=a?"none":"auto";return re.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:le,...r},...O,children:re.jsx("div",{ref:C,style:{width:"100%",height:"100%"},children:re.jsx("canvas",{ref:k,style:{display:"block"},children:t})})})}),dJ=me.forwardRef(function(e,t){return re.jsx(UU,{children:re.jsx(fJ,{...e,ref:t})})});function Fr(){return Fr=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Fr.apply(null,arguments)}const lv=new ce,O2=new ce,pJ=new ce,tD=new mt;function mJ(i,e,t){const n=lv.setFromMatrixPosition(i.matrixWorld);n.project(e);const r=t.width/2,s=t.height/2;return[n.x*r+r,-(n.y*s)+s]}function gJ(i,e){const t=lv.setFromMatrixPosition(i.matrixWorld),n=O2.setFromMatrixPosition(e.matrixWorld),r=t.sub(n),s=e.getWorldDirection(pJ);return r.angleTo(s)>Math.PI/2}function _J(i,e,t,n){const r=lv.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(e),tD.set(s.x,s.y),t.setFromCamera(tD,e);const o=t.intersectObjects(n,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function vJ(i,e){if(e instanceof _c)return e.zoom;if(e instanceof Li){const t=lv.setFromMatrixPosition(i.matrixWorld),n=O2.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(r/2)*s)}else return 1}function yJ(i,e,t){if(e instanceof Li||e instanceof _c){const n=lv.setFromMatrixPosition(i.matrixWorld),r=O2.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const gb=i=>Math.abs(i)<1e-10?0:i;function GU(i,e,t=""){let n="matrix3d(";for(let r=0;r!==16;r++)n+=gb(e[r]*i.elements[r])+(r!==15?",":")");return t+n}const xJ=(i=>e=>GU(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),AJ=(i=>(e,t)=>GU(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function wJ(i){return i&&typeof i=="object"&&"current"in i}const SJ=me.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:f=!1,occlude:c,onOcclude:d,castShadow:g,receiveShadow:v,material:A,geometry:x,zIndexRange:w=[16777271,0],calculatePosition:M=mJ,as:b="div",wrapperClass:R,pointerEvents:F="auto",...O},D)=>{const{gl:I,camera:C,scene:B,size:k,raycaster:H,events:z,viewport:Z}=hc(),[ue]=me.useState(()=>document.createElement(b)),ae=me.useRef(),ge=me.useRef(null),ee=me.useRef(0),le=me.useRef([0,0]),$=me.useRef(null),V=me.useRef(null),Q=(a==null?void 0:a.current)||z.connected||I.domElement.parentNode,fe=me.useRef(null),oe=me.useRef(!1),he=me.useMemo(()=>c&&c!=="blending"||Array.isArray(c)&&c.length&&wJ(c[0]),[c]);me.useLayoutEffect(()=>{const Ye=I.domElement;c&&c==="blending"?(Ye.style.zIndex=`${Math.floor(w[0]/2)}`,Ye.style.position="absolute",Ye.style.pointerEvents="none"):(Ye.style.zIndex=null,Ye.style.position=null,Ye.style.pointerEvents=null)},[c]),me.useLayoutEffect(()=>{if(ge.current){const Ye=ae.current=TO.createRoot(ue);if(B.updateMatrixWorld(),f)ue.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ne=M(ge.current,C,k);ue.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ne[0]}px,${Ne[1]}px,0);transform-origin:0 0;`}return Q&&(r?Q.prepend(ue):Q.appendChild(ue)),()=>{Q&&Q.removeChild(ue),Ye.unmount()}}},[Q,f]),me.useLayoutEffect(()=>{R&&(ue.className=R)},[R]);const xe=me.useMemo(()=>f?{position:"absolute",top:0,left:0,width:k.width,height:k.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-k.height/2,left:-k.width/2,width:k.width,height:k.height},...t},[t,s,o,k,f]),_e=me.useMemo(()=>({position:"absolute",pointerEvents:F}),[F]);me.useLayoutEffect(()=>{if(oe.current=!1,f){var Ye;(Ye=ae.current)==null||Ye.render(me.createElement("div",{ref:$,style:xe},me.createElement("div",{ref:V,style:_e},me.createElement("div",{ref:D,className:n,style:t,children:i}))))}else{var Ne;(Ne=ae.current)==null||Ne.render(me.createElement("div",{ref:D,style:xe,className:n,children:i}))}});const be=me.useRef(!0);av(Ye=>{if(ge.current){C.updateMatrixWorld(),ge.current.updateWorldMatrix(!0,!1);const Ne=f?le.current:M(ge.current,C,k);if(f||Math.abs(ee.current-C.zoom)>e||Math.abs(le.current[0]-Ne[0])>e||Math.abs(le.current[1]-Ne[1])>e){const Ee=gJ(ge.current,C);let Ge=!1;he&&(Array.isArray(c)?Ge=c.map(ut=>ut.current):c!=="blending"&&(Ge=[B]));const se=be.current;if(Ge){const ut=_J(ge.current,C,H,Ge);be.current=ut&&!Ee}else be.current=!Ee;se!==be.current&&(d?d(!be.current):ue.style.display=be.current?"block":"none");const ht=Math.floor(w[0]/2),We=c?he?[w[0],ht]:[ht-1,0]:w;if(ue.style.zIndex=`${yJ(ge.current,C,We)}`,f){const[ut,Fe]=[k.width/2,k.height/2],dt=C.projectionMatrix.elements[5]*Fe,{isOrthographicCamera:je,top:K,left:J,bottom:ye,right:Re}=C,De=xJ(C.matrixWorldInverse),ke=je?`scale(${dt})translate(${gb(-(Re+J)/2)}px,${gb((K+ye)/2)}px)`:`translateZ(${dt}px)`;let qe=ge.current.matrixWorld;u&&(qe=C.matrixWorldInverse.clone().transpose().copyPosition(qe).scale(ge.current.scale),qe.elements[3]=qe.elements[7]=qe.elements[11]=0,qe.elements[15]=1),ue.style.width=k.width+"px",ue.style.height=k.height+"px",ue.style.perspective=je?"":`${dt}px`,$.current&&V.current&&($.current.style.transform=`${ke}${De}translate(${ut}px,${Fe}px)`,V.current.style.transform=AJ(qe,1/((l||10)/400)))}else{const ut=l===void 0?1:vJ(ge.current,C)*l;ue.style.transform=`translate3d(${Ne[0]}px,${Ne[1]}px,0) scale(${ut})`}le.current=Ne,ee.current=C.zoom}}if(!he&&fe.current&&!oe.current)if(f){if($.current){const Ne=$.current.children[0];if(Ne!=null&&Ne.clientWidth&&Ne!=null&&Ne.clientHeight){const{isOrthographicCamera:Ee}=C;if(Ee||x)O.scale&&(Array.isArray(O.scale)?O.scale instanceof ce?fe.current.scale.copy(O.scale.clone().divideScalar(1)):fe.current.scale.set(1/O.scale[0],1/O.scale[1],1/O.scale[2]):fe.current.scale.setScalar(1/O.scale));else{const Ge=(l||10)/400,se=Ne.clientWidth*Ge,ht=Ne.clientHeight*Ge;fe.current.scale.set(se,ht,1)}oe.current=!0}}}else{const Ne=ue.children[0];if(Ne!=null&&Ne.clientWidth&&Ne!=null&&Ne.clientHeight){const Ee=1/Z.factor,Ge=Ne.clientWidth*Ee,se=Ne.clientHeight*Ee;fe.current.scale.set(Ge,se,1),oe.current=!0}fe.current.lookAt(Ye.camera.position)}});const Xe=me.useMemo(()=>({vertexShader:f?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[f]);return me.createElement("group",Fr({},O,{ref:ge}),c&&!he&&me.createElement("mesh",{castShadow:g,receiveShadow:v,ref:fe},x||me.createElement("planeGeometry",null),A||me.createElement("shaderMaterial",{side:Co,vertexShader:Xe.vertexShader,fragmentShader:Xe.fragmentShader})))}),EJ=parseInt(Gm.replace(/\D+/g,""));function nD(i,e){if(e===oN)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===wx||e===qC){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(t)if(e===wx)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var Oa=Uint8Array,fh=Uint16Array,_b=Uint32Array,HU=new Oa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),VU=new Oa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),TJ=new Oa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WU=function(i,e){for(var t=new fh(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var r=new _b(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)r[s]=s-t[n]<<5|n;return[t,r]},jU=WU(HU,2),qU=jU[0],MJ=jU[1];qU[28]=258,MJ[258]=28;var bJ=WU(VU,0),CJ=bJ[0],vb=new fh(32768);for(var Zr=0;Zr<32768;++Zr){var nh=(Zr&43690)>>>1|(Zr&21845)<<1;nh=(nh&52428)>>>2|(nh&13107)<<2,nh=(nh&61680)>>>4|(nh&3855)<<4,vb[Zr]=((nh&65280)>>>8|(nh&255)<<8)>>>1}var H_=function(i,e,t){for(var n=i.length,r=0,s=new fh(e);r<n;++r)++s[i[r]-1];var o=new fh(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new fh(1<<e);var l=15-e;for(r=0;r<n;++r)if(i[r])for(var u=r<<4|i[r],f=e-i[r],c=o[i[r]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)a[vb[c]>>>l]=u}else for(a=new fh(n),r=0;r<n;++r)i[r]&&(a[r]=vb[o[i[r]-1]++]>>>15-i[r]);return a},uv=new Oa(288);for(var Zr=0;Zr<144;++Zr)uv[Zr]=8;for(var Zr=144;Zr<256;++Zr)uv[Zr]=9;for(var Zr=256;Zr<280;++Zr)uv[Zr]=7;for(var Zr=280;Zr<288;++Zr)uv[Zr]=8;var XU=new Oa(32);for(var Zr=0;Zr<32;++Zr)XU[Zr]=5;var RJ=H_(uv,9,1),IJ=H_(XU,5,1),rE=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},yl=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},iE=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},PJ=function(i){return(i/8|0)+(i&7&&1)},DJ=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof fh?fh:i instanceof _b?_b:Oa)(t-e);return n.set(i.subarray(e,t)),n},BJ=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new Oa(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Oa(n*3));var o=function(xe){var _e=e.length;if(xe>_e){var be=new Oa(Math.max(_e*2,xe));be.set(e),e=be}},a=t.f||0,l=t.p||0,u=t.b||0,f=t.l,c=t.d,d=t.m,g=t.n,v=n*8;do{if(!f){t.f=a=yl(i,l,1);var A=yl(i,l+1,3);if(l+=3,A)if(A==1)f=RJ,c=IJ,d=9,g=5;else if(A==2){var b=yl(i,l,31)+257,R=yl(i,l+10,15)+4,F=b+yl(i,l+5,31)+1;l+=14;for(var O=new Oa(F),D=new Oa(19),I=0;I<R;++I)D[TJ[I]]=yl(i,l+I*3,7);l+=R*3;for(var C=rE(D),B=(1<<C)-1,k=H_(D,C,1),I=0;I<F;){var H=k[yl(i,l,B)];l+=H&15;var x=H>>>4;if(x<16)O[I++]=x;else{var z=0,Z=0;for(x==16?(Z=3+yl(i,l,3),l+=2,z=O[I-1]):x==17?(Z=3+yl(i,l,7),l+=3):x==18&&(Z=11+yl(i,l,127),l+=7);Z--;)O[I++]=z}}var ue=O.subarray(0,b),ae=O.subarray(b);d=rE(ue),g=rE(ae),f=H_(ue,d,1),c=H_(ae,g,1)}else throw"invalid block type";else{var x=PJ(l)+4,w=i[x-4]|i[x-3]<<8,M=x+w;if(M>n){if(s)throw"unexpected EOF";break}r&&o(u+w),e.set(i.subarray(x,M),u),t.b=u+=w,t.p=l=M*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}r&&o(u+131072);for(var ge=(1<<d)-1,ee=(1<<g)-1,le=l;;le=l){var z=f[iE(i,l)&ge],$=z>>>4;if(l+=z&15,l>v){if(s)throw"unexpected EOF";break}if(!z)throw"invalid length/literal";if($<256)e[u++]=$;else if($==256){le=l,f=null;break}else{var V=$-254;if($>264){var I=$-257,Q=HU[I];V=yl(i,l,(1<<Q)-1)+qU[I],l+=Q}var fe=c[iE(i,l)&ee],oe=fe>>>4;if(!fe)throw"invalid distance";l+=fe&15;var ae=CJ[oe];if(oe>3){var Q=VU[oe];ae+=iE(i,l)&(1<<Q)-1,l+=Q}if(l>v){if(s)throw"unexpected EOF";break}r&&o(u+131072);for(var he=u+V;u<he;u+=4)e[u]=e[u-ae],e[u+1]=e[u+1-ae],e[u+2]=e[u+2-ae],e[u+3]=e[u+3-ae];u=he}}t.l=f,t.p=le,t.b=u,f&&(a=1,t.m=d,t.d=c,t.n=g)}while(!a);return u==e.length?e:DJ(e,0,u)},LJ=new Oa(0),FJ=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function $y(i,e){return BJ((FJ(i),i.subarray(2,-4)),e)}var OJ=typeof TextDecoder<"u"&&new TextDecoder,kJ=0;try{OJ.decode(LJ,{stream:!0}),kJ=1}catch{}const NJ=i=>i&&i.isCubeTexture;class UJ extends Lr{constructor(e,t){var n,r;const s=NJ(e),a=((r=s?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),f=3*Math.max(u,16*7),c=4*u,d=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/f}`,`#define CUBEUV_TEXEL_HEIGHT ${1/c}`,`#define CUBEUV_MAX_MIP ${l}.0`],g=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Gm.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,A={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},x=new tv(1,16),w=new uo({uniforms:A,fragmentShader:v,vertexShader:g,side:Co});super(x,w)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function Mx(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const rd="srgb",oc="srgb-linear",rD=3001,zJ=3e3;class k2 extends Gs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new jJ(t)}),this.register(function(t){return new qJ(t)}),this.register(function(t){return new tK(t)}),this.register(function(t){return new nK(t)}),this.register(function(t){return new rK(t)}),this.register(function(t){return new JJ(t)}),this.register(function(t){return new KJ(t)}),this.register(function(t){return new YJ(t)}),this.register(function(t){return new QJ(t)}),this.register(function(t){return new WJ(t)}),this.register(function(t){return new ZJ(t)}),this.register(function(t){return new XJ(t)}),this.register(function(t){return new eK(t)}),this.register(function(t){return new $J(t)}),this.register(function(t){return new HJ(t)}),this.register(function(t){return new iK(t)}),this.register(function(t){return new sK(t)})}load(e,t,n,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=vh.extractUrlBase(e);o=vh.resolveURL(u,this.path)}else o=vh.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Us(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(f){t(f),s.manager.itemEnd(e)},a)}catch(f){a(f)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Mx(new Uint8Array(e.slice(0,4)))===JU){try{o[Kn.KHR_BINARY_GLTF]=new oK(e)}catch(f){r&&r(f);return}s=JSON.parse(o[Kn.KHR_BINARY_GLTF].content)}else s=JSON.parse(Mx(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new yK(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](l);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[f.name]=f,o[f.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const f=s.extensionsUsed[u],c=s.extensionsRequired||[];switch(f){case Kn.KHR_MATERIALS_UNLIT:o[f]=new VJ;break;case Kn.KHR_DRACO_MESH_COMPRESSION:o[f]=new aK(s,this.dracoLoader);break;case Kn.KHR_TEXTURE_TRANSFORM:o[f]=new lK;break;case Kn.KHR_MESH_QUANTIZATION:o[f]=new uK;break;default:c.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function GJ(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Kn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class HJ{constructor(e){this.parser=e,this.name=Kn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const f=new Ht(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],oc);const c=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new A2(f),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new x2(f),u.distance=c;break;case"spot":u=new y2(f),u.distance=c,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Ku(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class VJ{constructor(){this.name=Kn.KHR_MATERIALS_UNLIT}getMaterialType(){return Io}extendParams(e,t,n){const r=[];e.color=new Ht(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],oc),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,rd))}return Promise.all(r)}}class WJ{constructor(e){this.parser=e,this.name=Kn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class jJ{constructor(e){this.parser=e,this.name=Kn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ja}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new mt(a,a)}return Promise.all(s)}}class qJ{constructor(e){this.parser=e,this.name=Kn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ja}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class XJ{constructor(e){this.parser=e,this.name=Kn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ja}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class JJ{constructor(e){this.parser=e,this.name=Kn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ja}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ht(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],oc)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,rd)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class KJ{constructor(e){this.parser=e,this.name=Kn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ja}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class YJ{constructor(e){this.parser=e,this.name=Kn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ja}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ht().setRGB(a[0],a[1],a[2],oc),Promise.all(s)}}class QJ{constructor(e){this.parser=e,this.name=Kn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ja}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class ZJ{constructor(e){this.parser=e,this.name=Kn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ja}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ht().setRGB(a[0],a[1],a[2],oc),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,rd)),Promise.all(s)}}class $J{constructor(e){this.parser=e,this.name=Kn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ja}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class eK{constructor(e){this.parser=e,this.name=Kn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ja}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class tK{constructor(e){this.parser=e,this.name=Kn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class nK{constructor(e){this.parser=e,this.name=Kn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const u=n.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class rK{constructor(e){this.parser=e,this.name=Kn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const u=n.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class iK{constructor(e){this.name=Kn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,u=r.byteLength||0,f=r.count,c=r.byteStride,d=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(f,c,d,r.mode,r.filter).then(function(g){return g.buffer}):o.ready.then(function(){const g=new ArrayBuffer(f*c);return o.decodeGltfBuffer(new Uint8Array(g),f,c,d,r.mode,r.filter),g})})}else return null}}class sK{constructor(e){this.name=Kn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const u of r.primitives)if(u.mode!==La.TRIANGLES&&u.mode!==La.TRIANGLE_STRIP&&u.mode!==La.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(f=>(l[u]=f,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const f=u.pop(),c=f.isGroup?f.children:[f],d=u[0].count,g=[];for(const v of c){const A=new pn,x=new ce,w=new lo,M=new ce(1,1,1),b=new i2(v.geometry,v.material,d);for(let R=0;R<d;R++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,R),l.ROTATION&&w.fromBufferAttribute(l.ROTATION,R),l.SCALE&&M.fromBufferAttribute(l.SCALE,R),b.setMatrixAt(R,A.compose(x,w,M));for(const R in l)if(R==="_COLOR_0"){const F=l[R];b.instanceColor=new Ih(F.array,F.itemSize,F.normalized)}else R!=="TRANSLATION"&&R!=="ROTATION"&&R!=="SCALE"&&v.geometry.setAttribute(R,l[R]);ir.prototype.copy.call(b,v),this.parser.assignFinalMaterial(b),g.push(b)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}}const JU="glTF",i_=12,iD={JSON:1313821514,BIN:5130562};class oK{constructor(e){this.name=Kn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,i_);if(this.header={magic:Mx(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==JU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-i_,r=new DataView(e,i_);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===iD.JSON){const l=new Uint8Array(e,i_+s,o);this.content=Mx(l)}else if(a===iD.BIN){const l=i_+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class aK{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Kn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const f in o){const c=yb[f]||f.toLowerCase();a[c]=o[f]}for(const f in e.attributes){const c=yb[f]||f.toLowerCase();if(o[f]!==void 0){const d=n.accessors[e.attributes[f]],g=fm[d.componentType];u[c]=g.name,l[c]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(f){return new Promise(function(c,d){r.decodeDracoFile(f,function(g){for(const v in g.attributes){const A=g.attributes[v],x=l[v];x!==void 0&&(A.normalized=x)}c(g)},a,u,oc,d)})})}}class lK{constructor(){this.name=Kn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class uK{constructor(){this.name=Kn.KHR_MESH_QUANTIZATION}}class KU extends jm{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,f=r-t,c=(n-t)/f,d=c*c,g=d*c,v=e*u,A=v-u,x=-2*g+3*d,w=g-d,M=1-x,b=w-d+c;for(let R=0;R!==a;R++){const F=o[A+R+a],O=o[A+R+l]*f,D=o[v+R+a],I=o[v+R]*f;s[R]=M*F+b*O+x*D+w*I}return s}}const cK=new lo;class hK extends KU{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return cK.fromArray(s).normalize().toArray(s),s}}const La={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},fm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},sD={9728:Ss,9729:pr,9984:tA,9985:cm,9986:Yf,9987:za},oD={33071:Fi,33648:Em,10497:Ch},sE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},yb={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...EJ>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},rh={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},fK={CUBICSPLINE:void 0,LINEAR:bm,STEP:Mm},oE={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function dK(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new iv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Il})),i.DefaultMaterial}function Uf(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Ku(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function pK(i,e,t){let n=!1,r=!1,s=!1;for(let u=0,f=e.length;u<f;u++){const c=e[u];if(c.POSITION!==void 0&&(n=!0),c.NORMAL!==void 0&&(r=!0),c.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let u=0,f=e.length;u<f;u++){const c=e[u];if(n){const d=c.POSITION!==void 0?t.getDependency("accessor",c.POSITION):i.attributes.position;o.push(d)}if(r){const d=c.NORMAL!==void 0?t.getDependency("accessor",c.NORMAL):i.attributes.normal;a.push(d)}if(s){const d=c.COLOR_0!==void 0?t.getDependency("accessor",c.COLOR_0):i.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const f=u[0],c=u[1],d=u[2];return n&&(i.morphAttributes.position=f),r&&(i.morphAttributes.normal=c),s&&(i.morphAttributes.color=d),i.morphTargetsRelative=!0,i})}function mK(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function gK(i){let e;const t=i.extensions&&i.extensions[Kn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+aE(t.attributes):e=i.indices+":"+aE(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+aE(i.targets[n]);return e}function aE(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function xb(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function _K(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const vK=new pn;class yK{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new GJ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&s<98?this.textureLoader=new ZN(this.options.manager):this.textureLoader=new sU(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Us(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return Uf(s,a,r),Ku(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,f]of o.children.entries())s(f,a.children[u])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Kn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(vh.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=sE[r.type],a=fm[r.componentType],l=r.normalized===!0,u=new a(r.count*o);return Promise.resolve(new gr(u,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=sE[r.type],u=fm[r.componentType],f=u.BYTES_PER_ELEMENT,c=f*l,d=r.byteOffset||0,g=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let A,x;if(g&&g!==c){const w=Math.floor(d/g),M="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+w+":"+r.count;let b=t.cache.get(M);b||(A=new u(a,w*g,r.count*g/f),b=new Q0(A,g/f),t.cache.add(M,b)),x=new Rh(b,l,d%g/f,v)}else a===null?A=new u(r.count*l):A=new u(a,d,r.count*l),x=new gr(A,l,v);if(r.sparse!==void 0){const w=sE.SCALAR,M=fm[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,R=r.sparse.values.byteOffset||0,F=new M(o[1],b,r.sparse.count*w),O=new u(o[2],R,r.sparse.count*l);a!==null&&(x=new gr(x.array.slice(),x.itemSize,x.normalized));for(let D=0,I=F.length;D<I;D++){const C=F[D];if(x.setX(C,O[D*l]),l>=2&&x.setY(C,O[D*l+1]),l>=3&&x.setZ(C,O[D*l+2]),l>=4&&x.setW(C,O[D*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=n.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,n).then(function(f){f.flipY=!1,f.name=o.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);const d=(s.samplers||{})[o.sampler]||{};return f.magFilter=sD[d.magFilter]||pr,f.minFilter=sD[d.minFilter]||za,f.wrapS=oD[d.wrapS]||Ch,f.wrapT=oD[d.wrapT]||Ch,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(c=>c.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=n.getDependency("bufferView",o.bufferView).then(function(c){u=!0;const d=new Blob([c],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(l).then(function(c){return new Promise(function(d,g){let v=d;t.isImageBitmapLoader===!0&&(v=function(A){const x=new mr(A);x.needsUpdate=!0,d(x)}),t.load(vh.resolveURL(c,s.path),v,void 0,g)})}).then(function(c){return u===!0&&a.revokeObjectURL(l),Ku(c,o),c.userData.mimeType=o.mimeType||_K(o.uri),c}).catch(function(c){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),c});return this.sourceCache[e]=f,f}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[Kn.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[Kn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Kn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===rD?rd:oc),"colorSpace"in o?o.colorSpace=r:o.encoding=r===rd?rD:zJ),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new dA,Xi.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new co,Xi.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return iv}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[Kn.KHR_MATERIALS_UNLIT]){const c=r[Kn.KHR_MATERIALS_UNLIT];o=c.getMaterialType(),u.push(c.extendParams(a,s,t))}else{const c=s.pbrMetallicRoughness||{};if(a.color=new Ht(1,1,1),a.opacity=1,Array.isArray(c.baseColorFactor)){const d=c.baseColorFactor;a.color.setRGB(d[0],d[1],d[2],oc),a.opacity=d[3]}c.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",c.baseColorTexture,rd)),a.metalness=c.metallicFactor!==void 0?c.metallicFactor:1,a.roughness=c.roughnessFactor!==void 0?c.roughnessFactor:1,c.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",c.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",c.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Co);const f=s.alphaMode||oE.OPAQUE;if(f===oE.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===oE.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Io&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new mt(1,1),s.normalTexture.scale!==void 0)){const c=s.normalTexture.scale;a.normalScale.set(c,c)}if(s.occlusionTexture!==void 0&&o!==Io&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Io){const c=s.emissiveFactor;a.emissive=new Ht().setRGB(c[0],c[1],c[2],oc)}return s.emissiveTexture!==void 0&&o!==Io&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,rd)),Promise.all(u).then(function(){const c=new o(a);return s.name&&(c.name=s.name),Ku(c,s),t.associations.set(c,{materials:e}),s.extensions&&Uf(r,c,s),c})}createUniqueName(e){const t=ur.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[Kn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return aD(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],f=gK(u),c=r[f];if(c)o.push(c.promise);else{let d;u.extensions&&u.extensions[Kn.KHR_DRACO_MESH_COMPRESSION]?d=s(u):d=aD(new Dn,u,t),r[f]={primitive:u,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const f=o[l].material===void 0?dK(this.cache):this.getDependency("material",o[l].material);a.push(f)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),f=l[l.length-1],c=[];for(let g=0,v=f.length;g<v;g++){const A=f[g],x=o[g];let w;const M=u[g];if(x.mode===La.TRIANGLES||x.mode===La.TRIANGLE_STRIP||x.mode===La.TRIANGLE_FAN||x.mode===void 0)w=s.isSkinnedMesh===!0?new r2(A,M):new Lr(A,M),w.isSkinnedMesh===!0&&w.normalizeSkinWeights(),x.mode===La.TRIANGLE_STRIP?w.geometry=nD(w.geometry,qC):x.mode===La.TRIANGLE_FAN&&(w.geometry=nD(w.geometry,wx));else if(x.mode===La.LINES)w=new Dl(A,M);else if(x.mode===La.LINE_STRIP)w=new cc(A,M);else if(x.mode===La.LINE_LOOP)w=new s2(A,M);else if(x.mode===La.POINTS)w=new o2(A,M);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(w.geometry.morphAttributes).length>0&&mK(w,s),w.name=t.createUniqueName(s.name||"mesh_"+e),Ku(w,s),x.extensions&&Uf(r,w,x),t.assignFinalMaterial(w),c.push(w)}for(let g=0,v=c.length;g<v;g++)t.associations.set(c[g],{meshes:e,primitives:g});if(c.length===1)return s.extensions&&Uf(r,c[0],s),c[0];const d=new rc;s.extensions&&Uf(r,d,s),t.associations.set(d,{meshes:e});for(let g=0,v=c.length;g<v;g++)d.add(c[g]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Li(YC.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new _c(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Ku(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let u=0,f=o.length;u<f;u++){const c=o[u];if(c){a.push(c);const d=new pn;s!==null&&d.fromArray(s.array,u*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Z0(a,l)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],u=[],f=[];for(let c=0,d=r.channels.length;c<d;c++){const g=r.channels[c],v=r.samplers[g.sampler],A=g.target,x=A.node,w=r.parameters!==void 0?r.parameters[v.input]:v.input,M=r.parameters!==void 0?r.parameters[v.output]:v.output;A.node!==void 0&&(o.push(this.getDependency("node",x)),a.push(this.getDependency("accessor",w)),l.push(this.getDependency("accessor",M)),u.push(v),f.push(A))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f)]).then(function(c){const d=c[0],g=c[1],v=c[2],A=c[3],x=c[4],w=[];for(let M=0,b=d.length;M<b;M++){const R=d[M],F=g[M],O=v[M],D=A[M],I=x[M];if(R===void 0)continue;R.updateMatrix&&R.updateMatrix();const C=n._createAnimationTracks(R,F,O,D,I);if(C)for(let B=0;B<C.length;B++)w.push(C[B])}return new Pm(s,void 0,w)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),o=[],a=r.children||[];for(let u=0,f=a.length;u<f;u++)o.push(n.getDependency("node",a[u]));const l=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const f=u[0],c=u[1],d=u[2];d!==null&&f.traverse(function(g){g.isSkinnedMesh&&g.bind(d,vK)});for(let g=0,v=c.length;g<v;g++)f.add(c[g]);return f})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let f;if(s.isBone===!0?f=new fA:u.length>1?f=new rc:u.length===1?f=u[0]:f=new ir,f!==u[0])for(let c=0,d=u.length;c<d;c++)f.add(u[c]);if(s.name&&(f.userData.name=s.name,f.name=o),Ku(f,s),s.extensions&&Uf(n,f,s),s.matrix!==void 0){const c=new pn;c.fromArray(s.matrix),f.applyMatrix4(c)}else s.translation!==void 0&&f.position.fromArray(s.translation),s.rotation!==void 0&&f.quaternion.fromArray(s.rotation),s.scale!==void 0&&f.scale.fromArray(s.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new rc;n.name&&(s.name=r.createUniqueName(n.name)),Ku(s,n),n.extensions&&Uf(t,s,n);const o=n.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let f=0,c=l.length;f<c;f++)s.add(l[f]);const u=f=>{const c=new Map;for(const[d,g]of r.associations)(d instanceof Xi||d instanceof mr)&&c.set(d,g);return f.traverse(d=>{const g=r.associations.get(d);g!=null&&c.set(d,g)}),c};return r.associations=u(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];rh[s.path]===rh.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(a);let u;switch(rh[s.path]){case rh.weights:u=Ed;break;case rh.rotation:u=Td;break;case rh.position:case rh.scale:u=Md;break;default:switch(n.itemSize){case 1:u=Ed;break;case 2:case 3:default:u=Md;break}break}const f=r.interpolation!==void 0?fK[r.interpolation]:bm,c=this._getArrayFromAccessor(n);for(let d=0,g=l.length;d<g;d++){const v=new u(l[d]+"."+rh[s.path],t.array,c,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=xb(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof Td?hK:KU;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function xK(i,e,t){const n=e.attributes,r=new Es;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new ce(l[0],l[1],l[2]),new ce(u[0],u[1],u[2])),a.normalized){const f=xb(fm[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new ce,l=new ce;for(let u=0,f=s.length;u<f;u++){const c=s[u];if(c.POSITION!==void 0){const d=t.json.accessors[c.POSITION],g=d.min,v=d.max;if(g!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),d.normalized){const A=xb(fm[d.componentType]);l.multiplyScalar(A)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new is;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}function aD(i,e,t){const n=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=yb[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(o)}return Ku(i,e),xK(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?pK(i,e.targets,t):i})}const AK={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},wK={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class SK extends _2{constructor(e){super(e),this.type=ws}parse(e){const o=function(I,C){switch(I){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(C||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(C||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(C||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(C||""))}},f=`
`,c=function(I,C,B){C=C||1024;let H=I.pos,z=-1,Z=0,ue="",ae=String.fromCharCode.apply(null,new Uint16Array(I.subarray(H,H+128)));for(;0>(z=ae.indexOf(f))&&Z<C&&H<I.byteLength;)ue+=ae,Z+=ae.length,H+=128,ae+=String.fromCharCode.apply(null,new Uint16Array(I.subarray(H,H+128)));return-1<z?(I.pos+=Z+z+1,ue+ae.slice(0,z)):!1},d=function(I){const C=/^#\?(\S+)/,B=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,k=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,H=/^\s*FORMAT=(\S+)\s*$/,z=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Z={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ue,ae;for((I.pos>=I.byteLength||!(ue=c(I)))&&o(1,"no header found"),(ae=ue.match(C))||o(3,"bad initial token"),Z.valid|=1,Z.programtype=ae[1],Z.string+=ue+`
`;ue=c(I),ue!==!1;){if(Z.string+=ue+`
`,ue.charAt(0)==="#"){Z.comments+=ue+`
`;continue}if((ae=ue.match(B))&&(Z.gamma=parseFloat(ae[1])),(ae=ue.match(k))&&(Z.exposure=parseFloat(ae[1])),(ae=ue.match(H))&&(Z.valid|=2,Z.format=ae[1]),(ae=ue.match(z))&&(Z.valid|=4,Z.height=parseInt(ae[1],10),Z.width=parseInt(ae[2],10)),Z.valid&2&&Z.valid&4)break}return Z.valid&2||o(3,"missing format specifier"),Z.valid&4||o(3,"missing image size specifier"),Z},g=function(I,C,B){const k=C;if(k<8||k>32767||I[0]!==2||I[1]!==2||I[2]&128)return new Uint8Array(I);k!==(I[2]<<8|I[3])&&o(3,"wrong scanline width");const H=new Uint8Array(4*C*B);H.length||o(4,"unable to allocate buffer space");let z=0,Z=0;const ue=4*k,ae=new Uint8Array(4),ge=new Uint8Array(ue);let ee=B;for(;ee>0&&Z<I.byteLength;){Z+4>I.byteLength&&o(1),ae[0]=I[Z++],ae[1]=I[Z++],ae[2]=I[Z++],ae[3]=I[Z++],(ae[0]!=2||ae[1]!=2||(ae[2]<<8|ae[3])!=k)&&o(3,"bad rgbe scanline format");let le=0,$;for(;le<ue&&Z<I.byteLength;){$=I[Z++];const Q=$>128;if(Q&&($-=128),($===0||le+$>ue)&&o(3,"bad scanline data"),Q){const fe=I[Z++];for(let oe=0;oe<$;oe++)ge[le++]=fe}else ge.set(I.subarray(Z,Z+$),le),le+=$,Z+=$}const V=k;for(let Q=0;Q<V;Q++){let fe=0;H[z]=ge[Q+fe],fe+=k,H[z+1]=ge[Q+fe],fe+=k,H[z+2]=ge[Q+fe],fe+=k,H[z+3]=ge[Q+fe],z+=4}ee--}return H},v=function(I,C,B,k){const H=I[C+3],z=Math.pow(2,H-128)/255;B[k+0]=I[C+0]*z,B[k+1]=I[C+1]*z,B[k+2]=I[C+2]*z,B[k+3]=1},A=function(I,C,B,k){const H=I[C+3],z=Math.pow(2,H-128)/255;B[k+0]=ed.toHalfFloat(Math.min(I[C+0]*z,65504)),B[k+1]=ed.toHalfFloat(Math.min(I[C+1]*z,65504)),B[k+2]=ed.toHalfFloat(Math.min(I[C+2]*z,65504)),B[k+3]=ed.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const w=d(x),M=w.width,b=w.height,R=g(x.subarray(x.pos),M,b);let F,O,D;switch(this.type){case pi:D=R.length/4;const I=new Float32Array(D*4);for(let B=0;B<D;B++)v(R,B*4,I,B*4);F=I,O=pi;break;case ws:D=R.length/4;const C=new Uint16Array(D*4);for(let B=0;B<D;B++)A(R,B*4,C,B*4);F=C,O=ws;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:M,height:b,data:F,header:w.string,gamma:w.gamma,exposure:w.exposure,type:O}}setDataType(e){return this.type=e,this}load(e,t,n,r){function s(o,a){switch(o.type){case pi:case ws:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=pr,o.magFilter=pr,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,n,r)}}const s_="colorSpace"in new mr;class EK extends _2{constructor(e){super(e),this.type=ws}parse(e){const C=Math.pow(2.7182818,2.2);function B(X,ne){for(var Se=0,Ue=0;Ue<65536;++Ue)(Ue==0||X[Ue>>3]&1<<(Ue&7))&&(ne[Se++]=Ue);for(var Qe=Se-1;Se<65536;)ne[Se++]=0;return Qe}function k(X){for(var ne=0;ne<16384;ne++)X[ne]={},X[ne].len=0,X[ne].lit=0,X[ne].p=null}const H={l:0,c:0,lc:0};function z(X,ne,Se,Ue,Qe){for(;Se<X;)ne=ne<<8|it(Ue,Qe),Se+=8;Se-=X,H.l=ne>>Se&(1<<X)-1,H.c=ne,H.lc=Se}const Z=new Array(59);function ue(X){for(var ne=0;ne<=58;++ne)Z[ne]=0;for(var ne=0;ne<65537;++ne)Z[X[ne]]+=1;for(var Se=0,ne=58;ne>0;--ne){var Ue=Se+Z[ne]>>1;Z[ne]=Se,Se=Ue}for(var ne=0;ne<65537;++ne){var Qe=X[ne];Qe>0&&(X[ne]=Qe|Z[Qe]++<<6)}}function ae(X,ne,Se,Ue,Qe,Ze,Et){for(var q=Se,de=0,Ae=0;Qe<=Ze;Qe++){if(q.value-Se.value>Ue)return!1;z(6,de,Ae,X,q);var we=H.l;if(de=H.c,Ae=H.lc,Et[Qe]=we,we==63){if(q.value-Se.value>Ue)throw"Something wrong with hufUnpackEncTable";z(8,de,Ae,X,q);var te=H.l+6;if(de=H.c,Ae=H.lc,Qe+te>Ze+1)throw"Something wrong with hufUnpackEncTable";for(;te--;)Et[Qe++]=0;Qe--}else if(we>=59){var te=we-59+2;if(Qe+te>Ze+1)throw"Something wrong with hufUnpackEncTable";for(;te--;)Et[Qe++]=0;Qe--}}ue(Et)}function ge(X){return X&63}function ee(X){return X>>6}function le(X,ne,Se,Ue){for(;ne<=Se;ne++){var Qe=ee(X[ne]),Ze=ge(X[ne]);if(Qe>>Ze)throw"Invalid table entry";if(Ze>14){var Et=Ue[Qe>>Ze-14];if(Et.len)throw"Invalid table entry";if(Et.lit++,Et.p){var q=Et.p;Et.p=new Array(Et.lit);for(var de=0;de<Et.lit-1;++de)Et.p[de]=q[de]}else Et.p=new Array(1);Et.p[Et.lit-1]=ne}else if(Ze)for(var Ae=0,de=1<<14-Ze;de>0;de--){var Et=Ue[(Qe<<14-Ze)+Ae];if(Et.len||Et.p)throw"Invalid table entry";Et.len=Ze,Et.lit=ne,Ae++}}return!0}const $={c:0,lc:0};function V(X,ne,Se,Ue){X=X<<8|it(Se,Ue),ne+=8,$.c=X,$.lc=ne}const Q={c:0,lc:0};function fe(X,ne,Se,Ue,Qe,Ze,Et,q,de,Ae){if(X==ne){Ue<8&&(V(Se,Ue,Qe,Et),Se=$.c,Ue=$.lc),Ue-=8;var we=Se>>Ue,we=new Uint8Array([we])[0];if(de.value+we>Ae)return!1;for(var te=q[de.value-1];we-- >0;)q[de.value++]=te}else if(de.value<Ae)q[de.value++]=X;else return!1;Q.c=Se,Q.lc=Ue}function oe(X){return X&65535}function he(X){var ne=oe(X);return ne>32767?ne-65536:ne}const xe={a:0,b:0};function _e(X,ne){var Se=he(X),Ue=he(ne),Qe=Ue,Ze=Se+(Qe&1)+(Qe>>1),Et=Ze,q=Ze-Qe;xe.a=Et,xe.b=q}function be(X,ne){var Se=oe(X),Ue=oe(ne),Qe=Se-(Ue>>1)&65535,Ze=Ue+Qe-32768&65535;xe.a=Ze,xe.b=Qe}function Xe(X,ne,Se,Ue,Qe,Ze,Et){for(var q=Et<16384,de=Se>Qe?Qe:Se,Ae=1,we;Ae<=de;)Ae<<=1;for(Ae>>=1,we=Ae,Ae>>=1;Ae>=1;){for(var te=0,st=te+Ze*(Qe-we),$e=Ze*Ae,et=Ze*we,ct=Ue*Ae,Mt=Ue*we,Dt,wt,Tt,zt;te<=st;te+=et){for(var Vt=te,un=te+Ue*(Se-we);Vt<=un;Vt+=Mt){var Nt=Vt+ct,Lt=Vt+$e,Sn=Lt+ct;q?(_e(X[Vt+ne],X[Lt+ne]),Dt=xe.a,Tt=xe.b,_e(X[Nt+ne],X[Sn+ne]),wt=xe.a,zt=xe.b,_e(Dt,wt),X[Vt+ne]=xe.a,X[Nt+ne]=xe.b,_e(Tt,zt),X[Lt+ne]=xe.a,X[Sn+ne]=xe.b):(be(X[Vt+ne],X[Lt+ne]),Dt=xe.a,Tt=xe.b,be(X[Nt+ne],X[Sn+ne]),wt=xe.a,zt=xe.b,be(Dt,wt),X[Vt+ne]=xe.a,X[Nt+ne]=xe.b,be(Tt,zt),X[Lt+ne]=xe.a,X[Sn+ne]=xe.b)}if(Se&Ae){var Lt=Vt+$e;q?_e(X[Vt+ne],X[Lt+ne]):be(X[Vt+ne],X[Lt+ne]),Dt=xe.a,X[Lt+ne]=xe.b,X[Vt+ne]=Dt}}if(Qe&Ae)for(var Vt=te,un=te+Ue*(Se-we);Vt<=un;Vt+=Mt){var Nt=Vt+ct;q?_e(X[Vt+ne],X[Nt+ne]):be(X[Vt+ne],X[Nt+ne]),Dt=xe.a,X[Nt+ne]=xe.b,X[Vt+ne]=Dt}we=Ae,Ae>>=1}return te}function Ye(X,ne,Se,Ue,Qe,Ze,Et,q,de,Ae){for(var we=0,te=0,st=q,$e=Math.trunc(Qe.value+(Ze+7)/8);Qe.value<$e;)for(V(we,te,Se,Qe),we=$.c,te=$.lc;te>=14;){var et=we>>te-14&16383,ct=ne[et];if(ct.len)te-=ct.len,fe(ct.lit,Et,we,te,Se,Ue,Qe,de,Ae,st),we=Q.c,te=Q.lc;else{if(!ct.p)throw"hufDecode issues";var Mt;for(Mt=0;Mt<ct.lit;Mt++){for(var Dt=ge(X[ct.p[Mt]]);te<Dt&&Qe.value<$e;)V(we,te,Se,Qe),we=$.c,te=$.lc;if(te>=Dt&&ee(X[ct.p[Mt]])==(we>>te-Dt&(1<<Dt)-1)){te-=Dt,fe(ct.p[Mt],Et,we,te,Se,Ue,Qe,de,Ae,st),we=Q.c,te=Q.lc;break}}if(Mt==ct.lit)throw"hufDecode issues"}}var wt=8-Ze&7;for(we>>=wt,te-=wt;te>0;){var ct=ne[we<<14-te&16383];if(ct.len)te-=ct.len,fe(ct.lit,Et,we,te,Se,Ue,Qe,de,Ae,st),we=Q.c,te=Q.lc;else throw"hufDecode issues"}return!0}function Ne(X,ne,Se,Ue,Qe,Ze){var Et={value:0},q=Se.value,de=gt(ne,Se),Ae=gt(ne,Se);Se.value+=4;var we=gt(ne,Se);if(Se.value+=4,de<0||de>=65537||Ae<0||Ae>=65537)throw"Something wrong with HUF_ENCSIZE";var te=new Array(65537),st=new Array(16384);k(st);var $e=Ue-(Se.value-q);if(ae(X,ne,Se,$e,de,Ae,te),we>8*(Ue-(Se.value-q)))throw"Something wrong with hufUncompress";le(te,de,Ae,st),Ye(te,st,X,ne,Se,we,Ae,Ze,Qe,Et)}function Ee(X,ne,Se){for(var Ue=0;Ue<Se;++Ue)ne[Ue]=X[ne[Ue]]}function Ge(X){for(var ne=1;ne<X.length;ne++){var Se=X[ne-1]+X[ne]-128;X[ne]=Se}}function se(X,ne){for(var Se=0,Ue=Math.floor((X.length+1)/2),Qe=0,Ze=X.length-1;!(Qe>Ze||(ne[Qe++]=X[Se++],Qe>Ze));)ne[Qe++]=X[Ue++]}function ht(X){for(var ne=X.byteLength,Se=new Array,Ue=0,Qe=new DataView(X);ne>0;){var Ze=Qe.getInt8(Ue++);if(Ze<0){var Et=-Ze;ne-=Et+1;for(var q=0;q<Et;q++)Se.push(Qe.getUint8(Ue++))}else{var Et=Ze;ne-=2;for(var de=Qe.getUint8(Ue++),q=0;q<Et+1;q++)Se.push(de)}}return Se}function We(X,ne,Se,Ue,Qe,Ze){var Nt=new DataView(Ze.buffer),Et=Se[X.idx[0]].width,q=Se[X.idx[0]].height,de=3,Ae=Math.floor(Et/8),we=Math.ceil(Et/8),te=Math.ceil(q/8),st=Et-(we-1)*8,$e=q-(te-1)*8,et={value:0},ct=new Array(de),Mt=new Array(de),Dt=new Array(de),wt=new Array(de),Tt=new Array(de);for(let An=0;An<de;++An)Tt[An]=ne[X.idx[An]],ct[An]=An<1?0:ct[An-1]+we*te,Mt[An]=new Float32Array(64),Dt[An]=new Uint16Array(64),wt[An]=new Uint16Array(we*64);for(let An=0;An<te;++An){var zt=8;An==te-1&&(zt=$e);var Vt=8;for(let wn=0;wn<we;++wn){wn==we-1&&(Vt=st);for(let Ut=0;Ut<de;++Ut)Dt[Ut].fill(0),Dt[Ut][0]=Qe[ct[Ut]++],ut(et,Ue,Dt[Ut]),Fe(Dt[Ut],Mt[Ut]),dt(Mt[Ut]);je(Mt);for(let Ut=0;Ut<de;++Ut)K(Mt[Ut],wt[Ut],wn*64)}let Vn=0;for(let wn=0;wn<de;++wn){const Ut=Se[X.idx[wn]].type;for(let En=8*An;En<8*An+zt;++En){Vn=Tt[wn][En];for(let Yn=0;Yn<Ae;++Yn){const Mn=Yn*64+(En&7)*8;Nt.setUint16(Vn+0*2*Ut,wt[wn][Mn+0],!0),Nt.setUint16(Vn+1*2*Ut,wt[wn][Mn+1],!0),Nt.setUint16(Vn+2*2*Ut,wt[wn][Mn+2],!0),Nt.setUint16(Vn+3*2*Ut,wt[wn][Mn+3],!0),Nt.setUint16(Vn+4*2*Ut,wt[wn][Mn+4],!0),Nt.setUint16(Vn+5*2*Ut,wt[wn][Mn+5],!0),Nt.setUint16(Vn+6*2*Ut,wt[wn][Mn+6],!0),Nt.setUint16(Vn+7*2*Ut,wt[wn][Mn+7],!0),Vn+=8*2*Ut}}if(Ae!=we)for(let En=8*An;En<8*An+zt;++En){const Yn=Tt[wn][En]+8*Ae*2*Ut,Mn=Ae*64+(En&7)*8;for(let hn=0;hn<Vt;++hn)Nt.setUint16(Yn+hn*2*Ut,wt[wn][Mn+hn],!0)}}}for(var un=new Uint16Array(Et),Nt=new DataView(Ze.buffer),Lt=0;Lt<de;++Lt){Se[X.idx[Lt]].decoded=!0;var Sn=Se[X.idx[Lt]].type;if(Se[Lt].type==2)for(var nn=0;nn<q;++nn){const An=Tt[Lt][nn];for(var In=0;In<Et;++In)un[In]=Nt.getUint16(An+In*2*Sn,!0);for(var In=0;In<Et;++In)Nt.setFloat32(An+In*2*Sn,Ce(un[In]),!0)}}}function ut(X,ne,Se){for(var Ue,Qe=1;Qe<64;)Ue=ne[X.value],Ue==65280?Qe=64:Ue>>8==255?Qe+=Ue&255:(Se[Qe]=Ue,Qe++),X.value++}function Fe(X,ne){ne[0]=Ce(X[0]),ne[1]=Ce(X[1]),ne[2]=Ce(X[5]),ne[3]=Ce(X[6]),ne[4]=Ce(X[14]),ne[5]=Ce(X[15]),ne[6]=Ce(X[27]),ne[7]=Ce(X[28]),ne[8]=Ce(X[2]),ne[9]=Ce(X[4]),ne[10]=Ce(X[7]),ne[11]=Ce(X[13]),ne[12]=Ce(X[16]),ne[13]=Ce(X[26]),ne[14]=Ce(X[29]),ne[15]=Ce(X[42]),ne[16]=Ce(X[3]),ne[17]=Ce(X[8]),ne[18]=Ce(X[12]),ne[19]=Ce(X[17]),ne[20]=Ce(X[25]),ne[21]=Ce(X[30]),ne[22]=Ce(X[41]),ne[23]=Ce(X[43]),ne[24]=Ce(X[9]),ne[25]=Ce(X[11]),ne[26]=Ce(X[18]),ne[27]=Ce(X[24]),ne[28]=Ce(X[31]),ne[29]=Ce(X[40]),ne[30]=Ce(X[44]),ne[31]=Ce(X[53]),ne[32]=Ce(X[10]),ne[33]=Ce(X[19]),ne[34]=Ce(X[23]),ne[35]=Ce(X[32]),ne[36]=Ce(X[39]),ne[37]=Ce(X[45]),ne[38]=Ce(X[52]),ne[39]=Ce(X[54]),ne[40]=Ce(X[20]),ne[41]=Ce(X[22]),ne[42]=Ce(X[33]),ne[43]=Ce(X[38]),ne[44]=Ce(X[46]),ne[45]=Ce(X[51]),ne[46]=Ce(X[55]),ne[47]=Ce(X[60]),ne[48]=Ce(X[21]),ne[49]=Ce(X[34]),ne[50]=Ce(X[37]),ne[51]=Ce(X[47]),ne[52]=Ce(X[50]),ne[53]=Ce(X[56]),ne[54]=Ce(X[59]),ne[55]=Ce(X[61]),ne[56]=Ce(X[35]),ne[57]=Ce(X[36]),ne[58]=Ce(X[48]),ne[59]=Ce(X[49]),ne[60]=Ce(X[57]),ne[61]=Ce(X[58]),ne[62]=Ce(X[62]),ne[63]=Ce(X[63])}function dt(X){const ne=.5*Math.cos(.7853975),Se=.5*Math.cos(3.14159/16),Ue=.5*Math.cos(3.14159/8),Qe=.5*Math.cos(3*3.14159/16),Ze=.5*Math.cos(5*3.14159/16),Et=.5*Math.cos(3*3.14159/8),q=.5*Math.cos(7*3.14159/16);for(var de=new Array(4),Ae=new Array(4),we=new Array(4),te=new Array(4),st=0;st<8;++st){var $e=st*8;de[0]=Ue*X[$e+2],de[1]=Et*X[$e+2],de[2]=Ue*X[$e+6],de[3]=Et*X[$e+6],Ae[0]=Se*X[$e+1]+Qe*X[$e+3]+Ze*X[$e+5]+q*X[$e+7],Ae[1]=Qe*X[$e+1]-q*X[$e+3]-Se*X[$e+5]-Ze*X[$e+7],Ae[2]=Ze*X[$e+1]-Se*X[$e+3]+q*X[$e+5]+Qe*X[$e+7],Ae[3]=q*X[$e+1]-Ze*X[$e+3]+Qe*X[$e+5]-Se*X[$e+7],we[0]=ne*(X[$e+0]+X[$e+4]),we[3]=ne*(X[$e+0]-X[$e+4]),we[1]=de[0]+de[3],we[2]=de[1]-de[2],te[0]=we[0]+we[1],te[1]=we[3]+we[2],te[2]=we[3]-we[2],te[3]=we[0]-we[1],X[$e+0]=te[0]+Ae[0],X[$e+1]=te[1]+Ae[1],X[$e+2]=te[2]+Ae[2],X[$e+3]=te[3]+Ae[3],X[$e+4]=te[3]-Ae[3],X[$e+5]=te[2]-Ae[2],X[$e+6]=te[1]-Ae[1],X[$e+7]=te[0]-Ae[0]}for(var et=0;et<8;++et)de[0]=Ue*X[16+et],de[1]=Et*X[16+et],de[2]=Ue*X[48+et],de[3]=Et*X[48+et],Ae[0]=Se*X[8+et]+Qe*X[24+et]+Ze*X[40+et]+q*X[56+et],Ae[1]=Qe*X[8+et]-q*X[24+et]-Se*X[40+et]-Ze*X[56+et],Ae[2]=Ze*X[8+et]-Se*X[24+et]+q*X[40+et]+Qe*X[56+et],Ae[3]=q*X[8+et]-Ze*X[24+et]+Qe*X[40+et]-Se*X[56+et],we[0]=ne*(X[et]+X[32+et]),we[3]=ne*(X[et]-X[32+et]),we[1]=de[0]+de[3],we[2]=de[1]-de[2],te[0]=we[0]+we[1],te[1]=we[3]+we[2],te[2]=we[3]-we[2],te[3]=we[0]-we[1],X[0+et]=te[0]+Ae[0],X[8+et]=te[1]+Ae[1],X[16+et]=te[2]+Ae[2],X[24+et]=te[3]+Ae[3],X[32+et]=te[3]-Ae[3],X[40+et]=te[2]-Ae[2],X[48+et]=te[1]-Ae[1],X[56+et]=te[0]-Ae[0]}function je(X){for(var ne=0;ne<64;++ne){var Se=X[0][ne],Ue=X[1][ne],Qe=X[2][ne];X[0][ne]=Se+1.5747*Qe,X[1][ne]=Se-.1873*Ue-.4682*Qe,X[2][ne]=Se+1.8556*Ue}}function K(X,ne,Se){for(var Ue=0;Ue<64;++Ue)ne[Se+Ue]=ed.toHalfFloat(J(X[Ue]))}function J(X){return X<=1?Math.sign(X)*Math.pow(Math.abs(X),2.2):Math.sign(X)*Math.pow(C,Math.abs(X)-1)}function ye(X){return new DataView(X.array.buffer,X.offset.value,X.size)}function Re(X){var ne=X.viewer.buffer.slice(X.offset.value,X.offset.value+X.size),Se=new Uint8Array(ht(ne)),Ue=new Uint8Array(Se.length);return Ge(Se),se(Se,Ue),new DataView(Ue.buffer)}function De(X){var ne=X.array.slice(X.offset.value,X.offset.value+X.size),Se=$y(ne),Ue=new Uint8Array(Se.length);return Ge(Se),se(Se,Ue),new DataView(Ue.buffer)}function ke(X){for(var ne=X.viewer,Se={value:X.offset.value},Ue=new Uint16Array(X.width*X.scanlineBlockSize*(X.channels*X.type)),Qe=new Uint8Array(8192),Ze=0,Et=new Array(X.channels),q=0;q<X.channels;q++)Et[q]={},Et[q].start=Ze,Et[q].end=Et[q].start,Et[q].nx=X.width,Et[q].ny=X.lines,Et[q].size=X.type,Ze+=Et[q].nx*Et[q].ny*Et[q].size;var de=Le(ne,Se),Ae=Le(ne,Se);if(Ae>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(de<=Ae)for(var q=0;q<Ae-de+1;q++)Qe[q+de]=kt(ne,Se);var we=new Uint16Array(65536),te=B(Qe,we),st=gt(ne,Se);Ne(X.array,ne,Se,st,Ue,Ze);for(var q=0;q<X.channels;++q)for(var $e=Et[q],et=0;et<Et[q].size;++et)Xe(Ue,$e.start+et,$e.nx,$e.size,$e.ny,$e.nx*$e.size,te);Ee(we,Ue,Ze);for(var ct=0,Mt=new Uint8Array(Ue.buffer.byteLength),Dt=0;Dt<X.lines;Dt++)for(var wt=0;wt<X.channels;wt++){var $e=Et[wt],Tt=$e.nx*$e.size,zt=new Uint8Array(Ue.buffer,$e.end*2,Tt*2);Mt.set(zt,ct),ct+=Tt*2,$e.end+=Tt}return new DataView(Mt.buffer)}function qe(X){var ne=X.array.slice(X.offset.value,X.offset.value+X.size),Se=$y(ne);const Ue=X.lines*X.channels*X.width,Qe=X.type==1?new Uint16Array(Ue):new Uint32Array(Ue);let Ze=0,Et=0;const q=new Array(4);for(let de=0;de<X.lines;de++)for(let Ae=0;Ae<X.channels;Ae++){let we=0;switch(X.type){case 1:q[0]=Ze,q[1]=q[0]+X.width,Ze=q[1]+X.width;for(let te=0;te<X.width;++te){const st=Se[q[0]++]<<8|Se[q[1]++];we+=st,Qe[Et]=we,Et++}break;case 2:q[0]=Ze,q[1]=q[0]+X.width,q[2]=q[1]+X.width,Ze=q[2]+X.width;for(let te=0;te<X.width;++te){const st=Se[q[0]++]<<24|Se[q[1]++]<<16|Se[q[2]++]<<8;we+=st,Qe[Et]=we,Et++}break}}return new DataView(Qe.buffer)}function nt(X){var ne=X.viewer,Se={value:X.offset.value},Ue=new Uint8Array(X.width*X.lines*(X.channels*X.type*2)),Qe={version:Bt(ne,Se),unknownUncompressedSize:Bt(ne,Se),unknownCompressedSize:Bt(ne,Se),acCompressedSize:Bt(ne,Se),dcCompressedSize:Bt(ne,Se),rleCompressedSize:Bt(ne,Se),rleUncompressedSize:Bt(ne,Se),rleRawSize:Bt(ne,Se),totalAcUncompressedCount:Bt(ne,Se),totalDcUncompressedCount:Bt(ne,Se),acCompression:Bt(ne,Se)};if(Qe.version<2)throw"EXRLoader.parse: "+sr.compression+" version "+Qe.version+" is unsupported";for(var Ze=new Array,Et=Le(ne,Se)-2;Et>0;){var q=lt(ne.buffer,Se),de=kt(ne,Se),Ae=de>>2&3,we=(de>>4)-1,te=new Int8Array([we])[0],st=kt(ne,Se);Ze.push({name:q,index:te,type:st,compression:Ae}),Et-=q.length+3}for(var $e=sr.channels,et=new Array(X.channels),ct=0;ct<X.channels;++ct){var Mt=et[ct]={},Dt=$e[ct];Mt.name=Dt.name,Mt.compression=0,Mt.decoded=!1,Mt.type=Dt.pixelType,Mt.pLinear=Dt.pLinear,Mt.width=X.width,Mt.height=X.lines}for(var wt={idx:new Array(3)},Tt=0;Tt<X.channels;++Tt)for(var Mt=et[Tt],ct=0;ct<Ze.length;++ct){var zt=Ze[ct];Mt.name==zt.name&&(Mt.compression=zt.compression,zt.index>=0&&(wt.idx[zt.index]=Tt),Mt.offset=Tt)}if(Qe.acCompressedSize>0)switch(Qe.acCompression){case 0:var Nt=new Uint16Array(Qe.totalAcUncompressedCount);Ne(X.array,ne,Se,Qe.acCompressedSize,Nt,Qe.totalAcUncompressedCount);break;case 1:var Vt=X.array.slice(Se.value,Se.value+Qe.totalAcUncompressedCount),un=$y(Vt),Nt=new Uint16Array(un.buffer);Se.value+=Qe.totalAcUncompressedCount;break}if(Qe.dcCompressedSize>0){var Lt={array:X.array,offset:Se,size:Qe.dcCompressedSize},Sn=new Uint16Array(De(Lt).buffer);Se.value+=Qe.dcCompressedSize}if(Qe.rleRawSize>0){var Vt=X.array.slice(Se.value,Se.value+Qe.rleCompressedSize),un=$y(Vt),nn=ht(un.buffer);Se.value+=Qe.rleCompressedSize}for(var In=0,An=new Array(et.length),ct=0;ct<An.length;++ct)An[ct]=new Array;for(var Vn=0;Vn<X.lines;++Vn)for(var wn=0;wn<et.length;++wn)An[wn].push(In),In+=et[wn].width*X.type*2;We(wt,An,et,Nt,Sn,Ue);for(var ct=0;ct<et.length;++ct){var Mt=et[ct];if(!Mt.decoded)switch(Mt.compression){case 2:for(var Ut=0,En=0,Vn=0;Vn<X.lines;++Vn){for(var Yn=An[ct][Ut],Mn=0;Mn<Mt.width;++Mn){for(var hn=0;hn<2*Mt.type;++hn)Ue[Yn++]=nn[En+hn*Mt.width*Mt.height];En++}Ut++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Ue.buffer)}function lt(X,ne){for(var Se=new Uint8Array(X),Ue=0;Se[ne.value+Ue]!=0;)Ue+=1;var Qe=new TextDecoder().decode(Se.slice(ne.value,ne.value+Ue));return ne.value=ne.value+Ue+1,Qe}function Ot(X,ne,Se){var Ue=new TextDecoder().decode(new Uint8Array(X).slice(ne.value,ne.value+Se));return ne.value=ne.value+Se,Ue}function rt(X,ne){var Se=yt(X,ne),Ue=gt(X,ne);return[Se,Ue]}function xt(X,ne){var Se=gt(X,ne),Ue=gt(X,ne);return[Se,Ue]}function yt(X,ne){var Se=X.getInt32(ne.value,!0);return ne.value=ne.value+4,Se}function gt(X,ne){var Se=X.getUint32(ne.value,!0);return ne.value=ne.value+4,Se}function it(X,ne){var Se=X[ne.value];return ne.value=ne.value+1,Se}function kt(X,ne){var Se=X.getUint8(ne.value);return ne.value=ne.value+1,Se}const Bt=function(X,ne){let Se;return"getBigInt64"in DataView.prototype?Se=Number(X.getBigInt64(ne.value,!0)):Se=X.getUint32(ne.value+4,!0)+Number(X.getUint32(ne.value,!0)<<32),ne.value+=8,Se};function Qt(X,ne){var Se=X.getFloat32(ne.value,!0);return ne.value+=4,Se}function Te(X,ne){return ed.toHalfFloat(Qt(X,ne))}function Ce(X){var ne=(X&31744)>>10,Se=X&1023;return(X>>15?-1:1)*(ne?ne===31?Se?NaN:1/0:Math.pow(2,ne-15)*(1+Se/1024):6103515625e-14*(Se/1024))}function Le(X,ne){var Se=X.getUint16(ne.value,!0);return ne.value+=2,Se}function at(X,ne){return Ce(Le(X,ne))}function vt(X,ne,Se,Ue){for(var Qe=Se.value,Ze=[];Se.value<Qe+Ue-1;){var Et=lt(ne,Se),q=yt(X,Se),de=kt(X,Se);Se.value+=3;var Ae=yt(X,Se),we=yt(X,Se);Ze.push({name:Et,pixelType:q,pLinear:de,xSampling:Ae,ySampling:we})}return Se.value+=1,Ze}function ft(X,ne){var Se=Qt(X,ne),Ue=Qt(X,ne),Qe=Qt(X,ne),Ze=Qt(X,ne),Et=Qt(X,ne),q=Qt(X,ne),de=Qt(X,ne),Ae=Qt(X,ne);return{redX:Se,redY:Ue,greenX:Qe,greenY:Ze,blueX:Et,blueY:q,whiteX:de,whiteY:Ae}}function qt(X,ne){var Se=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Ue=kt(X,ne);return Se[Ue]}function ln(X,ne){var Se=gt(X,ne),Ue=gt(X,ne),Qe=gt(X,ne),Ze=gt(X,ne);return{xMin:Se,yMin:Ue,xMax:Qe,yMax:Ze}}function Kt(X,ne){var Se=["INCREASING_Y"],Ue=kt(X,ne);return Se[Ue]}function Yt(X,ne){var Se=Qt(X,ne),Ue=Qt(X,ne);return[Se,Ue]}function Wn(X,ne){var Se=Qt(X,ne),Ue=Qt(X,ne),Qe=Qt(X,ne);return[Se,Ue,Qe]}function mn(X,ne,Se,Ue,Qe){if(Ue==="string"||Ue==="stringvector"||Ue==="iccProfile")return Ot(ne,Se,Qe);if(Ue==="chlist")return vt(X,ne,Se,Qe);if(Ue==="chromaticities")return ft(X,Se);if(Ue==="compression")return qt(X,Se);if(Ue==="box2i")return ln(X,Se);if(Ue==="lineOrder")return Kt(X,Se);if(Ue==="float")return Qt(X,Se);if(Ue==="v2f")return Yt(X,Se);if(Ue==="v3f")return Wn(X,Se);if(Ue==="int")return yt(X,Se);if(Ue==="rational")return rt(X,Se);if(Ue==="timecode")return xt(X,Se);if(Ue==="preview")return Se.value+=Qe,"skipped";Se.value+=Qe}function fr(X,ne,Se){const Ue={};if(X.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Ue.version=X.getUint8(4);const Qe=X.getUint8(5);Ue.spec={singleTile:!!(Qe&2),longName:!!(Qe&4),deepFormat:!!(Qe&8),multiPart:!!(Qe&16)},Se.value=8;for(var Ze=!0;Ze;){var Et=lt(ne,Se);if(Et==0)Ze=!1;else{var q=lt(ne,Se),de=gt(X,Se),Ae=mn(X,ne,Se,q,de);Ae===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${q}'.`):Ue[Et]=Ae}}if(Qe&-5)throw console.error("EXRHeader:",Ue),"THREE.EXRLoader: provided file is currently unsupported.";return Ue}function yr(X,ne,Se,Ue,Qe){const Ze={size:0,viewer:ne,array:Se,offset:Ue,width:X.dataWindow.xMax-X.dataWindow.xMin+1,height:X.dataWindow.yMax-X.dataWindow.yMin+1,channels:X.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:X.channels[0].pixelType,uncompress:null,getter:null,format:null,[s_?"colorSpace":"encoding"]:null};switch(X.compression){case"NO_COMPRESSION":Ze.lines=1,Ze.uncompress=ye;break;case"RLE_COMPRESSION":Ze.lines=1,Ze.uncompress=Re;break;case"ZIPS_COMPRESSION":Ze.lines=1,Ze.uncompress=De;break;case"ZIP_COMPRESSION":Ze.lines=16,Ze.uncompress=De;break;case"PIZ_COMPRESSION":Ze.lines=32,Ze.uncompress=ke;break;case"PXR24_COMPRESSION":Ze.lines=16,Ze.uncompress=qe;break;case"DWAA_COMPRESSION":Ze.lines=32,Ze.uncompress=nt;break;case"DWAB_COMPRESSION":Ze.lines=256,Ze.uncompress=nt;break;default:throw"EXRLoader.parse: "+X.compression+" is unsupported"}if(Ze.scanlineBlockSize=Ze.lines,Ze.type==1)switch(Qe){case pi:Ze.getter=at,Ze.inputSize=2;break;case ws:Ze.getter=Le,Ze.inputSize=2;break}else if(Ze.type==2)switch(Qe){case pi:Ze.getter=Qt,Ze.inputSize=4;break;case ws:Ze.getter=Te,Ze.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ze.type+" for "+X.compression+".";Ze.blockCount=(X.dataWindow.yMax+1)/Ze.scanlineBlockSize;for(var Et=0;Et<Ze.blockCount;Et++)Bt(ne,Ue);Ze.outputChannels=Ze.channels==3?4:Ze.channels;const q=Ze.width*Ze.height*Ze.outputChannels;switch(Qe){case pi:Ze.byteArray=new Float32Array(q),Ze.channels<Ze.outputChannels&&Ze.byteArray.fill(1,0,q);break;case ws:Ze.byteArray=new Uint16Array(q),Ze.channels<Ze.outputChannels&&Ze.byteArray.fill(15360,0,q);break;default:console.error("THREE.EXRLoader: unsupported type: ",Qe);break}return Ze.bytesPerLine=Ze.width*Ze.inputSize*Ze.channels,Ze.outputChannels==4?Ze.format=Oi:Ze.format=X0,s_?Ze.colorSpace="srgb-linear":Ze.encoding=3e3,Ze}const _r=new DataView(e),Or=new Uint8Array(e),Gr={value:0},sr=fr(_r,e,Gr),cn=yr(sr,_r,Or,Gr,this.type),kr={value:0},oi={R:0,G:1,B:2,A:3,Y:0};for(let X=0;X<cn.height/cn.scanlineBlockSize;X++){const ne=gt(_r,Gr);cn.size=gt(_r,Gr),cn.lines=ne+cn.scanlineBlockSize>cn.height?cn.height-ne:cn.scanlineBlockSize;const Ue=cn.size<cn.lines*cn.bytesPerLine?cn.uncompress(cn):ye(cn);Gr.value+=cn.size;for(let Qe=0;Qe<cn.scanlineBlockSize;Qe++){const Ze=Qe+X*cn.scanlineBlockSize;if(Ze>=cn.height)break;for(let Et=0;Et<cn.channels;Et++){const q=oi[sr.channels[Et].name];for(let de=0;de<cn.width;de++){kr.value=(Qe*(cn.channels*cn.width)+Et*cn.width+de)*cn.inputSize;const Ae=(cn.height-1-Ze)*(cn.width*cn.outputChannels)+de*cn.outputChannels+q;cn.byteArray[Ae]=cn.getter(Ue,kr)}}}}return{header:sr,width:cn.width,height:cn.height,data:cn.byteArray,format:cn.format,[s_?"colorSpace":"encoding"]:cn[s_?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){function s(o,a){s_?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=pr,o.magFilter=pr,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,n,r)}}const lE=new WeakMap;class TK extends Gs{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new Us(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const n=JSON.stringify(t);if(lE.has(e)){const l=lE.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((u,f)=>{r._callbacks[s]={resolve:u,reject:f},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),lE.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new Dn;e.index&&t.setIndex(new gr(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new gr(o,a))}return t}_loadLibrary(e,t){const n=new Us(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=MK.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function MK(){let i,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":i=a.decoderConfig,e=new Promise(function(f){i.onModuleLoaded=function(c){f({draco:c})},DracoDecoderModule(i)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(f=>{const c=f.draco,d=new c.Decoder,g=new c.DecoderBuffer;g.Init(new Int8Array(l),l.byteLength);try{const v=t(c,d,g,u),A=v.attributes.map(x=>x.array.buffer);v.index&&A.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},A)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{c.destroy(g),c.destroy(d)}});break}};function t(o,a,l,u){const f=u.attributeIDs,c=u.attributeTypes;let d,g;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)d=new o.Mesh,g=a.DecodeBufferToMesh(l,d);else if(v===o.POINT_CLOUD)d=new o.PointCloud,g=a.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!g.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+g.error_msg());const A={index:null,attributes:[]};for(const x in f){const w=self[c[x]];let M,b;if(u.useUniqueIDs)b=f[x],M=a.GetAttributeByUniqueId(d,b);else{if(b=a.GetAttributeId(d,o[f[x]]),b===-1)continue;M=a.GetAttribute(d,b)}A.attributes.push(r(o,a,d,x,w,M))}return v===o.TRIANGULAR_MESH&&(A.index=n(o,a,d)),o.destroy(d),A}function n(o,a,l){const f=l.num_faces()*3,c=f*4,d=o._malloc(c);a.GetTrianglesUInt32Array(l,c,d);const g=new Uint32Array(o.HEAPF32.buffer,d,f).slice();return o._free(d),{array:g,itemSize:1}}function r(o,a,l,u,f,c){const d=c.num_components(),v=l.num_points()*d,A=v*f.BYTES_PER_ELEMENT,x=s(o,f),w=o._malloc(A);a.GetAttributeDataArrayForAllPoints(l,c,x,A,w);const M=new f(o.HEAPF32.buffer,w,v).slice();return o._free(w),{name:u,array:M,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let e1;const uE=()=>{if(e1)return e1;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=i;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(c=>{s=c.instance,s.exports.__wasm_call_ctors()});function a(c){const d=new Uint8Array(c.length);for(let v=0;v<c.length;++v){const A=c.charCodeAt(v);d[v]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let g=0;for(let v=0;v<c.length;++v)d[g++]=d[v]<60?n[d[v]]:(d[v]-60)*64+d[++v];return d.buffer.slice(0,g)}function l(c,d,g,v,A,x){const w=s.exports.sbrk,M=g+3&-4,b=w(M*v),R=w(A.length),F=new Uint8Array(s.exports.memory.buffer);F.set(A,R);const O=c(b,g,v,R,A.length);if(O===0&&x&&x(b,M,v),d.set(F.subarray(b,b+g*v)),w(b-w(0)),O!==0)throw new Error(`Malformed buffer data: ${O}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},f={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return e1={ready:o,supported:!0,decodeVertexBuffer(c,d,g,v,A){l(s.exports.meshopt_decodeVertexBuffer,c,d,g,v,s.exports[u[A]])},decodeIndexBuffer(c,d,g,v){l(s.exports.meshopt_decodeIndexBuffer,c,d,g,v)},decodeIndexSequence(c,d,g,v){l(s.exports.meshopt_decodeIndexSequence,c,d,g,v)},decodeGltfBuffer(c,d,g,v,A,x){l(s.exports[f[A]],c,d,g,v,s.exports[u[x]])}},e1};function bK(){var i=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var u=r.init;u===void 0&&(u=function(){});var f=r.getTransferables;if(f===void 0&&(f=null),!i[o])try{l=l.map(function(d){return d&&d.isWorkerModule&&(e(d,function(g){if(g instanceof Error)throw g}),d=i[d.id].value),d}),u=n("<"+a+">.init",u),f&&(f=n("<"+a+">.getTransferables",f));var c=null;typeof u=="function"?c=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),i[o]={id:o,value:c,getTransferables:f},s(c)}catch(d){d&&d.noLog||console.error(d),s(d)}}function t(r,s){var o,a=r.id,l=r.args;(!i[a]||typeof i[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var u=(o=i[a]).value.apply(o,l);u&&typeof u.then=="function"?u.then(f,function(c){return s(c instanceof Error?c:new Error(""+c))}):f(u)}catch(c){s(c)}function f(c){try{var d=i[a].getTransferables&&i[a].getTransferables(c);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),s(c,d)}catch(g){console.error(g),s(g)}}}function n(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof u=="function"}})}),a==="callModule"&&t(l,function(u,f){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:u},f||void 0)})}catch(u){postMessage({messageId:o,success:!1,error:u.stack})}})}function CK(i){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=i.dependencies,n=i.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var r=Promise.all(t).then(function(s){return n.apply(null,s)});return e._getInitResult=function(){return r},r},e}var YU=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),i=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return YU=function(){return i},i},RK=0,IK=0,cE=!1,V_=Object.create(null),W_=Object.create(null),Ab=Object.create(null);function Xm(i){if((!i||typeof i.init!="function")&&!cE)throw new Error("requires `options.init` function");var e=i.dependencies,t=i.init,n=i.getTransferables,r=i.workerId;if(!YU())return CK(i);r==null&&(r="#default");var s="workerModule"+ ++RK,o=i.name||s,a=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(cE=!0,u=Xm({workerId:r,name:"<"+o+"> function dependency: "+u.name,init:`function(){return (
`+S1(u)+`
)}`}),cE=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function l(){for(var u=[],f=arguments.length;f--;)u[f]=arguments[f];if(!a){a=lD(r,"registerModule",l.workerModuleData);var c=function(){a=null,W_[r].delete(c)};(W_[r]||(W_[r]=new Set)).add(c)}return a.then(function(d){var g=d.isCallable;if(g)return lD(r,"callModule",{id:s,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:S1(t),getTransferables:n&&S1(n)},l}function PK(i){W_[i]&&W_[i].forEach(function(e){e()}),V_[i]&&(V_[i].terminate(),delete V_[i])}function S1(i){var e=i.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function DK(i){var e=V_[i];if(!e){var t=S1(bK);e=V_[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var r=n.data,s=r.messageId,o=Ab[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete Ab[s],o(r)}}return e}function lD(i,e,t){return new Promise(function(n,r){var s=++IK;Ab[s]=function(o){o.success?n(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},DK(i).postMessage({messageId:s,action:e,data:t})})}function QU(){var i=function(e){function t(le,$,V,Q,fe,oe,he,xe){var _e=1-he;xe.x=_e*_e*le+2*_e*he*V+he*he*fe,xe.y=_e*_e*$+2*_e*he*Q+he*he*oe}function n(le,$,V,Q,fe,oe,he,xe,_e,be){var Xe=1-_e;be.x=Xe*Xe*Xe*le+3*Xe*Xe*_e*V+3*Xe*_e*_e*fe+_e*_e*_e*he,be.y=Xe*Xe*Xe*$+3*Xe*Xe*_e*Q+3*Xe*_e*_e*oe+_e*_e*_e*xe}function r(le,$){for(var V=/([MLQCZ])([^MLQCZ]*)/g,Q,fe,oe,he,xe;Q=V.exec(le);){var _e=Q[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(be){return parseFloat(be)});switch(Q[1]){case"M":he=fe=_e[0],xe=oe=_e[1];break;case"L":(_e[0]!==he||_e[1]!==xe)&&$("L",he,xe,he=_e[0],xe=_e[1]);break;case"Q":{$("Q",he,xe,he=_e[2],xe=_e[3],_e[0],_e[1]);break}case"C":{$("C",he,xe,he=_e[4],xe=_e[5],_e[0],_e[1],_e[2],_e[3]);break}case"Z":(he!==fe||xe!==oe)&&$("L",he,xe,fe,oe);break}}}function s(le,$,V){V===void 0&&(V=16);var Q={x:0,y:0};r(le,function(fe,oe,he,xe,_e,be,Xe,Ye,Ne){switch(fe){case"L":$(oe,he,xe,_e);break;case"Q":{for(var Ee=oe,Ge=he,se=1;se<V;se++)t(oe,he,be,Xe,xe,_e,se/(V-1),Q),$(Ee,Ge,Q.x,Q.y),Ee=Q.x,Ge=Q.y;break}case"C":{for(var ht=oe,We=he,ut=1;ut<V;ut++)n(oe,he,be,Xe,Ye,Ne,xe,_e,ut/(V-1),Q),$(ht,We,Q.x,Q.y),ht=Q.x,We=Q.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function f(le,$){var V=le.getContext?le.getContext("webgl",u):le,Q=l.get(V);if(!Q){let ht=function(K){var J=oe[K];if(!J&&(J=oe[K]=V.getExtension(K),!J))throw new Error(K+" not supported");return J},We=function(K,J){var ye=V.createShader(J);return V.shaderSource(ye,K),V.compileShader(ye),ye},ut=function(K,J,ye,Re){if(!he[K]){var De={},ke={},qe=V.createProgram();V.attachShader(qe,We(J,V.VERTEX_SHADER)),V.attachShader(qe,We(ye,V.FRAGMENT_SHADER)),V.linkProgram(qe),he[K]={program:qe,transaction:function(lt){V.useProgram(qe),lt({setUniform:function(rt,xt){for(var yt=[],gt=arguments.length-2;gt-- >0;)yt[gt]=arguments[gt+2];var it=ke[xt]||(ke[xt]=V.getUniformLocation(qe,xt));V["uniform"+rt].apply(V,[it].concat(yt))},setAttribute:function(rt,xt,yt,gt,it){var kt=De[rt];kt||(kt=De[rt]={buf:V.createBuffer(),loc:V.getAttribLocation(qe,rt),data:null}),V.bindBuffer(V.ARRAY_BUFFER,kt.buf),V.vertexAttribPointer(kt.loc,xt,V.FLOAT,!1,0,0),V.enableVertexAttribArray(kt.loc),fe?V.vertexAttribDivisor(kt.loc,gt):ht("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(kt.loc,gt),it!==kt.data&&(V.bufferData(V.ARRAY_BUFFER,it,yt),kt.data=it)}})}}}he[K].transaction(Re)},Fe=function(K,J){_e++;try{V.activeTexture(V.TEXTURE0+_e);var ye=xe[K];ye||(ye=xe[K]=V.createTexture(),V.bindTexture(V.TEXTURE_2D,ye),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,V.NEAREST),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,V.NEAREST)),V.bindTexture(V.TEXTURE_2D,ye),J(ye,_e)}finally{_e--}},dt=function(K,J,ye){var Re=V.createFramebuffer();be.push(Re),V.bindFramebuffer(V.FRAMEBUFFER,Re),V.activeTexture(V.TEXTURE0+J),V.bindTexture(V.TEXTURE_2D,K),V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,K,0);try{ye(Re)}finally{V.deleteFramebuffer(Re),V.bindFramebuffer(V.FRAMEBUFFER,be[--be.length-1]||null)}},je=function(){oe={},he={},xe={},_e=-1,be.length=0};var Xe=ht,Ye=We,Ne=ut,Ee=Fe,Ge=dt,se=je,fe=typeof WebGL2RenderingContext<"u"&&V instanceof WebGL2RenderingContext,oe={},he={},xe={},_e=-1,be=[];V.canvas.addEventListener("webglcontextlost",function(K){je(),K.preventDefault()},!1),l.set(V,Q={gl:V,isWebGL2:fe,getExtension:ht,withProgram:ut,withTexture:Fe,withTextureFramebuffer:dt,handleContextLoss:je})}$(Q)}function c(le,$,V,Q,fe,oe,he,xe){he===void 0&&(he=15),xe===void 0&&(xe=null),f(le,function(_e){var be=_e.gl,Xe=_e.withProgram,Ye=_e.withTexture;Ye("copy",function(Ne,Ee){be.texImage2D(be.TEXTURE_2D,0,be.RGBA,fe,oe,0,be.RGBA,be.UNSIGNED_BYTE,$),Xe("copy",o,a,function(Ge){var se=Ge.setUniform,ht=Ge.setAttribute;ht("aUV",2,be.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),se("1i","image",Ee),be.bindFramebuffer(be.FRAMEBUFFER,xe||null),be.disable(be.BLEND),be.colorMask(he&8,he&4,he&2,he&1),be.viewport(V,Q,fe,oe),be.scissor(V,Q,fe,oe),be.drawArrays(be.TRIANGLES,0,3)})})})}function d(le,$,V){var Q=le.width,fe=le.height;f(le,function(oe){var he=oe.gl,xe=new Uint8Array(Q*fe*4);he.readPixels(0,0,Q,fe,he.RGBA,he.UNSIGNED_BYTE,xe),le.width=$,le.height=V,c(he,xe,0,0,Q,fe)})}var g=Object.freeze({__proto__:null,withWebGLContext:f,renderImageData:c,resizeWebGLCanvasWithoutClearing:d});function v(le,$,V,Q,fe,oe){oe===void 0&&(oe=1);var he=new Uint8Array(le*$),xe=Q[2]-Q[0],_e=Q[3]-Q[1],be=[];s(V,function(ht,We,ut,Fe){be.push({x1:ht,y1:We,x2:ut,y2:Fe,minX:Math.min(ht,ut),minY:Math.min(We,Fe),maxX:Math.max(ht,ut),maxY:Math.max(We,Fe)})}),be.sort(function(ht,We){return ht.maxX-We.maxX});for(var Xe=0;Xe<le;Xe++)for(var Ye=0;Ye<$;Ye++){var Ne=Ge(Q[0]+xe*(Xe+.5)/le,Q[1]+_e*(Ye+.5)/$),Ee=Math.pow(1-Math.abs(Ne)/fe,oe)/2;Ne<0&&(Ee=1-Ee),Ee=Math.max(0,Math.min(255,Math.round(Ee*255))),he[Ye*le+Xe]=Ee}return he;function Ge(ht,We){for(var ut=1/0,Fe=1/0,dt=be.length;dt--;){var je=be[dt];if(je.maxX+Fe<=ht)break;if(ht+Fe>je.minX&&We-Fe<je.maxY&&We+Fe>je.minY){var K=w(ht,We,je.x1,je.y1,je.x2,je.y2);K<ut&&(ut=K,Fe=Math.sqrt(ut))}}return se(ht,We)&&(Fe=-Fe),Fe}function se(ht,We){for(var ut=0,Fe=be.length;Fe--;){var dt=be[Fe];if(dt.maxX<=ht)break;var je=dt.y1>We!=dt.y2>We&&ht<(dt.x2-dt.x1)*(We-dt.y1)/(dt.y2-dt.y1)+dt.x1;je&&(ut+=dt.y1<dt.y2?1:-1)}return ut!==0}}function A(le,$,V,Q,fe,oe,he,xe,_e,be){oe===void 0&&(oe=1),xe===void 0&&(xe=0),_e===void 0&&(_e=0),be===void 0&&(be=0),x(le,$,V,Q,fe,oe,he,null,xe,_e,be)}function x(le,$,V,Q,fe,oe,he,xe,_e,be,Xe){oe===void 0&&(oe=1),_e===void 0&&(_e=0),be===void 0&&(be=0),Xe===void 0&&(Xe=0);for(var Ye=v(le,$,V,Q,fe,oe),Ne=new Uint8Array(Ye.length*4),Ee=0;Ee<Ye.length;Ee++)Ne[Ee*4+Xe]=Ye[Ee];c(he,Ne,_e,be,le,$,1<<3-Xe,xe)}function w(le,$,V,Q,fe,oe){var he=fe-V,xe=oe-Q,_e=he*he+xe*xe,be=_e?Math.max(0,Math.min(1,((le-V)*he+($-Q)*xe)/_e)):0,Xe=le-(V+be*he),Ye=$-(Q+be*xe);return Xe*Xe+Ye*Ye}var M=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:A,generateIntoFramebuffer:x}),b="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",R="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",F="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",O=new Float32Array([0,0,2,0,0,2]),D=null,I=!1,C={},B=new WeakMap;function k(le){if(!I&&!ue(le))throw new Error("WebGL generation not supported")}function H(le,$,V,Q,fe,oe,he){if(oe===void 0&&(oe=1),he===void 0&&(he=null),!he&&(he=D,!he)){var xe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!xe)throw new Error("OffscreenCanvas or DOM canvas not supported");he=D=xe.getContext("webgl",{depth:!1})}k(he);var _e=new Uint8Array(le*$*4);f(he,function(Ne){var Ee=Ne.gl,Ge=Ne.withTexture,se=Ne.withTextureFramebuffer;Ge("readable",function(ht,We){Ee.texImage2D(Ee.TEXTURE_2D,0,Ee.RGBA,le,$,0,Ee.RGBA,Ee.UNSIGNED_BYTE,null),se(ht,We,function(ut){Z(le,$,V,Q,fe,oe,Ee,ut,0,0,0),Ee.readPixels(0,0,le,$,Ee.RGBA,Ee.UNSIGNED_BYTE,_e)})})});for(var be=new Uint8Array(le*$),Xe=0,Ye=0;Xe<_e.length;Xe+=4)be[Ye++]=_e[Xe];return be}function z(le,$,V,Q,fe,oe,he,xe,_e,be){oe===void 0&&(oe=1),xe===void 0&&(xe=0),_e===void 0&&(_e=0),be===void 0&&(be=0),Z(le,$,V,Q,fe,oe,he,null,xe,_e,be)}function Z(le,$,V,Q,fe,oe,he,xe,_e,be,Xe){oe===void 0&&(oe=1),_e===void 0&&(_e=0),be===void 0&&(be=0),Xe===void 0&&(Xe=0),k(he);var Ye=[];s(V,function(Ne,Ee,Ge,se){Ye.push(Ne,Ee,Ge,se)}),Ye=new Float32Array(Ye),f(he,function(Ne){var Ee=Ne.gl,Ge=Ne.isWebGL2,se=Ne.getExtension,ht=Ne.withProgram,We=Ne.withTexture,ut=Ne.withTextureFramebuffer,Fe=Ne.handleContextLoss;if(We("rawDistances",function(dt,je){(le!==dt._lastWidth||$!==dt._lastHeight)&&Ee.texImage2D(Ee.TEXTURE_2D,0,Ee.RGBA,dt._lastWidth=le,dt._lastHeight=$,0,Ee.RGBA,Ee.UNSIGNED_BYTE,null),ht("main",b,R,function(K){var J=K.setAttribute,ye=K.setUniform,Re=!Ge&&se("ANGLE_instanced_arrays"),De=!Ge&&se("EXT_blend_minmax");J("aUV",2,Ee.STATIC_DRAW,0,O),J("aLineSegment",4,Ee.DYNAMIC_DRAW,1,Ye),ye.apply(void 0,["4f","uGlyphBounds"].concat(Q)),ye("1f","uMaxDistance",fe),ye("1f","uExponent",oe),ut(dt,je,function(ke){Ee.enable(Ee.BLEND),Ee.colorMask(!0,!0,!0,!0),Ee.viewport(0,0,le,$),Ee.scissor(0,0,le,$),Ee.blendFunc(Ee.ONE,Ee.ONE),Ee.blendEquationSeparate(Ee.FUNC_ADD,Ge?Ee.MAX:De.MAX_EXT),Ee.clear(Ee.COLOR_BUFFER_BIT),Ge?Ee.drawArraysInstanced(Ee.TRIANGLES,0,3,Ye.length/4):Re.drawArraysInstancedANGLE(Ee.TRIANGLES,0,3,Ye.length/4)})}),ht("post",o,F,function(K){K.setAttribute("aUV",2,Ee.STATIC_DRAW,0,O),K.setUniform("1i","tex",je),Ee.bindFramebuffer(Ee.FRAMEBUFFER,xe),Ee.disable(Ee.BLEND),Ee.colorMask(Xe===0,Xe===1,Xe===2,Xe===3),Ee.viewport(_e,be,le,$),Ee.scissor(_e,be,le,$),Ee.drawArrays(Ee.TRIANGLES,0,3)})}),Ee.isContextLost())throw Fe(),new Error("webgl context lost")})}function ue(le){var $=!le||le===D?C:le.canvas||le,V=B.get($);if(V===void 0){I=!0;var Q=null;try{var fe=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],oe=H(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,le);V=oe&&fe.length===oe.length&&oe.every(function(he,xe){return he===fe[xe]}),V||(Q="bad trial run results",console.info(fe,oe))}catch(he){V=!1,Q=he.message}Q&&console.warn("WebGL SDF generation not supported:",Q),I=!1,B.set($,V)}return V}var ae=Object.freeze({__proto__:null,generate:H,generateIntoCanvas:z,generateIntoFramebuffer:Z,isSupported:ue});function ge(le,$,V,Q,fe,oe){fe===void 0&&(fe=Math.max(Q[2]-Q[0],Q[3]-Q[1])/2),oe===void 0&&(oe=1);try{return H.apply(ae,arguments)}catch(he){return console.info("WebGL SDF generation failed, falling back to JS",he),v.apply(M,arguments)}}function ee(le,$,V,Q,fe,oe,he,xe,_e,be){fe===void 0&&(fe=Math.max(Q[2]-Q[0],Q[3]-Q[1])/2),oe===void 0&&(oe=1),xe===void 0&&(xe=0),_e===void 0&&(_e=0),be===void 0&&(be=0);try{return z.apply(ae,arguments)}catch(Xe){return console.info("WebGL SDF generation failed, falling back to JS",Xe),A.apply(M,arguments)}}return e.forEachPathCommand=r,e.generate=ge,e.generateIntoCanvas=ee,e.javascript=M,e.pathToLineSegments=s,e.webgl=ae,e.webglUtils=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return i}function BK(){var i=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach(function(Fe,dt){n[Fe]=1<<dt+1,r[n[Fe]]=Fe}),Object.freeze(n);var s=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,a=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,l=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,u=n.S|n.WS|n.B|s|n.PDI|l,f=null;function c(){if(!f){f=new Map;var Fe=function(je){if(t.hasOwnProperty(je)){var K=0;t[je].split(",").forEach(function(J){var ye=J.split("+"),Re=ye[0],De=ye[1];Re=parseInt(Re,36),De=De?parseInt(De,36):0,f.set(K+=Re,n[je]);for(var ke=0;ke<De;ke++)f.set(++K,n[je])})}};for(var dt in t)Fe(dt)}}function d(Fe){return c(),f.get(Fe.codePointAt(0))||n.L}function g(Fe){return r[d(Fe)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function A(Fe,dt){var je=36,K=0,J=new Map,ye=dt&&new Map,Re;return Fe.split(",").forEach(function De(ke){if(ke.indexOf("+")!==-1)for(var qe=+ke;qe--;)De(Re);else{Re=ke;var nt=ke.split(">"),lt=nt[0],Ot=nt[1];lt=String.fromCodePoint(K+=parseInt(lt,je)),Ot=String.fromCodePoint(K+=parseInt(Ot,je)),J.set(lt,Ot),dt&&ye.set(Ot,lt)}}),{map:J,reverseMap:ye}}var x,w,M;function b(){if(!x){var Fe=A(v.pairs,!0),dt=Fe.map,je=Fe.reverseMap;x=dt,w=je,M=A(v.canonical,!1).map}}function R(Fe){return b(),x.get(Fe)||null}function F(Fe){return b(),w.get(Fe)||null}function O(Fe){return b(),M.get(Fe)||null}var D=n.L,I=n.R,C=n.EN,B=n.ES,k=n.ET,H=n.AN,z=n.CS,Z=n.B,ue=n.S,ae=n.ON,ge=n.BN,ee=n.NSM,le=n.AL,$=n.LRO,V=n.RLO,Q=n.LRE,fe=n.RLE,oe=n.PDF,he=n.LRI,xe=n.RLI,_e=n.FSI,be=n.PDI;function Xe(Fe,dt){for(var je=125,K=new Uint32Array(Fe.length),J=0;J<Fe.length;J++)K[J]=d(Fe[J]);var ye=new Map;function Re(Xr,Hr){var Jr=K[Xr];K[Xr]=Hr,ye.set(Jr,ye.get(Jr)-1),Jr&a&&ye.set(a,ye.get(a)-1),ye.set(Hr,(ye.get(Hr)||0)+1),Hr&a&&ye.set(a,(ye.get(a)||0)+1)}for(var De=new Uint8Array(Fe.length),ke=new Map,qe=[],nt=null,lt=0;lt<Fe.length;lt++)nt||qe.push(nt={start:lt,end:Fe.length-1,level:dt==="rtl"?1:dt==="ltr"?0:ti(lt,!1)}),K[lt]&Z&&(nt.end=lt,nt=null);for(var Ot=fe|Q|V|$|s|be|oe|Z,rt=function(Xr){return Xr+(Xr&1?1:2)},xt=function(Xr){return Xr+(Xr&1?2:1)},yt=0;yt<qe.length;yt++){nt=qe[yt];var gt=[{_level:nt.level,_override:0,_isolate:0}],it=void 0,kt=0,Bt=0,Qt=0;ye.clear();for(var Te=nt.start;Te<=nt.end;Te++){var Ce=K[Te];if(it=gt[gt.length-1],ye.set(Ce,(ye.get(Ce)||0)+1),Ce&a&&ye.set(a,(ye.get(a)||0)+1),Ce&Ot)if(Ce&(fe|Q)){De[Te]=it._level;var Le=(Ce===fe?xt:rt)(it._level);Le<=je&&!kt&&!Bt?gt.push({_level:Le,_override:0,_isolate:0}):kt||Bt++}else if(Ce&(V|$)){De[Te]=it._level;var at=(Ce===V?xt:rt)(it._level);at<=je&&!kt&&!Bt?gt.push({_level:at,_override:Ce&V?I:D,_isolate:0}):kt||Bt++}else if(Ce&s){Ce&_e&&(Ce=ti(Te+1,!0)===1?xe:he),De[Te]=it._level,it._override&&Re(Te,it._override);var vt=(Ce===xe?xt:rt)(it._level);vt<=je&&kt===0&&Bt===0?(Qt++,gt.push({_level:vt,_override:0,_isolate:1,_isolInitIndex:Te})):kt++}else if(Ce&be){if(kt>0)kt--;else if(Qt>0){for(Bt=0;!gt[gt.length-1]._isolate;)gt.pop();var ft=gt[gt.length-1]._isolInitIndex;ft!=null&&(ke.set(ft,Te),ke.set(Te,ft)),gt.pop(),Qt--}it=gt[gt.length-1],De[Te]=it._level,it._override&&Re(Te,it._override)}else Ce&oe?(kt===0&&(Bt>0?Bt--:!it._isolate&&gt.length>1&&(gt.pop(),it=gt[gt.length-1])),De[Te]=it._level):Ce&Z&&(De[Te]=nt.level);else De[Te]=it._level,it._override&&Ce!==ge&&Re(Te,it._override)}for(var qt=[],ln=null,Kt=nt.start;Kt<=nt.end;Kt++){var Yt=K[Kt];if(!(Yt&l)){var Wn=De[Kt],mn=Yt&s,fr=Yt===be;ln&&Wn===ln._level?(ln._end=Kt,ln._endsWithIsolInit=mn):qt.push(ln={_start:Kt,_end:Kt,_level:Wn,_startsWithPDI:fr,_endsWithIsolInit:mn})}}for(var yr=[],_r=0;_r<qt.length;_r++){var Or=qt[_r];if(!Or._startsWithPDI||Or._startsWithPDI&&!ke.has(Or._start)){for(var Gr=[ln=Or],sr=void 0;ln&&ln._endsWithIsolInit&&(sr=ke.get(ln._end))!=null;)for(var cn=_r+1;cn<qt.length;cn++)if(qt[cn]._start===sr){Gr.push(ln=qt[cn]);break}for(var kr=[],oi=0;oi<Gr.length;oi++)for(var X=Gr[oi],ne=X._start;ne<=X._end;ne++)kr.push(ne);for(var Se=De[kr[0]],Ue=nt.level,Qe=kr[0]-1;Qe>=0;Qe--)if(!(K[Qe]&l)){Ue=De[Qe];break}var Ze=kr[kr.length-1],Et=De[Ze],q=nt.level;if(!(K[Ze]&s)){for(var de=Ze+1;de<=nt.end;de++)if(!(K[de]&l)){q=De[de];break}}yr.push({_seqIndices:kr,_sosType:Math.max(Ue,Se)%2?I:D,_eosType:Math.max(q,Et)%2?I:D})}}for(var Ae=0;Ae<yr.length;Ae++){var we=yr[Ae],te=we._seqIndices,st=we._sosType,$e=we._eosType,et=De[te[0]]&1?I:D;if(ye.get(ee))for(var ct=0;ct<te.length;ct++){var Mt=te[ct];if(K[Mt]&ee){for(var Dt=st,wt=ct-1;wt>=0;wt--)if(!(K[te[wt]]&l)){Dt=K[te[wt]];break}Re(Mt,Dt&(s|be)?ae:Dt)}}if(ye.get(C))for(var Tt=0;Tt<te.length;Tt++){var zt=te[Tt];if(K[zt]&C)for(var Vt=Tt-1;Vt>=-1;Vt--){var un=Vt===-1?st:K[te[Vt]];if(un&o){un===le&&Re(zt,H);break}}}if(ye.get(le))for(var Nt=0;Nt<te.length;Nt++){var Lt=te[Nt];K[Lt]&le&&Re(Lt,I)}if(ye.get(B)||ye.get(z))for(var Sn=1;Sn<te.length-1;Sn++){var nn=te[Sn];if(K[nn]&(B|z)){for(var In=0,An=0,Vn=Sn-1;Vn>=0&&(In=K[te[Vn]],!!(In&l));Vn--);for(var wn=Sn+1;wn<te.length&&(An=K[te[wn]],!!(An&l));wn++);In===An&&(K[nn]===B?In===C:In&(C|H))&&Re(nn,In)}}if(ye.get(C))for(var Ut=0;Ut<te.length;Ut++){var En=te[Ut];if(K[En]&C){for(var Yn=Ut-1;Yn>=0&&K[te[Yn]]&(k|l);Yn--)Re(te[Yn],C);for(Ut++;Ut<te.length&&K[te[Ut]]&(k|l|C);Ut++)K[te[Ut]]!==C&&Re(te[Ut],C)}}if(ye.get(k)||ye.get(B)||ye.get(z))for(var Mn=0;Mn<te.length;Mn++){var hn=te[Mn];if(K[hn]&(k|B|z)){Re(hn,ae);for(var gi=Mn-1;gi>=0&&K[te[gi]]&l;gi--)Re(te[gi],ae);for(var dn=Mn+1;dn<te.length&&K[te[dn]]&l;dn++)Re(te[dn],ae)}}if(ye.get(C))for(var us=0,wa=st;us<te.length;us++){var qa=te[us],Fl=K[qa];Fl&C?wa===D&&Re(qa,D):Fl&o&&(wa=Fl)}if(ye.get(a)){var Do=I|C|H,Xa=Do|D,Hs=[];{for(var Ji=[],Cr=0;Cr<te.length;Cr++)if(K[te[Cr]]&a){var xn=Fe[te[Cr]],Ms=void 0;if(R(xn)!==null)if(Ji.length<63)Ji.push({char:xn,seqIndex:Cr});else break;else if((Ms=F(xn))!==null)for(var cs=Ji.length-1;cs>=0;cs--){var Ki=Ji[cs].char;if(Ki===Ms||Ki===F(O(xn))||R(O(Ki))===xn){Hs.push([Ji[cs].seqIndex,Cr]),Ji.length=cs;break}}}Hs.sort(function(Xr,Hr){return Xr[0]-Hr[0]})}for(var Vs=0;Vs<Hs.length;Vs++){for(var vc=Hs[Vs],Rr=vc[0],_i=vc[1],yc=!1,ki=0,ho=Rr+1;ho<_i;ho++){var fo=te[ho];if(K[fo]&Xa){yc=!0;var hs=K[fo]&Do?I:D;if(hs===et){ki=hs;break}}}if(yc&&!ki){ki=st;for(var bs=Rr-1;bs>=0;bs--){var Ws=te[bs];if(K[Ws]&Xa){var ai=K[Ws]&Do?I:D;ai!==et?ki=ai:ki=et;break}}}if(ki){if(K[te[Rr]]=K[te[_i]]=ki,ki!==et){for(var $r=Rr+1;$r<te.length;$r++)if(!(K[te[$r]]&l)){d(Fe[te[$r]])&ee&&(K[te[$r]]=ki);break}}if(ki!==et){for(var $n=_i+1;$n<te.length;$n++)if(!(K[te[$n]]&l)){d(Fe[te[$n]])&ee&&(K[te[$n]]=ki);break}}}}for(var js=0;js<te.length;js++)if(K[te[js]]&a){for(var Ja=js,Zo=js,bi=st,$o=js-1;$o>=0;$o--)if(K[te[$o]]&l)Ja=$o;else{bi=K[te[$o]]&Do?I:D;break}for(var Ci=$e,Bo=js+1;Bo<te.length;Bo++)if(K[te[Bo]]&(a|l))Zo=Bo;else{Ci=K[te[Bo]]&Do?I:D;break}for(var xr=Ja;xr<=Zo;xr++)K[te[xr]]=bi===Ci?bi:et;js=Zo}}}for(var ei=nt.start;ei<=nt.end;ei++){var ea=De[ei],vi=K[ei];if(ea&1?vi&(D|C|H)&&De[ei]++:vi&I?De[ei]++:vi&(H|C)&&(De[ei]+=2),vi&l&&(De[ei]=ei===0?nt.level:De[ei-1]),ei===nt.end||d(Fe[ei])&(ue|Z))for(var Lo=ei;Lo>=0&&d(Fe[Lo])&u;Lo--)De[Lo]=nt.level}}return{levels:De,paragraphs:qe};function ti(Xr,Hr){for(var Jr=Xr;Jr<Fe.length;Jr++){var Ir=K[Jr];if(Ir&(I|le))return 1;if(Ir&(Z|D)||Hr&&Ir===be)return 0;if(Ir&s){var li=qs(Jr);Jr=li===-1?Fe.length:li}}return 0}function qs(Xr){for(var Hr=1,Jr=Xr+1;Jr<Fe.length;Jr++){var Ir=K[Jr];if(Ir&Z)break;if(Ir&be){if(--Hr===0)return Jr}else Ir&s&&Hr++}return-1}}var Ye="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ne;function Ee(){if(!Ne){var Fe=A(Ye,!0),dt=Fe.map,je=Fe.reverseMap;je.forEach(function(K,J){dt.set(J,K)}),Ne=dt}}function Ge(Fe){return Ee(),Ne.get(Fe)||null}function se(Fe,dt,je,K){var J=Fe.length;je=Math.max(0,je==null?0:+je),K=Math.min(J-1,K==null?J-1:+K);for(var ye=new Map,Re=je;Re<=K;Re++)if(dt[Re]&1){var De=Ge(Fe[Re]);De!==null&&ye.set(Re,De)}return ye}function ht(Fe,dt,je,K){var J=Fe.length;je=Math.max(0,je==null?0:+je),K=Math.min(J-1,K==null?J-1:+K);var ye=[];return dt.paragraphs.forEach(function(Re){var De=Math.max(je,Re.start),ke=Math.min(K,Re.end);if(De<ke){for(var qe=dt.levels.slice(De,ke+1),nt=ke;nt>=De&&d(Fe[nt])&u;nt--)qe[nt]=Re.level;for(var lt=Re.level,Ot=1/0,rt=0;rt<qe.length;rt++){var xt=qe[rt];xt>lt&&(lt=xt),xt<Ot&&(Ot=xt|1)}for(var yt=lt;yt>=Ot;yt--)for(var gt=0;gt<qe.length;gt++)if(qe[gt]>=yt){for(var it=gt;gt+1<qe.length&&qe[gt+1]>=yt;)gt++;gt>it&&ye.push([it+De,gt+De])}}}),ye}function We(Fe,dt,je,K){var J=ut(Fe,dt,je,K),ye=[].concat(Fe);return J.forEach(function(Re,De){ye[De]=(dt.levels[Re]&1?Ge(Fe[Re]):null)||Fe[Re]}),ye.join("")}function ut(Fe,dt,je,K){for(var J=ht(Fe,dt,je,K),ye=[],Re=0;Re<Fe.length;Re++)ye[Re]=Re;return J.forEach(function(De){for(var ke=De[0],qe=De[1],nt=ye.slice(ke,qe+1),lt=nt.length;lt--;)ye[qe-lt]=nt[lt]}),ye}return e.closingToOpeningBracket=F,e.getBidiCharType=d,e.getBidiCharTypeName=g,e.getCanonicalBracket=O,e.getEmbeddingLevels=Xe,e.getMirroredCharacter=Ge,e.getMirroredCharactersMap=se,e.getReorderSegments=ht,e.getReorderedIndices=ut,e.getReorderedString=We,e.openingToClosingBracket=R,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return i}const ZU=/\bvoid\s+main\s*\(\s*\)\s*{/g;function wb(i){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,r){let s=zn[r];return s?wb(s):n}return i.replace(e,t)}const Os=[];for(let i=0;i<256;i++)Os[i]=(i<16?"0":"")+i.toString(16);function LK(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Os[i&255]+Os[i>>8&255]+Os[i>>16&255]+Os[i>>24&255]+"-"+Os[e&255]+Os[e>>8&255]+"-"+Os[e>>16&15|64]+Os[e>>24&255]+"-"+Os[t&63|128]+Os[t>>8&255]+"-"+Os[t>>16&255]+Os[t>>24&255]+Os[n&255]+Os[n>>8&255]+Os[n>>16&255]+Os[n>>24&255]).toUpperCase()}const zf=Object.assign||function(){let i=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},FK=Date.now(),uD=new WeakMap,cD=new Map;let OK=1e10;function Sb(i,e){const t=zK(e);let n=uD.get(i);if(n||uD.set(i,n=Object.create(null)),n[t])return new n[t];const r=`_onBeforeCompile${t}`,s=function(u,f){i.onBeforeCompile.call(this,u,f);const c=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let d=cD[c];if(!d){const g=kK(this,u,e,t);d=cD[c]=g}u.vertexShader=d.vertexShader,u.fragmentShader=d.fragmentShader,zf(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-FK}}),this[r]&&this[r](u)},o=function(){return a(e.chained?i:i.clone())},a=function(u){const f=Object.create(u,l);return Object.defineProperty(f,"baseMaterial",{value:i}),Object.defineProperty(f,"id",{value:OK++}),f.uuid=LK(),f.uniforms=zf({},u.uniforms,e.uniforms),f.defines=zf({},u.defines,e.defines),f.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",f.extensions=zf({},u.extensions,e.extensions),f._listeners=void 0,f},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(u){this[r]=u}},copy:{writable:!0,configurable:!0,value:function(u){return i.copy.call(this,u),!i.isShaderMaterial&&!i.isDerivedMaterial&&(zf(this.extensions,u.extensions),zf(this.defines,u.defines),zf(this.uniforms,e2.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new i.constructor;return a(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=Sb(i.isDerivedMaterial?i.getDepthMaterial():new sv({depthPacking:XC}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=Sb(i.isDerivedMaterial?i.getDistanceMaterial():new CA,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:f}=this;u&&u.dispose(),f&&f.dispose(),i.dispose.call(this)}}};return n[t]=o,new o}function kK(i,{vertexShader:e,fragmentShader:t},n,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:f,fragmentMainOutro:c,fragmentColorTransform:d,customRewriter:g,timeUniform:v}=n;if(s=s||"",o=o||"",a=a||"",u=u||"",f=f||"",c=c||"",(l||g)&&(e=wb(e)),(d||g)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=wb(t)),g){let A=g({vertexShader:e,fragmentShader:t});e=A.vertexShader,t=A.fragmentShader}if(d){let A=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,x=>(A.push(x),"")),c=`${d}
${A.join(`
`)}
${c}`}if(v){const A=`
uniform float ${v};
`;s=A+s,u=A+u}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(A,x,w,M)=>/\battribute\s+vec[23]\s+$/.test(M.substr(0,w))?x:`troika_${x}_${r}`),i.map&&i.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=hD(e,r,s,o,a),t=hD(t,r,u,f,c),{vertexShader:e,fragmentShader:t}}function hD(i,e,t,n,r){return(n||r||t)&&(i=i.replace(ZU,`
${t}
void troikaOrigMain${e}() {`),i+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${r}
}`),i}function NK(i,e){return i==="uniforms"?void 0:typeof e=="function"?e.toString():e}let UK=0;const fD=new Map;function zK(i){const e=JSON.stringify(i,NK);let t=fD.get(e);return t==null&&fD.set(e,t=++UK),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function GK(){return typeof window>"u"&&(self.window=self),function(i){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var u=[],f=0;f<l;f++){var c=s.readUint(o,a);a+=4,u.push(e._readFont(o,c))}return u}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],f={_data:r,_offset:a},c={},d=0;d<l;d++){var g=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var v=o.readUint(r,s);s+=4;var A=o.readUint(r,s);s+=4,c[g]={offset:v,length:A}}for(d=0;d<u.length;d++){var x=u[d];c[x]&&(f[x.trim()]=e[x.trim()].parse(r,c[x].offset,c[x].length,f))}return f},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),u=o+12,f=0;f<l;f++){var c=a.readASCII(r,u,4);u+=4,a.readUint(r,u),u+=4;var d=a.readUint(r,u);if(u+=4,a.readUint(r,u),u+=4,c==s)return d}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var u=r[s++]<<8|r[s++];a+=String.fromCharCode(u)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var u=e._bin,f={},c=s;u.readFixed(r,s),s+=4;var d=u.readUshort(r,s);s+=2;var g=u.readUshort(r,s);s+=2;var v=u.readUshort(r,s);return s+=2,f.scriptList=e._lctf.readScriptList(r,c+d),f.featureList=e._lctf.readFeatureList(r,c+g),f.lookupList=e._lctf.readLookupList(r,c+v,l),f},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,u=[],f=a.readUshort(r,s);s+=2;for(var c=0;c<f;c++){var d=a.readUshort(r,s);s+=2;var g=e._lctf.readLookupTable(r,l+d,o);u.push(g)}return u},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,u={tabs:[]};u.ltype=a.readUshort(r,s),s+=2,u.flag=a.readUshort(r,s),s+=2;var f=a.readUshort(r,s);s+=2;for(var c=u.ltype,d=0;d<f;d++){var g=a.readUshort(r,s);s+=2;var v=o(r,c,l+g,u);u.tabs.push(v)}return u},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)r>>>o&1&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var u=o.readUshort(r,s);s+=2;var f=o.readUshort(r,s);s+=2;for(var c=0;c<f;c++)a.push(u+c),a.push(u+c),a.push(o.readUshort(r,s)),s+=2}if(l==2){var d=o.readUshort(r,s);for(s+=2,c=0;c<d;c++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var c=o.readASCII(r,s,4);s+=4;var d=o.readUshort(r,s);s+=2;var g=e._lctf.readFeatureTable(r,a+d);g.tag=c.trim(),l.push(g)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},u=o.readUshort(r,s);s+=2,u>0&&(l.featureParams=a+u);var f=o.readUshort(r,s);s+=2,l.tab=[];for(var c=0;c<f;c++)l.tab.push(o.readUshort(r,s+2*c));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var c=o.readASCII(r,s,4);s+=4;var d=o.readUshort(r,s);s+=2,l[c.trim()]=e._lctf.readScriptTable(r,a+d)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},u=o.readUshort(r,s);s+=2,u>0&&(l.default=e._lctf.readLangSysTable(r,a+u));var f=o.readUshort(r,s);s+=2;for(var c=0;c<f;c++){var d=o.readASCII(r,s,4);s+=4;var g=o.readUshort(r,s);s+=2,l[d.trim()]=e._lctf.readLangSysTable(r,a+g)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var u=[],f=0;f<l.length-1;f++)u.push(a.readASCII(r,s+l[f],l[f+1]-l[f]));s+=l[l.length-1];var c=[];s=e.CFF.readIndex(r,s,c);var d=[];for(f=0;f<c.length-1;f++)d.push(e.CFF.readDict(r,s+c[f],s+c[f+1]));s+=c[c.length-1];var g=d[0],v=[];s=e.CFF.readIndex(r,s,v);var A=[];for(f=0;f<v.length-1;f++)A.push(a.readASCII(r,s+v[f],v[f+1]-v[f]));if(s+=v[v.length-1],e.CFF.readSubrs(r,s,g),g.CharStrings){s=g.CharStrings,v=[],s=e.CFF.readIndex(r,s,v);var x=[];for(f=0;f<v.length-1;f++)x.push(a.readBytes(r,s+v[f],v[f+1]-v[f]));g.CharStrings=x}if(g.ROS){s=g.FDArray;var w=[];for(s=e.CFF.readIndex(r,s,w),g.FDArray=[],f=0;f<w.length-1;f++){var M=e.CFF.readDict(r,s+w[f],s+w[f+1]);e.CFF._readFDict(r,M,A),g.FDArray.push(M)}s+=w[w.length-1],s=g.FDSelect,g.FDSelect=[];var b=r[s];if(s++,b!=3)throw b;var R=a.readUshort(r,s);for(s+=2,f=0;f<R+1;f++)g.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return g.Encoding&&(g.Encoding=e.CFF.readEncoding(r,g.Encoding,g.CharStrings.length)),g.charset&&(g.charset=e.CFF.readCharset(r,g.charset,g.CharStrings.length)),e.CFF._readFDict(r,g,A),g},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var u,f=l.length;u=f<1240?107:f<33900?1131:32768,o.Bias=u,o.Subrs=[];for(var c=0;c<l.length-1;c++)o.Subrs.push(a.readBytes(r,s+l[c],l[c+1]-l[c]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var u=r[s];s++;for(var f=0;f<u;f++)a.push(r[s+f]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],u=r[s];if(s++,u==0)for(var f=0;f<o;f++){var c=a.readUshort(r,s);s+=2,l.push(c)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<o;){c=a.readUshort(r,s),s+=2;var d=0;for(u==1?(d=r[s],s++):(d=a.readUshort(r,s),s+=2),f=0;f<=d;f++)l.push(c),c++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,u=r[s+=2];if(s++,u==1)for(var f=0;f<l;f++)o.push(r[s+f]);else if(u==2)for(f=0;f<l;f++)o.push(a.readUshort(r,s+2*f));else if(u==3)for(f=0;f<l;f++)o.push(16777215&a.readUint(r,s+3*f-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(s+=l*u)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],u=r[s+1];r[s+2],r[s+3],r[s+4];var f=1,c=null,d=null;l<=20&&(c=l,f=1),l==12&&(c=100*l+u,f=2),21<=l&&l<=27&&(c=l,f=1),l==28&&(d=a.readShort(r,s+1),f=3),29<=l&&l<=31&&(c=l,f=1),32<=l&&l<=246&&(d=l-139,f=1),247<=l&&l<=250&&(d=256*(l-247)+u+108,f=2),251<=l&&l<=254&&(d=256*-(l-251)-u-108,f=2),l==255&&(d=a.readInt(r,s+1)/65535,f=5),o.val=d??"o"+c,o.size=f},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,u=[];s<a;){var f=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var d=1,g=null,v=null;f<=20&&(g=f,d=1),f==12&&(g=100*f+c,d=2),f!=19&&f!=20||(g=f,d=2),21<=f&&f<=27&&(g=f,d=1),f==28&&(v=l.readShort(r,s+1),d=3),29<=f&&f<=31&&(g=f,d=1),32<=f&&f<=246&&(v=f-139,d=1),247<=f&&f<=250&&(v=256*(f-247)+c+108,d=2),251<=f&&f<=254&&(v=256*-(f-251)-c-108,d=2),f==255&&(v=l.readInt(r,s+1)/65535,d=5),u.push(v??"o"+g),s+=d}return u},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},u=[];s<o;){var f=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var d=1,g=null,v=null;if(f==28&&(v=a.readShort(r,s+1),d=3),f==29&&(v=a.readInt(r,s+1),d=5),32<=f&&f<=246&&(v=f-139,d=1),247<=f&&f<=250&&(v=256*(f-247)+c+108,d=2),251<=f&&f<=254&&(v=256*-(f-251)-c-108,d=2),f==255)throw v=a.readInt(r,s+1)/65535,d=5,"unknown number";if(f==30){var A=[];for(d=1;;){var x=r[s+d];d++;var w=x>>4,M=15&x;if(w!=15&&A.push(w),M!=15&&A.push(M),M==15)break}for(var b="",R=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],F=0;F<A.length;F++)b+=R[A[F]];v=parseFloat(b)}f<=21&&(g=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][f],d=1,f==12&&(g=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][c],d=2)),g!=null?(l[g]=u.length==1?u[0]:u,u=[]):u.push(v),s+=d}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;var f=[];l.tables=[];for(var c=0;c<u;c++){var d=a.readUshort(r,s);s+=2;var g=a.readUshort(r,s);s+=2;var v=a.readUint(r,s);s+=4;var A="p"+d+"e"+g,x=f.indexOf(v);if(x==-1){var w;x=l.tables.length,f.push(v);var M=a.readUshort(r,v);M==0?w=e.cmap.parse0(r,v):M==4?w=e.cmap.parse4(r,v):M==6?w=e.cmap.parse6(r,v):M==12?w=e.cmap.parse12(r,v):console.debug("unknown format: "+M,d,g,v),l.tables.push(w)}if(l[A]!=null)throw"multiple tables for one platform+encoding";l[A]=x}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var u=0;u<l-6;u++)a.map.push(r[s+u]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var f=o.readUshort(r,s);s+=2;var c=f/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,c),s+=2*c,s+=2,l.startCount=o.readUshorts(r,s,c),s+=2*c,l.idDelta=[];for(var d=0;d<c;d++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,c),s+=2*c,l.glyphIdArray=[];s<a+u;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var u=0;u<l;u++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var u=0;u<l;u++){var f=s+12*u,c=o.readUint(r,f+0),d=o.readUint(r,f+4),g=o.readUint(r,f+8);a.groups.push([c,d,g])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],u=0;u<a.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var u={};if(u.noc=o.readShort(a,l),l+=2,u.xMin=o.readShort(a,l),l+=2,u.yMin=o.readShort(a,l),l+=2,u.xMax=o.readShort(a,l),l+=2,u.yMax=o.readShort(a,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var f=0;f<u.noc;f++)u.endPts.push(o.readUshort(a,l)),l+=2;var c=o.readUshort(a,l);if(l+=2,a.length-l<c)return null;u.instructions=o.readBytes(a,l,c),l+=c;var d=u.endPts[u.noc-1]+1;for(u.flags=[],f=0;f<d;f++){var g=a[l];if(l++,u.flags.push(g),(8&g)!=0){var v=a[l];l++;for(var A=0;A<v;A++)u.flags.push(g),f++}}for(u.xs=[],f=0;f<d;f++){var x=(2&u.flags[f])!=0,w=(16&u.flags[f])!=0;x?(u.xs.push(w?a[l]:-a[l]),l++):w?u.xs.push(0):(u.xs.push(o.readShort(a,l)),l+=2)}for(u.ys=[],f=0;f<d;f++)x=(4&u.flags[f])!=0,w=(32&u.flags[f])!=0,x?(u.ys.push(w?a[l]:-a[l]),l++):w?u.ys.push(0):(u.ys.push(o.readShort(a,l)),l+=2);var M=0,b=0;for(f=0;f<d;f++)M+=u.xs[f],b+=u.ys[f],u.xs[f]=M,u.ys[f]=b}else{var R;u.parts=[];do{R=o.readUshort(a,l),l+=2;var F={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(F),F.glyphIndex=o.readUshort(a,l),l+=2,1&R){var O=o.readShort(a,l);l+=2;var D=o.readShort(a,l);l+=2}else O=o.readInt8(a,l),l++,D=o.readInt8(a,l),l++;2&R?(F.m.tx=O,F.m.ty=D):(F.p1=O,F.p2=D),8&R?(F.m.a=F.m.d=o.readF2dot14(a,l),l+=2):64&R?(F.m.a=o.readF2dot14(a,l),l+=2,F.m.d=o.readF2dot14(a,l),l+=2):128&R&&(F.m.a=o.readF2dot14(a,l),l+=2,F.m.b=o.readF2dot14(a,l),l+=2,F.m.c=o.readF2dot14(a,l),l+=2,F.m.d=o.readF2dot14(a,l),l+=2)}while(32&R);if(256&R){var I=o.readUshort(a,l);for(l+=2,u.instr=[],f=0;f<I;f++)u.instr.push(a[l]),l++}}return u},e.GDEF={},e.GDEF.parse=function(r,s,o,a){var l=s;s+=4;var u=e._bin.readUshort(r,s);return{glyphClassDef:u===0?null:e._lctf.readClassDef(r,l+u)}},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,u=o,f={};if(f.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&f.fmt<=2){var c=l.readUshort(r,o);o+=2,f.coverage=e._lctf.readCoverage(r,c+u)}if(s==1&&f.fmt==1){var d=l.readUshort(r,o);o+=2,d!=0&&(f.pos=e.GPOS.readValueRecord(r,o,d))}else if(s==2&&f.fmt>=1&&f.fmt<=2){d=l.readUshort(r,o),o+=2;var g=l.readUshort(r,o);o+=2;var v=e._lctf.numOfOnes(d),A=e._lctf.numOfOnes(g);if(f.fmt==1){f.pairsets=[];var x=l.readUshort(r,o);o+=2;for(var w=0;w<x;w++){var M=u+l.readUshort(r,o);o+=2;var b=l.readUshort(r,M);M+=2;for(var R=[],F=0;F<b;F++){var O=l.readUshort(r,M);M+=2,d!=0&&(H=e.GPOS.readValueRecord(r,M,d),M+=2*v),g!=0&&(z=e.GPOS.readValueRecord(r,M,g),M+=2*A),R.push({gid2:O,val1:H,val2:z})}f.pairsets.push(R)}}if(f.fmt==2){var D=l.readUshort(r,o);o+=2;var I=l.readUshort(r,o);o+=2;var C=l.readUshort(r,o);o+=2;var B=l.readUshort(r,o);for(o+=2,f.classDef1=e._lctf.readClassDef(r,u+D),f.classDef2=e._lctf.readClassDef(r,u+I),f.matrix=[],w=0;w<C;w++){var k=[];for(F=0;F<B;F++){var H=null,z=null;d!=0&&(H=e.GPOS.readValueRecord(r,o,d),o+=2*v),g!=0&&(z=e.GPOS.readValueRecord(r,o,g),o+=2*A),k.push({val1:H,val2:z})}f.matrix.push(k)}}}else if(s==4&&f.fmt==1)f.markCoverage=e._lctf.readCoverage(r,l.readUshort(r,o)+u),f.baseCoverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+u),f.markClassCount=l.readUshort(r,o+4),f.markArray=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+u),f.baseArray=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+u,f.markClassCount);else if(s==6&&f.fmt==1)f.mark1Coverage=e._lctf.readCoverage(r,l.readUshort(r,o)+u),f.mark2Coverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+u),f.markClassCount=l.readUshort(r,o+4),f.mark1Array=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+u),f.mark2Array=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+u,f.markClassCount);else{if(s==9&&f.fmt==1){var Z=l.readUshort(r,o);o+=2;var ue=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=Z;else if(a.ltype!=Z)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,u+ue)}console.debug("unsupported GPOS table LookupType",s,"format",f.fmt)}return f},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GPOS.readBaseArray=function(r,s,o){var a=e._bin,l=[],u=s,f=a.readUshort(r,s);s+=2;for(var c=0;c<f;c++){for(var d=[],g=0;g<o;g++)d.push(e.GPOS.readAnchorRecord(r,u+a.readUshort(r,s))),s+=2;l.push(d)}return l},e.GPOS.readMarkArray=function(r,s){var o=e._bin,a=[],l=s,u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var c=e.GPOS.readAnchorRecord(r,o.readUshort(r,s+2)+l);c.markClass=o.readUshort(r,s),a.push(c),s+=4}return a},e.GPOS.readAnchorRecord=function(r,s){var o=e._bin,a={};return a.fmt=o.readUshort(r,s),a.x=o.readShort(r,s+2),a.y=o.readShort(r,s+4),a},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,u=o,f={};if(f.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&f.fmt<=2||s==6&&f.fmt<=2){var c=l.readUshort(r,o);o+=2,f.coverage=e._lctf.readCoverage(r,u+c)}if(s==1&&f.fmt>=1&&f.fmt<=2){if(f.fmt==1)f.delta=l.readShort(r,o),o+=2;else if(f.fmt==2){var d=l.readUshort(r,o);o+=2,f.newg=l.readUshorts(r,o,d),o+=2*f.newg.length}}else if(s==2&&f.fmt==1){d=l.readUshort(r,o),o+=2,f.seqs=[];for(var g=0;g<d;g++){var v=l.readUshort(r,o)+u;o+=2;var A=l.readUshort(r,v);f.seqs.push(l.readUshorts(r,v+2,A))}}else if(s==4)for(f.vals=[],d=l.readUshort(r,o),o+=2,g=0;g<d;g++){var x=l.readUshort(r,o);o+=2,f.vals.push(e.GSUB.readLigatureSet(r,u+x))}else if(s==5&&f.fmt==2){if(f.fmt==2){var w=l.readUshort(r,o);o+=2,f.cDef=e._lctf.readClassDef(r,u+w),f.scset=[];var M=l.readUshort(r,o);for(o+=2,g=0;g<M;g++){var b=l.readUshort(r,o);o+=2,f.scset.push(b==0?null:e.GSUB.readSubClassSet(r,u+b))}}}else if(s==6&&f.fmt==3){if(f.fmt==3){for(g=0;g<3;g++){d=l.readUshort(r,o),o+=2;for(var R=[],F=0;F<d;F++)R.push(e._lctf.readCoverage(r,u+l.readUshort(r,o+2*F)));o+=2*d,g==0&&(f.backCvg=R),g==1&&(f.inptCvg=R),g==2&&(f.ahedCvg=R)}d=l.readUshort(r,o),o+=2,f.lookupRec=e.GSUB.readSubstLookupRecords(r,o,d)}}else{if(s==7&&f.fmt==1){var O=l.readUshort(r,o);o+=2;var D=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=O;else if(a.ltype!=O)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,u+D)}console.debug("unsupported GSUB table LookupType",s,"format",f.fmt)}return f},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],u=o(r,s);s+=2;for(var f=0;f<u;f++){var c=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+c))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),u=o(r,s+=2);s+=2,a.input=[];for(var f=0;f<l-1;f++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,u),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],u=0;u<o;u++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var c=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+c))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var f=o.readUshort(r,s);s+=2,u==1&&f--,a[l[u]]=o.readUshorts(r,s,f),s+=2*a[l[u]].length}return f=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*f),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var c=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+c))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var u=0;u<l-1;u++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,u={aWidth:[],lsBearing:[]},f=0,c=0,d=0;d<a.maxp.numGlyphs;d++)d<a.hhea.numberOfHMetrics&&(f=l.readUshort(r,s),s+=2,c=l.readShort(r,s),s+=2),u.aWidth.push(f),u.lsBearing.push(c);return u},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,u=l.readUshort(r,s);if(s+=2,u==1)return e.kern.parseV1(r,s-2,o,a);var f=l.readUshort(r,s);s+=2;for(var c={glyph1:[],rval:[]},d=0;d<f;d++){s+=2,o=l.readUshort(r,s),s+=2;var g=l.readUshort(r,s);s+=2;var v=g>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;s=e.kern.readFormat0(r,s,c)}return c},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var u=l.readUint(r,s);s+=4;for(var f={glyph1:[],rval:[]},c=0;c<u;c++){l.readUint(r,s),s+=4;var d=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var g=d>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;s=e.kern.readFormat0(r,s,f)}return f},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,u=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var f=0;f<u;f++){var c=a.readUshort(r,s);s+=2;var d=a.readUshort(r,s);s+=2;var g=a.readShort(r,s);s+=2,c!=l&&(o.glyph1.push(c),o.rval.push({glyph2:[],vals:[]}));var v=o.rval[o.rval.length-1];v.glyph2.push(d),v.vals.push(g),l=c}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,u=[],f=a.head.indexToLocFormat,c=a.maxp.numGlyphs+1;if(f==0)for(var d=0;d<c;d++)u.push(l.readUshort(r,s+(d<<1))<<1);if(f==1)for(d=0;d<c;d++)u.push(l.readUint(r,s+(d<<2)));return u},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},u=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,u==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var f,c=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=s+=2,g=0;g<u;g++){var v=a.readUshort(r,s);s+=2;var A=a.readUshort(r,s);s+=2;var x=a.readUshort(r,s);s+=2;var w=a.readUshort(r,s);s+=2;var M=a.readUshort(r,s);s+=2;var b=a.readUshort(r,s);s+=2;var R,F=c[w],O=d+12*u+b;if(v==0)R=a.readUnicode(r,O,M/2);else if(v==3&&A==0)R=a.readUnicode(r,O,M/2);else if(A==0)R=a.readASCII(r,O,M);else if(A==1)R=a.readUnicode(r,O,M/2);else if(A==3)R=a.readUnicode(r,O,M/2);else{if(v!=1)throw"unknown encoding "+A+", platformID: "+v;R=a.readASCII(r,O,M),console.debug("reading unknown MAC encoding "+A+" as ASCII")}var D="p"+v+","+x.toString(16);l[D]==null&&(l[D]={}),l[D][F!==void 0?F:w]=R,l[D]._lang=x}for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==1033)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==0)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==3084)return l[I];for(var I in l)if(l[I].postScriptName!=null)return l[I];for(var I in l){f=I;break}return console.debug("returning name table with languageID "+l[f]._lang),l[f]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var u=-1,f=0;f<l.endCount.length;f++)if(s<=l.endCount[f]){u=f;break}return u==-1||l.startCount[u]>s?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[s-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:s+l.idDelta[u])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(f=0;f<l.groups.length;f++){var c=l.groups[f];if(c[0]<=s&&s<=c[1])return c[2]+(s-c[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},u=r.CFF,f=r.CFF.Private;if(u.ROS){for(var c=0;u.FDSelect[c+2]<=s;)c+=2;f=u.FDArray[u.FDSelect[c+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,u,f,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],u=a;u<=l;u++){var f=u==a?l:u-1,c=u==l?a:u+1,d=1&r.flags[u],g=1&r.flags[f],v=1&r.flags[c],A=r.xs[u],x=r.ys[u];if(u==a)if(d){if(!g){e.U.P.moveTo(s,A,x);continue}e.U.P.moveTo(s,r.xs[f],r.ys[f])}else g?e.U.P.moveTo(s,r.xs[f],r.ys[f]):e.U.P.moveTo(s,(r.xs[f]+A)/2,(r.ys[f]+x)/2);d?g&&e.U.P.lineTo(s,A,x):v?e.U.P.qcurveTo(s,A,x,r.xs[c],r.ys[c]):e.U.P.qcurveTo(s,A,x,(A+r.xs[c])/2,(x+r.ys[c])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},u=r.parts[a];e.U._drawGlyf(u.glyphIndex,s,l);for(var f=u.m,c=0;c<l.crds.length;c+=2){var d=l.crds[c],g=l.crds[c+1];o.crds.push(d*f.a+g*f.b+f.tx),o.crds.push(d*f.c+g*f.d+f.ty)}for(c=0;c<l.cmds.length;c++)o.cmds.push(l.cmds[c])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,u=0;u<o.tabs.length;u++)if(o.tabs[u]!=null){var f,c=o.tabs[u];if(!c.coverage||(f=e._lctf.coverageIndex(c.coverage,r[s]))!=-1){if(o.ltype==1)r[s],c.fmt==1?r[s]=r[s]+c.delta:r[s]=c.newg[f];else if(o.ltype==4)for(var d=c.vals[f],g=0;g<d.length;g++){var v=d[g],A=v.chain.length;if(!(A>l)){for(var x=!0,w=0,M=0;M<A;M++){for(;r[s+w+(1+M)]==-1;)w++;v.chain[M]!=r[s+w+(1+M)]&&(x=!1)}if(x){for(r[s]=v.nglyph,M=0;M<A+w;M++)r[s+M+1]=-1;break}}}else if(o.ltype==5&&c.fmt==2)for(var b=e._lctf.getInterval(c.cDef,r[s]),R=c.cDef[b+2],F=c.scset[R],O=0;O<F.length;O++){var D=F[O],I=D.input;if(!(I.length>l)){for(x=!0,M=0;M<I.length;M++){var C=e._lctf.getInterval(c.cDef,r[s+1+M]);if(b==-1&&c.cDef[C+2]!=I[M]){x=!1;break}}if(x){var B=D.substLookupRecords;for(g=0;g<B.length;g+=2)B[g],B[g+1]}}}else if(o.ltype==6&&c.fmt==3){if(!e.U._glsCovered(r,c.backCvg,s-c.backCvg.length)||!e.U._glsCovered(r,c.inptCvg,s)||!e.U._glsCovered(r,c.ahedCvg,s+c.inptCvg.length))continue;var k=c.lookupRec;for(O=0;O<k.length;O+=2){b=k[O];var H=a[k[O+1]];e.U._applySubs(r,s+b,H,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,u=0;u<s.length;u++){var f=s[u];if(f!=-1){for(var c=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,d=e.U.glyphToPath(r,f),g=0;g<d.crds.length;g+=2)a.crds.push(d.crds[g]+l),a.crds.push(d.crds[g+1]);for(o&&a.cmds.push(o),g=0;g<d.cmds.length;g++)a.cmds.push(d.cmds[g]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[f],u<s.length-1&&(l+=e.U.getPairAdjustment(r,f,c))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,u,f){r.cmds.push("C"),r.crds.push(s,o,a,l,u,f)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var u=s.stack,f=s.nStems,c=s.haveWidth,d=s.width,g=s.open,v=0,A=s.x,x=s.y,w=0,M=0,b=0,R=0,F=0,O=0,D=0,I=0,C=0,B=0,k={val:0,size:0};v<r.length;){e.CFF.getCharString(r,v,k);var H=k.val;if(v+=k.size,H=="o1"||H=="o18")u.length%2!=0&&!c&&(d=u.shift()+a.nominalWidthX),f+=u.length>>1,u.length=0,c=!0;else if(H=="o3"||H=="o23")u.length%2!=0&&!c&&(d=u.shift()+a.nominalWidthX),f+=u.length>>1,u.length=0,c=!0;else if(H=="o4")u.length>1&&!c&&(d=u.shift()+a.nominalWidthX,c=!0),g&&e.U.P.closePath(l),x+=u.pop(),e.U.P.moveTo(l,A,x),g=!0;else if(H=="o5")for(;u.length>0;)A+=u.shift(),x+=u.shift(),e.U.P.lineTo(l,A,x);else if(H=="o6"||H=="o7")for(var z=u.length,Z=H=="o6",ue=0;ue<z;ue++){var ae=u.shift();Z?A+=ae:x+=ae,Z=!Z,e.U.P.lineTo(l,A,x)}else if(H=="o8"||H=="o24"){z=u.length;for(var ge=0;ge+6<=z;)w=A+u.shift(),M=x+u.shift(),b=w+u.shift(),R=M+u.shift(),A=b+u.shift(),x=R+u.shift(),e.U.P.curveTo(l,w,M,b,R,A,x),ge+=6;H=="o24"&&(A+=u.shift(),x+=u.shift(),e.U.P.lineTo(l,A,x))}else{if(H=="o11")break;if(H=="o1234"||H=="o1235"||H=="o1236"||H=="o1237")H=="o1234"&&(M=x,b=(w=A+u.shift())+u.shift(),B=R=M+u.shift(),O=R,I=x,A=(D=(F=(C=b+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,w,M,b,R,C,B),e.U.P.curveTo(l,F,O,D,I,A,x)),H=="o1235"&&(w=A+u.shift(),M=x+u.shift(),b=w+u.shift(),R=M+u.shift(),C=b+u.shift(),B=R+u.shift(),F=C+u.shift(),O=B+u.shift(),D=F+u.shift(),I=O+u.shift(),A=D+u.shift(),x=I+u.shift(),u.shift(),e.U.P.curveTo(l,w,M,b,R,C,B),e.U.P.curveTo(l,F,O,D,I,A,x)),H=="o1236"&&(w=A+u.shift(),M=x+u.shift(),b=w+u.shift(),B=R=M+u.shift(),O=R,D=(F=(C=b+u.shift())+u.shift())+u.shift(),I=O+u.shift(),A=D+u.shift(),e.U.P.curveTo(l,w,M,b,R,C,B),e.U.P.curveTo(l,F,O,D,I,A,x)),H=="o1237"&&(w=A+u.shift(),M=x+u.shift(),b=w+u.shift(),R=M+u.shift(),C=b+u.shift(),B=R+u.shift(),F=C+u.shift(),O=B+u.shift(),D=F+u.shift(),I=O+u.shift(),Math.abs(D-A)>Math.abs(I-x)?A=D+u.shift():x=I+u.shift(),e.U.P.curveTo(l,w,M,b,R,C,B),e.U.P.curveTo(l,F,O,D,I,A,x));else if(H=="o14"){if(u.length>0&&!c&&(d=u.shift()+o.nominalWidthX,c=!0),u.length==4){var ee=u.shift(),le=u.shift(),$=u.shift(),V=u.shift(),Q=e.CFF.glyphBySE(o,$),fe=e.CFF.glyphBySE(o,V);e.U._drawCFF(o.CharStrings[Q],s,o,a,l),s.x=ee,s.y=le,e.U._drawCFF(o.CharStrings[fe],s,o,a,l)}g&&(e.U.P.closePath(l),g=!1)}else if(H=="o19"||H=="o20")u.length%2!=0&&!c&&(d=u.shift()+a.nominalWidthX),f+=u.length>>1,u.length=0,c=!0,v+=f+7>>3;else if(H=="o21")u.length>2&&!c&&(d=u.shift()+a.nominalWidthX,c=!0),x+=u.pop(),A+=u.pop(),g&&e.U.P.closePath(l),e.U.P.moveTo(l,A,x),g=!0;else if(H=="o22")u.length>1&&!c&&(d=u.shift()+a.nominalWidthX,c=!0),A+=u.pop(),g&&e.U.P.closePath(l),e.U.P.moveTo(l,A,x),g=!0;else if(H=="o25"){for(;u.length>6;)A+=u.shift(),x+=u.shift(),e.U.P.lineTo(l,A,x);w=A+u.shift(),M=x+u.shift(),b=w+u.shift(),R=M+u.shift(),A=b+u.shift(),x=R+u.shift(),e.U.P.curveTo(l,w,M,b,R,A,x)}else if(H=="o26")for(u.length%2&&(A+=u.shift());u.length>0;)w=A,M=x+u.shift(),A=b=w+u.shift(),x=(R=M+u.shift())+u.shift(),e.U.P.curveTo(l,w,M,b,R,A,x);else if(H=="o27")for(u.length%2&&(x+=u.shift());u.length>0;)M=x,b=(w=A+u.shift())+u.shift(),R=M+u.shift(),A=b+u.shift(),x=R,e.U.P.curveTo(l,w,M,b,R,A,x);else if(H=="o10"||H=="o29"){var oe=H=="o10"?a:o;if(u.length==0)console.debug("error: empty stack");else{var he=u.pop(),xe=oe.Subrs[he+oe.Bias];s.x=A,s.y=x,s.nStems=f,s.haveWidth=c,s.width=d,s.open=g,e.U._drawCFF(xe,s,o,a,l),A=s.x,x=s.y,f=s.nStems,c=s.haveWidth,d=s.width,g=s.open}}else if(H=="o30"||H=="o31"){var _e=u.length,be=(ge=0,H=="o31");for(ge+=_e-(z=-3&_e);ge<z;)be?(M=x,b=(w=A+u.shift())+u.shift(),x=(R=M+u.shift())+u.shift(),z-ge==5?(A=b+u.shift(),ge++):A=b,be=!1):(w=A,M=x+u.shift(),b=w+u.shift(),R=M+u.shift(),A=b+u.shift(),z-ge==5?(x=R+u.shift(),ge++):x=R,be=!0),e.U.P.curveTo(l,w,M,b,R,A,x),ge+=4}else{if((H+"").charAt(0)=="o")throw console.debug("Unknown operation: "+H,r),H;u.push(H)}}}s.x=A,s.y=x,s.nStems=f,s.haveWidth=c,s.width=d,s.open=g};var t=e,n={Typr:t};return i.Typr=t,i.default=n,Object.defineProperty(i,"__esModule",{value:!0}),i}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function HK(){return function(i){var e=Uint8Array,t=Uint16Array,n=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(H,z){for(var Z=new t(31),ue=0;ue<31;++ue)Z[ue]=z+=1<<H[ue-1];var ae=new n(Z[30]);for(ue=1;ue<30;++ue)for(var ge=Z[ue];ge<Z[ue+1];++ge)ae[ge]=ge-Z[ue]<<5|ue;return[Z,ae]},l=a(r,2),u=l[0],f=l[1];u[28]=258,f[258]=28;for(var c=a(s,0)[0],d=new t(32768),g=0;g<32768;++g){var v=(43690&g)>>>1|(21845&g)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,d[g]=((65280&v)>>>8|(255&v)<<8)>>>1}var A=function(H,z,Z){for(var ue=H.length,ae=0,ge=new t(z);ae<ue;++ae)++ge[H[ae]-1];var ee,le=new t(z);for(ae=0;ae<z;++ae)le[ae]=le[ae-1]+ge[ae-1]<<1;{ee=new t(1<<z);var $=15-z;for(ae=0;ae<ue;++ae)if(H[ae])for(var V=ae<<4|H[ae],Q=z-H[ae],fe=le[H[ae]-1]++<<Q,oe=fe|(1<<Q)-1;fe<=oe;++fe)ee[d[fe]>>>$]=V}return ee},x=new e(288);for(g=0;g<144;++g)x[g]=8;for(g=144;g<256;++g)x[g]=9;for(g=256;g<280;++g)x[g]=7;for(g=280;g<288;++g)x[g]=8;var w=new e(32);for(g=0;g<32;++g)w[g]=5;var M=A(x,9),b=A(w,5),R=function(H){for(var z=H[0],Z=1;Z<H.length;++Z)H[Z]>z&&(z=H[Z]);return z},F=function(H,z,Z){var ue=z/8|0;return(H[ue]|H[ue+1]<<8)>>(7&z)&Z},O=function(H,z){var Z=z/8|0;return(H[Z]|H[Z+1]<<8|H[Z+2]<<16)>>(7&z)},D=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(H,z,Z){var ue=new Error(z||D[H]);if(ue.code=H,Error.captureStackTrace&&Error.captureStackTrace(ue,I),!Z)throw ue;return ue},C=function(H,z,Z){var ue=H.length;if(!ue||Z&&!Z.l&&ue<5)return z||new e(0);var ae=!z||Z,ge=!Z||Z.i;Z||(Z={}),z||(z=new e(3*ue));var ee,le=function(it){var kt=z.length;if(it>kt){var Bt=new e(Math.max(2*kt,it));Bt.set(z),z=Bt}},$=Z.f||0,V=Z.p||0,Q=Z.b||0,fe=Z.l,oe=Z.d,he=Z.m,xe=Z.n,_e=8*ue;do{if(!fe){Z.f=$=F(H,V,1);var be=F(H,V+1,3);if(V+=3,!be){var Xe=H[(je=((ee=V)/8|0)+(7&ee&&1)+4)-4]|H[je-3]<<8,Ye=je+Xe;if(Ye>ue){ge&&I(0);break}ae&&le(Q+Xe),z.set(H.subarray(je,Ye),Q),Z.b=Q+=Xe,Z.p=V=8*Ye;continue}if(be==1)fe=M,oe=b,he=9,xe=5;else if(be==2){var Ne=F(H,V,31)+257,Ee=F(H,V+10,15)+4,Ge=Ne+F(H,V+5,31)+1;V+=14;for(var se=new e(Ge),ht=new e(19),We=0;We<Ee;++We)ht[o[We]]=F(H,V+3*We,7);V+=3*Ee;var ut=R(ht),Fe=(1<<ut)-1,dt=A(ht,ut);for(We=0;We<Ge;){var je,K=dt[F(H,V,Fe)];if(V+=15&K,(je=K>>>4)<16)se[We++]=je;else{var J=0,ye=0;for(je==16?(ye=3+F(H,V,3),V+=2,J=se[We-1]):je==17?(ye=3+F(H,V,7),V+=3):je==18&&(ye=11+F(H,V,127),V+=7);ye--;)se[We++]=J}}var Re=se.subarray(0,Ne),De=se.subarray(Ne);he=R(Re),xe=R(De),fe=A(Re,he),oe=A(De,xe)}else I(1);if(V>_e){ge&&I(0);break}}ae&&le(Q+131072);for(var ke=(1<<he)-1,qe=(1<<xe)-1,nt=V;;nt=V){var lt=(J=fe[O(H,V)&ke])>>>4;if((V+=15&J)>_e){ge&&I(0);break}if(J||I(2),lt<256)z[Q++]=lt;else{if(lt==256){nt=V,fe=null;break}var Ot=lt-254;if(lt>264){var rt=r[We=lt-257];Ot=F(H,V,(1<<rt)-1)+u[We],V+=rt}var xt=oe[O(H,V)&qe],yt=xt>>>4;if(xt||I(3),V+=15&xt,De=c[yt],yt>3&&(rt=s[yt],De+=O(H,V)&(1<<rt)-1,V+=rt),V>_e){ge&&I(0);break}ae&&le(Q+131072);for(var gt=Q+Ot;Q<gt;Q+=4)z[Q]=z[Q-De],z[Q+1]=z[Q+1-De],z[Q+2]=z[Q+2-De],z[Q+3]=z[Q+3-De];Q=gt}}Z.l=fe,Z.p=nt,Z.b=Q,fe&&($=1,Z.m=he,Z.d=oe,Z.n=xe)}while(!$);return Q==z.length?z:function(it,kt,Bt){(Bt==null||Bt>it.length)&&(Bt=it.length);var Qt=new(it instanceof t?t:it instanceof n?n:e)(Bt-kt);return Qt.set(it.subarray(kt,Bt)),Qt}(z,0,Q)},B=new e(0),k=typeof TextDecoder<"u"&&new TextDecoder;try{k.decode(B,{stream:!0})}catch{}return i.convert_streams=function(H){var z=new DataView(H),Z=0;function ue(){var Ne=z.getUint16(Z);return Z+=2,Ne}function ae(){var Ne=z.getUint32(Z);return Z+=4,Ne}function ge(Ne){Xe.setUint16(Ye,Ne),Ye+=2}function ee(Ne){Xe.setUint32(Ye,Ne),Ye+=4}for(var le={signature:ae(),flavor:ae(),length:ae(),numTables:ue(),reserved:ue(),totalSfntSize:ae(),majorVersion:ue(),minorVersion:ue(),metaOffset:ae(),metaLength:ae(),metaOrigLength:ae(),privOffset:ae(),privLength:ae()},$=0;Math.pow(2,$)<=le.numTables;)$++;$--;for(var V=16*Math.pow(2,$),Q=16*le.numTables-V,fe=12,oe=[],he=0;he<le.numTables;he++)oe.push({tag:ae(),offset:ae(),compLength:ae(),origLength:ae(),origChecksum:ae()}),fe+=16;var xe,_e=new Uint8Array(12+16*oe.length+oe.reduce(function(Ne,Ee){return Ne+Ee.origLength+4},0)),be=_e.buffer,Xe=new DataView(be),Ye=0;return ee(le.flavor),ge(le.numTables),ge(V),ge($),ge(Q),oe.forEach(function(Ne){ee(Ne.tag),ee(Ne.origChecksum),ee(fe),ee(Ne.origLength),Ne.outOffset=fe,(fe+=Ne.origLength)%4!=0&&(fe+=4-fe%4)}),oe.forEach(function(Ne){var Ee,Ge=H.slice(Ne.offset,Ne.offset+Ne.compLength);if(Ne.compLength!=Ne.origLength){var se=new Uint8Array(Ne.origLength);Ee=new Uint8Array(Ge,2),C(Ee,se)}else se=new Uint8Array(Ge);_e.set(se,Ne.outOffset);var ht=0;(fe=Ne.outOffset+Ne.origLength)%4!=0&&(ht=4-fe%4),_e.set(new Uint8Array(ht).buffer,Ne.outOffset+Ne.origLength),xe=fe+ht}),be.slice(0,xe)},Object.defineProperty(i,"__esModule",{value:!0}),i}({}).convert_streams}function VK(i,e){const t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,u=32;let f;function c(D){if(!f){const I={R:s,L:r,D:o,C:l,U:u,T:a};f=new Map;for(let C in n){let B=0;n[C].split(",").forEach(k=>{let[H,z]=k.split("+");H=parseInt(H,36),z=z?parseInt(z,36):0,f.set(B+=H,I[C]);for(let Z=z;Z--;)f.set(++B,I[C])})}}return f.get(D)||u}const d=1,g=2,v=3,A=4,x=[null,"isol","init","fina","medi"];function w(D){const I=new Uint8Array(D.length);let C=u,B=d,k=-1;for(let H=0;H<D.length;H++){const z=D.codePointAt(H);let Z=c(z)|0,ue=d;Z&a||(C&(r|o|l)?Z&(s|o|l)?(ue=v,(B===d||B===v)&&I[k]++):Z&(r|u)&&(B===g||B===A)&&I[k]--:C&(s|u)&&(B===g||B===A)&&I[k]--,B=I[H]=ue,C=Z,k=H,z>65535&&H++)}return I}function M(D,I){const C=[];for(let k=0;k<I.length;k++){const H=I.codePointAt(k);H>65535&&k++,C.push(i.U.codeToGlyph(D,H))}const B=D.GSUB;if(B){const{lookupList:k,featureList:H}=B;let z;const Z=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ue=[];H.forEach(ae=>{if(Z.test(ae.tag))for(let ge=0;ge<ae.tab.length;ge++){if(ue[ae.tab[ge]])continue;ue[ae.tab[ge]]=!0;const ee=k[ae.tab[ge]],le=/^(isol|init|fina|medi)$/.test(ae.tag);le&&!z&&(z=w(I));for(let $=0;$<C.length;$++)(!z||!le||x[z[$]]===ae.tag)&&i.U._applySubs(C,$,ee,k)}})}return C}function b(D,I){const C=new Int16Array(I.length*3);let B=0;for(;B<I.length;B++){const Z=I[B];if(Z===-1)continue;C[B*3+2]=D.hmtx.aWidth[Z];const ue=D.GPOS;if(ue){const ae=ue.lookupList;for(let ge=0;ge<ae.length;ge++){const ee=ae[ge];for(let le=0;le<ee.tabs.length;le++){const $=ee.tabs[le];if(ee.ltype===1){if(i._lctf.coverageIndex($.coverage,Z)!==-1&&$.pos){z($.pos,B);break}}else if(ee.ltype===2){let V=null,Q=k();if(Q!==-1){const fe=i._lctf.coverageIndex($.coverage,I[Q]);if(fe!==-1){if($.fmt===1){const oe=$.pairsets[fe];for(let he=0;he<oe.length;he++)oe[he].gid2===Z&&(V=oe[he])}else if($.fmt===2){const oe=i.U._getGlyphClass(I[Q],$.classDef1),he=i.U._getGlyphClass(Z,$.classDef2);V=$.matrix[oe][he]}if(V){V.val1&&z(V.val1,Q),V.val2&&z(V.val2,B);break}}}}else if(ee.ltype===4){const V=i._lctf.coverageIndex($.markCoverage,Z);if(V!==-1){const Q=k(H),fe=Q===-1?-1:i._lctf.coverageIndex($.baseCoverage,I[Q]);if(fe!==-1){const oe=$.markArray[V],he=$.baseArray[fe][oe.markClass];C[B*3]=he.x-oe.x+C[Q*3]-C[Q*3+2],C[B*3+1]=he.y-oe.y+C[Q*3+1];break}}}else if(ee.ltype===6){const V=i._lctf.coverageIndex($.mark1Coverage,Z);if(V!==-1){const Q=k();if(Q!==-1){const fe=I[Q];if(R(D,fe)===3){const oe=i._lctf.coverageIndex($.mark2Coverage,fe);if(oe!==-1){const he=$.mark1Array[V],xe=$.mark2Array[oe][he.markClass];C[B*3]=xe.x-he.x+C[Q*3]-C[Q*3+2],C[B*3+1]=xe.y-he.y+C[Q*3+1];break}}}}}}}}else if(D.kern&&!D.cff){const ae=k();if(ae!==-1){const ge=D.kern.glyph1.indexOf(I[ae]);if(ge!==-1){const ee=D.kern.rval[ge].glyph2.indexOf(Z);ee!==-1&&(C[ae*3+2]+=D.kern.rval[ge].vals[ee])}}}}return C;function k(Z){for(let ue=B-1;ue>=0;ue--)if(I[ue]!==-1&&(!Z||Z(I[ue])))return ue;return-1}function H(Z){return R(D,Z)===1}function z(Z,ue){for(let ae=0;ae<3;ae++)C[ue*3+ae]+=Z[ae]||0}}function R(D,I){const C=D.GDEF&&D.GDEF.glyphClassDef;return C?i.U._getGlyphClass(I,C):0}function F(...D){for(let I=0;I<D.length;I++)if(typeof D[I]=="number")return D[I]}function O(D){const I=Object.create(null),C=D["OS/2"],B=D.hhea,k=D.head.unitsPerEm,H=F(C&&C.sTypoAscender,B&&B.ascender,k),z={unitsPerEm:k,ascender:H,descender:F(C&&C.sTypoDescender,B&&B.descender,0),capHeight:F(C&&C.sCapHeight,H),xHeight:F(C&&C.sxHeight,H),lineGap:F(C&&C.sTypoLineGap,B&&B.lineGap),supportsCodePoint(Z){return i.U.codeToGlyph(D,Z)>0},forEachGlyph(Z,ue,ae,ge){let ee=0;const le=1/z.unitsPerEm*ue,$=M(D,Z);let V=0;const Q=b(D,$);return $.forEach((fe,oe)=>{if(fe!==-1){let he=I[fe];if(!he){const{cmds:xe,crds:_e}=i.U.glyphToPath(D,fe);let be="",Xe=0;for(let se=0,ht=xe.length;se<ht;se++){const We=t[xe[se]];be+=xe[se];for(let ut=1;ut<=We;ut++)be+=(ut>1?",":"")+_e[Xe++]}let Ye,Ne,Ee,Ge;if(_e.length){Ye=Ne=1/0,Ee=Ge=-1/0;for(let se=0,ht=_e.length;se<ht;se+=2){let We=_e[se],ut=_e[se+1];We<Ye&&(Ye=We),ut<Ne&&(Ne=ut),We>Ee&&(Ee=We),ut>Ge&&(Ge=ut)}}else Ye=Ee=Ne=Ge=0;he=I[fe]={index:fe,advanceWidth:D.hmtx.aWidth[fe],xMin:Ye,yMin:Ne,xMax:Ee,yMax:Ge,path:be}}ge.call(null,he,ee+Q[oe*3]*le,Q[oe*3+1]*le,V),ee+=Q[oe*3+2]*le,ae&&(ee+=ae*ue)}V+=Z.codePointAt(V)>65535?2:1}),ee}};return z}return function(I){const C=new Uint8Array(I,0,4),B=i._bin.readASCII(C,0,4);if(B==="wOFF")I=e(I);else if(B==="wOF2")throw new Error("woff2 fonts not supported");return O(i.parse(I)[0])}}const WK=Xm({name:"Typr Font Parser",dependencies:[GK,HK,VK],init(i,e,t){const n=i(),r=e();return t(n,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function jK(){return function(i){var e=function(){this.buckets=new Map};e.prototype.add=function(b){var R=b>>5;this.buckets.set(R,(this.buckets.get(R)||0)|1<<(31&b))},e.prototype.has=function(b){var R=this.buckets.get(b>>5);return R!==void 0&&(R&1<<(31&b))!=0},e.prototype.serialize=function(){var b=[];return this.buckets.forEach(function(R,F){b.push((+F).toString(36)+":"+R.toString(36))}),b.join(",")},e.prototype.deserialize=function(b){var R=this;this.buckets.clear(),b.split(",").forEach(function(F){var O=F.split(":");R.buckets.set(parseInt(O[0],36),parseInt(O[1],36))})};var t=Math.pow(2,8),n=t-1,r=~n;function s(b){var R=function(O){return O&r}(b).toString(16),F=function(O){return(O&r)+t-1}(b).toString(16);return"codepoint-index/plane"+(b>>16)+"/"+R+"-"+F+".json"}function o(b,R){var F=b&n,O=R.codePointAt(F/6|0);return((O=(O||48)-48)&1<<F%6)!=0}function a(b,R){var F;(F=b,F.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(O){return O.split("-").map(function(D){return parseInt(D.trim(),16)})})).forEach(function(O){var D=O[0],I=O[1];I===void 0&&(I=D),R(D,I)})}function l(b,R){a(b,function(F,O){for(var D=F;D<=O;D++)R(D)})}var u={},f={},c=new WeakMap,d="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function g(b){var R=c.get(b);return R||(R=new e,l(b.ranges,function(F){return R.add(F)}),c.set(b,R)),R}var v,A=new Map;function x(b,R,F){return b[R]?R:b[F]?F:function(O){for(var D in O)return D}(b)}function w(b,R){var F=R;if(!b.includes(F)){F=1/0;for(var O=0;O<b.length;O++)Math.abs(b[O]-R)<Math.abs(F-R)&&(F=b[O])}return F}function M(b){return v||(v=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(R){v.add(R)})),v.has(b)}return i.CodePointSet=e,i.clearCache=function(){u={},f={}},i.getFontsForString=function(b,R){R===void 0&&(R={});var F,O=R.lang;O===void 0&&(O=new RegExp("\\p{Script=Hangul}","u").test(F=b)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(F)?"ja":"en");var D=R.category;D===void 0&&(D="sans-serif");var I=R.style;I===void 0&&(I="normal");var C=R.weight;C===void 0&&(C=400);var B=(R.dataUrl||d).replace(/\/$/g,""),k=new Map,H=new Uint8Array(b.length),z={},Z={},ue=new Array(b.length),ae=new Map,ge=!1;function ee(V){var Q=A.get(V);return Q||(Q=fetch(B+"/"+V).then(function(fe){if(!fe.ok)throw new Error(fe.statusText);return fe.json().then(function(oe){if(!Array.isArray(oe)||oe[0]!==1)throw new Error("Incorrect schema version; need 1, got "+oe[0]);return oe[1]})}).catch(function(fe){if(B!==d)return ge||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+B+'", trying default CDN. '+fe.message),ge=!0),B=d,A.delete(V),ee(V);throw fe}),A.set(V,Q)),Q}for(var le=function(V){var Q=b.codePointAt(V),fe=s(Q);ue[V]=fe,u[fe]||ae.has(fe)||ae.set(fe,ee(fe).then(function(oe){u[fe]=oe})),Q>65535&&(V++,$=V)},$=0;$<b.length;$++)le($);return Promise.all(ae.values()).then(function(){ae.clear();for(var V=function(fe){var oe=b.codePointAt(fe),he=null,xe=u[ue[fe]],_e=void 0;for(var be in xe){var Xe=Z[be];if(Xe===void 0&&(Xe=Z[be]=new RegExp(be).test(O||"en")),Xe){for(var Ye in _e=be,xe[be])if(o(oe,xe[be][Ye])){he=Ye;break}break}}if(!he){e:for(var Ne in xe)if(Ne!==_e){for(var Ee in xe[Ne])if(o(oe,xe[Ne][Ee])){he=Ee;break e}}}he||(console.debug("No font coverage for U+"+oe.toString(16)),he="latin"),ue[fe]=he,f[he]||ae.has(he)||ae.set(he,ee("font-meta/"+he+".json").then(function(Ge){f[he]=Ge})),oe>65535&&(fe++,Q=fe)},Q=0;Q<b.length;Q++)V(Q);return Promise.all(ae.values())}).then(function(){for(var V,Q=null,fe=0;fe<b.length;fe++){var oe=b.codePointAt(fe);if(Q&&(M(oe)||g(Q).has(oe)))H[fe]=H[fe-1];else{Q=f[ue[fe]];var he=z[Q.id];if(!he){var xe=Q.typeforms,_e=x(xe,D,"sans-serif"),be=x(xe[_e],I,"normal"),Xe=w((V=xe[_e])===null||V===void 0?void 0:V[be],C);he=z[Q.id]=B+"/font-files/"+Q.id+"/"+_e+"."+be+"."+Xe+".woff"}var Ye=k.get(he);Ye==null&&(Ye=k.size,k.set(he,Ye)),H[fe]=Ye}oe>65535&&(fe++,H[fe]=H[fe-1])}return{fontUrls:Array.from(k.keys()),chars:H}})},Object.defineProperty(i,"__esModule",{value:!0}),i}({})}function qK(i,e){const t=Object.create(null),n=Object.create(null);function r(o,a){const l=u=>{console.error(`Failure loading font ${o}`,u)};try{const u=new XMLHttpRequest;u.open("get",o,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status>=400)l(new Error(u.statusText));else if(u.status>0)try{const f=i(u.response);f.src=o,a(f)}catch(f){l(f)}},u.onerror=l,u.send()}catch(u){l(u)}}function s(o,a){let l=t[o];l?a(l):n[o]?n[o].push(a):(n[o]=[a],r(o,u=>{u.src=o,t[o]=u,n[o].forEach(f=>f(u)),delete n[o]}))}return function(o,a,{lang:l,fonts:u=[],style:f="normal",weight:c="normal",unicodeFontsURL:d}={}){const g=new Uint8Array(o.length),v=[];o.length||M();const A=new Map,x=[];if(f!=="italic"&&(f="normal"),typeof c!="number"&&(c=c==="bold"?700:400),u&&!Array.isArray(u)&&(u=[u]),u=u.slice().filter(R=>!R.lang||R.lang.test(l)).reverse(),u.length){let D=0;(function I(C=0){for(let B=C,k=o.length;B<k;B++){const H=o.codePointAt(B);if(D===1&&v[g[B-1]].supportsCodePoint(H)||/\s/.test(o[B]))g[B]=g[B-1],D===2&&(x[x.length-1][1]=B);else for(let z=g[B],Z=u.length;z<=Z;z++)if(z===Z){const ue=D===2?x[x.length-1]:x[x.length]=[B,B];ue[1]=B,D=2}else{g[B]=z;const{src:ue,unicodeRange:ae}=u[z];if(!ae||b(H,ae)){const ge=t[ue];if(!ge){s(ue,()=>{I(B)});return}if(ge.supportsCodePoint(H)){let ee=A.get(ge);typeof ee!="number"&&(ee=v.length,v.push(ge),A.set(ge,ee)),g[B]=ee,D=1;break}}}H>65535&&B+1<k&&(g[B+1]=g[B],B++,D===2&&(x[x.length-1][1]=B))}w()})()}else x.push([0,o.length-1]),w();function w(){if(x.length){const R=x.map(F=>o.substring(F[0],F[1]+1)).join(`
`);e.getFontsForString(R,{lang:l||void 0,style:f,weight:c,dataUrl:d}).then(({fontUrls:F,chars:O})=>{const D=v.length;let I=0;x.forEach(B=>{for(let k=0,H=B[1]-B[0];k<=H;k++)g[B[0]+k]=O[I++]+D;I++});let C=0;F.forEach((B,k)=>{s(B,H=>{v[k+D]=H,++C===F.length&&M()})})})}else M()}function M(){a({chars:g,fonts:v})}function b(R,F){for(let O=0;O<F.length;O++){const[D,I=D]=F[O];if(D<=R&&R<=I)return!0}return!1}}}const XK=Xm({name:"FontResolver",dependencies:[qK,WK,jK],init(i,e,t){return i(e,t())}});function JK(i,e){const n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",s=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:v,lang:A,fonts:x,style:w,weight:M,preResolvedFonts:b,unicodeFontsURL:R},F){const O=({chars:D,fonts:I})=>{let C,B;const k=[];for(let H=0;H<D.length;H++)D[H]!==B?(B=D[H],k.push(C={start:H,end:H,fontObj:I[D[H]]})):C.end=H;F(k)};b?O(b):i(v,O,{lang:A,fonts:x,style:w,weight:M,unicodeFontsURL:R})}function a({text:v="",font:A,lang:x,sdfGlyphSize:w=64,fontSize:M=400,fontWeight:b=1,fontStyle:R="normal",letterSpacing:F=0,lineHeight:O="normal",maxWidth:D=1/0,direction:I,textAlign:C="left",textIndent:B=0,whiteSpace:k="normal",overflowWrap:H="normal",anchorX:z=0,anchorY:Z=0,metricsOnly:ue=!1,unicodeFontsURL:ae,preResolvedFonts:ge=null,includeCaretPositions:ee=!1,chunkedBoundsSize:le=8192,colorRanges:$=null},V){const Q=c(),fe={fontLoad:0,typesetting:0};v.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),v=v.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),M=+M,F=+F,D=+D,O=O||"normal",B=+B,o({text:v,lang:x,style:R,weight:b,fonts:typeof A=="string"?[{src:A}]:A,unicodeFontsURL:ae,preResolvedFonts:ge},oe=>{fe.fontLoad=c()-Q;const he=isFinite(D);let xe=null,_e=null,be=null,Xe=null,Ye=null,Ne=null,Ee=null,Ge=null,se=0,ht=0,We=k!=="nowrap";const ut=new Map,Fe=c();let dt=B,je=0,K=new d;const J=[K];oe.forEach(qe=>{const{fontObj:nt}=qe,{ascender:lt,descender:Ot,unitsPerEm:rt,lineGap:xt,capHeight:yt,xHeight:gt}=nt;let it=ut.get(nt);if(!it){const Ce=M/rt,Le=O==="normal"?(lt-Ot+xt)*Ce:O*M,at=(Le-(lt-Ot)*Ce)/2,vt=Math.min(Le,(lt-Ot)*Ce),ft=(lt+Ot)/2*Ce+vt/2;it={index:ut.size,src:nt.src,fontObj:nt,fontSizeMult:Ce,unitsPerEm:rt,ascender:lt*Ce,descender:Ot*Ce,capHeight:yt*Ce,xHeight:gt*Ce,lineHeight:Le,baseline:-at-lt*Ce,caretTop:ft,caretBottom:ft-vt},ut.set(nt,it)}const{fontSizeMult:kt}=it,Bt=v.slice(qe.start,qe.end+1);let Qt,Te;nt.forEachGlyph(Bt,M,F,(Ce,Le,at,vt)=>{Le+=je,vt+=qe.start,Qt=Le,Te=Ce;const ft=v.charAt(vt),qt=Ce.advanceWidth*kt,ln=K.count;let Kt;if("isEmpty"in Ce||(Ce.isWhitespace=!!ft&&new RegExp(r).test(ft),Ce.canBreakAfter=!!ft&&s.test(ft),Ce.isEmpty=Ce.xMin===Ce.xMax||Ce.yMin===Ce.yMax||n.test(ft)),!Ce.isWhitespace&&!Ce.isEmpty&&ht++,We&&he&&!Ce.isWhitespace&&Le+qt+dt>D&&ln){if(K.glyphAt(ln-1).glyphObj.canBreakAfter)Kt=new d,dt=-Le;else for(let Wn=ln;Wn--;)if(Wn===0&&H==="break-word"){Kt=new d,dt=-Le;break}else if(K.glyphAt(Wn).glyphObj.canBreakAfter){Kt=K.splitAt(Wn+1);const mn=Kt.glyphAt(0).x;dt-=mn;for(let fr=Kt.count;fr--;)Kt.glyphAt(fr).x-=mn;break}Kt&&(K.isSoftWrapped=!0,K=Kt,J.push(K),se=D)}let Yt=K.glyphAt(K.count);Yt.glyphObj=Ce,Yt.x=Le+dt,Yt.y=at,Yt.width=qt,Yt.charIndex=vt,Yt.fontData=it,ft===`
`&&(K=new d,J.push(K),dt=-(Le+qt+F*M)+B)}),je=Qt+Te.advanceWidth*kt+F*M});let ye=0;J.forEach(qe=>{let nt=!0;for(let lt=qe.count;lt--;){const Ot=qe.glyphAt(lt);nt&&!Ot.glyphObj.isWhitespace&&(qe.width=Ot.x+Ot.width,qe.width>se&&(se=qe.width),nt=!1);let{lineHeight:rt,capHeight:xt,xHeight:yt,baseline:gt}=Ot.fontData;rt>qe.lineHeight&&(qe.lineHeight=rt);const it=gt-qe.baseline;it<0&&(qe.baseline+=it,qe.cap+=it,qe.ex+=it),qe.cap=Math.max(qe.cap,qe.baseline+xt),qe.ex=Math.max(qe.ex,qe.baseline+yt)}qe.baseline-=ye,qe.cap-=ye,qe.ex-=ye,ye+=qe.lineHeight});let Re=0,De=0;if(z&&(typeof z=="number"?Re=-z:typeof z=="string"&&(Re=-se*(z==="left"?0:z==="center"?.5:z==="right"?1:u(z)))),Z&&(typeof Z=="number"?De=-Z:typeof Z=="string"&&(De=Z==="top"?0:Z==="top-baseline"?-J[0].baseline:Z==="top-cap"?-J[0].cap:Z==="top-ex"?-J[0].ex:Z==="middle"?ye/2:Z==="bottom"?ye:Z==="bottom-baseline"?-J[J.length-1].baseline:u(Z)*ye)),!ue){const qe=e.getEmbeddingLevels(v,I);xe=new Uint16Array(ht),_e=new Uint8Array(ht),be=new Float32Array(ht*2),Xe={},Ee=[1/0,1/0,-1/0,-1/0],Ge=[],ee&&(Ne=new Float32Array(v.length*4)),$&&(Ye=new Uint8Array(ht*3));let nt=0,lt=-1,Ot=-1,rt,xt;if(J.forEach((yt,gt)=>{let{count:it,width:kt}=yt;if(it>0){let Bt=0;for(let vt=it;vt--&&yt.glyphAt(vt).glyphObj.isWhitespace;)Bt++;let Qt=0,Te=0;if(C==="center")Qt=(se-kt)/2;else if(C==="right")Qt=se-kt;else if(C==="justify"&&yt.isSoftWrapped){let vt=0;for(let ft=it-Bt;ft--;)yt.glyphAt(ft).glyphObj.isWhitespace&&vt++;Te=(se-kt)/vt}if(Te||Qt){let vt=0;for(let ft=0;ft<it;ft++){let qt=yt.glyphAt(ft);const ln=qt.glyphObj;qt.x+=Qt+vt,Te!==0&&ln.isWhitespace&&ft<it-Bt&&(vt+=Te,qt.width+=Te)}}const Ce=e.getReorderSegments(v,qe,yt.glyphAt(0).charIndex,yt.glyphAt(yt.count-1).charIndex);for(let vt=0;vt<Ce.length;vt++){const[ft,qt]=Ce[vt];let ln=1/0,Kt=-1/0;for(let Yt=0;Yt<it;Yt++)if(yt.glyphAt(Yt).charIndex>=ft){let Wn=Yt,mn=Yt;for(;mn<it;mn++){let fr=yt.glyphAt(mn);if(fr.charIndex>qt)break;mn<it-Bt&&(ln=Math.min(ln,fr.x),Kt=Math.max(Kt,fr.x+fr.width))}for(let fr=Wn;fr<mn;fr++){const yr=yt.glyphAt(fr);yr.x=Kt-(yr.x+yr.width-ln)}break}}let Le;const at=vt=>Le=vt;for(let vt=0;vt<it;vt++){const ft=yt.glyphAt(vt);Le=ft.glyphObj;const qt=Le.index,ln=qe.levels[ft.charIndex]&1;if(ln){const Kt=e.getMirroredCharacter(v[ft.charIndex]);Kt&&ft.fontData.fontObj.forEachGlyph(Kt,0,0,at)}if(ee){const{charIndex:Kt,fontData:Yt}=ft,Wn=ft.x+Re,mn=ft.x+ft.width+Re;Ne[Kt*4]=ln?mn:Wn,Ne[Kt*4+1]=ln?Wn:mn,Ne[Kt*4+2]=yt.baseline+Yt.caretBottom+De,Ne[Kt*4+3]=yt.baseline+Yt.caretTop+De;const fr=Kt-lt;fr>1&&f(Ne,lt,fr),lt=Kt}if($){const{charIndex:Kt}=ft;for(;Kt>Ot;)Ot++,$.hasOwnProperty(Ot)&&(xt=$[Ot])}if(!Le.isWhitespace&&!Le.isEmpty){const Kt=nt++,{fontSizeMult:Yt,src:Wn,index:mn}=ft.fontData,fr=Xe[Wn]||(Xe[Wn]={});fr[qt]||(fr[qt]={path:Le.path,pathBounds:[Le.xMin,Le.yMin,Le.xMax,Le.yMax]});const yr=ft.x+Re,_r=ft.y+yt.baseline+De;be[Kt*2]=yr,be[Kt*2+1]=_r;const Or=yr+Le.xMin*Yt,Gr=_r+Le.yMin*Yt,sr=yr+Le.xMax*Yt,cn=_r+Le.yMax*Yt;Or<Ee[0]&&(Ee[0]=Or),Gr<Ee[1]&&(Ee[1]=Gr),sr>Ee[2]&&(Ee[2]=sr),cn>Ee[3]&&(Ee[3]=cn),Kt%le===0&&(rt={start:Kt,end:Kt,rect:[1/0,1/0,-1/0,-1/0]},Ge.push(rt)),rt.end++;const kr=rt.rect;if(Or<kr[0]&&(kr[0]=Or),Gr<kr[1]&&(kr[1]=Gr),sr>kr[2]&&(kr[2]=sr),cn>kr[3]&&(kr[3]=cn),xe[Kt]=qt,_e[Kt]=mn,$){const oi=Kt*3;Ye[oi]=xt>>16&255,Ye[oi+1]=xt>>8&255,Ye[oi+2]=xt&255}}}}}),Ne){const yt=v.length-lt;yt>1&&f(Ne,lt,yt)}}const ke=[];ut.forEach(({index:qe,src:nt,unitsPerEm:lt,ascender:Ot,descender:rt,lineHeight:xt,capHeight:yt,xHeight:gt})=>{ke[qe]={src:nt,unitsPerEm:lt,ascender:Ot,descender:rt,lineHeight:xt,capHeight:yt,xHeight:gt}}),fe.typesetting=c()-Fe,V({glyphIds:xe,glyphFontIndices:_e,glyphPositions:be,glyphData:Xe,fontData:ke,caretPositions:Ne,glyphColors:Ye,chunkedBounds:Ge,fontSize:M,topBaseline:De+J[0].baseline,blockBounds:[Re,De-ye,Re+se,De],visibleBounds:Ee,timings:fe})})}function l(v,A){a({...v,metricsOnly:!0},x=>{const[w,M,b,R]=x.blockBounds;A({width:b-w,height:R-M})})}function u(v){let A=v.match(/^([\d.]+)%$/),x=A?parseFloat(A[1]):NaN;return isNaN(x)?0:x/100}function f(v,A,x){const w=v[A*4],M=v[A*4+1],b=v[A*4+2],R=v[A*4+3],F=(M-w)/x;for(let O=0;O<x;O++){const D=(A+O)*4;v[D]=w+F*O,v[D+1]=w+F*(O+1),v[D+2]=b,v[D+3]=R}}function c(){return(self.performance||Date).now()}function d(){this.data=[]}const g=["glyphObj","x","y","width","charIndex","fontData"];return d.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/g.length)},glyphAt(v){let A=d.flyweight;return A.data=this.data,A.index=v,A},splitAt(v){let A=new d;return A.data=this.data.splice(v*g.length),A}},d.flyweight=g.reduce((v,A,x,w)=>(Object.defineProperty(v,A,{get(){return this.data[this.index*g.length+x]},set(M){this.data[this.index*g.length+x]=M}}),v),{data:null,index:0}),{typeset:a,measure:l}}const md=()=>(self.performance||Date).now(),DA=QU();let dD;function KK(i,e,t,n,r,s,o,a,l,u,f=!0){return f?QK(i,e,t,n,r,s,o,a,l,u).then(null,c=>(dD||(console.warn("WebGL SDF generation failed, falling back to JS",c),dD=!0),mD(i,e,t,n,r,s,o,a,l,u))):mD(i,e,t,n,r,s,o,a,l,u)}const E1=[],YK=5;let Eb=0;function $U(){const i=md();for(;E1.length&&md()-i<YK;)E1.shift()();Eb=E1.length?setTimeout($U,0):0}const QK=(...i)=>new Promise((e,t)=>{E1.push(()=>{const n=md();try{DA.webgl.generateIntoCanvas(...i),e({timing:md()-n})}catch(r){t(r)}}),Eb||(Eb=setTimeout($U,0))}),ZK=4,$K=2e3,pD={};let eY=0;function mD(i,e,t,n,r,s,o,a,l,u){const f="TroikaTextSDFGenerator_JS_"+eY++%ZK;let c=pD[f];return c||(c=pD[f]={workerModule:Xm({name:f,workerId:f,dependencies:[QU,md],init(d,g){const v=d().javascript.generate;return function(...A){const x=g();return{textureData:v(...A),timing:g()-x}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),c.requests++,clearTimeout(c.idleTimer),c.workerModule(i,e,t,n,r,s).then(({textureData:d,timing:g})=>{const v=md(),A=new Uint8Array(d.length*4);for(let x=0;x<d.length;x++)A[x*4+u]=d[x];return DA.webglUtils.renderImageData(o,A,a,l,i,e,1<<3-u),g+=md()-v,--c.requests===0&&(c.idleTimer=setTimeout(()=>{PK(f)},$K)),{timing:g}})}function tY(i){i._warm||(DA.webgl.isSupported(i),i._warm=!0)}const nY=DA.webglUtils.resizeWebGLCanvasWithoutClearing,Kp={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},rY=new Ht;function Hp(){return(self.performance||Date).now()}const gD=Object.create(null);function e4(i,e){i=oY({},i);const t=Hp(),{defaultFontURL:n}=Kp,r=[];if(n&&r.push({label:"default",src:_D(n)}),i.font&&r.push({label:"user",src:_D(i.font)}),i.font=r,i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||Kp.sdfGlyphSize,i.unicodeFontsURL=i.unicodeFontsURL||Kp.unicodeFontsURL,i.colorRanges!=null){let d={};for(let g in i.colorRanges)if(i.colorRanges.hasOwnProperty(g)){let v=i.colorRanges[g];typeof v!="number"&&(v=rY.set(v).getHex()),d[g]=v}i.colorRanges=d}Object.freeze(i);const{textureWidth:s,sdfExponent:o}=Kp,{sdfGlyphSize:a}=i,l=s/a*4;let u=gD[a];if(!u){const d=document.createElement("canvas");d.width=s,d.height=a*256/l,u=gD[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:d,sdfTexture:new mr(d,void 0,void 0,void 0,pr,pr),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,iY(u)}const{sdfTexture:f,sdfCanvas:c}=u;lY(i).then(d=>{const{glyphIds:g,glyphFontIndices:v,fontData:A,glyphPositions:x,fontSize:w,timings:M}=d,b=[],R=new Float32Array(g.length*4);let F=0,O=0;const D=Hp(),I=A.map(z=>{let Z=u.glyphsByFont.get(z.src);return Z||u.glyphsByFont.set(z.src,Z=new Map),Z});g.forEach((z,Z)=>{const ue=v[Z],{src:ae,unitsPerEm:ge}=A[ue];let ee=I[ue].get(z);if(!ee){const{path:fe,pathBounds:oe}=d.glyphData[ae][z],he=Math.max(oe[2]-oe[0],oe[3]-oe[1])/a*(Kp.sdfMargin*a+.5),xe=u.glyphCount++,_e=[oe[0]-he,oe[1]-he,oe[2]+he,oe[3]+he];I[ue].set(z,ee={path:fe,atlasIndex:xe,sdfViewBox:_e}),b.push(ee)}const{sdfViewBox:le}=ee,$=x[O++],V=x[O++],Q=w/ge;R[F++]=$+le[0]*Q,R[F++]=V+le[1]*Q,R[F++]=$+le[2]*Q,R[F++]=V+le[3]*Q,g[Z]=ee.atlasIndex}),M.quads=(M.quads||0)+(Hp()-D);const C=Hp();M.sdf={};const B=c.height,k=Math.ceil(u.glyphCount/l),H=Math.pow(2,Math.ceil(Math.log2(k*a)));H>B&&(console.info(`Increasing SDF texture size ${B}->${H}`),nY(c,s,H),f.dispose()),Promise.all(b.map(z=>t4(z,u,i.gpuAccelerateSDF).then(({timing:Z})=>{M.sdf[z.atlasIndex]=Z}))).then(()=>{b.length&&!u.contextLost&&(n4(u),f.needsUpdate=!0),M.sdfTotal=Hp()-C,M.total=Hp()-t,e(Object.freeze({parameters:i,sdfTexture:f,sdfGlyphSize:a,sdfExponent:o,glyphBounds:R,glyphAtlasIndices:g,glyphColors:d.glyphColors,caretPositions:d.caretPositions,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{u.contextLost||tY(c)})}function t4({path:i,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Kp,u=Math.max(t[2]-t[0],t[3]-t[1]),f=Math.floor(e/4),c=f%(a/n)*n,d=Math.floor(f/(a/n))*n,g=e%4;return KK(n,n,i,t,u,l,r,c,d,g,o)}function iY(i){const e=i.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),i.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),i.contextLost=!1;const n=[];i.glyphsByFont.forEach(r=>{r.forEach(s=>{n.push(t4(s,i,!0))})}),Promise.all(n).then(()=>{n4(i),i.sdfTexture.needsUpdate=!0})})}function sY({font:i,characters:e,sdfGlyphSize:t},n){let r=Array.isArray(e)?e.join(`
`):""+e;e4({font:i,sdfGlyphSize:t,text:r},n)}function oY(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}let t1;function _D(i){return t1||(t1=typeof document>"u"?{}:document.createElement("a")),t1.href=i,t1.href}function n4(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=i,{width:n,height:r}=e,s=i.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==n*r*4)&&(o=new Uint8Array(n*r*4),t.image={width:n,height:r,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,n,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const aY=Xm({name:"Typesetter",dependencies:[JK,XK,BK],init(i,e,t){return i(e,t())}}),lY=Xm({name:"Typesetter",dependencies:[aY],init(i){return function(e){return new Promise(t=>{i.typeset(e,t)})}},getTransferables(i){const e=[];for(let t in i)i[t]&&i[t].buffer&&e.push(i[t].buffer);return e}}),vD={};function uY(i){let e=vD[i];if(!e){const t=new Wa(1,1,i,i),n=t.clone(),r=t.attributes,s=n.attributes,o=new Dn,a=r.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new sn([...r[l].array,...s[l].array],r[l].itemSize))}),o.setIndex([...t.index.array,...n.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=vD[i]=o}return e}const cY="aTroikaGlyphBounds",yD="aTroikaGlyphIndex",hY="aTroikaGlyphColor";class fY extends w2{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new is,this.boundingBox=new Es}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===ao?t/2:0,e===Co?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=uY(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,r,s){hE(this,cY,e,4),hE(this,yD,t,1),hE(this,hY,s,3),this._blockBounds=n,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:s,min:o,max:a,sin:l,cos:u}=Math,f=r/2,c=r*2,d=Math.abs(t),g=e[0]/d,v=e[2]/d,A=s((g+f)/c)!==s((v+f)/c)?-d:o(l(g)*d,l(v)*d),x=s((g-f)/c)!==s((v-f)/c)?d:a(l(g)*d,l(v)*d),w=s((g+r)/c)!==s((v+r)/c)?d*2:a(d-u(g)*d,d-u(v)*d);n.min.set(A,e[1],t<0?-w:0),n.max.set(x,e[3],t<0?0:w)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(yD).count,n=this._chunkedBounds;if(n)for(let r=n.length;r--;){t=n[r].end;let s=n[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}}function hE(i,e,t,n){const r=i.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(i.setAttribute(e,new Ih(t,n)),delete i._maxInstanceCount,i.dispose()):r&&i.deleteAttribute(e)}const dY=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,pY=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,mY=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,gY=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function _Y(i){const e=Sb(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new mt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new nr(0,0,0,0)},uTroikaClipRect:{value:new nr(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new mt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Ht},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Ln},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:dY,vertexTransform:pY,fragmentDefs:mY,fragmentColorTransform:gY,customRewriter({vertexShader:t,fragmentShader:n}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(n)&&(n=n.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(ZU,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const N2=new Io({color:16777215,side:Co,transparent:!0}),xD=8421504,AD=new pn,n1=new ce,fE=new ce,o_=[],vY=new ce,dE="+x+y";function wD(i){return Array.isArray(i)?i[0]:i}let r4=()=>{const i=new Lr(new Wa(1,1),N2);return r4=()=>i,i},i4=()=>{const i=new Lr(new Wa(1,1,32,1),N2);return i4=()=>i,i};const yY={type:"syncstart"},xY={type:"synccomplete"},s4=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],AY=s4.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let o4=class extends Lr{constructor(){const e=new fY;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=xD,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=dE,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(yY),e4({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(r=>r&&r())})),this.dispatchEvent(xY),e&&e()})))}onBeforeRender(e,t,n,r,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=Il}onAfterRender(e,t,n,r,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=N2.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=_Y(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return wD(this.material).getDepthMaterial()}get customDistanceMaterial(){return wD(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:a,blockBounds:l}=r;n.uTroikaSDFTexture.value=a,n.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),n.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,n.uTroikaSDFExponent.value=r.sdfExponent,n.uTroikaTotalBounds.value.fromArray(l),n.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let u=0,f=0,c=0,d,g,v,A=0,x=0;if(t){let{outlineWidth:M,outlineOffsetX:b,outlineOffsetY:R,outlineBlur:F,outlineOpacity:O}=this;u=this._parsePercent(M)||0,f=Math.max(0,this._parsePercent(F)||0),d=O,A=this._parsePercent(b)||0,x=this._parsePercent(R)||0}else c=Math.max(0,this._parsePercent(this.strokeWidth)||0),c&&(v=this.strokeColor,n.uTroikaStrokeColor.value.set(v??xD),g=this.strokeOpacity,g==null&&(g=1)),d=this.fillOpacity;n.uTroikaDistanceOffset.value=u,n.uTroikaPositionOffset.value.set(A,x),n.uTroikaBlurRadius.value=f,n.uTroikaStrokeWidth.value=c,n.uTroikaStrokeOpacity.value=g,n.uTroikaFillOpacity.value=d??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let w=this.clipRect;if(w&&Array.isArray(w)&&w.length===4)n.uTroikaClipRect.value.fromArray(w);else{const M=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(l[0]-M,l[1]-M,l[2]+M,l[3]+M)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new Ht;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||dE;if(o!==e._orientation){let a=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==dE&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,f,c,d]=l;n1.set(0,0,0)[f]=u==="-"?1:-1,fE.set(0,0,0)[d]=c==="-"?-1:1,AD.lookAt(vY,n1.cross(fE),fE),a.setFromMatrix4(AD)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new mt){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new mt){return n1.copy(e),this.localPositionToTextCoords(this.worldToLocal(n1),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const s=n.blockBounds,o=r?i4():r4(),a=o.geometry,{position:l,uv:u}=a.attributes;for(let f=0;f<u.count;f++){let c=s[0]+u.getX(f)*(s[2]-s[0]);const d=s[1]+u.getY(f)*(s[3]-s[1]);let g=0;r&&(g=r-Math.cos(c/r)*r,c=Math.sin(c/r)*r),l.setXYZ(f,c,d,g)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,o_.length=0,o.raycast(e,o_);for(let f=0;f<o_.length;f++)o_[f].object=this,t.push(o_[f])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,AY.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};s4.forEach(i=>{const e="_private_"+i;Object.defineProperty(o4.prototype,i,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const wY=me.forwardRef(({sdfGlyphSize:i=64,anchorX:e="center",anchorY:t="middle",font:n,fontSize:r=1,children:s,characters:o,onSync:a,...l},u)=>{const f=hc(({invalidate:v})=>v),[c]=me.useState(()=>new o4),[d,g]=me.useMemo(()=>{const v=[];let A="";return me.Children.forEach(s,x=>{typeof x=="string"||typeof x=="number"?A+=x:v.push(x)}),[v,A]},[s]);return AU(()=>new Promise(v=>sY({font:n,characters:o},v)),["troika-text",n,o]),me.useLayoutEffect(()=>void c.sync(()=>{f(),a&&a(c)})),me.useEffect(()=>()=>c.dispose(),[c]),me.createElement("primitive",Fr({object:c,ref:u,font:n,text:g,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:i},l),d)});let r1=null,a4="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function l4(i=!0,e=!0,t){return n=>{t&&t(n),i&&(r1||(r1=new TK),r1.setDecoderPath(typeof i=="string"?i:a4),n.setDRACOLoader(r1)),e&&n.setMeshoptDecoder(typeof uE=="function"?uE():uE)}}const Od=(i,e,t,n)=>fc(k2,i,l4(e,t,n));Od.preload=(i,e,t,n)=>fc.preload(k2,i,l4(e,t,n));Od.clear=i=>fc.clear(k2,i);Od.setDecoderPath=i=>{a4=i};const SY=me.forwardRef(function({children:e,disable:t,disableX:n,disableY:r,disableZ:s,left:o,right:a,top:l,bottom:u,front:f,back:c,onCentered:d,precise:g=!0,cacheKey:v=0,...A},x){const w=me.useRef(null),M=me.useRef(null),b=me.useRef(null);return me.useLayoutEffect(()=>{M.current.matrixWorld.identity();const R=new Es().setFromObject(b.current,g),F=new ce,O=new is,D=R.max.x-R.min.x,I=R.max.y-R.min.y,C=R.max.z-R.min.z;R.getCenter(F),R.getBoundingSphere(O);const B=l?I/2:u?-I/2:0,k=o?-D/2:a?D/2:0,H=f?C/2:c?-C/2:0;M.current.position.set(t||n?0:-F.x+k,t||r?0:-F.y+B,t||s?0:-F.z+H),typeof d<"u"&&d({parent:w.current.parent,container:w.current,width:D,height:I,depth:C,boundingBox:R,boundingSphere:O,center:F,verticalAlignment:B,horizontalAlignment:k,depthAlignment:H})},[v,d,l,o,f,t,n,r,s,g,a,u,c]),me.useImperativeHandle(x,()=>w.current,[]),me.createElement("group",Fr({ref:w},A),me.createElement("group",{ref:M},me.createElement("group",{ref:b},e)))}),EY=3e3,TY=3001,MY=me.forwardRef(({children:i,enabled:e=!0,speed:t=1,rotationIntensity:n=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...a},l)=>{const u=me.useRef(null);me.useImperativeHandle(l,()=>u.current,[]);const f=me.useRef(Math.random()*1e4);return av(c=>{var d,g;if(!e||t===0)return;o&&c.invalidate();const v=f.current+c.clock.getElapsedTime();u.current.rotation.x=Math.cos(v/4*t)/8*n,u.current.rotation.y=Math.sin(v/4*t)/8*n,u.current.rotation.z=Math.sin(v/4*t)/20*n;let A=Math.sin(v/4*t)/10;A=YC.mapLinear(A,-.1,.1,(d=s==null?void 0:s[0])!==null&&d!==void 0?d:-.1,(g=s==null?void 0:s[1])!==null&&g!==void 0?g:.1),u.current.position.y=A*r,u.current.updateMatrix()}),me.createElement("group",a,me.createElement("group",{ref:u,matrixAutoUpdate:!1},i))}),u4=(i,e,t)=>{let n;switch(i){case Qo:n=new Uint8ClampedArray(e*t*4);break;case ws:n=new Uint16Array(e*t*4);break;case au:n=new Uint32Array(e*t*4);break;case nA:n=new Int8Array(e*t*4);break;case rA:n=new Int16Array(e*t*4);break;case q0:n=new Int32Array(e*t*4);break;case pi:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let i1;const bY=(i,e,t,n)=>{if(i1!==void 0)return i1;const r=new Po(1,1,n);e.setRenderTarget(r);const s=new Lr(new Wa,new Io({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=u4(i,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),i1=o[0]!==0,i1};class U2{constructor(e){var t,n,r,s,o,a,l,u,f,c,d,g,v,A,x,w;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(b){throw this._renderer.setRenderTarget(null),b}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const M={format:Oi,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:pr,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(u=e.renderTargetOptions)===null||u===void 0?void 0:u.minFilter:pr,samples:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.samples:void 0,wrapS:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapS:Fi,wrapT:((v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT)!==void 0?(A=e.renderTargetOptions)===null||A===void 0?void 0:A.wrapT:Fi};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=U2.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Im,this._camera=new _c,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!bY(this._type,this._renderer,this._camera,M)){let b;switch(this._type){case ws:b=this._renderer.extensions.has("EXT_color_buffer_float")?pi:void 0;break}b!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${pi}`),this._type=b):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Lr(new Wa,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Po(this.width,this.height,M),this._renderTarget.texture.mapping=((x=e.renderTargetOptions)===null||x===void 0?void 0:x.mapping)!==void 0?(w=e.renderTargetOptions)===null||w===void 0?void 0:w.mapping:Mh}static instantiateRenderer(){const e=new P2;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=u4(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Rl(this.toArray(),this.width,this.height,Oi,this._type,(e==null?void 0:e.mapping)||Mh,(e==null?void 0:e.wrapS)||Fi,(e==null?void 0:e.wrapT)||Fi,(e==null?void 0:e.magFilter)||pr,(e==null?void 0:e.minFilter)||pr,(e==null?void 0:e.anisotropy)||1,lu);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof uo&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof mr&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof mr&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const CY=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,RY=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class IY extends uo{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:u,gainMap:f}){super({name:"GainMapDecoderMaterial",vertexShader:CY,fragmentShader:RY,uniforms:{sdr:{value:u},gainMap:{value:f},gamma:{value:new ce(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new ce().fromArray(t)},offsetSdr:{value:new ce().fromArray(n)},gainMapMin:{value:new ce().fromArray(r)},gainMapMax:{value:new ce().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:eu,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class c4 extends Error{}class h4 extends Error{}const a_=(i,e,t)=>{var n;let r;const s=(n=i.attributes.getNamedItem(e))===null||n===void 0?void 0:n.nodeValue;if(s)r=s;else{const o=i.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)r=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(t)return t;throw new Error(`Can't find ${e} in gainmap metadata`)}}return r},PY=i=>{var e,t;let n;typeof TextDecoder<"u"?n=new TextDecoder().decode(i):n=i.toString();let r=n.indexOf("<x:xmpmeta");const s=new DOMParser;for(;r!==-1;){const o=n.indexOf("x:xmpmeta>",r);n.slice(r,o+10);const a=n.slice(r,o+10);try{const u=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],f=a_(u,"hdrgm:GainMapMin","0"),c=a_(u,"hdrgm:GainMapMax"),d=a_(u,"hdrgm:Gamma","1"),g=a_(u,"hdrgm:OffsetSDR","0.015625"),v=a_(u,"hdrgm:OffsetHDR","0.015625");let A=(e=u.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;A||(A="0");const x=(t=u.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||t===void 0?void 0:t.nodeValue;if(!x)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(f)?f.map(w=>parseFloat(w)):[parseFloat(f),parseFloat(f),parseFloat(f)],gainMapMax:Array.isArray(c)?c.map(w=>parseFloat(w)):[parseFloat(c),parseFloat(c),parseFloat(c)],gamma:Array.isArray(d)?d.map(w=>parseFloat(w)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetSdr:Array.isArray(g)?g.map(w=>parseFloat(w)):[parseFloat(g),parseFloat(g),parseFloat(g)],offsetHdr:Array.isArray(v)?v.map(w=>parseFloat(w)):[parseFloat(v),parseFloat(v),parseFloat(v)],hdrCapacityMin:parseFloat(A),hdrCapacityMax:parseFloat(x)}}catch{}r=n.indexOf("<x:xmpmeta",o)}};class DY{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,u;for(;a<o;){if(++l>250){n(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(a)!==255){n(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(u=s.getUint8(a+1),r&&console.log(`Marker: ${u.toString(16)}`),u===226){r&&console.log("Found APP2 marker (0xffe2)");const f=a+4;if(s.getUint32(f)===1297106432){const c=f+4;let d;if(s.getUint16(c)===18761)d=!1;else if(s.getUint16(c)===19789)d=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(c+2,!d)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const g=s.getUint32(c+4,!d);if(g<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const v=c+g,A=s.getUint16(v,!d),x=v+2;let w=0;for(let F=x;F<x+12*A;F+=12)s.getUint16(F,!d)===45057&&(w=s.getUint32(F+8,!d));const b=v+2+A*12+4,R=[];for(let F=b;F<b+w*16;F+=16){const O={MPType:s.getUint32(F,!d),size:s.getUint32(F+4,!d),dataOffset:s.getUint32(F+8,!d),dependantImages:s.getUint32(F+12,!d),start:-1,end:-1,isFII:!1};O.dataOffset?(O.start=c+O.dataOffset,O.isFII=!1):(O.start=0,O.isFII=!0),O.end=O.start+O.size,R.push(O)}if(this.options.extractNonFII&&R.length){const F=new Blob([s]),O=[];for(const D of R){if(D.isFII&&!this.options.extractFII)continue;const I=F.slice(D.start,D.end+1,"image/jpeg");O.push(I)}t(O)}}}a+=2+s.getUint16(a+2)}})}}const BY=async i=>{const e=PY(i);if(!e)throw new h4("Gain map XMP metadata not found");const n=await new DY({extractFII:!0,extractNonFII:!0}).extract(i);if(n.length!==2)throw new c4("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},SD=i=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=r=>{t(r)},n.src=URL.createObjectURL(i)});class f4 extends Gs{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new RA}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new IY({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new mr,sdr:new mr});return new U2({width:16,height:16,type:ws,colorSpace:lu,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([n],{type:"image/jpeg"});let a,l,u=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([s?SD(s):Promise.resolve(void 0),SD(o)]);l=d[0],a=d[1],u=!0}else{const d=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=d[0],a=d[1]}const f=new mr(l||new ImageData(2,2),Mh,Fi,Fi,pr,rb,Oi,Qo,1,lu);f.flipY=u,f.needsUpdate=!0;const c=new mr(a,Mh,Fi,Fi,pr,rb,Oi,Qo,1,Mo);c.flipY=u,c.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=f,e.material.sdr=c,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class LY extends f4{load([e,t,n],r,s,o){const a=this.prepareQuadRenderer();let l,u,f;const c=async()=>{if(l&&u&&f){try{await this.render(a,f,l,u)}catch(C){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof o=="function"&&o(C),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),a.disposeOnDemandRenderer()}};let d=!0,g=0,v=0,A=!0,x=0,w=0,M=!0,b=0,R=0;const F=()=>{if(typeof s=="function"){const C=g+x+b,B=v+w+R,k=d&&A&&M;s(new ProgressEvent("progress",{lengthComputable:k,loaded:B,total:C}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const O=new Us(this._internalLoadingManager);O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(e,async C=>{if(typeof C=="string")throw new Error("Invalid sdr buffer");l=C,await c()},C=>{d=C.lengthComputable,v=C.loaded,g=C.total,F()},C=>{this.manager.itemError(e),typeof o=="function"&&o(C)});const D=new Us(this._internalLoadingManager);D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(t,async C=>{if(typeof C=="string")throw new Error("Invalid gainmap buffer");u=C,await c()},C=>{A=C.lengthComputable,w=C.loaded,x=C.total,F()},C=>{this.manager.itemError(t),typeof o=="function"&&o(C)});const I=new Us(this._internalLoadingManager);return I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(n,async C=>{if(typeof C!="string")throw new Error("Invalid metadata string");f=JSON.parse(C),await c()},C=>{M=C.lengthComputable,R=C.loaded,b=C.total,F()},C=>{this.manager.itemError(n),typeof o=="function"&&o(C)}),a}}class FY extends f4{load(e,t,n,r){const s=this.prepareQuadRenderer(),o=new Us(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let u,f,c;try{const d=await BY(l);u=d.sdr,f=d.gainMap,c=d.metadata}catch(d){if(d instanceof h4||d instanceof c4)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),c={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=l;else throw d}try{await this.render(s,c,u,f)}catch(d){this.manager.itemError(e),typeof r=="function"&&r(d),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},n,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const x0={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},d4="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",dm=i=>Array.isArray(i),z2=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function BA({files:i=z2,path:e="",preset:t=void 0,encoding:n=void 0,extensions:r}={}){let s=null,o=!1;t&&(G2(t),i=x0[t],e=d4),o=dm(i);const{extension:a,isCubemap:l}=H2(i);if(s=V2(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+i);const u=hc(g=>g.gl);me.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function g(){fc.clear(s,o?[i]:i)}u.domElement.addEventListener("webglcontextlost",g,{once:!0})},[i,u.domElement]);const f=fc(s,o?[i]:i,g=>{(a==="webp"||a==="jpg"||a==="jpeg")&&g.setRenderer(u),g.setPath==null||g.setPath(e),r&&r(g)});let c=o?f[0]:f;if(a==="jpg"||a==="jpeg"||a==="webp"){var d;c=(d=c.renderTarget)==null?void 0:d.texture}return c.mapping=l?ou:Sm,"colorSpace"in c?c.colorSpace=n??l?"srgb":"srgb-linear":c.encoding=n??l?TY:EY,c}const OY={files:z2,path:"",preset:void 0,extensions:void 0};BA.preload=i=>{const e={...OY,...i};let{files:t,path:n=""}=e;const{preset:r,extensions:s}=e;r&&(G2(r),t=x0[r],n=d4);const{extension:o}=H2(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=V2(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);fc.preload(a,dm(t)?[t]:t,l=>{l.setPath==null||l.setPath(n),s&&s(l)})};const kY={files:z2,preset:void 0};BA.clear=i=>{const e={...kY,...i};let{files:t}=e;const{preset:n}=e;n&&(G2(n),t=x0[n]);const{extension:r}=H2(t),s=V2(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);fc.clear(s,dm(t)?[t]:t)};function G2(i){if(!(i in x0))throw new Error("Preset must be one of: "+Object.keys(x0).join(", "))}function H2(i){var e;const t=dm(i)&&i.length===6,n=dm(i)&&i.length===3&&i.some(o=>o.endsWith("json")),r=dm(i)?i[0]:i;return{extension:t?"cube":n?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function V2(i){return i==="cube"?QN:i==="hdr"?SK:i==="exr"?EK:i==="jpg"||i==="jpeg"?FY:i==="webp"?LY:null}const NY=i=>i.current&&i.current.isScene,UY=i=>NY(i)?i.current:i;function W2(i,e,t,n,r={}){var s,o,a,l,u;r={backgroundBlurriness:(s=r.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const f=UY(e||t),c=f.background,d=f.environment,g={backgroundBlurriness:f.backgroundBlurriness,backgroundIntensity:f.backgroundIntensity,backgroundRotation:(o=(a=f.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:f.environmentIntensity,environmentRotation:(l=(u=f.environmentRotation)==null||u.clone==null?void 0:u.clone())!==null&&l!==void 0?l:[0,0,0]};return i!=="only"&&(f.environment=n),i&&(f.background=n),Zu(f,r),()=>{i!=="only"&&(f.environment=d),i&&(f.background=c),Zu(f,g)}}function j2({scene:i,background:e=!1,map:t,...n}){const r=hc(s=>s.scene);return me.useLayoutEffect(()=>{if(t)return W2(e,i,r,t,n)}),null}function p4({background:i=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const u=BA(l),f=hc(c=>c.scene);return me.useLayoutEffect(()=>W2(i,e,f,u,{blur:t,backgroundBlurriness:n,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function zY({children:i,near:e=1,far:t=1e3,resolution:n=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:f,environmentIntensity:c,environmentRotation:d,scene:g,files:v,path:A,preset:x=void 0,extensions:w}){const M=hc(I=>I.gl),b=hc(I=>I.scene),R=me.useRef(null),[F]=me.useState(()=>new Im),O=me.useMemo(()=>{const I=new t2(n);return I.texture.type=ws,I},[n]);me.useLayoutEffect(()=>(r===1&&R.current.update(M,F),W2(o,g,b,O.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:f,environmentIntensity:c,environmentRotation:d})),[i,F,O.texture,g,b,o,r,M]);let D=1;return av(()=>{(r===1/0||D<r)&&(R.current.update(M,F),D++)}),me.createElement(me.Fragment,null,XX(me.createElement(me.Fragment,null,i,me.createElement("cubeCamera",{ref:R,args:[e,t,O]}),v||x?me.createElement(p4,{background:!0,files:v,preset:x,path:A,extensions:w}):s?me.createElement(j2,{background:!0,map:s,extensions:w}):null),F))}function GY(i){var e,t,n,r;const s=BA(i),o=i.map||s;me.useMemo(()=>SU({GroundProjectedEnvImpl:UJ}),[]);const a=me.useMemo(()=>[o],[o]),l=(e=i.ground)==null?void 0:e.height,u=(t=i.ground)==null?void 0:t.radius,f=(n=(r=i.ground)==null?void 0:r.scale)!==null&&n!==void 0?n:1e3;return me.createElement(me.Fragment,null,me.createElement(j2,Fr({},i,{map:o})),me.createElement("groundProjectedEnvImpl",{args:a,scale:f,height:l,radius:u}))}function HY(i){return i.ground?me.createElement(GY,i):i.map?me.createElement(j2,i):i.children?me.createElement(zY,i):me.createElement(p4,i)}const VY=me.forwardRef(({scale:i=10,frames:e=1/0,opacity:t=1,width:n=1,height:r=1,blur:s=1,near:o=0,far:a=10,resolution:l=512,smooth:u=!0,color:f="#000000",depthWrite:c=!1,renderOrder:d,...g},v)=>{const A=me.useRef(null),x=hc(Z=>Z.scene),w=hc(Z=>Z.gl),M=me.useRef(null);n=n*(Array.isArray(i)?i[0]:i||1),r=r*(Array.isArray(i)?i[1]:i||1);const[b,R,F,O,D,I,C]=me.useMemo(()=>{const Z=new Po(l,l),ue=new Po(l,l);ue.texture.generateMipmaps=Z.texture.generateMipmaps=!1;const ae=new Wa(n,r).rotateX(Math.PI/2),ge=new Lr(ae),ee=new sv;ee.depthTest=ee.depthWrite=!1,ee.onBeforeCompile=V=>{V.uniforms={...V.uniforms,ucolor:{value:new Ht(f)}},V.fragmentShader=V.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),V.fragmentShader=V.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const le=new uo(AK),$=new uo(wK);return $.depthTest=le.depthTest=!1,[Z,ae,ee,ge,le,$,ue]},[l,n,r,i,f]),B=Z=>{O.visible=!0,O.material=D,D.uniforms.tDiffuse.value=b.texture,D.uniforms.h.value=Z*1/256,w.setRenderTarget(C),w.render(O,M.current),O.material=I,I.uniforms.tDiffuse.value=C.texture,I.uniforms.v.value=Z*1/256,w.setRenderTarget(b),w.render(O,M.current),O.visible=!1};let k=0,H,z;return av(()=>{M.current&&(e===1/0||k<e)&&(k++,H=x.background,z=x.overrideMaterial,A.current.visible=!1,x.background=null,x.overrideMaterial=F,w.setRenderTarget(b),w.render(x,M.current),B(s),u&&B(s*.4),w.setRenderTarget(null),A.current.visible=!0,x.overrideMaterial=z,x.background=H)}),me.useImperativeHandle(v,()=>A.current,[]),me.createElement("group",Fr({"rotation-x":Math.PI/2},g,{ref:A}),me.createElement("mesh",{renderOrder:d,geometry:R,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},me.createElement("meshBasicMaterial",{transparent:!0,map:b.texture,opacity:t,depthWrite:c})),me.createElement("orthographicCamera",{ref:M,args:[-n/2,n/2,r/2,-r/2,o,a]}))}),m4=()=>{const[i,e]=jo.useState({x:null,y:null});return jo.useEffect(()=>{const t=n=>{e({x:n.clientX,y:n.clientY})};return window.addEventListener("mousemove",t),()=>{window.removeEventListener("mousemove",t)}},[]),i},Jm=Pd(i=>({isLoading:!0,stopLoader:()=>i({isLoading:!1})})),WY=()=>{const i=m4(),e=2.8,t=e*.45,n=me.useRef(null),r=me.useRef(null),s=me.useRef(null),o=Jm(F=>F.isLoading),a=window.innerWidth<768,l=window.innerWidth>=768&&window.innerWidth<1024,u=a?[-2.01,.3,0]:l?[-4,-.3,0]:[-5.5,-.3,0],f=a?[-1.5,-2.3,0]:l?[-2.9,-3.6,0]:[-4.2,-3.6,0],c=a?.4:l?.8:1.2,[d,g]=me.useState(Array(9).fill("black")),[v,A]=me.useState(Array(7).fill("black")),x=me.useMemo(()=>({i:t*.73,I:t*.7,F:t*.95,S:t*.95,C:t*.75,secondC:t*1,secondI:t*1,T:t*.67,R:t*.99}),[t]),w=me.useMemo(()=>({F:"#FFE484",R:"#FFAA79",A:"#B4FAFA",a:"#B4FAFA",N:"#FF787D",C:"#EFB1ED",I:"#FFE484",i:"#FFE484",S:"#B4FAFA",secondC:"#FF787D",O:"#EFB1ED",secondI:"#FFE484",G:"#FFAA79",U:"#FFE484",T:"#FFAA79"}),[]),M=me.useCallback((F,O,D)=>{D(I=>I.map((C,B)=>B===F?O:C))},[]),b=me.useCallback((F,O)=>{O(D=>D.map((I,C)=>C===F?"black":I))},[]),R=me.useCallback((F,O,D)=>{let I=0;const C={};return F.split("").map((B,k)=>{C[B]=(C[B]||0)+1;const H=B==="C"&&C[B]===2,z=B==="I"&&C[B]===2,Z=H?x.secondC:z?x.secondI:x[B]||t,ue=H?w.secondC:z?w.secondI:w[B]||void 0,ae=re.jsx(wY,{position:[I,1.65,-2],lineHeight:.9,fontSize:e,letterSpacing:-.025,color:O[k],font:"./fonts/Anton-Regular.ttf",fillOpacity:O[k]!=="black"?1:.2,rotation:[0,0,0],onPointerOver:()=>M(k,ue,D),onPointerOut:()=>b(k,D),children:B},k);return I+=Z,ae})},[x,t,w,e,M,b]);return me.useEffect(()=>{if(o)return;const F=Qr.timeline({delay:0});F.fromTo(r.current.rotation,{x:3,y:1,z:1,duration:.2,ease:"power3.in",delay:0},{x:0,y:0,z:0}),F.fromTo(s.current.rotation,{x:-3,y:1,z:-1,duration:.2,ease:"power3.in",delay:0},{x:0,y:0,z:0})},[o]),re.jsx(re.Fragment,{children:re.jsxs("group",{ref:n,position:a?[.13,0,0]:l?[.25,0,0]:[-(i.x/window.innerWidth)*2/8,i.y/window.innerHeight*2/8,0],children:[re.jsx("mesh",{position:u,scale:c,ref:r,children:R("FRANCISCO",d,g)}),re.jsx("mesh",{position:f,scale:c,ref:s,children:R("AGUSTIN",v,A)})]})})},jY=({nodes:i,materials:e})=>re.jsx(re.Fragment,{children:re.jsx("group",{position:[.023,2.545,-.031],rotation:[-Math.PI/2,0,0],scale:1.98,children:re.jsxs("group",{rotation:[Math.PI/2,0,0],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Object_4.geometry,material:e.Cylinder_BAKED,position:[-.016,-.103,-.026],rotation:[-.16,-.011,.019],scale:1.147}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Object_5.geometry,material:e.Cylinder_BAKED,position:[-.017,-.211,.04],rotation:[-.087,-.035,.006],scale:1.73})]})})}),qY=({nodes:i,materials:e})=>re.jsx(re.Fragment,{children:re.jsx("group",{position:[-.006,2.12,.009],rotation:[-1.789,.02,-1.616],scale:.481,children:re.jsxs("group",{rotation:[Math.PI/2,0,0],scale:.01,children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere005_Material001_0.geometry,material:e["Material.001"],position:[0,41.205,.581]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Cylinder005_Material001_0.geometry,material:e["Material.001"],position:[15,70,92],scale:1.05})]})})}),XY=({nodes:i,materials:e})=>re.jsx(re.Fragment,{children:re.jsx("group",{position:[-.063,1.456,-.08],rotation:[-1.272,.066,-.076],scale:4.281,children:re.jsx("group",{rotation:[Math.PI/2,0,0],scale:.01,children:re.jsx("group",{rotation:[-Math.PI/2,0,0],scale:100,children:re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.same_same_0.geometry,material:e.same,position:[-.005,.041,-.018],rotation:[.213,.05,-.033],scale:.979})})})})}),JY=({nodes:i,materials:e})=>re.jsx(re.Fragment,{children:re.jsx("group",{position:[.222,2.506,.153],rotation:[-1.41,.38,-.132],scale:.136,children:re.jsx("group",{rotation:[Math.PI/2,0,0],scale:.01,children:re.jsxs("group",{rotation:[-Math.PI/2,0,0],scale:100,children:[re.jsxs("group",{position:[0,-.8,-.5],rotation:[.175,0,0],scale:[.49,1,.376],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere001_Material001_0.geometry,material:e["Material.002"]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere001_Material003_0.geometry,material:e["Material.003"]})]}),re.jsxs("group",{position:[.8,0,-.5],rotation:[0,.175,Math.PI/2],scale:[.49,1,.376],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere002_Material001_0.geometry,material:e["Material.002"]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere002_Material003_0.geometry,material:e["Material.003"]})]}),re.jsxs("group",{position:[0,.8,-.5],rotation:[-.175,0,-Math.PI],scale:[.49,1,.376],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere003_Material001_0.geometry,material:e["Material.002"]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere003_Material003_0.geometry,material:e["Material.003"]})]}),re.jsxs("group",{position:[-.8,0,-.5],rotation:[0,-.175,-Math.PI/2],scale:[.49,1,.376],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere004_Material001_0.geometry,material:e["Material.002"]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere004_Material003_0.geometry,material:e["Material.003"]})]}),re.jsxs("group",{position:[.6,-.6,-.5],rotation:[.124,.123,.778],scale:[.49,1,.376],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere005_Material001_0001.geometry,material:e["Material.002"]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere005_Material003_0.geometry,material:e["Material.003"]})]}),re.jsxs("group",{position:[.6,.6,-.5],rotation:[-.124,.123,2.364],scale:[.49,1,.376],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere006_Material001_0.geometry,material:e["Material.002"]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere006_Material003_0.geometry,material:e["Material.003"]})]}),re.jsxs("group",{position:[-.6,.6,-.5],rotation:[-.112,-.134,-2.272],scale:[.49,1,.376],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere007_Material001_0.geometry,material:e["Material.002"]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere007_Material003_0.geometry,material:e["Material.003"]})]}),re.jsxs("group",{position:[-.6,-.6,-.5],rotation:[.124,-.123,-.778],scale:[.49,1,.376],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere008_Material001_0.geometry,material:e["Material.002"]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere008_Material003_0.geometry,material:e["Material.003"]})]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere_Material001_0.geometry,material:e["Material.002"]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Sphere009_Material002_0.geometry,material:e["Material.005"],position:[.356,-.819,.234],rotation:[1.456,0,0],scale:.165}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Torus_Material002_0.geometry,material:e["Material.005"],position:[0,-.976,.13],rotation:[1.236,0,0],scale:.081})]})})})}),KY=({nodes:i,materials:e})=>re.jsx(re.Fragment,{children:re.jsx("group",{position:[-.009,2.275,.021],rotation:[-Math.PI/2,0,0],scale:.818,children:re.jsxs("group",{rotation:[Math.PI/2,0,0],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Object_6.geometry,material:e["Material.009"],position:[-.008,-.075,.041],scale:1.033}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:i.Object_4001.geometry,material:e["Material.008"],position:[-.008,-.075,.041],scale:1.033})]})})}),YY=i=>{const{nodes:e,materials:t}=Od("./models/batmanHat.glb");return re.jsx("group",{...i,dispose:null,children:re.jsxs("group",{scale:45e-5,position:[0,2.3,.13],rotation:[-.1,3.2,0],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Mesh.geometry,material:t.dbl_Layer0_001}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Mesh_1.geometry,material:t.dbl_Layer0_002}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Mesh_2.geometry,material:t.dbl_Layer0_003}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Mesh_3.geometry,material:t.dbl_Layer0_004}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Mesh_4.geometry,material:t.dbl_Layer0_005}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Mesh_5.geometry,material:t.dbl_Layer0_006}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Mesh_6.geometry,material:t.dbl_Layer0_007})]})})};Od.preload("./models/batmanHat.glb");const QY=(i,e)=>me.useMemo(()=>({NoneHat:null,ChineseHat:re.jsx(jY,{nodes:i,materials:e,dispose:null}),MickeyHat:re.jsx(qY,{nodes:i,materials:e,dispose:null}),SharkHat:re.jsx(XY,{nodes:i,materials:e,dispose:null}),OktopusHat:re.jsx(JY,{nodes:i,materials:e,dispose:null}),CowboyHat:re.jsx(KY,{nodes:i,materials:e,dispose:null}),BatmanHat:re.jsx(YY,{dispose:null})}),[i,e]);var pE,ED;function ZY(){if(ED)return pE;ED=1;var i=Math.ceil,e=Math.max;function t(n,r,s,o){for(var a=-1,l=e(i((r-n)/(s||1)),0),u=Array(l);l--;)u[o?l:++a]=n,n+=s;return u}return pE=t,pE}var mE,TD;function q2(){if(TD)return mE;TD=1;function i(e,t){return e===t||e!==e&&t!==t}return mE=i,mE}var gE,MD;function g4(){if(MD)return gE;MD=1;var i=typeof ec=="object"&&ec&&ec.Object===Object&&ec;return gE=i,gE}var _E,bD;function fu(){if(bD)return _E;bD=1;var i=g4(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=i||e||Function("return this")();return _E=t,_E}var vE,CD;function LA(){if(CD)return vE;CD=1;var i=fu(),e=i.Symbol;return vE=e,vE}var yE,RD;function $Y(){if(RD)return yE;RD=1;var i=LA(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,r=i?i.toStringTag:void 0;function s(o){var a=t.call(o,r),l=o[r];try{o[r]=void 0;var u=!0}catch{}var f=n.call(o);return u&&(a?o[r]=l:delete o[r]),f}return yE=s,yE}var xE,ID;function eQ(){if(ID)return xE;ID=1;var i=Object.prototype,e=i.toString;function t(n){return e.call(n)}return xE=t,xE}var AE,PD;function cv(){if(PD)return AE;PD=1;var i=LA(),e=$Y(),t=eQ(),n="[object Null]",r="[object Undefined]",s=i?i.toStringTag:void 0;function o(a){return a==null?a===void 0?r:n:s&&s in Object(a)?e(a):t(a)}return AE=o,AE}var wE,DD;function FA(){if(DD)return wE;DD=1;function i(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return wE=i,wE}var SE,BD;function _4(){if(BD)return SE;BD=1;var i=cv(),e=FA(),t="[object AsyncFunction]",n="[object Function]",r="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!e(a))return!1;var l=i(a);return l==n||l==r||l==t||l==s}return SE=o,SE}var EE,LD;function v4(){if(LD)return EE;LD=1;var i=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=i}return EE=e,EE}var TE,FD;function y4(){if(FD)return TE;FD=1;var i=_4(),e=v4();function t(n){return n!=null&&e(n.length)&&!i(n)}return TE=t,TE}var ME,OD;function x4(){if(OD)return ME;OD=1;var i=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,r){var s=typeof n;return r=r??i,!!r&&(s=="number"||s!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<r}return ME=t,ME}var bE,kD;function tQ(){if(kD)return bE;kD=1;var i=q2(),e=y4(),t=x4(),n=FA();function r(s,o,a){if(!n(a))return!1;var l=typeof o;return(l=="number"?e(a)&&t(o,a.length):l=="string"&&o in a)?i(a[o],s):!1}return bE=r,bE}var CE,ND;function nQ(){if(ND)return CE;ND=1;var i=/\s/;function e(t){for(var n=t.length;n--&&i.test(t.charAt(n)););return n}return CE=e,CE}var RE,UD;function rQ(){if(UD)return RE;UD=1;var i=nQ(),e=/^\s+/;function t(n){return n&&n.slice(0,i(n)+1).replace(e,"")}return RE=t,RE}var IE,zD;function hv(){if(zD)return IE;zD=1;function i(e){return e!=null&&typeof e=="object"}return IE=i,IE}var PE,GD;function A4(){if(GD)return PE;GD=1;var i=cv(),e=hv(),t="[object Symbol]";function n(r){return typeof r=="symbol"||e(r)&&i(r)==t}return PE=n,PE}var DE,HD;function w4(){if(HD)return DE;HD=1;var i=rQ(),e=FA(),t=A4(),n=NaN,r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function l(u){if(typeof u=="number")return u;if(t(u))return n;if(e(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=e(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=i(u);var c=s.test(u);return c||o.test(u)?a(u.slice(2),c?2:8):r.test(u)?n:+u}return DE=l,DE}var BE,VD;function S4(){if(VD)return BE;VD=1;var i=w4(),e=1/0,t=17976931348623157e292;function n(r){if(!r)return r===0?r:0;if(r=i(r),r===e||r===-e){var s=r<0?-1:1;return s*t}return r===r?r:0}return BE=n,BE}var LE,WD;function iQ(){if(WD)return LE;WD=1;var i=ZY(),e=tQ(),t=S4();function n(r){return function(s,o,a){return a&&typeof a!="number"&&e(s,o,a)&&(o=a=void 0),s=t(s),o===void 0?(o=s,s=0):o=t(o),a=a===void 0?s<o?1:-1:t(a),i(s,o,a,r)}}return LE=n,LE}var FE,jD;function sQ(){if(jD)return FE;jD=1;var i=iQ(),e=i();return FE=e,FE}var oQ=sQ();const aQ=kh(oQ);var lQ=EO();function E4(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}var OE={exports:{}},Sr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qD;function uQ(){if(qD)return Sr;qD=1;var i=typeof Symbol=="function"&&Symbol.for,e=i?Symbol.for("react.element"):60103,t=i?Symbol.for("react.portal"):60106,n=i?Symbol.for("react.fragment"):60107,r=i?Symbol.for("react.strict_mode"):60108,s=i?Symbol.for("react.profiler"):60114,o=i?Symbol.for("react.provider"):60109,a=i?Symbol.for("react.context"):60110,l=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,c=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,A=i?Symbol.for("react.block"):60121,x=i?Symbol.for("react.fundamental"):60117,w=i?Symbol.for("react.responder"):60118,M=i?Symbol.for("react.scope"):60119;function b(F){if(typeof F=="object"&&F!==null){var O=F.$$typeof;switch(O){case e:switch(F=F.type,F){case l:case u:case n:case s:case r:case c:return F;default:switch(F=F&&F.$$typeof,F){case a:case f:case v:case g:case o:return F;default:return O}}case t:return O}}}function R(F){return b(F)===u}return Sr.AsyncMode=l,Sr.ConcurrentMode=u,Sr.ContextConsumer=a,Sr.ContextProvider=o,Sr.Element=e,Sr.ForwardRef=f,Sr.Fragment=n,Sr.Lazy=v,Sr.Memo=g,Sr.Portal=t,Sr.Profiler=s,Sr.StrictMode=r,Sr.Suspense=c,Sr.isAsyncMode=function(F){return R(F)||b(F)===l},Sr.isConcurrentMode=R,Sr.isContextConsumer=function(F){return b(F)===a},Sr.isContextProvider=function(F){return b(F)===o},Sr.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===e},Sr.isForwardRef=function(F){return b(F)===f},Sr.isFragment=function(F){return b(F)===n},Sr.isLazy=function(F){return b(F)===v},Sr.isMemo=function(F){return b(F)===g},Sr.isPortal=function(F){return b(F)===t},Sr.isProfiler=function(F){return b(F)===s},Sr.isStrictMode=function(F){return b(F)===r},Sr.isSuspense=function(F){return b(F)===c},Sr.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===n||F===u||F===s||F===r||F===c||F===d||typeof F=="object"&&F!==null&&(F.$$typeof===v||F.$$typeof===g||F.$$typeof===o||F.$$typeof===a||F.$$typeof===f||F.$$typeof===x||F.$$typeof===w||F.$$typeof===M||F.$$typeof===A)},Sr.typeOf=b,Sr}var XD;function cQ(){return XD||(XD=1,OE.exports=uQ()),OE.exports}var kE,JD;function hQ(){if(JD)return kE;JD=1;var i=cQ(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[i.ForwardRef]=n,s[i.Memo]=r;function o(v){return i.isMemo(v)?r:s[v.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,d=Object.prototype;function g(v,A,x){if(typeof A!="string"){if(d){var w=c(A);w&&w!==d&&g(v,w,x)}var M=l(A);u&&(M=M.concat(u(A)));for(var b=o(v),R=o(A),F=0;F<M.length;++F){var O=M[F];if(!t[O]&&!(x&&x[O])&&!(R&&R[O])&&!(b&&b[O])){var D=f(A,O);try{a(v,O,D)}catch{}}}}return v}return kE=g,kE}var fQ=hQ();const dQ=kh(fQ);var s1={},KD;function pQ(){if(KD)return s1;KD=1,Object.defineProperty(s1,"__esModule",{value:!0}),s1.default=i;function i(e){return e.displayName||e.name||(typeof e=="string"&&e.length>0?e:"Unknown")}return s1}pQ();function o1(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function bx(){return bx=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},bx.apply(this,arguments)}function mQ(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}function ih(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function gQ(i){var e=function(t){mQ(n,t);function n(){for(var s,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=t.call.apply(t,[this].concat(a))||this,o1(ih(ih(s)),"cachedTheme",void 0),o1(ih(ih(s)),"lastOuterTheme",void 0),o1(ih(ih(s)),"lastTheme",void 0),o1(ih(ih(s)),"renderProvider",function(u){var f=s.props.children;return jo.createElement(i.Provider,{value:s.getTheme(u)},f)}),s}var r=n.prototype;return r.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var l=this.props.theme;this.cachedTheme=o?bx({},o,l):l}return this.cachedTheme},r.render=function(){var o=this.props.children;return o?jo.createElement(i.Consumer,null,this.renderProvider):null},n}(jo.Component);return e}function _Q(i){return function(t){var n=jo.forwardRef(function(r,s){return jo.createElement(i.Consumer,null,function(o){return jo.createElement(t,bx({theme:o,ref:s},r))})});return dQ(n,t),n}}function vQ(i){var e=function(){var n=jo.useContext(i);return n};return e}function yQ(i){return{context:i,withTheme:_Q(i),useTheme:vQ(i),ThemeProvider:gQ(i)}}var T4=me.createContext();yQ(T4);var YD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Km=(typeof window>"u"?"undefined":YD(window))==="object"&&(typeof document>"u"?"undefined":YD(document))==="object"&&document.nodeType===9;function A0(i){"@babel/helpers - typeof";return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A0(i)}function xQ(i,e){if(A0(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(A0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function AQ(i){var e=xQ(i,"string");return A0(e)=="symbol"?e:e+""}function wQ(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,AQ(n.key),n)}}function X2(i,e,t){return e&&wQ(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Tb(i,e){return Tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Tb(i,e)}function M4(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,Tb(i,e)}function QD(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var SQ={}.constructor;function Mb(i){if(i==null||typeof i!="object")return i;if(Array.isArray(i))return i.map(Mb);if(i.constructor!==SQ)return i;var e={};for(var t in i)e[t]=Mb(i[t]);return e}function OA(i,e,t){i===void 0&&(i="unnamed");var n=t.jss,r=Mb(e),s=n.plugins.onCreateRule(i,r,t);return s||(i[0],null)}var ZD=function(e,t){for(var n="",r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=t),n+=e[r];return n},gd=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&e[n]!=="!important";n++)t&&(t+=", "),t+=ZD(e[n]," ");else t=ZD(e,", ");return e[e.length-1]==="!important"&&(t+=" !important"),t};function Ym(i){return i&&i.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function l_(i,e){for(var t="",n=0;n<e;n++)t+="  ";return t+i}function w0(i,e,t){t===void 0&&(t={});var n="";if(!e)return n;var r=t,s=r.indent,o=s===void 0?0:s,a=e.fallbacks;t.format===!1&&(o=-1/0);var l=Ym(t),u=l.linebreak,f=l.space;if(i&&o++,a)if(Array.isArray(a))for(var c=0;c<a.length;c++){var d=a[c];for(var g in d){var v=d[g];v!=null&&(n&&(n+=u),n+=l_(g+":"+f+gd(v)+";",o))}}else for(var A in a){var x=a[A];x!=null&&(n&&(n+=u),n+=l_(A+":"+f+gd(x)+";",o))}for(var w in e){var M=e[w];M!=null&&w!=="fallbacks"&&(n&&(n+=u),n+=l_(w+":"+f+gd(M)+";",o))}return!n&&!t.allowEmpty||!i?n:(o--,n&&(n=""+u+n+u),l_(""+i+f+"{"+n,o)+l_("}",o))}var EQ=/([[\].#*$><+~=|^:(),"'`\s])/g,$D=typeof CSS<"u"&&CSS.escape,J2=function(i){return $D?$D(i):i.replace(EQ,"\\$1")},b4=function(){function i(t,n,r){this.type="style",this.isProcessed=!1;var s=r.sheet,o=r.Renderer;this.key=t,this.options=r,this.style=n,s?this.renderer=s.renderer:o&&(this.renderer=new o)}var e=i.prototype;return e.prop=function(n,r,s){if(r===void 0)return this.style[n];var o=s?s.force:!1;if(!o&&this.style[n]===r)return this;var a=r;(!s||s.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(r,n,this));var l=a==null||a===!1,u=n in this.style;if(l&&!u&&!o)return this;var f=l&&u;if(f?delete this.style[n]:this.style[n]=a,this.renderable&&this.renderer)return f?this.renderer.removeProperty(this.renderable,n):this.renderer.setProperty(this.renderable,n,a),this;var c=this.options.sheet;return c&&c.attached,this},i}(),bb=function(i){M4(e,i);function e(n,r,s){var o;o=i.call(this,n,r,s)||this;var a=s.selector,l=s.scoped,u=s.sheet,f=s.generateId;return a?o.selectorText=a:l!==!1&&(o.id=f(QD(QD(o)),u),o.selectorText="."+J2(o.id)),o}var t=e.prototype;return t.applyTo=function(r){var s=this.renderer;if(s){var o=this.toJSON();for(var a in o)s.setProperty(r,a,o[a])}return this},t.toJSON=function(){var r={};for(var s in this.style){var o=this.style[s];typeof o!="object"?r[s]=o:Array.isArray(o)&&(r[s]=gd(o))}return r},t.toString=function(r){var s=this.options.sheet,o=s?s.options.link:!1,a=o?Fr({},r,{allowEmpty:!0}):r;return w0(this.selectorText,this.style,a)},X2(e,[{key:"selector",set:function(r){if(r!==this.selectorText){this.selectorText=r;var s=this.renderer,o=this.renderable;if(!(!o||!s)){var a=s.setSelector(o,r);a||s.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(b4),TQ={onCreateRule:function(e,t,n){return e[0]==="@"||n.parent&&n.parent.type==="keyframes"?null:new bb(e,t,n)}},NE={indent:1,children:!0},MQ=/@([\w-]+)/,bQ=function(){function i(t,n,r){this.type="conditional",this.isProcessed=!1,this.key=t;var s=t.match(MQ);this.at=s?s[1]:"unknown",this.query=r.name||"@"+this.at,this.options=r,this.rules=new kA(Fr({},r,{parent:this}));for(var o in n)this.rules.add(o,n[o]);this.rules.process()}var e=i.prototype;return e.getRule=function(n){return this.rules.get(n)},e.indexOf=function(n){return this.rules.indexOf(n)},e.addRule=function(n,r,s){var o=this.rules.add(n,r,s);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(n,r,s){var o=this.rules.replace(n,r,s);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(n){n===void 0&&(n=NE);var r=Ym(n),s=r.linebreak;if(n.indent==null&&(n.indent=NE.indent),n.children==null&&(n.children=NE.children),n.children===!1)return this.query+" {}";var o=this.rules.toString(n);return o?this.query+" {"+s+o+s+"}":""},i}(),CQ=/@container|@media|@supports\s+/,RQ={onCreateRule:function(e,t,n){return CQ.test(e)?new bQ(e,t,n):null}},UE={indent:1,children:!0},IQ=/@keyframes\s+([\w-]+)/,Cb=function(){function i(t,n,r){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var s=t.match(IQ);s&&s[1]?this.name=s[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=r;var o=r.scoped,a=r.sheet,l=r.generateId;this.id=o===!1?this.name:J2(l(this,a)),this.rules=new kA(Fr({},r,{parent:this}));for(var u in n)this.rules.add(u,n[u],Fr({},r,{parent:this}));this.rules.process()}var e=i.prototype;return e.toString=function(n){n===void 0&&(n=UE);var r=Ym(n),s=r.linebreak;if(n.indent==null&&(n.indent=UE.indent),n.children==null&&(n.children=UE.children),n.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(n);return o&&(o=""+s+o+s),this.at+" "+this.id+" {"+o+"}"},i}(),PQ=/@keyframes\s+/,DQ=/\$([\w-]+)/g,Rb=function(e,t){return typeof e=="string"?e.replace(DQ,function(n,r){return r in t?t[r]:n}):e},eB=function(e,t,n){var r=e[t],s=Rb(r,n);s!==r&&(e[t]=s)},BQ={onCreateRule:function(e,t,n){return typeof e=="string"&&PQ.test(e)?new Cb(e,t,n):null},onProcessStyle:function(e,t,n){return t.type!=="style"||!n||("animation-name"in e&&eB(e,"animation-name",n.keyframes),"animation"in e&&eB(e,"animation",n.keyframes)),e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":return Rb(e,r.keyframes);case"animation-name":return Rb(e,r.keyframes);default:return e}}},LQ=function(i){M4(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;return t.toString=function(r){var s=this.options.sheet,o=s?s.options.link:!1,a=o?Fr({},r,{allowEmpty:!0}):r;return w0(this.key,this.style,a)},e}(b4),FQ={onCreateRule:function(e,t,n){return n.parent&&n.parent.type==="keyframes"?new LQ(e,t,n):null}},OQ=function(){function i(t,n,r){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=t,this.style=n,this.options=r}var e=i.prototype;return e.toString=function(n){var r=Ym(n),s=r.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=w0(this.at,this.style[a]),this.style[a+1]&&(o+=s);return o}return w0(this.at,this.style,n)},i}(),kQ=/@font-face/,NQ={onCreateRule:function(e,t,n){return kQ.test(e)?new OQ(e,t,n):null}},UQ=function(){function i(t,n,r){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=t,this.style=n,this.options=r}var e=i.prototype;return e.toString=function(n){return w0(this.key,this.style,n)},i}(),zQ={onCreateRule:function(e,t,n){return e==="@viewport"||e==="@-ms-viewport"?new UQ(e,t,n):null}},GQ=function(){function i(t,n,r){this.type="simple",this.isProcessed=!1,this.key=t,this.value=n,this.options=r}var e=i.prototype;return e.toString=function(n){if(Array.isArray(this.value)){for(var r="",s=0;s<this.value.length;s++)r+=this.key+" "+this.value[s]+";",this.value[s+1]&&(r+=`
`);return r}return this.key+" "+this.value+";"},i}(),HQ={"@charset":!0,"@import":!0,"@namespace":!0},VQ={onCreateRule:function(e,t,n){return e in HQ?new GQ(e,t,n):null}},tB=[TQ,RQ,BQ,FQ,NQ,zQ,VQ],WQ={process:!0},nB={force:!0,process:!0},kA=function(){function i(t){this.map={},this.raw={},this.index=[],this.counter=0,this.options=t,this.classes=t.classes,this.keyframes=t.keyframes}var e=i.prototype;return e.add=function(n,r,s){var o=this.options,a=o.parent,l=o.sheet,u=o.jss,f=o.Renderer,c=o.generateId,d=o.scoped,g=Fr({classes:this.classes,parent:a,sheet:l,jss:u,Renderer:f,generateId:c,scoped:d,name:n,keyframes:this.keyframes,selector:void 0},s),v=n;n in this.raw&&(v=n+"-d"+this.counter++),this.raw[v]=r,v in this.classes&&(g.selector="."+J2(this.classes[v]));var A=OA(v,r,g);if(!A)return null;this.register(A);var x=g.index===void 0?this.index.length:g.index;return this.index.splice(x,0,A),A},e.replace=function(n,r,s){var o=this.get(n),a=this.index.indexOf(o);o&&this.remove(o);var l=s;return a!==-1&&(l=Fr({},s,{index:a})),this.add(n,r,l)},e.get=function(n){return this.map[n]},e.remove=function(n){this.unregister(n),delete this.raw[n.key],this.index.splice(this.index.indexOf(n),1)},e.indexOf=function(n){return this.index.indexOf(n)},e.process=function(){var n=this.options.jss.plugins;this.index.slice(0).forEach(n.onProcessRule,n)},e.register=function(n){this.map[n.key]=n,n instanceof bb?(this.map[n.selector]=n,n.id&&(this.classes[n.key]=n.id)):n instanceof Cb&&this.keyframes&&(this.keyframes[n.name]=n.id)},e.unregister=function(n){delete this.map[n.key],n instanceof bb?(delete this.map[n.selector],delete this.classes[n.key]):n instanceof Cb&&delete this.keyframes[n.name]},e.update=function(){var n,r,s;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],s=arguments.length<=2?void 0:arguments[2]):(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],n=null),n)this.updateOne(this.get(n),r,s);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],r,s)},e.updateOne=function(n,r,s){s===void 0&&(s=WQ);var o=this.options,a=o.jss.plugins,l=o.sheet;if(n.rules instanceof i){n.rules.update(r,s);return}var u=n.style;if(a.onUpdate(r,n,l,s),s.process&&u&&u!==n.style){a.onProcessStyle(n.style,n,l);for(var f in n.style){var c=n.style[f],d=u[f];c!==d&&n.prop(f,c,nB)}for(var g in u){var v=n.style[g],A=u[g];v==null&&v!==A&&n.prop(g,null,nB)}}},e.toString=function(n){for(var r="",s=this.options.sheet,o=s?s.options.link:!1,a=Ym(n),l=a.linebreak,u=0;u<this.index.length;u++){var f=this.index[u],c=f.toString(n);!c&&!o||(r&&(r+=l),r+=c)}return r},i}(),C4=function(){function i(t,n){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Fr({},n,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),n.Renderer&&(this.renderer=new n.Renderer(this)),this.rules=new kA(this.options);for(var r in t)this.rules.add(r,t[r]);this.rules.process()}var e=i.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(n,r,s){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(n,r,s);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(n,r,s){var o=this.rules.get(n);if(!o)return this.addRule(n,r,s);var a=this.rules.replace(n,r,s);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(n){this.renderer&&this.renderer.insertRule(n)},e.addRules=function(n,r){var s=[];for(var o in n){var a=this.addRule(o,n[o],r);a&&s.push(a)}return s},e.getRule=function(n){return this.rules.get(n)},e.deleteRule=function(n){var r=typeof n=="object"?n:this.rules.get(n);return!r||this.attached&&!r.renderable?!1:(this.rules.remove(r),this.attached&&r.renderable&&this.renderer?this.renderer.deleteRule(r.renderable):!0)},e.indexOf=function(n){return this.rules.indexOf(n)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var n;return(n=this.rules).update.apply(n,arguments),this},e.updateOne=function(n,r,s){return this.rules.updateOne(n,r,s),this},e.toString=function(n){return this.rules.toString(n)},i}(),jQ=function(){function i(){this.plugins={internal:[],external:[]},this.registry={}}var e=i.prototype;return e.onCreateRule=function(n,r,s){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](n,r,s);if(a)return a}return null},e.onProcessRule=function(n){if(!n.isProcessed){for(var r=n.options.sheet,s=0;s<this.registry.onProcessRule.length;s++)this.registry.onProcessRule[s](n,r);n.style&&this.onProcessStyle(n.style,n,r),n.isProcessed=!0}},e.onProcessStyle=function(n,r,s){for(var o=0;o<this.registry.onProcessStyle.length;o++)r.style=this.registry.onProcessStyle[o](r.style,r,s)},e.onProcessSheet=function(n){for(var r=0;r<this.registry.onProcessSheet.length;r++)this.registry.onProcessSheet[r](n)},e.onUpdate=function(n,r,s,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](n,r,s,o)},e.onChangeValue=function(n,r,s){for(var o=n,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,r,s);return o},e.use=function(n,r){r===void 0&&(r={queue:"external"});var s=this.plugins[r.queue];s.indexOf(n)===-1&&(s.push(n),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var l in a)l in o&&o[l].push(a[l]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},i}(),qQ=function(){function i(){this.registry=[]}var e=i.prototype;return e.add=function(n){var r=this.registry,s=n.options.index;if(r.indexOf(n)===-1){if(r.length===0||s>=this.index){r.push(n);return}for(var o=0;o<r.length;o++)if(r[o].options.index>s){r.splice(o,0,n);return}}},e.reset=function(){this.registry=[]},e.remove=function(n){var r=this.registry.indexOf(n);this.registry.splice(r,1)},e.toString=function(n){for(var r=n===void 0?{}:n,s=r.attached,o=E4(r,["attached"]),a=Ym(o),l=a.linebreak,u="",f=0;f<this.registry.length;f++){var c=this.registry[f];s!=null&&c.attached!==s||(u&&(u+=l),u+=c.toString(o))}return u},X2(i,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),i}(),j_=new qQ,Ib=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),Pb="2f1acc6c3a606b082e5eef5e54414ffb";Ib[Pb]==null&&(Ib[Pb]=0);var rB=Ib[Pb]++,iB=function(e){e===void 0&&(e={});var t=0,n=function(s,o){t+=1;var a="",l="";return o&&(o.options.classNamePrefix&&(l=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(l||"c")+rB+a+t:l+s.key+"-"+rB+(a?"-"+a:"")+"-"+t};return n},R4=function(e){var t;return function(){return t||(t=e()),t}},XQ=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch{return""}},JQ=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=gd(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var s=r?r.indexOf("!important"):-1,o=s>-1?r.substr(0,s-1):r;e.style.setProperty(t,o,s>-1?"important":"")}}catch{return!1}return!0},KQ=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch{}},YQ=function(e,t){return e.selectorText=t,e.selectorText===t},I4=R4(function(){return document.querySelector("head")});function QQ(i,e){for(var t=0;t<i.length;t++){var n=i[t];if(n.attached&&n.options.index>e.index&&n.options.insertionPoint===e.insertionPoint)return n}return null}function ZQ(i,e){for(var t=i.length-1;t>=0;t--){var n=i[t];if(n.attached&&n.options.insertionPoint===e.insertionPoint)return n}return null}function $Q(i){for(var e=I4(),t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(n.nodeType===8&&n.nodeValue.trim()===i)return n}return null}function eZ(i){var e=j_.registry;if(e.length>0){var t=QQ(e,i);if(t&&t.renderer)return{parent:t.renderer.element.parentNode,node:t.renderer.element};if(t=ZQ(e,i),t&&t.renderer)return{parent:t.renderer.element.parentNode,node:t.renderer.element.nextSibling}}var n=i.insertionPoint;if(n&&typeof n=="string"){var r=$Q(n);if(r)return{parent:r.parentNode,node:r.nextSibling}}return!1}function tZ(i,e){var t=e.insertionPoint,n=eZ(e);if(n!==!1&&n.parent){n.parent.insertBefore(i,n.node);return}if(t&&typeof t.nodeType=="number"){var r=t,s=r.parentNode;s&&s.insertBefore(i,r.nextSibling);return}I4().appendChild(i)}var nZ=R4(function(){var i=document.querySelector('meta[property="csp-nonce"]');return i?i.getAttribute("content"):null}),sB=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch{return!1}return e.cssRules[n]},oB=function(e,t){var n=e.cssRules.length;return t===void 0||t>n?n:t},rZ=function(){var e=document.createElement("style");return e.textContent=`
`,e},iZ=function(){function i(t){this.getPropertyValue=XQ,this.setProperty=JQ,this.removeProperty=KQ,this.setSelector=YQ,this.hasInsertedRules=!1,this.cssRules=[],t&&j_.add(t),this.sheet=t;var n=this.sheet?this.sheet.options:{},r=n.media,s=n.meta,o=n.element;this.element=o||rZ(),this.element.setAttribute("data-jss",""),r&&this.element.setAttribute("media",r),s&&this.element.setAttribute("data-meta",s);var a=nZ();a&&this.element.setAttribute("nonce",a)}var e=i.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){tZ(this.element,this.sheet.options);var n=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&n&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var n=this.element.parentNode;n&&n.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var n=this.sheet;if(n){if(n.options.link){this.insertRules(n.rules);return}this.element.textContent=`
`+n.toString()+`
`}},e.insertRules=function(n,r){for(var s=0;s<n.index.length;s++)this.insertRule(n.index[s],s,r)},e.insertRule=function(n,r,s){if(s===void 0&&(s=this.element.sheet),n.rules){var o=n,a=s;if(n.type==="conditional"||n.type==="keyframes"){var l=oB(s,r);if(a=sB(s,o.toString({children:!1}),l),a===!1)return!1;this.refCssRule(n,l,a)}return this.insertRules(o.rules,a),a}var u=n.toString();if(!u)return!1;var f=oB(s,r),c=sB(s,u,f);return c===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(n,f,c),c)},e.refCssRule=function(n,r,s){n.renderable=s,n.options.parent instanceof C4&&this.cssRules.splice(r,0,s)},e.deleteRule=function(n){var r=this.element.sheet,s=this.indexOf(n);return s===-1?!1:(r.deleteRule(s),this.cssRules.splice(s,1),!0)},e.indexOf=function(n){return this.cssRules.indexOf(n)},e.replaceRule=function(n,r){var s=this.indexOf(n);return s===-1?!1:(this.element.sheet.deleteRule(s),this.cssRules.splice(s,1),this.insertRule(r,s))},e.getRules=function(){return this.element.sheet.cssRules},i}(),sZ=0,oZ=function(){function i(t){this.id=sZ++,this.version="10.10.0",this.plugins=new jQ,this.options={id:{minify:!1},createGenerateId:iB,Renderer:Km?iZ:null,plugins:[]},this.generateId=iB({minify:!1});for(var n=0;n<tB.length;n++)this.plugins.use(tB[n],{queue:"internal"});this.setup(t)}var e=i.prototype;return e.setup=function(n){return n===void 0&&(n={}),n.createGenerateId&&(this.options.createGenerateId=n.createGenerateId),n.id&&(this.options.id=Fr({},this.options.id,n.id)),(n.createGenerateId||n.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),n.insertionPoint!=null&&(this.options.insertionPoint=n.insertionPoint),"Renderer"in n&&(this.options.Renderer=n.Renderer),n.plugins&&this.use.apply(this,n.plugins),this},e.createStyleSheet=function(n,r){r===void 0&&(r={});var s=r,o=s.index;typeof o!="number"&&(o=j_.index===0?0:j_.index+1);var a=new C4(n,Fr({},r,{jss:this,generateId:r.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(n){return n.detach(),j_.remove(n),this},e.createRule=function(n,r,s){if(r===void 0&&(r={}),s===void 0&&(s={}),typeof n=="object")return this.createRule(void 0,n,r);var o=Fr({},s,{name:n,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=OA(n,r,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var n=this,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return s.forEach(function(a){n.plugins.use(a)}),this},i}(),P4=function(e){return new oZ(e)},aB=function(){function i(){this.length=0,this.sheets=new WeakMap}var e=i.prototype;return e.get=function(n){var r=this.sheets.get(n);return r&&r.sheet},e.add=function(n,r){this.sheets.has(n)||(this.length++,this.sheets.set(n,{sheet:r,refs:0}))},e.manage=function(n){var r=this.sheets.get(n);if(r)return r.refs===0&&r.sheet.attach(),r.refs++,r.sheet},e.unmanage=function(n){var r=this.sheets.get(n);r&&r.refs>0&&(r.refs--,r.refs===0&&r.sheet.detach())},X2(i,[{key:"size",get:function(){return this.length}}]),i}(),K2=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function D4(i){var e=null;for(var t in i){var n=i[t],r=typeof n;if(r==="function")e||(e={}),e[t]=n;else if(r==="object"&&n!==null&&!Array.isArray(n)){var s=D4(n);s&&(e||(e={}),e[t]=s)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */P4();var B4=Date.now(),zE="fnValues"+B4,GE="fnStyle"+ ++B4,aZ=function(){return{onCreateRule:function(t,n,r){if(typeof n!="function")return null;var s=OA(t,{},r);return s[GE]=n,s},onProcessStyle:function(t,n){if(zE in n||GE in n)return t;var r={};for(var s in t){var o=t[s];typeof o=="function"&&(delete t[s],r[s]=o)}return n[zE]=r,t},onUpdate:function(t,n,r,s){var o=n,a=o[GE];a&&(o.style=a(t)||{});var l=o[zE];if(l)for(var u in l)o.prop(u,l[u](t),s)}}};function lZ(i){var e,t=i.Symbol;return typeof t=="function"?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable",e}var Yp;typeof self<"u"?Yp=self:typeof window<"u"?Yp=window:typeof global<"u"?Yp=global:typeof yC<"u"?Yp=yC:Yp=Function("return this")();var lB=lZ(Yp),uB=function(e){return e&&e[lB]&&e===e[lB]()},uZ=function(e){return{onCreateRule:function(n,r,s){if(!uB(r))return null;var o=r,a=OA(n,{},s);return o.subscribe(function(l){for(var u in l)a.prop(u,l[u],e)}),a},onProcessRule:function(n){if(!(n&&n.type!=="style")){var r=n,s=r.style,o=function(f){var c=s[f];if(!uB(c))return"continue";delete s[f],c.subscribe({next:function(g){r.prop(f,g,e)}})};for(var a in s)var l=o(a)}}}},cZ=/;\n/,hZ=function(e){for(var t={},n=e.split(cZ),r=0;r<n.length;r++){var s=(n[r]||"").trim();if(s){var o=s.indexOf(":");if(o!==-1){var a=s.substr(0,o).trim(),l=s.substr(o+1).trim();t[a]=l}}}return t},fZ=function(e){typeof e.style=="string"&&(e.style=hZ(e.style))};function dZ(){return{onProcessRule:fZ}}var yh="@global",Db="@global ",pZ=function(){function i(t,n,r){this.type="global",this.at=yh,this.isProcessed=!1,this.key=t,this.options=r,this.rules=new kA(Fr({},r,{parent:this}));for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=i.prototype;return e.getRule=function(n){return this.rules.get(n)},e.addRule=function(n,r,s){var o=this.rules.add(n,r,s);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(n,r,s){var o=this.rules.replace(n,r,s);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(n){return this.rules.indexOf(n)},e.toString=function(n){return this.rules.toString(n)},i}(),mZ=function(){function i(t,n,r){this.type="global",this.at=yh,this.isProcessed=!1,this.key=t,this.options=r;var s=t.substr(Db.length);this.rule=r.jss.createRule(s,n,Fr({},r,{parent:this}))}var e=i.prototype;return e.toString=function(n){return this.rule?this.rule.toString(n):""},i}(),gZ=/\s*,\s*/g;function L4(i,e){for(var t=i.split(gZ),n="",r=0;r<t.length;r++)n+=e+" "+t[r].trim(),t[r+1]&&(n+=", ");return n}function _Z(i,e){var t=i.options,n=i.style,r=n?n[yh]:null;if(r){for(var s in r)e.addRule(s,r[s],Fr({},t,{selector:L4(s,i.selector)}));delete n[yh]}}function vZ(i,e){var t=i.options,n=i.style;for(var r in n)if(!(r[0]!=="@"||r.substr(0,yh.length)!==yh)){var s=L4(r.substr(yh.length),i.selector);e.addRule(s,n[r],Fr({},t,{selector:s})),delete n[r]}}function yZ(){function i(t,n,r){if(!t)return null;if(t===yh)return new pZ(t,n,r);if(t[0]==="@"&&t.substr(0,Db.length)===Db)return new mZ(t,n,r);var s=r.parent;return s&&(s.type==="global"||s.options.parent&&s.options.parent.type==="global")&&(r.scoped=!1),!r.selector&&r.scoped===!1&&(r.selector=t),null}function e(t,n){t.type!=="style"||!n||(_Z(t,n),vZ(t,n))}return{onCreateRule:i,onProcessRule:e}}var T1=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},HE="extendCurrValue"+Date.now();function xZ(i,e,t,n){var r=typeof i.extend;if(r==="string"){if(!t)return;var s=t.getRule(i.extend);if(!s||s===e)return;var o=s.options.parent;if(o){var a=o.rules.raw[i.extend];id(a,e,t,n)}return}if(Array.isArray(i.extend)){for(var l=0;l<i.extend.length;l++){var u=i.extend[l],f=typeof u=="string"?Fr({},i,{extend:u}):i.extend[l];id(f,e,t,n)}return}for(var c in i.extend){if(c==="extend"){id(i.extend.extend,e,t,n);continue}if(T1(i.extend[c])){c in n||(n[c]={}),id(i.extend[c],e,t,n[c]);continue}n[c]=i.extend[c]}}function AZ(i,e,t,n){for(var r in i)if(r!=="extend"){if(T1(n[r])&&T1(i[r])){id(i[r],e,t,n[r]);continue}if(T1(i[r])){n[r]=id(i[r],e,t);continue}n[r]=i[r]}}function id(i,e,t,n){return n===void 0&&(n={}),xZ(i,e,t,n),AZ(i,e,t,n),n}function wZ(){function i(t,n,r){return"extend"in t?id(t,n,r):t}function e(t,n,r){if(n!=="extend")return t;if(t==null||t===!1){for(var s in r[HE])r.prop(s,null);return r[HE]=null,null}if(typeof t=="object"){for(var o in t)r.prop(o,t[o]);r[HE]=t}return null}return{onProcessStyle:i,onChangeValue:e}}var cB=/\s*,\s*/g,SZ=/&/g,EZ=/\$([\w-]+)/g;function TZ(){function i(r,s){return function(o,a){var l=r.getRule(a)||s&&s.getRule(a);return l?l.selector:a}}function e(r,s){for(var o=s.split(cB),a=r.split(cB),l="",u=0;u<o.length;u++)for(var f=o[u],c=0;c<a.length;c++){var d=a[c];l&&(l+=", "),l+=d.indexOf("&")!==-1?d.replace(SZ,f):f+" "+d}return l}function t(r,s,o){if(o)return Fr({},o,{index:o.index+1});var a=r.options.nestingLevel;a=a===void 0?1:a+1;var l=Fr({},r.options,{nestingLevel:a,index:s.indexOf(r)+1});return delete l.name,l}function n(r,s,o){if(s.type!=="style")return r;var a=s,l=a.options.parent,u,f;for(var c in r){var d=c.indexOf("&")!==-1,g=c[0]==="@";if(!(!d&&!g)){if(u=t(a,l,u),d){var v=e(c,a.selector);f||(f=i(l,o)),v=v.replace(EZ,f);var A=a.key+"-"+c;"replaceRule"in l?l.replaceRule(A,r[c],Fr({},u,{selector:v})):l.addRule(A,r[c],Fr({},u,{selector:v}))}else g&&l.addRule(c,{},u).addRule(a.key,r[c],{selector:a.selector});delete r[c]}}return r}return{onProcessStyle:n}}function Bb(i,e){if(!e)return!0;if(Array.isArray(e)){for(var t=0;t<e.length;t++){var n=Bb(i,e[t]);if(!n)return!1}return!0}if(e.indexOf(" ")>-1)return Bb(i,e.split(" "));var r=i.options.parent;if(e[0]==="$"){var s=r.getRule(e.substr(1));return!s||s===i?!1:(r.classes[i.key]+=" "+r.classes[s.key],!0)}return r.classes[i.key]+=" "+e,!0}function MZ(){function i(e,t){return"composes"in e&&(Bb(t,e.composes),delete e.composes),e}return{onProcessStyle:i}}var bZ=/[A-Z]/g,CZ=/^ms-/,VE={};function RZ(i){return"-"+i.toLowerCase()}function F4(i){if(VE.hasOwnProperty(i))return VE[i];var e=i.replace(bZ,RZ);return VE[i]=CZ.test(e)?"-"+e:e}function Cx(i){var e={};for(var t in i){var n=t.indexOf("--")===0?t:F4(t);e[n]=i[t]}return i.fallbacks&&(Array.isArray(i.fallbacks)?e.fallbacks=i.fallbacks.map(Cx):e.fallbacks=Cx(i.fallbacks)),e}function IZ(){function i(t){if(Array.isArray(t)){for(var n=0;n<t.length;n++)t[n]=Cx(t[n]);return t}return Cx(t)}function e(t,n,r){if(n.indexOf("--")===0)return t;var s=F4(n);return n===s?t:(r.prop(s,t),null)}return{onProcessStyle:i,onChangeValue:e}}var pt=K2&&CSS?CSS.px:"px",a1=K2&&CSS?CSS.ms:"ms",Vp=K2&&CSS?CSS.percent:"%",PZ={"animation-delay":a1,"animation-duration":a1,"background-position":pt,"background-position-x":pt,"background-position-y":pt,"background-size":pt,border:pt,"border-bottom":pt,"border-bottom-left-radius":pt,"border-bottom-right-radius":pt,"border-bottom-width":pt,"border-left":pt,"border-left-width":pt,"border-radius":pt,"border-right":pt,"border-right-width":pt,"border-top":pt,"border-top-left-radius":pt,"border-top-right-radius":pt,"border-top-width":pt,"border-width":pt,"border-block":pt,"border-block-end":pt,"border-block-end-width":pt,"border-block-start":pt,"border-block-start-width":pt,"border-block-width":pt,"border-inline":pt,"border-inline-end":pt,"border-inline-end-width":pt,"border-inline-start":pt,"border-inline-start-width":pt,"border-inline-width":pt,"border-start-start-radius":pt,"border-start-end-radius":pt,"border-end-start-radius":pt,"border-end-end-radius":pt,margin:pt,"margin-bottom":pt,"margin-left":pt,"margin-right":pt,"margin-top":pt,"margin-block":pt,"margin-block-end":pt,"margin-block-start":pt,"margin-inline":pt,"margin-inline-end":pt,"margin-inline-start":pt,padding:pt,"padding-bottom":pt,"padding-left":pt,"padding-right":pt,"padding-top":pt,"padding-block":pt,"padding-block-end":pt,"padding-block-start":pt,"padding-inline":pt,"padding-inline-end":pt,"padding-inline-start":pt,"mask-position-x":pt,"mask-position-y":pt,"mask-size":pt,height:pt,width:pt,"min-height":pt,"max-height":pt,"min-width":pt,"max-width":pt,bottom:pt,left:pt,top:pt,right:pt,inset:pt,"inset-block":pt,"inset-block-end":pt,"inset-block-start":pt,"inset-inline":pt,"inset-inline-end":pt,"inset-inline-start":pt,"box-shadow":pt,"text-shadow":pt,"column-gap":pt,"column-rule":pt,"column-rule-width":pt,"column-width":pt,"font-size":pt,"font-size-delta":pt,"letter-spacing":pt,"text-decoration-thickness":pt,"text-indent":pt,"text-stroke":pt,"text-stroke-width":pt,"word-spacing":pt,motion:pt,"motion-offset":pt,outline:pt,"outline-offset":pt,"outline-width":pt,perspective:pt,"perspective-origin-x":Vp,"perspective-origin-y":Vp,"transform-origin":Vp,"transform-origin-x":Vp,"transform-origin-y":Vp,"transform-origin-z":Vp,"transition-delay":a1,"transition-duration":a1,"vertical-align":pt,"flex-basis":pt,"shape-margin":pt,size:pt,gap:pt,grid:pt,"grid-gap":pt,"row-gap":pt,"grid-row-gap":pt,"grid-column-gap":pt,"grid-template-rows":pt,"grid-template-columns":pt,"grid-auto-rows":pt,"grid-auto-columns":pt,"box-shadow-x":pt,"box-shadow-y":pt,"box-shadow-blur":pt,"box-shadow-spread":pt,"font-line-height":pt,"text-shadow-x":pt,"text-shadow-y":pt,"text-shadow-blur":pt};function O4(i){var e=/(-[a-z])/g,t=function(o){return o[1].toUpperCase()},n={};for(var r in i)n[r]=i[r],n[r.replace(e,t)]=i[r];return n}var DZ=O4(PZ);function q_(i,e,t){if(e==null)return e;if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=q_(i,e[n],t);else if(typeof e=="object")if(i==="fallbacks")for(var r in e)e[r]=q_(r,e[r],t);else for(var s in e)e[s]=q_(i+"-"+s,e[s],t);else if(typeof e=="number"&&isNaN(e)===!1){var o=t[i]||DZ[i];return o&&!(e===0&&o===pt)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function BZ(i){i===void 0&&(i={});var e=O4(i);function t(r,s){if(s.type!=="style")return r;for(var o in r)r[o]=q_(o,r[o],e);return r}function n(r,s){return q_(s,r,e)}return{onProcessStyle:t,onChangeValue:n}}var LZ={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},FZ={position:!0,size:!0},l1={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},WE={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function OZ(i,e,t){return i.map(function(n){return N4(n,e,t,!1,!0)})}function k4(i,e,t,n){return t[e]==null?i:i.length===0?[]:Array.isArray(i[0])?k4(i[0],e,t,n):typeof i[0]=="object"?OZ(i,e,n):[i]}function N4(i,e,t,n,r){if(!(l1[e]||WE[e]))return[];var s=[];if(WE[e]&&(i=kZ(i,t,WE[e],n)),Object.keys(i).length)for(var o in l1[e]){if(i[o]){Array.isArray(i[o])?s.push(FZ[o]===null?i[o]:i[o].join(" ")):s.push(i[o]);continue}l1[e][o]!=null&&s.push(l1[e][o])}return!s.length||r?s:[s]}function kZ(i,e,t,n){for(var r in t){var s=t[r];if(typeof i[r]<"u"&&(n||!e.prop(s))){var o,a=S0((o={},o[s]=i[r],o),e)[s];n?e.style.fallbacks[s]=a:e.style[s]=a}delete i[r]}return i}function S0(i,e,t){for(var n in i){var r=i[n];if(Array.isArray(r)){if(!Array.isArray(r[0])){if(n==="fallbacks"){for(var s=0;s<i.fallbacks.length;s++)i.fallbacks[s]=S0(i.fallbacks[s],e,!0);continue}i[n]=k4(r,n,LZ,e),i[n].length||delete i[n]}}else if(typeof r=="object"){if(n==="fallbacks"){i.fallbacks=S0(i.fallbacks,e,!0);continue}i[n]=N4(r,n,e,t),i[n].length||delete i[n]}else i[n]===""&&delete i[n]}return i}function NZ(){function i(e,t){if(!e||t.type!=="style")return e;if(Array.isArray(e)){for(var n=0;n<e.length;n++)e[n]=S0(e[n],t);return e}return S0(e,t)}return{onProcessStyle:i}}function Lb(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function UZ(i){if(Array.isArray(i))return Lb(i)}function zZ(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function GZ(i,e){if(i){if(typeof i=="string")return Lb(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Lb(i,e):void 0}}function HZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VZ(i){return UZ(i)||zZ(i)||GZ(i)||HZ()}var A_="",Fb="",U4="",z4="",WZ=Km&&"ontouchstart"in document.documentElement;if(Km){var jE={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},jZ=document.createElement("p"),qE=jZ.style,qZ="Transform";for(var XE in jE)if(XE+qZ in qE){A_=XE,Fb=jE[XE];break}A_==="Webkit"&&"msHyphens"in qE&&(A_="ms",Fb=jE.ms,z4="edge"),A_==="Webkit"&&"-apple-trailing-word"in qE&&(U4="apple")}var Hn={js:A_,css:Fb,vendor:U4,browser:z4,isTouch:WZ};function XZ(i){return i[1]==="-"||Hn.js==="ms"?i:"@"+Hn.css+"keyframes"+i.substr(10)}var JZ={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Hn.js==="ms"?"-webkit-"+e:Hn.css+e}},KZ={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Hn.js==="Webkit"?Hn.css+"print-"+e:e}},YZ=/[-\s]+(.)?/g;function QZ(i,e){return e?e.toUpperCase():""}function Y2(i){return i.replace(YZ,QZ)}function Ph(i){return Y2("-"+i)}var ZZ={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if(Hn.js==="Webkit"){var n="mask-image";if(Y2(n)in t)return e;if(Hn.js+Ph(n)in t)return Hn.css+e}return e}},$Z={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Hn.vendor==="apple"&&!Hn.isTouch?Hn.css+e:e}},e$={noPrefill:["transform"],supportedProperty:function(e,t,n){return e!=="transform"?!1:n.transform?e:Hn.css+e}},t$={noPrefill:["transition"],supportedProperty:function(e,t,n){return e!=="transition"?!1:n.transition?e:Hn.css+e}},n$={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Hn.js==="Webkit"||Hn.js==="ms"&&Hn.browser!=="edge"?Hn.css+e:e}},r$={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Hn.js==="Moz"||Hn.js==="ms"||Hn.vendor==="apple"?Hn.css+e:e}},i$={supportedProperty:function(e,t){if(!/^break-/.test(e))return!1;if(Hn.js==="Webkit"){var n="WebkitColumn"+Ph(e);return n in t?Hn.css+"column-"+e:!1}if(Hn.js==="Moz"){var r="page"+Ph(e);return r in t?"page-"+e:!1}return!1}},s$={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Hn.js==="Moz")return e;var n=e.replace("-inline","");return Hn.js+Ph(n)in t?Hn.css+n:!1}},o$={supportedProperty:function(e,t){return Y2(e)in t?e:!1}},a$={supportedProperty:function(e,t){var n=Ph(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Hn.js+n in t?Hn.css+e:Hn.js!=="Webkit"&&"Webkit"+n in t?"-webkit-"+e:!1}},l$={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Hn.js==="ms"?""+Hn.css+e:e}},u$={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Hn.js==="ms"?Hn.css+"scroll-chaining":e}},c$={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},h$={supportedProperty:function(e,t){var n=c$[e];return n&&Hn.js+Ph(n)in t?Hn.css+n:!1}},G4={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},f$=Object.keys(G4),d$=function(e){return Hn.css+e},p$={supportedProperty:function(e,t,n){var r=n.multiple;if(f$.indexOf(e)>-1){var s=G4[e];if(!Array.isArray(s))return Hn.js+Ph(s)in t?Hn.css+s:!1;if(!r)return!1;for(var o=0;o<s.length;o++)if(!(Hn.js+Ph(s[0])in t))return!1;return s.map(d$)}return!1}},H4=[JZ,KZ,ZZ,$Z,e$,t$,n$,r$,i$,s$,o$,a$,l$,u$,h$,p$],hB=H4.filter(function(i){return i.supportedProperty}).map(function(i){return i.supportedProperty}),m$=H4.filter(function(i){return i.noPrefill}).reduce(function(i,e){return i.push.apply(i,VZ(e.noPrefill)),i},[]),w_,Xf={};if(Km){w_=document.createElement("p");var JE=window.getComputedStyle(document.documentElement,"");for(var KE in JE)isNaN(KE)||(Xf[JE[KE]]=JE[KE]);m$.forEach(function(i){return delete Xf[i]})}function Ob(i,e){if(e===void 0&&(e={}),!w_)return i;if(Xf[i]!=null)return Xf[i];(i==="transition"||i==="transform")&&(e[i]=i in w_.style);for(var t=0;t<hB.length&&(Xf[i]=hB[t](i,w_.style,e),!Xf[i]);t++);try{w_.style[i]=""}catch{return!1}return Xf[i]}var Wp={},g$={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},_$=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,oh;function v$(i,e,t){if(e==="var")return"var";if(e==="all")return"all";if(t==="all")return", all";var n=e?Ob(e):", "+Ob(t);return n||e||t}Km&&(oh=document.createElement("p"));function fB(i,e){var t=e;if(!oh||i==="content")return e;if(typeof t!="string"||!isNaN(parseInt(t,10)))return t;var n=i+t;if(Wp[n]!=null)return Wp[n];try{oh.style[i]=t}catch{return Wp[n]=!1,!1}if(g$[i])t=t.replace(_$,v$);else if(oh.style[i]===""&&(t=Hn.css+t,t==="-ms-flex"&&(oh.style[i]="-ms-flexbox"),oh.style[i]=t,oh.style[i]===""))return Wp[n]=!1,!1;return oh.style[i]="",Wp[n]=t,Wp[n]}function y$(){function i(r){if(r.type==="keyframes"){var s=r;s.at=XZ(s.at)}}function e(r){for(var s in r){var o=r[s];if(s==="fallbacks"&&Array.isArray(o)){r[s]=o.map(e);continue}var a=!1,l=Ob(s);l&&l!==s&&(a=!0);var u=!1,f=fB(l,gd(o));f&&f!==o&&(u=!0),(a||u)&&(a&&delete r[s],r[l||s]=f||o)}return r}function t(r,s){return s.type!=="style"?r:e(r)}function n(r,s){return fB(s,gd(r))||r}return{onProcessRule:i,onProcessStyle:t,onChangeValue:n}}function x$(){var i=function(t,n){return t.length===n.length?t>n?1:-1:t.length-n.length};return{onProcessStyle:function(t,n){if(n.type!=="style")return t;for(var r={},s=Object.keys(t).sort(i),o=0;o<s.length;o++)r[s[o]]=t[s[o]];return r}}}var A$=function(e){return e===void 0&&(e={}),{plugins:[aZ(),uZ(e.observable),dZ(),yZ(),wZ(),TZ(),MZ(),IZ(),BZ(e.defaultUnit),NZ(),y$(),x$()]}},w$=Number.MIN_SAFE_INTEGER||-1e9,S$=function(){return w$++},E$=me.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Km}),dB=new Map,Q2=function(e,t){var n=e.managers;if(n)return n[t]||(n[t]=new aB),n[t];var r=dB.get(t);return r||(r=new aB,dB.set(t,r)),r},pB=function(e){var t=e.sheet,n=e.context,r=e.index,s=e.theme;if(t){var o=Q2(n,r);o.manage(s),n.registry&&n.registry.add(t)}},T$=function(e){if(e.sheet){var t=Q2(e.context,e.index);t.unmanage(e.theme)}},M$=P4(A$()),V4=new WeakMap,W4=function(e){return V4.get(e)},b$=function(e,t){V4.set(e,t)},C$=function(e){var t=e.styles;return typeof t!="function"?t:t(e.theme)};function R$(i,e){var t;i.context.id&&i.context.id.minify!=null&&(t=i.context.id.minify);var n=i.context.classNamePrefix||"";i.name&&!t&&(n+=i.name.replace(/\s/g,"-")+"-");var r="";return i.name&&(r=i.name+", "),r+=typeof i.styles=="function"?"Themed":"Unthemed",Fr({},i.sheetOptions,{index:i.index,meta:r,classNamePrefix:n,link:e,generateId:i.sheetOptions&&i.sheetOptions.generateId?i.sheetOptions.generateId:i.context.generateId})}var I$=function(e){if(!e.context.disableStylesGeneration){var t=Q2(e.context,e.index),n=t.get(e.theme);if(n)return n;var r=e.context.jss||M$,s=C$(e),o=D4(s),a=r.createStyleSheet(s,R$(e,o!==null));return b$(a,{dynamicStyles:o,styles:s}),t.add(e.theme,a),a}},P$=function(e,t){for(var n in t)e.deleteRule(t[n])},D$=function(e,t,n){for(var r in n)t.updateOne(n[r],e)},B$=function(e,t){var n=W4(e);if(n){var r={};for(var s in n.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(s,n.dynamicStyles[s]),l=o;l<e.rules.index.length;l++){var u=e.rules.index[l];e.updateOne(u,t),r[a===u?s:u.key]=u}return r}},L$=function(e,t){if(!t)return e.classes;var n=W4(e);if(!n)return e.classes;var r={};for(var s in n.styles)r[s]=e.classes[s],s in t&&(r[s]+=" "+e.classes[t[s].key]);return r};function mB(i){return i?me.useEffect:jo.useInsertionEffect||me.useLayoutEffect}var YE={},F$=function(e,t){t===void 0&&(t={});var n=t,r=n.index,s=r===void 0?S$():r,o=n.theming,a=n.name,l=E4(n,["index","theming","name"]),u=o&&o.context||T4,f=function(g){return typeof e=="function"&&(g||me.useContext(u))||YE},c={};return function(g){var v=me.useRef(!0),A=me.useContext(E$),x=f(g&&g.theme),w=me.useMemo(function(){var F=I$({context:A,styles:e,name:a,theme:x,index:s,sheetOptions:l});return F&&A.isSSR&&pB({index:s,context:A,sheet:F,theme:x}),[F,F?B$(F,g):null]},[A,x]),M=w[0],b=w[1];mB(A.isSSR)(function(){M&&b&&!v.current&&D$(g,M,b)},[g]),mB(A.isSSR)(function(){return M&&pB({index:s,context:A,sheet:M,theme:x}),function(){M&&(T$({index:s,context:A,sheet:M,theme:x}),b&&P$(M,b))}},[M]);var R=me.useMemo(function(){return M&&b?L$(M,b):c},[M,b]);return me.useDebugValue(R),me.useDebugValue(x===YE?"No theme":x),me.useEffect(function(){v.current=!1}),R}},QE,gB;function O$(){if(gB)return QE;gB=1;var i=S4();function e(t){var n=i(t),r=n%1;return n===n?r?n-r:n:0}return QE=e,QE}var ZE,_B;function k$(){if(_B)return ZE;_B=1;function i(e,t){for(var n=-1,r=e==null?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}return ZE=i,ZE}var $E,vB;function NA(){if(vB)return $E;vB=1;var i=Array.isArray;return $E=i,$E}var eT,yB;function N$(){if(yB)return eT;yB=1;var i=LA(),e=k$(),t=NA(),n=A4(),r=1/0,s=i?i.prototype:void 0,o=s?s.toString:void 0;function a(l){if(typeof l=="string")return l;if(t(l))return e(l,a)+"";if(n(l))return o?o.call(l):"";var u=l+"";return u=="0"&&1/l==-r?"-0":u}return eT=a,eT}var tT,xB;function U$(){if(xB)return tT;xB=1;var i=N$();function e(t){return t==null?"":i(t)}return tT=e,tT}var nT,AB;function z$(){if(AB)return nT;AB=1;var i=fu(),e=O$(),t=w4(),n=U$(),r=i.isFinite,s=Math.min;function o(a){var l=Math[a];return function(u,f){if(u=t(u),f=f==null?0:s(e(f),292),f&&r(u)){var c=(n(u)+"e").split("e"),d=l(c[0]+"e"+(+c[1]+f));return c=(n(d)+"e").split("e"),+(c[0]+"e"+(+c[1]-f))}return l(u)}}return nT=o,nT}var rT,wB;function G$(){if(wB)return rT;wB=1;var i=z$(),e=i("round");return rT=e,rT}var H$=G$();const u_=kh(H$);var iT,SB;function V$(){if(SB)return iT;SB=1;function i(){this.__data__=[],this.size=0}return iT=i,iT}var sT,EB;function UA(){if(EB)return sT;EB=1;var i=q2();function e(t,n){for(var r=t.length;r--;)if(i(t[r][0],n))return r;return-1}return sT=e,sT}var oT,TB;function W$(){if(TB)return oT;TB=1;var i=UA(),e=Array.prototype,t=e.splice;function n(r){var s=this.__data__,o=i(s,r);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():t.call(s,o,1),--this.size,!0}return oT=n,oT}var aT,MB;function j$(){if(MB)return aT;MB=1;var i=UA();function e(t){var n=this.__data__,r=i(n,t);return r<0?void 0:n[r][1]}return aT=e,aT}var lT,bB;function q$(){if(bB)return lT;bB=1;var i=UA();function e(t){return i(this.__data__,t)>-1}return lT=e,lT}var uT,CB;function X$(){if(CB)return uT;CB=1;var i=UA();function e(t,n){var r=this.__data__,s=i(r,t);return s<0?(++this.size,r.push([t,n])):r[s][1]=n,this}return uT=e,uT}var cT,RB;function zA(){if(RB)return cT;RB=1;var i=V$(),e=W$(),t=j$(),n=q$(),r=X$();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=i,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=r,cT=s,cT}var hT,IB;function J$(){if(IB)return hT;IB=1;var i=zA();function e(){this.__data__=new i,this.size=0}return hT=e,hT}var fT,PB;function K$(){if(PB)return fT;PB=1;function i(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return fT=i,fT}var dT,DB;function Y$(){if(DB)return dT;DB=1;function i(e){return this.__data__.get(e)}return dT=i,dT}var pT,BB;function Q$(){if(BB)return pT;BB=1;function i(e){return this.__data__.has(e)}return pT=i,pT}var mT,LB;function Z$(){if(LB)return mT;LB=1;var i=fu(),e=i["__core-js_shared__"];return mT=e,mT}var gT,FB;function $$(){if(FB)return gT;FB=1;var i=Z$(),e=function(){var n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return gT=t,gT}var _T,OB;function j4(){if(OB)return _T;OB=1;var i=Function.prototype,e=i.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return _T=t,_T}var vT,kB;function eee(){if(kB)return vT;kB=1;var i=_4(),e=$$(),t=FA(),n=j4(),r=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,l=o.toString,u=a.hasOwnProperty,f=RegExp("^"+l.call(u).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(d){if(!t(d)||e(d))return!1;var g=i(d)?f:s;return g.test(n(d))}return vT=c,vT}var yT,NB;function tee(){if(NB)return yT;NB=1;function i(e,t){return e==null?void 0:e[t]}return yT=i,yT}var xT,UB;function Qm(){if(UB)return xT;UB=1;var i=eee(),e=tee();function t(n,r){var s=e(n,r);return i(s)?s:void 0}return xT=t,xT}var AT,zB;function Z2(){if(zB)return AT;zB=1;var i=Qm(),e=fu(),t=i(e,"Map");return AT=t,AT}var wT,GB;function GA(){if(GB)return wT;GB=1;var i=Qm(),e=i(Object,"create");return wT=e,wT}var ST,HB;function nee(){if(HB)return ST;HB=1;var i=GA();function e(){this.__data__=i?i(null):{},this.size=0}return ST=e,ST}var ET,VB;function ree(){if(VB)return ET;VB=1;function i(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return ET=i,ET}var TT,WB;function iee(){if(WB)return TT;WB=1;var i=GA(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function r(s){var o=this.__data__;if(i){var a=o[s];return a===e?void 0:a}return n.call(o,s)?o[s]:void 0}return TT=r,TT}var MT,jB;function see(){if(jB)return MT;jB=1;var i=GA(),e=Object.prototype,t=e.hasOwnProperty;function n(r){var s=this.__data__;return i?s[r]!==void 0:t.call(s,r)}return MT=n,MT}var bT,qB;function oee(){if(qB)return bT;qB=1;var i=GA(),e="__lodash_hash_undefined__";function t(n,r){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=i&&r===void 0?e:r,this}return bT=t,bT}var CT,XB;function aee(){if(XB)return CT;XB=1;var i=nee(),e=ree(),t=iee(),n=see(),r=oee();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=i,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=r,CT=s,CT}var RT,JB;function lee(){if(JB)return RT;JB=1;var i=aee(),e=zA(),t=Z2();function n(){this.size=0,this.__data__={hash:new i,map:new(t||e),string:new i}}return RT=n,RT}var IT,KB;function uee(){if(KB)return IT;KB=1;function i(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return IT=i,IT}var PT,YB;function HA(){if(YB)return PT;YB=1;var i=uee();function e(t,n){var r=t.__data__;return i(n)?r[typeof n=="string"?"string":"hash"]:r.map}return PT=e,PT}var DT,QB;function cee(){if(QB)return DT;QB=1;var i=HA();function e(t){var n=i(this,t).delete(t);return this.size-=n?1:0,n}return DT=e,DT}var BT,ZB;function hee(){if(ZB)return BT;ZB=1;var i=HA();function e(t){return i(this,t).get(t)}return BT=e,BT}var LT,$B;function fee(){if($B)return LT;$B=1;var i=HA();function e(t){return i(this,t).has(t)}return LT=e,LT}var FT,eL;function dee(){if(eL)return FT;eL=1;var i=HA();function e(t,n){var r=i(this,t),s=r.size;return r.set(t,n),this.size+=r.size==s?0:1,this}return FT=e,FT}var OT,tL;function q4(){if(tL)return OT;tL=1;var i=lee(),e=cee(),t=hee(),n=fee(),r=dee();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=i,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=r,OT=s,OT}var kT,nL;function pee(){if(nL)return kT;nL=1;var i=zA(),e=Z2(),t=q4(),n=200;function r(s,o){var a=this.__data__;if(a instanceof i){var l=a.__data__;if(!e||l.length<n-1)return l.push([s,o]),this.size=++a.size,this;a=this.__data__=new t(l)}return a.set(s,o),this.size=a.size,this}return kT=r,kT}var NT,rL;function mee(){if(rL)return NT;rL=1;var i=zA(),e=J$(),t=K$(),n=Y$(),r=Q$(),s=pee();function o(a){var l=this.__data__=new i(a);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=s,NT=o,NT}var UT,iL;function gee(){if(iL)return UT;iL=1;var i="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,i),this}return UT=e,UT}var zT,sL;function _ee(){if(sL)return zT;sL=1;function i(e){return this.__data__.has(e)}return zT=i,zT}var GT,oL;function vee(){if(oL)return GT;oL=1;var i=q4(),e=gee(),t=_ee();function n(r){var s=-1,o=r==null?0:r.length;for(this.__data__=new i;++s<o;)this.add(r[s])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,GT=n,GT}var HT,aL;function yee(){if(aL)return HT;aL=1;function i(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}return HT=i,HT}var VT,lL;function xee(){if(lL)return VT;lL=1;function i(e,t){return e.has(t)}return VT=i,VT}var WT,uL;function X4(){if(uL)return WT;uL=1;var i=vee(),e=yee(),t=xee(),n=1,r=2;function s(o,a,l,u,f,c){var d=l&n,g=o.length,v=a.length;if(g!=v&&!(d&&v>g))return!1;var A=c.get(o),x=c.get(a);if(A&&x)return A==a&&x==o;var w=-1,M=!0,b=l&r?new i:void 0;for(c.set(o,a),c.set(a,o);++w<g;){var R=o[w],F=a[w];if(u)var O=d?u(F,R,w,a,o,c):u(R,F,w,o,a,c);if(O!==void 0){if(O)continue;M=!1;break}if(b){if(!e(a,function(D,I){if(!t(b,I)&&(R===D||f(R,D,l,u,c)))return b.push(I)})){M=!1;break}}else if(!(R===F||f(R,F,l,u,c))){M=!1;break}}return c.delete(o),c.delete(a),M}return WT=s,WT}var jT,cL;function Aee(){if(cL)return jT;cL=1;var i=fu(),e=i.Uint8Array;return jT=e,jT}var qT,hL;function wee(){if(hL)return qT;hL=1;function i(e){var t=-1,n=Array(e.size);return e.forEach(function(r,s){n[++t]=[s,r]}),n}return qT=i,qT}var XT,fL;function See(){if(fL)return XT;fL=1;function i(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}return XT=i,XT}var JT,dL;function Eee(){if(dL)return JT;dL=1;var i=LA(),e=Aee(),t=q2(),n=X4(),r=wee(),s=See(),o=1,a=2,l="[object Boolean]",u="[object Date]",f="[object Error]",c="[object Map]",d="[object Number]",g="[object RegExp]",v="[object Set]",A="[object String]",x="[object Symbol]",w="[object ArrayBuffer]",M="[object DataView]",b=i?i.prototype:void 0,R=b?b.valueOf:void 0;function F(O,D,I,C,B,k,H){switch(I){case M:if(O.byteLength!=D.byteLength||O.byteOffset!=D.byteOffset)return!1;O=O.buffer,D=D.buffer;case w:return!(O.byteLength!=D.byteLength||!k(new e(O),new e(D)));case l:case u:case d:return t(+O,+D);case f:return O.name==D.name&&O.message==D.message;case g:case A:return O==D+"";case c:var z=r;case v:var Z=C&o;if(z||(z=s),O.size!=D.size&&!Z)return!1;var ue=H.get(O);if(ue)return ue==D;C|=a,H.set(O,D);var ae=n(z(O),z(D),C,B,k,H);return H.delete(O),ae;case x:if(R)return R.call(O)==R.call(D)}return!1}return JT=F,JT}var KT,pL;function Tee(){if(pL)return KT;pL=1;function i(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}return KT=i,KT}var YT,mL;function Mee(){if(mL)return YT;mL=1;var i=Tee(),e=NA();function t(n,r,s){var o=r(n);return e(n)?o:i(o,s(n))}return YT=t,YT}var QT,gL;function bee(){if(gL)return QT;gL=1;function i(e,t){for(var n=-1,r=e==null?0:e.length,s=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[s++]=a)}return o}return QT=i,QT}var ZT,_L;function Cee(){if(_L)return ZT;_L=1;function i(){return[]}return ZT=i,ZT}var $T,vL;function Ree(){if(vL)return $T;vL=1;var i=bee(),e=Cee(),t=Object.prototype,n=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,s=r?function(o){return o==null?[]:(o=Object(o),i(r(o),function(a){return n.call(o,a)}))}:e;return $T=s,$T}var eM,yL;function Iee(){if(yL)return eM;yL=1;function i(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}return eM=i,eM}var tM,xL;function Pee(){if(xL)return tM;xL=1;var i=cv(),e=hv(),t="[object Arguments]";function n(r){return e(r)&&i(r)==t}return tM=n,tM}var nM,AL;function Dee(){if(AL)return nM;AL=1;var i=Pee(),e=hv(),t=Object.prototype,n=t.hasOwnProperty,r=t.propertyIsEnumerable,s=i(function(){return arguments}())?i:function(o){return e(o)&&n.call(o,"callee")&&!r.call(o,"callee")};return nM=s,nM}var S_={exports:{}},rM,wL;function Bee(){if(wL)return rM;wL=1;function i(){return!1}return rM=i,rM}S_.exports;var SL;function J4(){return SL||(SL=1,function(i,e){var t=fu(),n=Bee(),r=e&&!e.nodeType&&e,s=r&&!0&&i&&!i.nodeType&&i,o=s&&s.exports===r,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||n;i.exports=u}(S_,S_.exports)),S_.exports}var iM,EL;function Lee(){if(EL)return iM;EL=1;var i=cv(),e=v4(),t=hv(),n="[object Arguments]",r="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",l="[object Function]",u="[object Map]",f="[object Number]",c="[object Object]",d="[object RegExp]",g="[object Set]",v="[object String]",A="[object WeakMap]",x="[object ArrayBuffer]",w="[object DataView]",M="[object Float32Array]",b="[object Float64Array]",R="[object Int8Array]",F="[object Int16Array]",O="[object Int32Array]",D="[object Uint8Array]",I="[object Uint8ClampedArray]",C="[object Uint16Array]",B="[object Uint32Array]",k={};k[M]=k[b]=k[R]=k[F]=k[O]=k[D]=k[I]=k[C]=k[B]=!0,k[n]=k[r]=k[x]=k[s]=k[w]=k[o]=k[a]=k[l]=k[u]=k[f]=k[c]=k[d]=k[g]=k[v]=k[A]=!1;function H(z){return t(z)&&e(z.length)&&!!k[i(z)]}return iM=H,iM}var sM,TL;function Fee(){if(TL)return sM;TL=1;function i(e){return function(t){return e(t)}}return sM=i,sM}var E_={exports:{}};E_.exports;var ML;function Oee(){return ML||(ML=1,function(i,e){var t=g4(),n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,s=r&&r.exports===n,o=s&&t.process,a=function(){try{var l=r&&r.require&&r.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();i.exports=a}(E_,E_.exports)),E_.exports}var oM,bL;function K4(){if(bL)return oM;bL=1;var i=Lee(),e=Fee(),t=Oee(),n=t&&t.isTypedArray,r=n?e(n):i;return oM=r,oM}var aM,CL;function kee(){if(CL)return aM;CL=1;var i=Iee(),e=Dee(),t=NA(),n=J4(),r=x4(),s=K4(),o=Object.prototype,a=o.hasOwnProperty;function l(u,f){var c=t(u),d=!c&&e(u),g=!c&&!d&&n(u),v=!c&&!d&&!g&&s(u),A=c||d||g||v,x=A?i(u.length,String):[],w=x.length;for(var M in u)(f||a.call(u,M))&&!(A&&(M=="length"||g&&(M=="offset"||M=="parent")||v&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||r(M,w)))&&x.push(M);return x}return aM=l,aM}var lM,RL;function Nee(){if(RL)return lM;RL=1;var i=Object.prototype;function e(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||i;return t===r}return lM=e,lM}var uM,IL;function Uee(){if(IL)return uM;IL=1;function i(e,t){return function(n){return e(t(n))}}return uM=i,uM}var cM,PL;function zee(){if(PL)return cM;PL=1;var i=Uee(),e=i(Object.keys,Object);return cM=e,cM}var hM,DL;function Gee(){if(DL)return hM;DL=1;var i=Nee(),e=zee(),t=Object.prototype,n=t.hasOwnProperty;function r(s){if(!i(s))return e(s);var o=[];for(var a in Object(s))n.call(s,a)&&a!="constructor"&&o.push(a);return o}return hM=r,hM}var fM,BL;function Hee(){if(BL)return fM;BL=1;var i=kee(),e=Gee(),t=y4();function n(r){return t(r)?i(r):e(r)}return fM=n,fM}var dM,LL;function Vee(){if(LL)return dM;LL=1;var i=Mee(),e=Ree(),t=Hee();function n(r){return i(r,t,e)}return dM=n,dM}var pM,FL;function Wee(){if(FL)return pM;FL=1;var i=Vee(),e=1,t=Object.prototype,n=t.hasOwnProperty;function r(s,o,a,l,u,f){var c=a&e,d=i(s),g=d.length,v=i(o),A=v.length;if(g!=A&&!c)return!1;for(var x=g;x--;){var w=d[x];if(!(c?w in o:n.call(o,w)))return!1}var M=f.get(s),b=f.get(o);if(M&&b)return M==o&&b==s;var R=!0;f.set(s,o),f.set(o,s);for(var F=c;++x<g;){w=d[x];var O=s[w],D=o[w];if(l)var I=c?l(D,O,w,o,s,f):l(O,D,w,s,o,f);if(!(I===void 0?O===D||u(O,D,a,l,f):I)){R=!1;break}F||(F=w=="constructor")}if(R&&!F){var C=s.constructor,B=o.constructor;C!=B&&"constructor"in s&&"constructor"in o&&!(typeof C=="function"&&C instanceof C&&typeof B=="function"&&B instanceof B)&&(R=!1)}return f.delete(s),f.delete(o),R}return pM=r,pM}var mM,OL;function jee(){if(OL)return mM;OL=1;var i=Qm(),e=fu(),t=i(e,"DataView");return mM=t,mM}var gM,kL;function qee(){if(kL)return gM;kL=1;var i=Qm(),e=fu(),t=i(e,"Promise");return gM=t,gM}var _M,NL;function Xee(){if(NL)return _M;NL=1;var i=Qm(),e=fu(),t=i(e,"Set");return _M=t,_M}var vM,UL;function Jee(){if(UL)return vM;UL=1;var i=Qm(),e=fu(),t=i(e,"WeakMap");return vM=t,vM}var yM,zL;function Kee(){if(zL)return yM;zL=1;var i=jee(),e=Z2(),t=qee(),n=Xee(),r=Jee(),s=cv(),o=j4(),a="[object Map]",l="[object Object]",u="[object Promise]",f="[object Set]",c="[object WeakMap]",d="[object DataView]",g=o(i),v=o(e),A=o(t),x=o(n),w=o(r),M=s;return(i&&M(new i(new ArrayBuffer(1)))!=d||e&&M(new e)!=a||t&&M(t.resolve())!=u||n&&M(new n)!=f||r&&M(new r)!=c)&&(M=function(b){var R=s(b),F=R==l?b.constructor:void 0,O=F?o(F):"";if(O)switch(O){case g:return d;case v:return a;case A:return u;case x:return f;case w:return c}return R}),yM=M,yM}var xM,GL;function Yee(){if(GL)return xM;GL=1;var i=mee(),e=X4(),t=Eee(),n=Wee(),r=Kee(),s=NA(),o=J4(),a=K4(),l=1,u="[object Arguments]",f="[object Array]",c="[object Object]",d=Object.prototype,g=d.hasOwnProperty;function v(A,x,w,M,b,R){var F=s(A),O=s(x),D=F?f:r(A),I=O?f:r(x);D=D==u?c:D,I=I==u?c:I;var C=D==c,B=I==c,k=D==I;if(k&&o(A)){if(!o(x))return!1;F=!0,C=!1}if(k&&!C)return R||(R=new i),F||a(A)?e(A,x,w,M,b,R):t(A,x,D,w,M,b,R);if(!(w&l)){var H=C&&g.call(A,"__wrapped__"),z=B&&g.call(x,"__wrapped__");if(H||z){var Z=H?A.value():A,ue=z?x.value():x;return R||(R=new i),b(Z,ue,w,M,R)}}return k?(R||(R=new i),n(A,x,w,M,b,R)):!1}return xM=v,xM}var AM,HL;function Qee(){if(HL)return AM;HL=1;var i=Yee(),e=hv();function t(n,r,s,o,a){return n===r?!0:n==null||r==null||!e(n)&&!e(r)?n!==n&&r!==r:i(n,r,s,o,t,a)}return AM=t,AM}var wM,VL;function Zee(){if(VL)return wM;VL=1;var i=Qee();function e(t,n){return i(t,n)}return wM=e,wM}var $ee=Zee();const ete=kh($ee);var ns=function(){return ns=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ns.apply(this,arguments)};function tte(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}var kb=function(i,e,t,n,r){return(i-e)*(r-n)/(t-e)+n},Y4=function(i,e){var t=i+e;return t>360?t-360:t},Q4=function(){return Math.random()>.5},Z4=[0,0,1],$2=[[1,1,0],[1,0,1],[0,1,1],[1,0,0],[0,1,0],Z4],nte=function(i){return!ete($2[i],Z4)&&Q4()},WL=200,rte=800,ite=.1,ste=.25,jL=.5,ote=$2.reduce(function(i,e,t){var n;return ns(ns({},i),(n={},n["@keyframes rotation-".concat(t)]={"50%":{transform:"rotate3d(".concat(e.map(function(r){return r/2}).join(),", 180deg)")},"100%":{transform:"rotate3d(".concat(e.join(),", 360deg)")}},n))},{}),ate=function(i,e,t){var n=typeof e=="string"?e:"".concat(e,"px"),r=i.reduce(function(s,o,a){var l,u=kb(Math.abs(Y4(o,90)-180),0,180,-t/2,t/2);return ns(ns({},s),(l={},l["@keyframes x-axis-".concat(a)]={to:{transform:"translateX(".concat(u,"px)")}},l))},{});return ns({"@keyframes y-axis":{to:{transform:"translateY(".concat(n,")")}}},r)},lte=function(i,e,t,n,r){var s,o=Math.round(Math.random()*(rte-WL)+WL),a=Math.round(Math.random()*($2.length-1)),l=e-Math.round(Math.random()*1e3),u=Math.random()<ite,f=nte(a),c=u?u_(Math.random()*ste,2):0,d=c*-1,g=c,v=u_(Math.abs(kb(Math.abs(Y4(i.degree,90)-180),0,180,-1,1)),4),A=u_(Math.random()*jL,4),x=u_(Math.random()*t*(Q4()?1:-1),4),w=jL,M=u_(Math.max(kb(Math.abs(i.degree-180),0,180,t,-t),0),4);return s={},s["&#confetti-particle-".concat(r)]={animation:"$x-axis-".concat(r," ").concat(l,"ms forwards cubic-bezier(").concat(c,", ").concat(d,", ").concat(g,", ").concat(v,")"),"& > div":{width:f?n:Math.round(Math.random()*4)+n/2,height:f?n:Math.round(Math.random()*2)+n,animation:"$y-axis ".concat(l,"ms forwards cubic-bezier(").concat(A,", ").concat(x,", ").concat(w,", ").concat(M,")"),"&:after":ns({backgroundColor:i.color,animation:"$rotation-".concat(a," ").concat(o,"ms infinite linear")},f?{borderRadius:"50%"}:{})}},s},ute=function(i){var e=i.particles,t=i.duration,n=i.height,r=i.width,s=i.force,o=i.particleSize,a=e.reduce(function(l,u,f){return ns(ns({},l),lte(u,t,s,o,f))},{});return F$(ns(ns(ns({},ote),ate(e.map(function(l){return l.degree}),n,r)),{container:{width:0,height:0,position:"relative"},screen:{position:"fixed",top:0,left:0,right:0,bottom:0,overflow:"hidden",pointerEvents:"none"},particle:ns(ns({},a),{"& > div":{position:"absolute",left:0,top:0,"&:after":{content:"''",display:"block",width:"100%",height:"100%"}}})}),{name:"confetti-explosion"})},cte=.5,hte=12,fte="120vh",dte=1e3,pte=100,mte=2200,gte=["#FFC700","#FF0000","#2E3191","#41BBC7"],_te=function(i,e){var t=360/i;return aQ(i).map(function(n){return{color:e[n%e.length],degree:t*n}})};function M1(i){var e=i.particleCount,t=e===void 0?pte:e,n=i.duration,r=n===void 0?mte:n,s=i.colors,o=s===void 0?gte:s,a=i.particleSize,l=a===void 0?hte:a,u=i.force,f=u===void 0?cte:u,c=i.height,d=c===void 0?fte:c,g=i.width,v=g===void 0?dte:g,A=i.zIndex,x=i.onComplete,w=tte(i,["particleCount","duration","colors","particleSize","force","height","width","zIndex","onComplete"]),M=me.useState(),b=M[0],R=M[1],F=_te(t,o),O=ute({particles:F,duration:r,particleSize:l,force:f,width:v,height:d})(),D=me.useCallback(function(I){if(I){var C=I.getBoundingClientRect(),B=C.top,k=C.left;R({top:B,left:k})}},[]);return me.useEffect(function(){if(typeof x=="function"){var I=setTimeout(x,r);return function(){return clearTimeout(I)}}},[r,x]),re.jsx("div",ns({ref:D,className:O.container},w,{children:b&&lQ.createPortal(re.jsx("div",ns({className:O.screen},A?{style:{zIndex:A}}:null,{children:re.jsx("div",ns({style:{position:"absolute",top:b.top,left:b.left}},{children:F.map(function(I,C){return re.jsx("div",ns({id:"confetti-particle-".concat(C),className:O.particle},{children:re.jsx("div",{})}),I.degree)})}))})),document.body)}))}var eR=dv(),On=i=>fv(i,eR),tR=dv();On.write=i=>fv(i,tR);var VA=dv();On.onStart=i=>fv(i,VA);var nR=dv();On.onFrame=i=>fv(i,nR);var rR=dv();On.onFinish=i=>fv(i,rR);var pm=[];On.setTimeout=(i,e)=>{const t=On.now()+e,n=()=>{const s=pm.findIndex(o=>o.cancel==n);~s&&pm.splice(s,1),ph-=~s?1:0},r={time:t,handler:i,cancel:n};return pm.splice($4(t),0,r),ph+=1,e5(),r};var $4=i=>~(~pm.findIndex(e=>e.time>i)||~pm.length);On.cancel=i=>{VA.delete(i),nR.delete(i),rR.delete(i),eR.delete(i),tR.delete(i)};On.sync=i=>{Nb=!0,On.batchedUpdates(i),Nb=!1};On.throttle=i=>{let e;function t(){try{i(...e)}finally{e=null}}function n(...r){e=r,On.onStart(t)}return n.handler=i,n.cancel=()=>{VA.delete(t),e=null},n};var iR=typeof window<"u"?window.requestAnimationFrame:()=>{};On.use=i=>iR=i;On.now=typeof performance<"u"?()=>performance.now():Date.now;On.batchedUpdates=i=>i();On.catch=console.error;On.frameLoop="always";On.advance=()=>{On.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):n5()};var dh=-1,ph=0,Nb=!1;function fv(i,e){Nb?(e.delete(i),i(0)):(e.add(i),e5())}function e5(){dh<0&&(dh=0,On.frameLoop!=="demand"&&iR(t5))}function vte(){dh=-1}function t5(){~dh&&(iR(t5),On.batchedUpdates(n5))}function n5(){const i=dh;dh=On.now();const e=$4(dh);if(e&&(r5(pm.splice(0,e),t=>t.handler()),ph-=e),!ph){vte();return}VA.flush(),eR.flush(i?Math.min(64,dh-i):16.667),nR.flush(),tR.flush(),rR.flush()}function dv(){let i=new Set,e=i;return{add(t){ph+=e==i&&!i.has(t)?1:0,i.add(t)},delete(t){return ph-=e==i&&i.has(t)?1:0,i.delete(t)},flush(t){e.size&&(i=new Set,ph-=e.size,r5(e,n=>n(t)&&i.add(n)),ph+=i.size,e=i)}}}function r5(i,e){i.forEach(t=>{try{e(t)}catch(n){On.catch(n)}})}var yte=Object.defineProperty,xte=(i,e)=>{for(var t in e)yte(i,t,{get:e[t],enumerable:!0})},Pl={};xte(Pl,{assign:()=>wte,colors:()=>xh,createStringInterpolator:()=>oR,skipAnimation:()=>s5,to:()=>i5,willAdvance:()=>aR});function Ub(){}var Ate=(i,e,t)=>Object.defineProperty(i,e,{value:t,writable:!0,configurable:!0}),Gt={arr:Array.isArray,obj:i=>!!i&&i.constructor.name==="Object",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",und:i=>i===void 0};function Yu(i,e){if(Gt.arr(i)){if(!Gt.arr(e)||i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}return i===e}var Er=(i,e)=>i.forEach(e);function dc(i,e,t){if(Gt.arr(i)){for(let n=0;n<i.length;n++)e.call(t,i[n],`${n}`);return}for(const n in i)i.hasOwnProperty(n)&&e.call(t,i[n],n)}var Ga=i=>Gt.und(i)?[]:Gt.arr(i)?i:[i];function X_(i,e){if(i.size){const t=Array.from(i);i.clear(),Er(t,e)}}var T_=(i,...e)=>X_(i,t=>t(...e)),sR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),oR,i5,xh=null,s5=!1,aR=Ub,wte=i=>{i.to&&(i5=i.to),i.now&&(On.now=i.now),i.colors!==void 0&&(xh=i.colors),i.skipAnimation!=null&&(s5=i.skipAnimation),i.createStringInterpolator&&(oR=i.createStringInterpolator),i.requestAnimationFrame&&On.use(i.requestAnimationFrame),i.batchedUpdates&&(On.batchedUpdates=i.batchedUpdates),i.willAdvance&&(aR=i.willAdvance),i.frameLoop&&(On.frameLoop=i.frameLoop)},J_=new Set,ka=[],SM=[],Rx=0,WA={get idle(){return!J_.size&&!ka.length},start(i){Rx>i.priority?(J_.add(i),On.onStart(Ste)):(o5(i),On(zb))},advance:zb,sort(i){if(Rx)On.onFrame(()=>WA.sort(i));else{const e=ka.indexOf(i);~e&&(ka.splice(e,1),a5(i))}},clear(){ka=[],J_.clear()}};function Ste(){J_.forEach(o5),J_.clear(),On(zb)}function o5(i){ka.includes(i)||a5(i)}function a5(i){ka.splice(Ete(ka,e=>e.priority>i.priority),0,i)}function zb(i){const e=SM;for(let t=0;t<ka.length;t++){const n=ka[t];Rx=n.priority,n.idle||(aR(n),n.advance(i),n.idle||e.push(n))}return Rx=0,SM=ka,SM.length=0,ka=e,ka.length>0}function Ete(i,e){const t=i.findIndex(e);return t<0?i.length:t}var Tte=(i,e,t)=>Math.min(Math.max(t,i),e),Mte={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},bl="[-+]?\\d*\\.?\\d+",Ix=bl+"%";function jA(...i){return"\\(\\s*("+i.join(")\\s*,\\s*(")+")\\s*\\)"}var bte=new RegExp("rgb"+jA(bl,bl,bl)),Cte=new RegExp("rgba"+jA(bl,bl,bl,bl)),Rte=new RegExp("hsl"+jA(bl,Ix,Ix)),Ite=new RegExp("hsla"+jA(bl,Ix,Ix,bl)),Pte=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Dte=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Bte=/^#([0-9a-fA-F]{6})$/,Lte=/^#([0-9a-fA-F]{8})$/;function Fte(i){let e;return typeof i=="number"?i>>>0===i&&i>=0&&i<=4294967295?i:null:(e=Bte.exec(i))?parseInt(e[1]+"ff",16)>>>0:xh&&xh[i]!==void 0?xh[i]:(e=bte.exec(i))?(jp(e[1])<<24|jp(e[2])<<16|jp(e[3])<<8|255)>>>0:(e=Cte.exec(i))?(jp(e[1])<<24|jp(e[2])<<16|jp(e[3])<<8|JL(e[4]))>>>0:(e=Pte.exec(i))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Lte.exec(i))?parseInt(e[1],16)>>>0:(e=Dte.exec(i))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Rte.exec(i))?(qL(XL(e[1]),u1(e[2]),u1(e[3]))|255)>>>0:(e=Ite.exec(i))?(qL(XL(e[1]),u1(e[2]),u1(e[3]))|JL(e[4]))>>>0:null}function EM(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function qL(i,e,t){const n=t<.5?t*(1+e):t+e-t*e,r=2*t-n,s=EM(r,n,i+1/3),o=EM(r,n,i),a=EM(r,n,i-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function jp(i){const e=parseInt(i,10);return e<0?0:e>255?255:e}function XL(i){return(parseFloat(i)%360+360)%360/360}function JL(i){const e=parseFloat(i);return e<0?0:e>1?255:Math.round(e*255)}function u1(i){const e=parseFloat(i);return e<0?0:e>100?1:e/100}function KL(i){let e=Fte(i);if(e===null)return i;e=e||0;const t=(e&4278190080)>>>24,n=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${n}, ${r}, ${s})`}var E0=(i,e,t)=>{if(Gt.fun(i))return i;if(Gt.arr(i))return E0({range:i,output:e,extrapolate:t});if(Gt.str(i.output[0]))return oR(i);const n=i,r=n.output,s=n.range||[0,1],o=n.extrapolateLeft||n.extrapolate||"extend",a=n.extrapolateRight||n.extrapolate||"extend",l=n.easing||(u=>u);return u=>{const f=kte(u,s);return Ote(u,s[f],s[f+1],r[f],r[f+1],l,o,a,n.map)}};function Ote(i,e,t,n,r,s,o,a,l){let u=l?l(i):i;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>t){if(a==="identity")return u;a==="clamp"&&(u=t)}return n===r?n:e===t?i<=e?n:r:(e===-1/0?u=-u:t===1/0?u=u-e:u=(u-e)/(t-e),u=s(u),n===-1/0?u=-u:r===1/0?u=u+n:u=u*(r-n)+n,u)}function kte(i,e){for(var t=1;t<e.length-1&&!(e[t]>=i);++t);return t-1}var Nte=(i,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const n=t*i,r=e==="end"?Math.floor(n):Math.ceil(n);return Tte(0,1,r/i)},Px=1.70158,c1=Px*1.525,YL=Px+1,QL=2*Math.PI/3,ZL=2*Math.PI/4.5,h1=i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,Ute={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>1-(1-i)*(1-i),easeInOutQuad:i=>i<.5?2*i*i:1-Math.pow(-2*i+2,2)/2,easeInCubic:i=>i*i*i,easeOutCubic:i=>1-Math.pow(1-i,3),easeInOutCubic:i=>i<.5?4*i*i*i:1-Math.pow(-2*i+2,3)/2,easeInQuart:i=>i*i*i*i,easeOutQuart:i=>1-Math.pow(1-i,4),easeInOutQuart:i=>i<.5?8*i*i*i*i:1-Math.pow(-2*i+2,4)/2,easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>1-Math.pow(1-i,5),easeInOutQuint:i=>i<.5?16*i*i*i*i*i:1-Math.pow(-2*i+2,5)/2,easeInSine:i=>1-Math.cos(i*Math.PI/2),easeOutSine:i=>Math.sin(i*Math.PI/2),easeInOutSine:i=>-(Math.cos(Math.PI*i)-1)/2,easeInExpo:i=>i===0?0:Math.pow(2,10*i-10),easeOutExpo:i=>i===1?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>i===0?0:i===1?1:i<.5?Math.pow(2,20*i-10)/2:(2-Math.pow(2,-20*i+10))/2,easeInCirc:i=>1-Math.sqrt(1-Math.pow(i,2)),easeOutCirc:i=>Math.sqrt(1-Math.pow(i-1,2)),easeInOutCirc:i=>i<.5?(1-Math.sqrt(1-Math.pow(2*i,2)))/2:(Math.sqrt(1-Math.pow(-2*i+2,2))+1)/2,easeInBack:i=>YL*i*i*i-Px*i*i,easeOutBack:i=>1+YL*Math.pow(i-1,3)+Px*Math.pow(i-1,2),easeInOutBack:i=>i<.5?Math.pow(2*i,2)*((c1+1)*2*i-c1)/2:(Math.pow(2*i-2,2)*((c1+1)*(i*2-2)+c1)+2)/2,easeInElastic:i=>i===0?0:i===1?1:-Math.pow(2,10*i-10)*Math.sin((i*10-10.75)*QL),easeOutElastic:i=>i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i*10-.75)*QL)+1,easeInOutElastic:i=>i===0?0:i===1?1:i<.5?-(Math.pow(2,20*i-10)*Math.sin((20*i-11.125)*ZL))/2:Math.pow(2,-20*i+10)*Math.sin((20*i-11.125)*ZL)/2+1,easeInBounce:i=>1-h1(1-i),easeOutBounce:h1,easeInOutBounce:i=>i<.5?(1-h1(1-2*i))/2:(1+h1(2*i-1))/2,steps:Nte},T0=Symbol.for("FluidValue.get"),Bm=Symbol.for("FluidValue.observers"),Jl=i=>!!(i&&i[T0]),Fa=i=>i&&i[T0]?i[T0]():i,$L=i=>i[Bm]||null;function zte(i,e){i.eventObserved?i.eventObserved(e):i(e)}function Dx(i,e){const t=i[Bm];t&&t.forEach(n=>{zte(n,e)})}var Gte=class{constructor(i){if(!i&&!(i=this.get))throw Error("Unknown getter");Hte(this,i)}},Hte=(i,e)=>l5(i,T0,e);function pv(i,e){if(i[T0]){let t=i[Bm];t||l5(i,Bm,t=new Set),t.has(e)||(t.add(e),i.observerAdded&&i.observerAdded(t.size,e))}return e}function Bx(i,e){const t=i[Bm];if(t&&t.has(e)){const n=t.size-1;n?t.delete(e):i[Bm]=null,i.observerRemoved&&i.observerRemoved(n,e)}}var l5=(i,e,t)=>Object.defineProperty(i,e,{value:t,writable:!0,configurable:!0}),b1=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Vte=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,eF=new RegExp(`(${b1.source})(%|[a-z]+)`,"i"),Wte=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,qA=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,u5=i=>{const[e,t]=jte(i);if(!e||sR())return i;const n=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(n)return n.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||i}else{if(t&&qA.test(t))return u5(t);if(t)return t}return i},jte=i=>{const e=qA.exec(i);if(!e)return[,];const[,t,n]=e;return[t,n]},TM,qte=(i,e,t,n,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(n)}, ${r})`,c5=i=>{TM||(TM=xh?new RegExp(`(${Object.keys(xh).join("|")})(?!\\w)`,"g"):/^\b$/);const e=i.output.map(s=>Fa(s).replace(qA,u5).replace(Vte,KL).replace(TM,KL)),t=e.map(s=>s.match(b1).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>E0({...i,output:s}));return s=>{var l;const o=!eF.test(e[0])&&((l=e.find(u=>eF.test(u)))==null?void 0:l.replace(b1,""));let a=0;return e[0].replace(b1,()=>`${r[a++](s)}${o||""}`).replace(Wte,qte)}},lR="react-spring: ",h5=i=>{const e=i;let t=!1;if(typeof e!="function")throw new TypeError(`${lR}once requires a function parameter`);return(...n)=>{t||(e(...n),t=!0)}},Xte=h5(console.warn);function Jte(){Xte(`${lR}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Kte=h5(console.warn);function Yte(){Kte(`${lR}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function XA(i){return Gt.str(i)&&(i[0]=="#"||/\d/.test(i)||!sR()&&qA.test(i)||i in(xh||{}))}var uR=sR()?me.useEffect:me.useLayoutEffect,Qte=()=>{const i=me.useRef(!1);return uR(()=>(i.current=!0,()=>{i.current=!1}),[]),i};function f5(){const i=me.useState()[1],e=Qte();return()=>{e.current&&i(Math.random())}}function Zte(i,e){const[t]=me.useState(()=>({inputs:e,result:i()})),n=me.useRef(),r=n.current;let s=r;return s?e&&s.inputs&&$te(e,s.inputs)||(s={inputs:e,result:i()}):s=t,me.useEffect(()=>{n.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function $te(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}var d5=i=>me.useEffect(i,ene),ene=[];function tF(i){const e=me.useRef();return me.useEffect(()=>{e.current=i}),e.current}var M0=Symbol.for("Animated:node"),tne=i=>!!i&&i[M0]===i,Xl=i=>i&&i[M0],cR=(i,e)=>Ate(i,M0,e),JA=i=>i&&i[M0]&&i[M0].getPayload(),p5=class{constructor(){cR(this,this)}getPayload(){return this.payload||[]}},mv=class extends p5{constructor(i){super(),this._value=i,this.done=!0,this.durationProgress=0,Gt.num(this._value)&&(this.lastPosition=this._value)}static create(i){return new mv(i)}getPayload(){return[this]}getValue(){return this._value}setValue(i,e){return Gt.num(i)&&(this.lastPosition=i,e&&(i=Math.round(i/e)*e,this.done&&(this.lastPosition=i))),this._value===i?!1:(this._value=i,!0)}reset(){const{done:i}=this;this.done=!1,Gt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,i&&(this.lastVelocity=null),this.v0=null)}},b0=class extends mv{constructor(i){super(0),this._string=null,this._toString=E0({output:[i,i]})}static create(i){return new b0(i)}getValue(){const i=this._string;return i??(this._string=this._toString(this._value))}setValue(i){if(Gt.str(i)){if(i==this._string)return!1;this._string=i,this._value=1}else if(super.setValue(i))this._string=null;else return!1;return!0}reset(i){i&&(this._toString=E0({output:[this.getValue(),i]})),this._value=0,super.reset()}},Lx={dependencies:null},hR=class extends p5{constructor(i){super(),this.source=i,this.setValue(i)}getValue(i){const e={};return dc(this.source,(t,n)=>{tne(t)?e[n]=t.getValue(i):Jl(t)?e[n]=Fa(t):i||(e[n]=t)}),e}setValue(i){this.source=i,this.payload=this._makePayload(i)}reset(){this.payload&&Er(this.payload,i=>i.reset())}_makePayload(i){if(i){const e=new Set;return dc(i,this._addToPayload,e),Array.from(e)}}_addToPayload(i){Lx.dependencies&&Jl(i)&&Lx.dependencies.add(i);const e=JA(i);e&&Er(e,t=>this.add(t))}},m5=class extends hR{constructor(i){super(i)}static create(i){return new m5(i)}getValue(){return this.source.map(i=>i.getValue())}setValue(i){const e=this.getPayload();return i.length==e.length?e.map((t,n)=>t.setValue(i[n])).some(Boolean):(super.setValue(i.map(nne)),!0)}};function nne(i){return(XA(i)?b0:mv).create(i)}function Gb(i){const e=Xl(i);return e?e.constructor:Gt.arr(i)?m5:XA(i)?b0:mv}var nF=(i,e)=>{const t=!Gt.fun(i)||i.prototype&&i.prototype.isReactComponent;return me.forwardRef((n,r)=>{const s=me.useRef(null),o=t&&me.useCallback(v=>{s.current=sne(r,v)},[r]),[a,l]=ine(n,e),u=f5(),f=()=>{const v=s.current;if(t&&!v)return;(v?e.applyAnimatedValues(v,a.getValue(!0)):!1)===!1&&u()},c=new rne(f,l),d=me.useRef();uR(()=>(d.current=c,Er(l,v=>pv(v,c)),()=>{d.current&&(Er(d.current.deps,v=>Bx(v,d.current)),On.cancel(d.current.update))})),me.useEffect(f,[]),d5(()=>()=>{const v=d.current;Er(v.deps,A=>Bx(A,v))});const g=e.getComponentProps(a.getValue());return me.createElement(i,{...g,ref:o})})},rne=class{constructor(i,e){this.update=i,this.deps=e}eventObserved(i){i.type=="change"&&On.write(this.update)}};function ine(i,e){const t=new Set;return Lx.dependencies=t,i.style&&(i={...i,style:e.createAnimatedStyle(i.style)}),i=new hR(i),Lx.dependencies=null,[i,t]}function sne(i,e){return i&&(Gt.fun(i)?i(e):i.current=e),e}var rF=Symbol.for("AnimatedComponent"),one=(i,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new hR(r),getComponentProps:n=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:n},s=o=>{const a=iF(o)||"Anonymous";return Gt.str(o)?o=s[o]||(s[o]=nF(o,r)):o=o[rF]||(o[rF]=nF(o,r)),o.displayName=`Animated(${a})`,o};return dc(i,(o,a)=>{Gt.arr(i)&&(a=iF(o)),s[a]=s(o)}),{animated:s}},iF=i=>Gt.str(i)?i:i&&Gt.str(i.displayName)?i.displayName:Gt.fun(i)&&i.name||null;function Jf(i,...e){return Gt.fun(i)?i(...e):i}var K_=(i,e)=>i===!0||!!(e&&i&&(Gt.fun(i)?i(e):Ga(i).includes(e))),g5=(i,e)=>Gt.obj(i)?e&&i[e]:i,_5=(i,e)=>i.default===!0?i[e]:i.default?i.default[e]:void 0,ane=i=>i,fR=(i,e=ane)=>{let t=lne;i.default&&i.default!==!0&&(i=i.default,t=Object.keys(i));const n={};for(const r of t){const s=e(i[r],r);Gt.und(s)||(n[r]=s)}return n},lne=["config","onProps","onStart","onChange","onPause","onResume","onRest"],une={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function cne(i){const e={};let t=0;if(dc(i,(n,r)=>{une[r]||(e[r]=n,t++)}),t)return e}function v5(i){const e=cne(i);if(e){const t={to:e};return dc(i,(n,r)=>r in e||(t[r]=n)),t}return{...i}}function C0(i){return i=Fa(i),Gt.arr(i)?i.map(C0):XA(i)?Pl.createStringInterpolator({range:[0,1],output:[i,i]})(1):i}function hne(i){for(const e in i)return!0;return!1}function Hb(i){return Gt.fun(i)||Gt.arr(i)&&Gt.obj(i[0])}function fne(i,e){var t;(t=i.ref)==null||t.delete(i),e==null||e.delete(i)}function dne(i,e){var t;e&&i.ref!==e&&((t=i.ref)==null||t.delete(i),e.add(i),i.ref=e)}var pne={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Vb={...pne.default,mass:1,damping:1,easing:Ute.linear,clamp:!1},mne=class{constructor(){this.velocity=0,Object.assign(this,Vb)}};function gne(i,e,t){t&&(t={...t},sF(t,e),e={...t,...e}),sF(i,e),Object.assign(i,e);for(const o in Vb)i[o]==null&&(i[o]=Vb[o]);let{frequency:n,damping:r}=i;const{mass:s}=i;return Gt.und(n)||(n<.01&&(n=.01),r<0&&(r=0),i.tension=Math.pow(2*Math.PI/n,2)*s,i.friction=4*Math.PI*r*s/n),i}function sF(i,e){if(!Gt.und(e.decay))i.duration=void 0;else{const t=!Gt.und(e.tension)||!Gt.und(e.friction);(t||!Gt.und(e.frequency)||!Gt.und(e.damping)||!Gt.und(e.mass))&&(i.duration=void 0,i.decay=void 0),t&&(i.frequency=void 0)}}var oF=[],_ne=class{constructor(){this.changed=!1,this.values=oF,this.toValues=null,this.fromValues=oF,this.config=new mne,this.immediate=!1}};function y5(i,{key:e,props:t,defaultProps:n,state:r,actions:s}){return new Promise((o,a)=>{let l,u,f=K_(t.cancel??(n==null?void 0:n.cancel),e);if(f)g();else{Gt.und(t.pause)||(r.paused=K_(t.pause,e));let v=n==null?void 0:n.pause;v!==!0&&(v=r.paused||K_(v,e)),l=Jf(t.delay||0,e),v?(r.resumeQueue.add(d),s.pause()):(s.resume(),d())}function c(){r.resumeQueue.add(d),r.timeouts.delete(u),u.cancel(),l=u.time-On.now()}function d(){l>0&&!Pl.skipAnimation?(r.delayed=!0,u=On.setTimeout(g,l),r.pauseQueue.add(c),r.timeouts.add(u)):g()}function g(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(c),r.timeouts.delete(u),i<=(r.cancelId||0)&&(f=!0);try{s.start({...t,callId:i,cancel:f},o)}catch(v){a(v)}}})}var dR=(i,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?mm(i.get()):e.every(t=>t.noop)?x5(i.get()):Tl(i.get(),e.every(t=>t.finished)),x5=i=>({value:i,noop:!0,finished:!0,cancelled:!1}),Tl=(i,e,t=!1)=>({value:i,finished:e,cancelled:t}),mm=i=>({value:i,cancelled:!0,finished:!1});function A5(i,e,t,n){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&i===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=i;const u=fR(e,(x,w)=>w==="onRest"?void 0:x);let f,c;const d=new Promise((x,w)=>(f=x,c=w)),g=x=>{const w=r<=(t.cancelId||0)&&mm(n)||r!==t.asyncId&&Tl(n,!1);if(w)throw x.result=w,c(x),x},v=(x,w)=>{const M=new aF,b=new lF;return(async()=>{if(Pl.skipAnimation)throw R0(t),b.result=Tl(n,!1),c(b),b;g(M);const R=Gt.obj(x)?{...x}:{...w,to:x};R.parentId=r,dc(u,(O,D)=>{Gt.und(R[D])&&(R[D]=O)});const F=await n.start(R);return g(M),t.paused&&await new Promise(O=>{t.resumeQueue.add(O)}),F})()};let A;if(Pl.skipAnimation)return R0(t),Tl(n,!1);try{let x;Gt.arr(i)?x=(async w=>{for(const M of w)await v(M)})(i):x=Promise.resolve(i(v,n.stop.bind(n))),await Promise.all([x.then(f),d]),A=Tl(n.get(),!0,!1)}catch(x){if(x instanceof aF)A=x.result;else if(x instanceof lF)A=x.result;else throw x}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return Gt.fun(o)&&On.batchedUpdates(()=>{o(A,n,n.item)}),A})()}function R0(i,e){X_(i.timeouts,t=>t.cancel()),i.pauseQueue.clear(),i.resumeQueue.clear(),i.asyncId=i.asyncTo=i.promise=void 0,e&&(i.cancelId=e)}var aF=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},lF=class extends Error{constructor(){super("SkipAnimationSignal")}},Wb=i=>i instanceof pR,vne=1,pR=class extends Gte{constructor(){super(...arguments),this.id=vne++,this._priority=0}get priority(){return this._priority}set priority(i){this._priority!=i&&(this._priority=i,this._onPriorityChange(i))}get(){const i=Xl(this);return i&&i.getValue()}to(...i){return Pl.to(this,i)}interpolate(...i){return Jte(),Pl.to(this,i)}toJSON(){return this.get()}observerAdded(i){i==1&&this._attach()}observerRemoved(i){i==0&&this._detach()}_attach(){}_detach(){}_onChange(i,e=!1){Dx(this,{type:"change",parent:this,value:i,idle:e})}_onPriorityChange(i){this.idle||WA.sort(this),Dx(this,{type:"priority",parent:this,priority:i})}},bd=Symbol.for("SpringPhase"),w5=1,jb=2,qb=4,MM=i=>(i[bd]&w5)>0,sh=i=>(i[bd]&jb)>0,c_=i=>(i[bd]&qb)>0,uF=(i,e)=>e?i[bd]|=jb|w5:i[bd]&=~jb,cF=(i,e)=>e?i[bd]|=qb:i[bd]&=~qb,yne=class extends pR{constructor(i,e){if(super(),this.animation=new _ne,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Gt.und(i)||!Gt.und(e)){const t=Gt.obj(i)?{...i}:{...e,from:i};Gt.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(sh(this)||this._state.asyncTo)||c_(this)}get goal(){return Fa(this.animation.to)}get velocity(){const i=Xl(this);return i instanceof mv?i.lastVelocity||0:i.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return MM(this)}get isAnimating(){return sh(this)}get isPaused(){return c_(this)}get isDelayed(){return this._state.delayed}advance(i){let e=!0,t=!1;const n=this.animation;let{toValues:r}=n;const{config:s}=n,o=JA(n.to);!o&&Jl(n.to)&&(r=Ga(Fa(n.to))),n.values.forEach((u,f)=>{if(u.done)return;const c=u.constructor==b0?1:o?o[f].lastPosition:r[f];let d=n.immediate,g=c;if(!d){if(g=u.lastPosition,s.tension<=0){u.done=!0;return}let v=u.elapsedTime+=i;const A=n.fromValues[f],x=u.v0!=null?u.v0:u.v0=Gt.arr(s.velocity)?s.velocity[f]:s.velocity;let w;const M=s.precision||(A==c?.005:Math.min(1,Math.abs(c-A)*.001));if(Gt.und(s.duration))if(s.decay){const b=s.decay===!0?.998:s.decay,R=Math.exp(-(1-b)*v);g=A+x/(1-b)*(1-R),d=Math.abs(u.lastPosition-g)<=M,w=x*R}else{w=u.lastVelocity==null?x:u.lastVelocity;const b=s.restVelocity||M/10,R=s.clamp?0:s.bounce,F=!Gt.und(R),O=A==c?u.v0>0:A<c;let D,I=!1;const C=1,B=Math.ceil(i/C);for(let k=0;k<B&&(D=Math.abs(w)>b,!(!D&&(d=Math.abs(c-g)<=M,d)));++k){F&&(I=g==c||g>c==O,I&&(w=-w*R,g=c));const H=-s.tension*1e-6*(g-c),z=-s.friction*.001*w,Z=(H+z)/s.mass;w=w+Z*C,g=g+w*C}}else{let b=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,v=u.elapsedTime+=i)),b=(s.progress||0)+v/this._memoizedDuration,b=b>1?1:b<0?0:b,u.durationProgress=b),g=A+s.easing(b)*(c-A),w=(g-u.lastPosition)/i,d=b==1}u.lastVelocity=w,Number.isNaN(g)&&(console.warn("Got NaN while animating:",this),d=!0)}o&&!o[f].done&&(d=!1),d?u.done=!0:e=!1,u.setValue(g,s.round)&&(t=!0)});const a=Xl(this),l=a.getValue();if(e){const u=Fa(n.to);(l!==u||t)&&!s.decay?(a.setValue(u),this._onChange(u)):t&&s.decay&&this._onChange(l),this._stop()}else t&&this._onChange(l)}set(i){return On.batchedUpdates(()=>{this._stop(),this._focus(i),this._set(i)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(sh(this)){const{to:i,config:e}=this.animation;On.batchedUpdates(()=>{this._onStart(),e.decay||this._set(i,!1),this._stop()})}return this}update(i){return(this.queue||(this.queue=[])).push(i),this}start(i,e){let t;return Gt.und(i)?(t=this.queue||[],this.queue=[]):t=[Gt.obj(i)?i:{...e,to:i}],Promise.all(t.map(n=>this._update(n))).then(n=>dR(this,n))}stop(i){const{to:e}=this.animation;return this._focus(this.get()),R0(this._state,i&&this._lastCallId),On.batchedUpdates(()=>this._stop(e,i)),this}reset(){this._update({reset:!0})}eventObserved(i){i.type=="change"?this._start():i.type=="priority"&&(this.priority=i.priority+1)}_prepareNode(i){const e=this.key||"";let{to:t,from:n}=i;t=Gt.obj(t)?t[e]:t,(t==null||Hb(t))&&(t=void 0),n=Gt.obj(n)?n[e]:n,n==null&&(n=void 0);const r={to:t,from:n};return MM(this)||(i.reverse&&([t,n]=[n,t]),n=Fa(n),Gt.und(n)?Xl(this)||this._set(t):this._set(n)),r}_update({...i},e){const{key:t,defaultProps:n}=this;i.default&&Object.assign(n,fR(i,(o,a)=>/^on/.test(a)?g5(o,t):o)),fF(this,i,"onProps"),f_(this,"onProps",i,this);const r=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return y5(++this._lastCallId,{key:t,props:i,defaultProps:n,state:s,actions:{pause:()=>{c_(this)||(cF(this,!0),T_(s.pauseQueue),f_(this,"onPause",Tl(this,h_(this,this.animation.to)),this))},resume:()=>{c_(this)&&(cF(this,!1),sh(this)&&this._resume(),T_(s.resumeQueue),f_(this,"onResume",Tl(this,h_(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(i.loop&&o.finished&&!(e&&o.noop)){const a=S5(i);if(a)return this._update(a,!0)}return o})}_merge(i,e,t){if(e.cancel)return this.stop(!0),t(mm(this));const n=!Gt.und(i.to),r=!Gt.und(i.from);if(n||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(mm(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:f=l,from:c=u}=i;r&&!n&&(!e.default||Gt.und(f))&&(f=c),e.reverse&&([f,c]=[c,f]);const d=!Yu(c,u);d&&(a.from=c),c=Fa(c);const g=!Yu(f,l);g&&this._focus(f);const v=Hb(e.to),{config:A}=a,{decay:x,velocity:w}=A;(n||r)&&(A.velocity=0),e.config&&!v&&gne(A,Jf(e.config,s),e.config!==o.config?Jf(o.config,s):void 0);let M=Xl(this);if(!M||Gt.und(f))return t(Tl(this,!0));const b=Gt.und(e.reset)?r&&!e.default:!Gt.und(c)&&K_(e.reset,s),R=b?c:this.get(),F=C0(f),O=Gt.num(F)||Gt.arr(F)||XA(F),D=!v&&(!O||K_(o.immediate||e.immediate,s));if(g){const k=Gb(f);if(k!==M.constructor)if(D)M=this._set(F);else throw Error(`Cannot animate between ${M.constructor.name} and ${k.name}, as the "to" prop suggests`)}const I=M.constructor;let C=Jl(f),B=!1;if(!C){const k=b||!MM(this)&&d;(g||k)&&(B=Yu(C0(R),F),C=!B),(!Yu(a.immediate,D)&&!D||!Yu(A.decay,x)||!Yu(A.velocity,w))&&(C=!0)}if(B&&sh(this)&&(a.changed&&!b?C=!0:C||this._stop(l)),!v&&((C||Jl(l))&&(a.values=M.getPayload(),a.toValues=Jl(f)?null:I==b0?[1]:Ga(F)),a.immediate!=D&&(a.immediate=D,!D&&!b&&this._set(l)),C)){const{onRest:k}=a;Er(Ane,z=>fF(this,e,z));const H=Tl(this,h_(this,l));T_(this._pendingCalls,H),this._pendingCalls.add(t),a.changed&&On.batchedUpdates(()=>{var z;a.changed=!b,k==null||k(H,this),b?Jf(o.onRest,H):(z=a.onStart)==null||z.call(a,H,this)})}b&&this._set(R),v?t(A5(e.to,e,this._state,this)):C?this._start():sh(this)&&!g?this._pendingCalls.add(t):t(x5(R))}_focus(i){const e=this.animation;i!==e.to&&($L(this)&&this._detach(),e.to=i,$L(this)&&this._attach())}_attach(){let i=0;const{to:e}=this.animation;Jl(e)&&(pv(e,this),Wb(e)&&(i=e.priority+1)),this.priority=i}_detach(){const{to:i}=this.animation;Jl(i)&&Bx(i,this)}_set(i,e=!0){const t=Fa(i);if(!Gt.und(t)){const n=Xl(this);if(!n||!Yu(t,n.getValue())){const r=Gb(t);!n||n.constructor!=r?cR(this,r.create(t)):n.setValue(t),n&&On.batchedUpdates(()=>{this._onChange(t,e)})}}return Xl(this)}_onStart(){const i=this.animation;i.changed||(i.changed=!0,f_(this,"onStart",Tl(this,h_(this,i.to)),this))}_onChange(i,e){e||(this._onStart(),Jf(this.animation.onChange,i,this)),Jf(this.defaultProps.onChange,i,this),super._onChange(i,e)}_start(){const i=this.animation;Xl(this).reset(Fa(i.to)),i.immediate||(i.fromValues=i.values.map(e=>e.lastPosition)),sh(this)||(uF(this,!0),c_(this)||this._resume())}_resume(){Pl.skipAnimation?this.finish():WA.start(this)}_stop(i,e){if(sh(this)){uF(this,!1);const t=this.animation;Er(t.values,r=>{r.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),Dx(this,{type:"idle",parent:this});const n=e?mm(this.get()):Tl(this.get(),h_(this,i??t.to));T_(this._pendingCalls,n),t.changed&&(t.changed=!1,f_(this,"onRest",n,this))}}};function h_(i,e){const t=C0(e),n=C0(i.get());return Yu(n,t)}function S5(i,e=i.loop,t=i.to){const n=Jf(e);if(n){const r=n!==!0&&v5(n),s=(r||i).reverse,o=!r||r.reset;return I0({...i,loop:e,default:!1,pause:void 0,to:!s||Hb(t)?t:void 0,from:o?i.from:void 0,reset:o,...r})}}function I0(i){const{to:e,from:t}=i=v5(i),n=new Set;return Gt.obj(e)&&hF(e,n),Gt.obj(t)&&hF(t,n),i.keys=n.size?Array.from(n):null,i}function xne(i){const e=I0(i);return Gt.und(e.default)&&(e.default=fR(e)),e}function hF(i,e){dc(i,(t,n)=>t!=null&&e.add(n))}var Ane=["onStart","onRest","onChange","onPause","onResume"];function fF(i,e,t){i.animation[t]=e[t]!==_5(e,t)?g5(e[t],i.key):void 0}function f_(i,e,...t){var n,r,s,o;(r=(n=i.animation)[e])==null||r.call(n,...t),(o=(s=i.defaultProps)[e])==null||o.call(s,...t)}var wne=["onStart","onChange","onRest"],Sne=1,Ene=class{constructor(i,e){this.id=Sne++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),i&&this.start({default:!0,...i})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(i=>i.idle&&!i.isDelayed&&!i.isPaused)}get item(){return this._item}set item(i){this._item=i}get(){const i={};return this.each((e,t)=>i[t]=e.get()),i}set(i){for(const e in i){const t=i[e];Gt.und(t)||this.springs[e].set(t)}}update(i){return i&&this.queue.push(I0(i)),this}start(i){let{queue:e}=this;return i?e=Ga(i).map(I0):this.queue=[],this._flush?this._flush(this,e):(C5(this,e),Xb(this,e))}stop(i,e){if(i!==!!i&&(e=i),e){const t=this.springs;Er(Ga(e),n=>t[n].stop(!!i))}else R0(this._state,this._lastAsyncId),this.each(t=>t.stop(!!i));return this}pause(i){if(Gt.und(i))this.start({pause:!0});else{const e=this.springs;Er(Ga(i),t=>e[t].pause())}return this}resume(i){if(Gt.und(i))this.start({pause:!1});else{const e=this.springs;Er(Ga(i),t=>e[t].resume())}return this}each(i){dc(this.springs,i)}_onFrame(){const{onStart:i,onChange:e,onRest:t}=this._events,n=this._active.size>0,r=this._changed.size>0;(n&&!this._started||r&&!this._started)&&(this._started=!0,X_(i,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!n&&this._started,o=r||s&&t.size?this.get():null;r&&e.size&&X_(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,X_(t,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(i){if(i.type=="change")this._changed.add(i.parent),i.idle||this._active.add(i.parent);else if(i.type=="idle")this._active.delete(i.parent);else return;On.onFrame(this._onFrame)}};function Xb(i,e){return Promise.all(e.map(t=>E5(i,t))).then(t=>dR(i,t))}async function E5(i,e,t){const{keys:n,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,u=Gt.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const f=Gt.arr(r)||Gt.fun(r)?r:void 0;f?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):Er(wne,A=>{const x=e[A];if(Gt.fun(x)){const w=i._events[A];e[A]=({finished:M,cancelled:b})=>{const R=w.get(x);R?(M||(R.finished=!1),b&&(R.cancelled=!0)):w.set(x,{value:null,finished:M||!1,cancelled:b||!1})},u&&(u[A]=e[A])}});const c=i._state;e.pause===!c.paused?(c.paused=e.pause,T_(e.pause?c.pauseQueue:c.resumeQueue)):c.paused&&(e.pause=!0);const d=(n||Object.keys(i.springs)).map(A=>i.springs[A].start(e)),g=e.cancel===!0||_5(e,"cancel")===!0;(f||g&&c.asyncId)&&d.push(y5(++i._lastAsyncId,{props:e,state:c,actions:{pause:Ub,resume:Ub,start(A,x){g?(R0(c,i._lastAsyncId),x(mm(i))):(A.onRest=a,x(A5(f,A,c,i)))}}})),c.paused&&await new Promise(A=>{c.resumeQueue.add(A)});const v=dR(i,await Promise.all(d));if(o&&v.finished&&!(t&&v.noop)){const A=S5(e,o,r);if(A)return C5(i,[A]),E5(i,A,!0)}return l&&On.batchedUpdates(()=>l(v,i,i.item)),v}function dF(i,e){const t={...i.springs};return e&&Er(Ga(e),n=>{Gt.und(n.keys)&&(n=I0(n)),Gt.obj(n.to)||(n={...n,to:void 0}),b5(t,n,r=>M5(r))}),T5(i,t),t}function T5(i,e){dc(e,(t,n)=>{i.springs[n]||(i.springs[n]=t,pv(t,i))})}function M5(i,e){const t=new yne;return t.key=i,e&&pv(t,e),t}function b5(i,e,t){e.keys&&Er(e.keys,n=>{(i[n]||(i[n]=t(n)))._prepareNode(e)})}function C5(i,e){Er(e,t=>{b5(i.springs,t,n=>M5(n,i))})}var KA=({children:i,...e})=>{const t=me.useContext(Fx),n=e.pause||!!t.pause,r=e.immediate||!!t.immediate;e=Zte(()=>({pause:n,immediate:r}),[n,r]);const{Provider:s}=Fx;return me.createElement(s,{value:e},i)},Fx=Tne(KA,{});KA.Provider=Fx.Provider;KA.Consumer=Fx.Consumer;function Tne(i,e){return Object.assign(i,me.createContext(e)),i.Provider._context=i,i.Consumer._context=i,i}var Mne=()=>{const i=[],e=function(n){Yte();const r=[];return Er(i,(s,o)=>{if(Gt.und(n))r.push(s.start());else{const a=t(n,s,o);a&&r.push(s.start(a))}}),r};e.current=i,e.add=function(n){i.includes(n)||i.push(n)},e.delete=function(n){const r=i.indexOf(n);~r&&i.splice(r,1)},e.pause=function(){return Er(i,n=>n.pause(...arguments)),this},e.resume=function(){return Er(i,n=>n.resume(...arguments)),this},e.set=function(n){Er(i,(r,s)=>{const o=Gt.fun(n)?n(s,r):n;o&&r.set(o)})},e.start=function(n){const r=[];return Er(i,(s,o)=>{if(Gt.und(n))r.push(s.start());else{const a=this._getProps(n,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return Er(i,n=>n.stop(...arguments)),this},e.update=function(n){return Er(i,(r,s)=>r.update(this._getProps(n,r,s))),this};const t=function(n,r,s){return Gt.fun(n)?n(s,r):n};return e._getProps=t,e};function bne(i,e,t){const n=Gt.fun(e)&&e;n&&!t&&(t=[]);const r=me.useMemo(()=>n||arguments.length==3?Mne():void 0,[]),s=me.useRef(0),o=f5(),a=me.useMemo(()=>({ctrls:[],queue:[],flush(w,M){const b=dF(w,M);return s.current>0&&!a.queue.length&&!Object.keys(b).some(F=>!w.springs[F])?Xb(w,M):new Promise(F=>{T5(w,b),a.queue.push(()=>{F(Xb(w,M))}),o()})}}),[]),l=me.useRef([...a.ctrls]),u=[],f=tF(i)||0;me.useMemo(()=>{Er(l.current.slice(i,f),w=>{fne(w,r),w.stop(!0)}),l.current.length=i,c(f,i)},[i]),me.useMemo(()=>{c(0,Math.min(f,i))},t);function c(w,M){for(let b=w;b<M;b++){const R=l.current[b]||(l.current[b]=new Ene(null,a.flush)),F=n?n(b,R):e[b];F&&(u[b]=xne(F))}}const d=l.current.map((w,M)=>dF(w,u[M])),g=me.useContext(KA),v=tF(g),A=g!==v&&hne(g);uR(()=>{s.current++,a.ctrls=l.current;const{queue:w}=a;w.length&&(a.queue=[],Er(w,M=>M())),Er(l.current,(M,b)=>{r==null||r.add(M),A&&M.start({default:g});const R=u[b];R&&(dne(M,R.ref),M.ref?M.queue.push(R):M.start(R))})}),d5(()=>()=>{Er(a.ctrls,w=>w.stop(!0))});const x=d.map(w=>({...w}));return r?[x,r]:x}function Cne(i,e){const t=Gt.fun(i),[[n],r]=bne(1,t?i:[i],t?[]:e);return t||arguments.length==2?[n,r]:n}var Rne=class extends pR{constructor(i,e){super(),this.source=i,this.idle=!0,this._active=new Set,this.calc=E0(...e);const t=this._get(),n=Gb(t);cR(this,n.create(t))}advance(i){const e=this._get(),t=this.get();Yu(e,t)||(Xl(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&pF(this._active)&&bM(this)}_get(){const i=Gt.arr(this.source)?this.source.map(Fa):Ga(Fa(this.source));return this.calc(...i)}_start(){this.idle&&!pF(this._active)&&(this.idle=!1,Er(JA(this),i=>{i.done=!1}),Pl.skipAnimation?(On.batchedUpdates(()=>this.advance()),bM(this)):WA.start(this))}_attach(){let i=1;Er(Ga(this.source),e=>{Jl(e)&&pv(e,this),Wb(e)&&(e.idle||this._active.add(e),i=Math.max(i,e.priority+1))}),this.priority=i,this._start()}_detach(){Er(Ga(this.source),i=>{Jl(i)&&Bx(i,this)}),this._active.clear(),bM(this)}eventObserved(i){i.type=="change"?i.idle?this.advance():(this._active.add(i.parent),this._start()):i.type=="idle"?this._active.delete(i.parent):i.type=="priority"&&(this.priority=Ga(this.source).reduce((e,t)=>Math.max(e,(Wb(t)?t.priority:0)+1),0))}};function Ine(i){return i.idle!==!1}function pF(i){return!i.size||Array.from(i).every(Ine)}function bM(i){i.idle||(i.idle=!0,Er(JA(i),e=>{e.done=!0}),Dx(i,{type:"idle",parent:i}))}Pl.assign({createStringInterpolator:c5,to:(i,e)=>new Rne(i,e)});var Pne=["primitive"].concat(Object.keys(_U).filter(i=>/^[A-Z]/.test(i)).map(i=>i[0].toLowerCase()+i.slice(1)));Pl.assign({createStringInterpolator:c5,colors:Mte,frameLoop:"demand"});GX(()=>{On.advance()});var Dne=one(Pne,{applyAnimatedValues:Zu}),Bne=Dne.animated;const Jb=Pd(i=>({triggerConfetti:!1,setTriggerConfetti:e=>i({triggerConfetti:e}),resetConfetti:()=>i({triggerConfetti:!1})})),mR=Pd(i=>({hatName:"NoneHat",setHatName:e=>i({hatName:e})})),P0=Pd(i=>({isPopUpOpen:!1,openPopUp:()=>i({isPopUpOpen:!0}),closePopUp:()=>i({isPopUpOpen:!1})}));var mF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Lne=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const r=i[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[t++];e[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[t++],o=i[t++],a=i[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=i[t++],o=i[t++];e[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},I5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],o=r+1<i.length,a=o?i[r+1]:0,l=r+2<i.length,u=l?i[r+2]:0,f=s>>2,c=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(d=64)),n.push(t[f],t[c],t[d],t[g])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(R5(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Lne(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=t[i.charAt(r++)],a=r<i.length?t[i.charAt(r)]:0;++r;const u=r<i.length?t[i.charAt(r)]:64;++r;const c=r<i.length?t[i.charAt(r)]:64;if(++r,s==null||a==null||u==null||c==null)throw new Fne;const d=s<<2|a>>4;if(n.push(d),u!==64){const g=a<<4&240|u>>2;if(n.push(g),c!==64){const v=u<<6&192|c;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Fne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const One=function(i){const e=R5(i);return I5.encodeByteArray(e,!0)},Ox=function(i){return One(i).replace(/\./g,"")},kne=function(i){try{return I5.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Une=()=>Nne().__FIREBASE_DEFAULTS__,zne=()=>{if(typeof process>"u"||typeof mF>"u")return;const i=mF.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Gne=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&kne(i[1]);return e&&JSON.parse(e)},gR=()=>{try{return Une()||zne()||Gne()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Hne=i=>{var e,t;return(t=(e=gR())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},Vne=i=>{const e=Hne(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},P5=()=>{var i;return(i=gR())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jne(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ox(JSON.stringify(t)),Ox(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qne(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xne(){var i;const e=(i=gR())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jne(){return!Xne()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kne(){try{return typeof indexedDB=="object"}catch{return!1}}function Yne(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qne="FirebaseError";class Zm extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Qne,Object.setPrototypeOf(this,Zm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D5.prototype.create)}}class D5{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?Zne(s,n):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Zm(r,a,n)}}function Zne(i,e){return i.replace($ne,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const $ne=/\{\$([^}]+)}/g;function Kb(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const s=i[r],o=e[r];if(gF(s)&&gF(o)){if(!Kb(s,o))return!1}else if(s!==o)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function gF(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(i){return i&&i._delegate?i._delegate:i}class D0{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ere{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new Wne;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nre(e))try{this.getOrInitializeService({instanceIdentifier:jf})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(e=jf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jf){return this.instances.has(e)}getOptions(e=jf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);n===a&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:tre(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=jf){return this.component?this.component.multipleInstances?e:jf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tre(i){return i===jf?void 0:i}function nre(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ere(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(hr||(hr={}));const ire={debug:hr.DEBUG,verbose:hr.VERBOSE,info:hr.INFO,warn:hr.WARN,error:hr.ERROR,silent:hr.SILENT},sre=hr.INFO,ore={[hr.DEBUG]:"log",[hr.VERBOSE]:"log",[hr.INFO]:"info",[hr.WARN]:"warn",[hr.ERROR]:"error"},are=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),r=ore[e];if(r)console[r](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class B5{constructor(e){this.name=e,this._logLevel=sre,this._logHandler=are,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in hr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ire[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,hr.DEBUG,...e),this._logHandler(this,hr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,hr.VERBOSE,...e),this._logHandler(this,hr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,hr.INFO,...e),this._logHandler(this,hr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,hr.WARN,...e),this._logHandler(this,hr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,hr.ERROR,...e),this._logHandler(this,hr.ERROR,...e)}}const lre=(i,e)=>e.some(t=>i instanceof t);let _F,vF;function ure(){return _F||(_F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cre(){return vF||(vF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L5=new WeakMap,Yb=new WeakMap,F5=new WeakMap,CM=new WeakMap,_R=new WeakMap;function hre(i){const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{t(Ah(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&L5.set(t,i)}).catch(()=>{}),_R.set(e,i),e}function fre(i){if(Yb.has(i))return;const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});Yb.set(i,e)}let Qb={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Yb.get(i);if(e==="objectStoreNames")return i.objectStoreNames||F5.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ah(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function dre(i){Qb=i(Qb)}function pre(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(RM(this),e,...t);return F5.set(n,e.sort?e.sort():[e]),Ah(n)}:cre().includes(i)?function(...e){return i.apply(RM(this),e),Ah(L5.get(this))}:function(...e){return Ah(i.apply(RM(this),e))}}function mre(i){return typeof i=="function"?pre(i):(i instanceof IDBTransaction&&fre(i),lre(i,ure())?new Proxy(i,Qb):i)}function Ah(i){if(i instanceof IDBRequest)return hre(i);if(CM.has(i))return CM.get(i);const e=mre(i);return e!==i&&(CM.set(i,e),_R.set(e,i)),e}const RM=i=>_R.get(i);function gre(i,e,{blocked:t,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(i,e),a=Ah(o);return n&&o.addEventListener("upgradeneeded",l=>{n(Ah(o.result),l.oldVersion,l.newVersion,Ah(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const _re=["get","getKey","getAll","getAllKeys","count"],vre=["put","add","delete","clear"],IM=new Map;function yF(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(IM.get(e))return IM.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=vre.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||_re.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),r&&l.done]))[0]};return IM.set(e,s),s}dre(i=>({...i,get:(e,t,n)=>yF(e,t)||i.get(e,t,n),has:(e,t)=>!!yF(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xre(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function xre(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zb="@firebase/app",xF="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new B5("@firebase/app"),Are="@firebase/app-compat",wre="@firebase/analytics-compat",Sre="@firebase/analytics",Ere="@firebase/app-check-compat",Tre="@firebase/app-check",Mre="@firebase/auth",bre="@firebase/auth-compat",Cre="@firebase/database",Rre="@firebase/data-connect",Ire="@firebase/database-compat",Pre="@firebase/functions",Dre="@firebase/functions-compat",Bre="@firebase/installations",Lre="@firebase/installations-compat",Fre="@firebase/messaging",Ore="@firebase/messaging-compat",kre="@firebase/performance",Nre="@firebase/performance-compat",Ure="@firebase/remote-config",zre="@firebase/remote-config-compat",Gre="@firebase/storage",Hre="@firebase/storage-compat",Vre="@firebase/firestore",Wre="@firebase/vertexai",jre="@firebase/firestore-compat",qre="firebase",Xre="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="[DEFAULT]",Jre={[Zb]:"fire-core",[Are]:"fire-core-compat",[Sre]:"fire-analytics",[wre]:"fire-analytics-compat",[Tre]:"fire-app-check",[Ere]:"fire-app-check-compat",[Mre]:"fire-auth",[bre]:"fire-auth-compat",[Cre]:"fire-rtdb",[Rre]:"fire-data-connect",[Ire]:"fire-rtdb-compat",[Pre]:"fire-fn",[Dre]:"fire-fn-compat",[Bre]:"fire-iid",[Lre]:"fire-iid-compat",[Fre]:"fire-fcm",[Ore]:"fire-fcm-compat",[kre]:"fire-perf",[Nre]:"fire-perf-compat",[Ure]:"fire-rc",[zre]:"fire-rc-compat",[Gre]:"fire-gcs",[Hre]:"fire-gcs-compat",[Vre]:"fire-fst",[jre]:"fire-fst-compat",[Wre]:"fire-vertex","fire-js":"fire-js",[qre]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=new Map,Kre=new Map,eC=new Map;function AF(i,e){try{i.container.addComponent(e)}catch(t){pc.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Nx(i){const e=i.name;if(eC.has(e))return pc.debug(`There were multiple attempts to register component ${e}.`),!1;eC.set(e,i);for(const t of kx.values())AF(t,i);for(const t of Kre.values())AF(t,i);return!0}function Yre(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qre={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wh=new D5("app","Firebase",Qre);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zre{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new D0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $re=Xre;function O5(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n=Object.assign({name:$b,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw wh.create("bad-app-name",{appName:String(r)});if(t||(t=P5()),!t)throw wh.create("no-options");const s=kx.get(r);if(s){if(Kb(t,s.options)&&Kb(n,s.config))return s;throw wh.create("duplicate-app",{appName:r})}const o=new rre(r);for(const l of eC.values())o.addComponent(l);const a=new Zre(t,n,o);return kx.set(r,a),a}function eie(i=$b){const e=kx.get(i);if(!e&&i===$b&&P5())return O5();if(!e)throw wh.create("no-app",{appName:i});return e}function gm(i,e,t){var n;let r=(n=Jre[i])!==null&&n!==void 0?n:i;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pc.warn(a.join(" "));return}Nx(new D0(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tie="firebase-heartbeat-database",nie=1,B0="firebase-heartbeat-store";let PM=null;function k5(){return PM||(PM=gre(tie,nie,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(B0)}catch(t){console.warn(t)}}}}).catch(i=>{throw wh.create("idb-open",{originalErrorMessage:i.message})})),PM}async function rie(i){try{const t=(await k5()).transaction(B0),n=await t.objectStore(B0).get(N5(i));return await t.done,n}catch(e){if(e instanceof Zm)pc.warn(e.message);else{const t=wh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pc.warn(t.message)}}}async function wF(i,e){try{const n=(await k5()).transaction(B0,"readwrite");await n.objectStore(B0).put(e,N5(i)),await n.done}catch(t){if(t instanceof Zm)pc.warn(t.message);else{const n=wh.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});pc.warn(n.message)}}}function N5(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iie=1024,sie=30*24*60*60*1e3;class oie{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lie(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=SF();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=sie}),this._storage.overwrite(this._heartbeatsCache))}catch(n){pc.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=SF(),{heartbeatsToSend:n,unsentEntries:r}=aie(this._heartbeatsCache.heartbeats),s=Ox(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return pc.warn(t),""}}}function SF(){return new Date().toISOString().substring(0,10)}function aie(i,e=iie){const t=[];let n=i.slice();for(const r of i){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),EF(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),EF(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class lie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kne()?Yne().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rie(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return wF(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return wF(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function EF(i){return Ox(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uie(i){Nx(new D0("platform-logger",e=>new yre(e),"PRIVATE")),Nx(new D0("heartbeat",e=>new oie(e),"PRIVATE")),gm(Zb,xF,i),gm(Zb,xF,"esm2017"),gm("fire-js","")}uie("");var TF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _d,U5;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,I){function C(){}C.prototype=I.prototype,D.D=I.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(B,k,H){for(var z=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)z[Z-2]=arguments[Z];return I.prototype[k].apply(B,z)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,I,C){C||(C=0);var B=Array(16);if(typeof I=="string")for(var k=0;16>k;++k)B[k]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(k=0;16>k;++k)B[k]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=D.g[0],C=D.g[1],k=D.g[2];var H=D.g[3],z=I+(H^C&(k^H))+B[0]+3614090360&4294967295;I=C+(z<<7&4294967295|z>>>25),z=H+(k^I&(C^k))+B[1]+3905402710&4294967295,H=I+(z<<12&4294967295|z>>>20),z=k+(C^H&(I^C))+B[2]+606105819&4294967295,k=H+(z<<17&4294967295|z>>>15),z=C+(I^k&(H^I))+B[3]+3250441966&4294967295,C=k+(z<<22&4294967295|z>>>10),z=I+(H^C&(k^H))+B[4]+4118548399&4294967295,I=C+(z<<7&4294967295|z>>>25),z=H+(k^I&(C^k))+B[5]+1200080426&4294967295,H=I+(z<<12&4294967295|z>>>20),z=k+(C^H&(I^C))+B[6]+2821735955&4294967295,k=H+(z<<17&4294967295|z>>>15),z=C+(I^k&(H^I))+B[7]+4249261313&4294967295,C=k+(z<<22&4294967295|z>>>10),z=I+(H^C&(k^H))+B[8]+1770035416&4294967295,I=C+(z<<7&4294967295|z>>>25),z=H+(k^I&(C^k))+B[9]+2336552879&4294967295,H=I+(z<<12&4294967295|z>>>20),z=k+(C^H&(I^C))+B[10]+4294925233&4294967295,k=H+(z<<17&4294967295|z>>>15),z=C+(I^k&(H^I))+B[11]+2304563134&4294967295,C=k+(z<<22&4294967295|z>>>10),z=I+(H^C&(k^H))+B[12]+1804603682&4294967295,I=C+(z<<7&4294967295|z>>>25),z=H+(k^I&(C^k))+B[13]+4254626195&4294967295,H=I+(z<<12&4294967295|z>>>20),z=k+(C^H&(I^C))+B[14]+2792965006&4294967295,k=H+(z<<17&4294967295|z>>>15),z=C+(I^k&(H^I))+B[15]+1236535329&4294967295,C=k+(z<<22&4294967295|z>>>10),z=I+(k^H&(C^k))+B[1]+4129170786&4294967295,I=C+(z<<5&4294967295|z>>>27),z=H+(C^k&(I^C))+B[6]+3225465664&4294967295,H=I+(z<<9&4294967295|z>>>23),z=k+(I^C&(H^I))+B[11]+643717713&4294967295,k=H+(z<<14&4294967295|z>>>18),z=C+(H^I&(k^H))+B[0]+3921069994&4294967295,C=k+(z<<20&4294967295|z>>>12),z=I+(k^H&(C^k))+B[5]+3593408605&4294967295,I=C+(z<<5&4294967295|z>>>27),z=H+(C^k&(I^C))+B[10]+38016083&4294967295,H=I+(z<<9&4294967295|z>>>23),z=k+(I^C&(H^I))+B[15]+3634488961&4294967295,k=H+(z<<14&4294967295|z>>>18),z=C+(H^I&(k^H))+B[4]+3889429448&4294967295,C=k+(z<<20&4294967295|z>>>12),z=I+(k^H&(C^k))+B[9]+568446438&4294967295,I=C+(z<<5&4294967295|z>>>27),z=H+(C^k&(I^C))+B[14]+3275163606&4294967295,H=I+(z<<9&4294967295|z>>>23),z=k+(I^C&(H^I))+B[3]+4107603335&4294967295,k=H+(z<<14&4294967295|z>>>18),z=C+(H^I&(k^H))+B[8]+1163531501&4294967295,C=k+(z<<20&4294967295|z>>>12),z=I+(k^H&(C^k))+B[13]+2850285829&4294967295,I=C+(z<<5&4294967295|z>>>27),z=H+(C^k&(I^C))+B[2]+4243563512&4294967295,H=I+(z<<9&4294967295|z>>>23),z=k+(I^C&(H^I))+B[7]+1735328473&4294967295,k=H+(z<<14&4294967295|z>>>18),z=C+(H^I&(k^H))+B[12]+2368359562&4294967295,C=k+(z<<20&4294967295|z>>>12),z=I+(C^k^H)+B[5]+4294588738&4294967295,I=C+(z<<4&4294967295|z>>>28),z=H+(I^C^k)+B[8]+2272392833&4294967295,H=I+(z<<11&4294967295|z>>>21),z=k+(H^I^C)+B[11]+1839030562&4294967295,k=H+(z<<16&4294967295|z>>>16),z=C+(k^H^I)+B[14]+4259657740&4294967295,C=k+(z<<23&4294967295|z>>>9),z=I+(C^k^H)+B[1]+2763975236&4294967295,I=C+(z<<4&4294967295|z>>>28),z=H+(I^C^k)+B[4]+1272893353&4294967295,H=I+(z<<11&4294967295|z>>>21),z=k+(H^I^C)+B[7]+4139469664&4294967295,k=H+(z<<16&4294967295|z>>>16),z=C+(k^H^I)+B[10]+3200236656&4294967295,C=k+(z<<23&4294967295|z>>>9),z=I+(C^k^H)+B[13]+681279174&4294967295,I=C+(z<<4&4294967295|z>>>28),z=H+(I^C^k)+B[0]+3936430074&4294967295,H=I+(z<<11&4294967295|z>>>21),z=k+(H^I^C)+B[3]+3572445317&4294967295,k=H+(z<<16&4294967295|z>>>16),z=C+(k^H^I)+B[6]+76029189&4294967295,C=k+(z<<23&4294967295|z>>>9),z=I+(C^k^H)+B[9]+3654602809&4294967295,I=C+(z<<4&4294967295|z>>>28),z=H+(I^C^k)+B[12]+3873151461&4294967295,H=I+(z<<11&4294967295|z>>>21),z=k+(H^I^C)+B[15]+530742520&4294967295,k=H+(z<<16&4294967295|z>>>16),z=C+(k^H^I)+B[2]+3299628645&4294967295,C=k+(z<<23&4294967295|z>>>9),z=I+(k^(C|~H))+B[0]+4096336452&4294967295,I=C+(z<<6&4294967295|z>>>26),z=H+(C^(I|~k))+B[7]+1126891415&4294967295,H=I+(z<<10&4294967295|z>>>22),z=k+(I^(H|~C))+B[14]+2878612391&4294967295,k=H+(z<<15&4294967295|z>>>17),z=C+(H^(k|~I))+B[5]+4237533241&4294967295,C=k+(z<<21&4294967295|z>>>11),z=I+(k^(C|~H))+B[12]+1700485571&4294967295,I=C+(z<<6&4294967295|z>>>26),z=H+(C^(I|~k))+B[3]+2399980690&4294967295,H=I+(z<<10&4294967295|z>>>22),z=k+(I^(H|~C))+B[10]+4293915773&4294967295,k=H+(z<<15&4294967295|z>>>17),z=C+(H^(k|~I))+B[1]+2240044497&4294967295,C=k+(z<<21&4294967295|z>>>11),z=I+(k^(C|~H))+B[8]+1873313359&4294967295,I=C+(z<<6&4294967295|z>>>26),z=H+(C^(I|~k))+B[15]+4264355552&4294967295,H=I+(z<<10&4294967295|z>>>22),z=k+(I^(H|~C))+B[6]+2734768916&4294967295,k=H+(z<<15&4294967295|z>>>17),z=C+(H^(k|~I))+B[13]+1309151649&4294967295,C=k+(z<<21&4294967295|z>>>11),z=I+(k^(C|~H))+B[4]+4149444226&4294967295,I=C+(z<<6&4294967295|z>>>26),z=H+(C^(I|~k))+B[11]+3174756917&4294967295,H=I+(z<<10&4294967295|z>>>22),z=k+(I^(H|~C))+B[2]+718787259&4294967295,k=H+(z<<15&4294967295|z>>>17),z=C+(H^(k|~I))+B[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(k+(z<<21&4294967295|z>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+H&4294967295}n.prototype.u=function(D,I){I===void 0&&(I=D.length);for(var C=I-this.blockSize,B=this.B,k=this.h,H=0;H<I;){if(k==0)for(;H<=C;)r(this,D,H),H+=this.blockSize;if(typeof D=="string"){for(;H<I;)if(B[k++]=D.charCodeAt(H++),k==this.blockSize){r(this,B),k=0;break}}else for(;H<I;)if(B[k++]=D[H++],k==this.blockSize){r(this,B),k=0;break}}this.h=k,this.o+=I},n.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;var C=8*this.o;for(I=D.length-8;I<D.length;++I)D[I]=C&255,C/=256;for(this.u(D),D=Array(16),I=C=0;4>I;++I)for(var B=0;32>B;B+=8)D[C++]=this.g[I]>>>B&255;return D};function s(D,I){var C=a;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=I(D)}function o(D,I){this.h=I;for(var C=[],B=!0,k=D.length-1;0<=k;k--){var H=D[k]|0;B&&H==I||(C[k]=H,B=!1)}this.g=C}var a={};function l(D){return-128<=D&&128>D?s(D,function(I){return new o([I|0],0>I?-1:0)}):new o([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return c;if(0>D)return x(u(-D));for(var I=[],C=1,B=0;D>=C;B++)I[B]=D/C|0,C*=4294967296;return new o(I,0)}function f(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return x(f(D.substring(1),I));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(I,8)),B=c,k=0;k<D.length;k+=8){var H=Math.min(8,D.length-k),z=parseInt(D.substring(k,k+H),I);8>H?(H=u(Math.pow(I,H)),B=B.j(H).add(u(z))):(B=B.j(C),B=B.add(u(z)))}return B}var c=l(0),d=l(1),g=l(16777216);i=o.prototype,i.m=function(){if(A(this))return-x(this).m();for(var D=0,I=1,C=0;C<this.g.length;C++){var B=this.i(C);D+=(0<=B?B:4294967296+B)*I,I*=4294967296}return D},i.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(v(this))return"0";if(A(this))return"-"+x(this).toString(D);for(var I=u(Math.pow(D,6)),C=this,B="";;){var k=R(C,I).g;C=w(C,k.j(I));var H=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=k,v(C))return H+B;for(;6>H.length;)H="0"+H;B=H+B}},i.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function v(D){if(D.h!=0)return!1;for(var I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function A(D){return D.h==-1}i.l=function(D){return D=w(this,D),A(D)?-1:v(D)?0:1};function x(D){for(var I=D.g.length,C=[],B=0;B<I;B++)C[B]=~D.g[B];return new o(C,~D.h).add(d)}i.abs=function(){return A(this)?x(this):this},i.add=function(D){for(var I=Math.max(this.g.length,D.g.length),C=[],B=0,k=0;k<=I;k++){var H=B+(this.i(k)&65535)+(D.i(k)&65535),z=(H>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);B=z>>>16,H&=65535,z&=65535,C[k]=z<<16|H}return new o(C,C[C.length-1]&-2147483648?-1:0)};function w(D,I){return D.add(x(I))}i.j=function(D){if(v(this)||v(D))return c;if(A(this))return A(D)?x(this).j(x(D)):x(x(this).j(D));if(A(D))return x(this.j(x(D)));if(0>this.l(g)&&0>D.l(g))return u(this.m()*D.m());for(var I=this.g.length+D.g.length,C=[],B=0;B<2*I;B++)C[B]=0;for(B=0;B<this.g.length;B++)for(var k=0;k<D.g.length;k++){var H=this.i(B)>>>16,z=this.i(B)&65535,Z=D.i(k)>>>16,ue=D.i(k)&65535;C[2*B+2*k]+=z*ue,M(C,2*B+2*k),C[2*B+2*k+1]+=H*ue,M(C,2*B+2*k+1),C[2*B+2*k+1]+=z*Z,M(C,2*B+2*k+1),C[2*B+2*k+2]+=H*Z,M(C,2*B+2*k+2)}for(B=0;B<I;B++)C[B]=C[2*B+1]<<16|C[2*B];for(B=I;B<2*I;B++)C[B]=0;return new o(C,0)};function M(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function b(D,I){this.g=D,this.h=I}function R(D,I){if(v(I))throw Error("division by zero");if(v(D))return new b(c,c);if(A(D))return I=R(x(D),I),new b(x(I.g),x(I.h));if(A(I))return I=R(D,x(I)),new b(x(I.g),I.h);if(30<D.g.length){if(A(D)||A(I))throw Error("slowDivide_ only works with positive integers.");for(var C=d,B=I;0>=B.l(D);)C=F(C),B=F(B);var k=O(C,1),H=O(B,1);for(B=O(B,2),C=O(C,2);!v(B);){var z=H.add(B);0>=z.l(D)&&(k=k.add(C),H=z),B=O(B,1),C=O(C,1)}return I=w(D,k.j(I)),new b(k,I)}for(k=c;0<=D.l(I);){for(C=Math.max(1,Math.floor(D.m()/I.m())),B=Math.ceil(Math.log(C)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),H=u(C),z=H.j(I);A(z)||0<z.l(D);)C-=B,H=u(C),z=H.j(I);v(H)&&(H=d),k=k.add(H),D=w(D,z)}return new b(k,D)}i.A=function(D){return R(this,D).h},i.and=function(D){for(var I=Math.max(this.g.length,D.g.length),C=[],B=0;B<I;B++)C[B]=this.i(B)&D.i(B);return new o(C,this.h&D.h)},i.or=function(D){for(var I=Math.max(this.g.length,D.g.length),C=[],B=0;B<I;B++)C[B]=this.i(B)|D.i(B);return new o(C,this.h|D.h)},i.xor=function(D){for(var I=Math.max(this.g.length,D.g.length),C=[],B=0;B<I;B++)C[B]=this.i(B)^D.i(B);return new o(C,this.h^D.h)};function F(D){for(var I=D.g.length+1,C=[],B=0;B<I;B++)C[B]=D.i(B)<<1|D.i(B-1)>>>31;return new o(C,D.h)}function O(D,I){var C=I>>5;I%=32;for(var B=D.g.length-C,k=[],H=0;H<B;H++)k[H]=0<I?D.i(H+C)>>>I|D.i(H+C+1)<<32-I:D.i(H+C);return new o(k,D.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,U5=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,_d=o}).apply(typeof TF<"u"?TF:typeof self<"u"?self:typeof window<"u"?window:{});var f1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z5,M_,G5,C1,tC,H5,V5,W5;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,U,j){return S==Array.prototype||S==Object.prototype||(S[U]=j.value),S};function t(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof f1=="object"&&f1];for(var U=0;U<S.length;++U){var j=S[U];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var n=t(this);function r(S,U){if(U)e:{var j=n;S=S.split(".");for(var ie=0;ie<S.length-1;ie++){var Oe=S[ie];if(!(Oe in j))break e;j=j[Oe]}S=S[S.length-1],ie=j[S],U=U(ie),U!=ie&&U!=null&&e(j,S,{configurable:!0,writable:!0,value:U})}}function s(S,U){S instanceof String&&(S+="");var j=0,ie=!1,Oe={next:function(){if(!ie&&j<S.length){var Je=j++;return{value:U(Je,S[Je]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return Oe[Symbol.iterator]=function(){return Oe},Oe}r("Array.prototype.values",function(S){return S||function(){return s(this,function(U,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(S){var U=typeof S;return U=U!="object"?U:S?Array.isArray(S)?"array":U:"null",U=="array"||U=="object"&&typeof S.length=="number"}function u(S){var U=typeof S;return U=="object"&&S!=null||U=="function"}function f(S,U,j){return S.call.apply(S.bind,arguments)}function c(S,U,j){if(!S)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var Oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Oe,ie),S.apply(U,Oe)}}return function(){return S.apply(U,arguments)}}function d(S,U,j){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:c,d.apply(null,arguments)}function g(S,U){var j=Array.prototype.slice.call(arguments,1);return function(){var ie=j.slice();return ie.push.apply(ie,arguments),S.apply(this,ie)}}function v(S,U){function j(){}j.prototype=U.prototype,S.aa=U.prototype,S.prototype=new j,S.prototype.constructor=S,S.Qb=function(ie,Oe,Je){for(var Rt=Array(arguments.length-2),Jn=2;Jn<arguments.length;Jn++)Rt[Jn-2]=arguments[Jn];return U.prototype[Oe].apply(ie,Rt)}}function A(S){const U=S.length;if(0<U){const j=Array(U);for(let ie=0;ie<U;ie++)j[ie]=S[ie];return j}return[]}function x(S,U){for(let j=1;j<arguments.length;j++){const ie=arguments[j];if(l(ie)){const Oe=S.length||0,Je=ie.length||0;S.length=Oe+Je;for(let Rt=0;Rt<Je;Rt++)S[Oe+Rt]=ie[Rt]}else S.push(ie)}}class w{constructor(U,j){this.i=U,this.j=j,this.h=0,this.g=null}get(){let U;return 0<this.h?(this.h--,U=this.g,this.g=U.next,U.next=null):U=this.i(),U}}function M(S){return/^[\s\xa0]*$/.test(S)}function b(){var S=a.navigator;return S&&(S=S.userAgent)?S:""}function R(S){return R[" "](S),S}R[" "]=function(){};var F=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function O(S,U,j){for(const ie in S)U.call(j,S[ie],ie,S)}function D(S,U){for(const j in S)U.call(void 0,S[j],j,S)}function I(S){const U={};for(const j in S)U[j]=S[j];return U}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(S,U){let j,ie;for(let Oe=1;Oe<arguments.length;Oe++){ie=arguments[Oe];for(j in ie)S[j]=ie[j];for(let Je=0;Je<C.length;Je++)j=C[Je],Object.prototype.hasOwnProperty.call(ie,j)&&(S[j]=ie[j])}}function k(S){var U=1;S=S.split(":");const j=[];for(;0<U&&S.length;)j.push(S.shift()),U--;return S.length&&j.push(S.join(":")),j}function H(S){a.setTimeout(()=>{throw S},0)}function z(){var S=le;let U=null;return S.g&&(U=S.g,S.g=S.g.next,S.g||(S.h=null),U.next=null),U}class Z{constructor(){this.h=this.g=null}add(U,j){const ie=ue.get();ie.set(U,j),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var ue=new w(()=>new ae,S=>S.reset());class ae{constructor(){this.next=this.g=this.h=null}set(U,j){this.h=U,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,ee=!1,le=new Z,$=()=>{const S=a.Promise.resolve(void 0);ge=()=>{S.then(V)}};var V=()=>{for(var S;S=z();){try{S.h.call(S.g)}catch(j){H(j)}var U=ue;U.j(S),100>U.h&&(U.h++,S.next=U.g,U.g=S)}ee=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(S,U){this.type=S,this.g=this.target=U,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var S=!1,U=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const j=()=>{};a.addEventListener("test",j,U),a.removeEventListener("test",j,U)}catch{}return S}();function he(S,U){if(fe.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var j=this.type=S.type,ie=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=U,U=S.relatedTarget){if(F){e:{try{R(U.nodeName);var Oe=!0;break e}catch{}Oe=!1}Oe||(U=null)}}else j=="mouseover"?U=S.fromElement:j=="mouseout"&&(U=S.toElement);this.relatedTarget=U,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:xe[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&he.aa.h.call(this)}}v(he,fe);var xe={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),be=0;function Xe(S,U,j,ie,Oe){this.listener=S,this.proxy=null,this.src=U,this.type=j,this.capture=!!ie,this.ha=Oe,this.key=++be,this.da=this.fa=!1}function Ye(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function Ne(S){this.src=S,this.g={},this.h=0}Ne.prototype.add=function(S,U,j,ie,Oe){var Je=S.toString();S=this.g[Je],S||(S=this.g[Je]=[],this.h++);var Rt=Ge(S,U,ie,Oe);return-1<Rt?(U=S[Rt],j||(U.fa=!1)):(U=new Xe(U,this.src,Je,!!ie,Oe),U.fa=j,S.push(U)),U};function Ee(S,U){var j=U.type;if(j in S.g){var ie=S.g[j],Oe=Array.prototype.indexOf.call(ie,U,void 0),Je;(Je=0<=Oe)&&Array.prototype.splice.call(ie,Oe,1),Je&&(Ye(U),S.g[j].length==0&&(delete S.g[j],S.h--))}}function Ge(S,U,j,ie){for(var Oe=0;Oe<S.length;++Oe){var Je=S[Oe];if(!Je.da&&Je.listener==U&&Je.capture==!!j&&Je.ha==ie)return Oe}return-1}var se="closure_lm_"+(1e6*Math.random()|0),ht={};function We(S,U,j,ie,Oe){if(Array.isArray(U)){for(var Je=0;Je<U.length;Je++)We(S,U[Je],j,ie,Oe);return null}return j=De(j),S&&S[_e]?S.K(U,j,u(ie)?!!ie.capture:!!ie,Oe):ut(S,U,j,!1,ie,Oe)}function ut(S,U,j,ie,Oe,Je){if(!U)throw Error("Invalid event type");var Rt=u(Oe)?!!Oe.capture:!!Oe,Jn=ye(S);if(Jn||(S[se]=Jn=new Ne(S)),j=Jn.add(U,j,ie,Rt,Je),j.proxy)return j;if(ie=Fe(),j.proxy=ie,ie.src=S,ie.listener=j,S.addEventListener)oe||(Oe=Rt),Oe===void 0&&(Oe=!1),S.addEventListener(U.toString(),ie,Oe);else if(S.attachEvent)S.attachEvent(K(U.toString()),ie);else if(S.addListener&&S.removeListener)S.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return j}function Fe(){function S(j){return U.call(S.src,S.listener,j)}const U=J;return S}function dt(S,U,j,ie,Oe){if(Array.isArray(U))for(var Je=0;Je<U.length;Je++)dt(S,U[Je],j,ie,Oe);else ie=u(ie)?!!ie.capture:!!ie,j=De(j),S&&S[_e]?(S=S.i,U=String(U).toString(),U in S.g&&(Je=S.g[U],j=Ge(Je,j,ie,Oe),-1<j&&(Ye(Je[j]),Array.prototype.splice.call(Je,j,1),Je.length==0&&(delete S.g[U],S.h--)))):S&&(S=ye(S))&&(U=S.g[U.toString()],S=-1,U&&(S=Ge(U,j,ie,Oe)),(j=-1<S?U[S]:null)&&je(j))}function je(S){if(typeof S!="number"&&S&&!S.da){var U=S.src;if(U&&U[_e])Ee(U.i,S);else{var j=S.type,ie=S.proxy;U.removeEventListener?U.removeEventListener(j,ie,S.capture):U.detachEvent?U.detachEvent(K(j),ie):U.addListener&&U.removeListener&&U.removeListener(ie),(j=ye(U))?(Ee(j,S),j.h==0&&(j.src=null,U[se]=null)):Ye(S)}}}function K(S){return S in ht?ht[S]:ht[S]="on"+S}function J(S,U){if(S.da)S=!0;else{U=new he(U,this);var j=S.listener,ie=S.ha||S.src;S.fa&&je(S),S=j.call(ie,U)}return S}function ye(S){return S=S[se],S instanceof Ne?S:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function De(S){return typeof S=="function"?S:(S[Re]||(S[Re]=function(U){return S.handleEvent(U)}),S[Re])}function ke(){Q.call(this),this.i=new Ne(this),this.M=this,this.F=null}v(ke,Q),ke.prototype[_e]=!0,ke.prototype.removeEventListener=function(S,U,j,ie){dt(this,S,U,j,ie)};function qe(S,U){var j,ie=S.F;if(ie)for(j=[];ie;ie=ie.F)j.push(ie);if(S=S.M,ie=U.type||U,typeof U=="string")U=new fe(U,S);else if(U instanceof fe)U.target=U.target||S;else{var Oe=U;U=new fe(ie,S),B(U,Oe)}if(Oe=!0,j)for(var Je=j.length-1;0<=Je;Je--){var Rt=U.g=j[Je];Oe=nt(Rt,ie,!0,U)&&Oe}if(Rt=U.g=S,Oe=nt(Rt,ie,!0,U)&&Oe,Oe=nt(Rt,ie,!1,U)&&Oe,j)for(Je=0;Je<j.length;Je++)Rt=U.g=j[Je],Oe=nt(Rt,ie,!1,U)&&Oe}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var S=this.i,U;for(U in S.g){for(var j=S.g[U],ie=0;ie<j.length;ie++)Ye(j[ie]);delete S.g[U],S.h--}}this.F=null},ke.prototype.K=function(S,U,j,ie){return this.i.add(String(S),U,!1,j,ie)},ke.prototype.L=function(S,U,j,ie){return this.i.add(String(S),U,!0,j,ie)};function nt(S,U,j,ie){if(U=S.i.g[String(U)],!U)return!0;U=U.concat();for(var Oe=!0,Je=0;Je<U.length;++Je){var Rt=U[Je];if(Rt&&!Rt.da&&Rt.capture==j){var Jn=Rt.listener,yi=Rt.ha||Rt.src;Rt.fa&&Ee(S.i,Rt),Oe=Jn.call(yi,ie)!==!1&&Oe}}return Oe&&!ie.defaultPrevented}function lt(S,U,j){if(typeof S=="function")j&&(S=d(S,j));else if(S&&typeof S.handleEvent=="function")S=d(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(U)?-1:a.setTimeout(S,U||0)}function Ot(S){S.g=lt(()=>{S.g=null,S.i&&(S.i=!1,Ot(S))},S.l);const U=S.h;S.h=null,S.m.apply(null,U)}class rt extends Q{constructor(U,j){super(),this.m=U,this.l=j,this.h=null,this.i=!1,this.g=null}j(U){this.h=arguments,this.g?this.i=!0:Ot(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xt(S){Q.call(this),this.h=S,this.g={}}v(xt,Q);var yt=[];function gt(S){O(S.g,function(U,j){this.g.hasOwnProperty(j)&&je(U)},S),S.g={}}xt.prototype.N=function(){xt.aa.N.call(this),gt(this)},xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var it=a.JSON.stringify,kt=a.JSON.parse,Bt=class{stringify(S){return a.JSON.stringify(S,void 0)}parse(S){return a.JSON.parse(S,void 0)}};function Qt(){}Qt.prototype.h=null;function Te(S){return S.h||(S.h=S.i())}function Ce(){}var Le={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function at(){fe.call(this,"d")}v(at,fe);function vt(){fe.call(this,"c")}v(vt,fe);var ft={},qt=null;function ln(){return qt=qt||new ke}ft.La="serverreachability";function Kt(S){fe.call(this,ft.La,S)}v(Kt,fe);function Yt(S){const U=ln();qe(U,new Kt(U))}ft.STAT_EVENT="statevent";function Wn(S,U){fe.call(this,ft.STAT_EVENT,S),this.stat=U}v(Wn,fe);function mn(S){const U=ln();qe(U,new Wn(U,S))}ft.Ma="timingevent";function fr(S,U){fe.call(this,ft.Ma,S),this.size=U}v(fr,fe);function yr(S,U){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){S()},U)}function _r(){this.g=!0}_r.prototype.xa=function(){this.g=!1};function Or(S,U,j,ie,Oe,Je){S.info(function(){if(S.g)if(Je)for(var Rt="",Jn=Je.split("&"),yi=0;yi<Jn.length;yi++){var jn=Jn[yi].split("=");if(1<jn.length){var xi=jn[0];jn=jn[1];var or=xi.split("_");Rt=2<=or.length&&or[1]=="type"?Rt+(xi+"="+jn+"&"):Rt+(xi+"=redacted&")}}else Rt=null;else Rt=Je;return"XMLHTTP REQ ("+ie+") [attempt "+Oe+"]: "+U+`
`+j+`
`+Rt})}function Gr(S,U,j,ie,Oe,Je,Rt){S.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Oe+"]: "+U+`
`+j+`
`+Je+" "+Rt})}function sr(S,U,j,ie){S.info(function(){return"XMLHTTP TEXT ("+U+"): "+kr(S,j)+(ie?" "+ie:"")})}function cn(S,U){S.info(function(){return"TIMEOUT: "+U})}_r.prototype.info=function(){};function kr(S,U){if(!S.g)return U;if(!U)return null;try{var j=JSON.parse(U);if(j){for(S=0;S<j.length;S++)if(Array.isArray(j[S])){var ie=j[S];if(!(2>ie.length)){var Oe=ie[1];if(Array.isArray(Oe)&&!(1>Oe.length)){var Je=Oe[0];if(Je!="noop"&&Je!="stop"&&Je!="close")for(var Rt=1;Rt<Oe.length;Rt++)Oe[Rt]=""}}}}return it(j)}catch{return U}}var oi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},X={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ne;function Se(){}v(Se,Qt),Se.prototype.g=function(){return new XMLHttpRequest},Se.prototype.i=function(){return{}},ne=new Se;function Ue(S,U,j,ie){this.j=S,this.i=U,this.l=j,this.R=ie||1,this.U=new xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}var Ze={},Et={};function q(S,U,j){S.L=1,S.v=gi(Ut(U)),S.m=j,S.P=!0,de(S,null)}function de(S,U){S.F=Date.now(),te(S),S.A=Ut(S.v);var j=S.A,ie=S.R;Array.isArray(ie)||(ie=[String(ie)]),cs(j.i,"t",ie),S.C=0,j=S.j.J,S.h=new Qe,S.g=gu(S.j,j?U:null,!S.m),0<S.O&&(S.M=new rt(d(S.Y,S,S.g),S.O)),U=S.U,j=S.g,ie=S.ca;var Oe="readystatechange";Array.isArray(Oe)||(Oe&&(yt[0]=Oe.toString()),Oe=yt);for(var Je=0;Je<Oe.length;Je++){var Rt=We(j,Oe[Je],ie||U.handleEvent,!1,U.h||U);if(!Rt)break;U.g[Rt.key]=Rt}U=S.H?I(S.H):{},S.m?(S.u||(S.u="POST"),U["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,U)):(S.u="GET",S.g.ea(S.A,S.u,null,U)),Yt(),Or(S.i,S.u,S.A,S.l,S.R,S.m)}Ue.prototype.ca=function(S){S=S.target;const U=this.M;U&&xr(S)==3?U.j():this.Y(S)},Ue.prototype.Y=function(S){try{if(S==this.g)e:{const or=xr(this.g);var U=this.g.Ba();const Vr=this.g.Z();if(!(3>or)&&(or!=3||this.g&&(this.h.h||this.g.oa()||ei(this.g)))){this.J||or!=4||U==7||(U==8||0>=Vr?Yt(3):Yt(2)),$e(this);var j=this.g.Z();this.X=j;t:if(Ae(this)){var ie=ei(this.g);S="";var Oe=ie.length,Je=xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ct(this),et(this);var Rt="";break t}this.h.i=new a.TextDecoder}for(U=0;U<Oe;U++)this.h.h=!0,S+=this.h.i.decode(ie[U],{stream:!(Je&&U==Oe-1)});ie.length=0,this.h.g+=S,this.C=0,Rt=this.h.g}else Rt=this.g.oa();if(this.o=j==200,Gr(this.i,this.u,this.A,this.l,this.R,or,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Jn,yi=this.g;if((Jn=yi.g?yi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(Jn)){var jn=Jn;break t}}jn=null}if(j=jn)sr(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mt(this,j);else{this.o=!1,this.s=3,mn(12),ct(this),et(this);break e}}if(this.P){j=!0;let qn;for(;!this.J&&this.C<Rt.length;)if(qn=we(this,Rt),qn==Et){or==4&&(this.s=4,mn(14),j=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==Ze){this.s=4,mn(15),sr(this.i,this.l,Rt,"[Invalid Chunk]"),j=!1;break}else sr(this.i,this.l,qn,null),Mt(this,qn);if(Ae(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),or!=4||Rt.length!=0||this.h.h||(this.s=1,mn(16),j=!1),this.o=this.o&&j,!j)sr(this.i,this.l,Rt,"[Invalid Chunked Response]"),ct(this),et(this);else if(0<Rt.length&&!this.W){this.W=!0;var xi=this.j;xi.g==this&&xi.ba&&!xi.M&&(xi.j.info("Great, no buffering proxy detected. Bytes received: "+Rt.length),po(xi),xi.M=!0,mn(11))}}else sr(this.i,this.l,Rt,null),Mt(this,Rt);or==4&&ct(this),this.o&&!this.J&&(or==4?pu(this.j,this):(this.o=!1,te(this)))}else ea(this.g),j==400&&0<Rt.indexOf("Unknown SID")?(this.s=3,mn(12)):(this.s=0,mn(13)),ct(this),et(this)}}}catch{}finally{}};function Ae(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function we(S,U){var j=S.C,ie=U.indexOf(`
`,j);return ie==-1?Et:(j=Number(U.substring(j,ie)),isNaN(j)?Ze:(ie+=1,ie+j>U.length?Et:(U=U.slice(ie,ie+j),S.C=ie+j,U)))}Ue.prototype.cancel=function(){this.J=!0,ct(this)};function te(S){S.S=Date.now()+S.I,st(S,S.I)}function st(S,U){if(S.B!=null)throw Error("WatchDog timer not null");S.B=yr(d(S.ba,S),U)}function $e(S){S.B&&(a.clearTimeout(S.B),S.B=null)}Ue.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(cn(this.i,this.A),this.L!=2&&(Yt(),mn(17)),ct(this),this.s=2,et(this)):st(this,this.S-S)};function et(S){S.j.G==0||S.J||pu(S.j,S)}function ct(S){$e(S);var U=S.M;U&&typeof U.ma=="function"&&U.ma(),S.M=null,gt(S.U),S.g&&(U=S.g,S.g=null,U.abort(),U.ma())}function Mt(S,U){try{var j=S.j;if(j.G!=0&&(j.g==S||Vt(j.h,S))){if(!S.K&&Vt(j.h,S)&&j.G==3){try{var ie=j.Da.g.parse(U)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Oe=ie;if(Oe[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<S.F)Ya(j),qs(j);else break e;du(j),mn(18)}}else j.za=Oe[1],0<j.za-j.T&&37500>Oe[2]&&j.F&&j.v==0&&!j.C&&(j.C=yr(d(j.Za,j),6e3));if(1>=zt(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else Sa(j,11)}else if((S.K||j.g==S)&&Ya(j),!M(U))for(Oe=j.Da.g.parse(U),U=0;U<Oe.length;U++){let jn=Oe[U];if(j.T=jn[0],jn=jn[1],j.G==2)if(jn[0]=="c"){j.K=jn[1],j.ia=jn[2];const xi=jn[3];xi!=null&&(j.la=xi,j.j.info("VER="+j.la));const or=jn[4];or!=null&&(j.Aa=or,j.j.info("SVER="+j.Aa));const Vr=jn[5];Vr!=null&&typeof Vr=="number"&&0<Vr&&(ie=1.5*Vr,j.L=ie,j.j.info("backChannelRequestTimeoutMs_="+ie)),ie=j;const qn=S.g;if(qn){const na=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var Je=ie.h;Je.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(Je.j=Je.l,Je.g=new Set,Je.h&&(un(Je,Je.h),Je.h=null))}if(ie.D){const ds=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;ds&&(ie.ya=ds,hn(ie.I,ie.D,ds))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-S.F,j.j.info("Handshake RTT: "+j.R+"ms")),ie=j;var Rt=S;if(ie.qa=xc(ie,ie.J?ie.ia:null,ie.W),Rt.K){Nt(ie.h,Rt);var Jn=Rt,yi=ie.L;yi&&(Jn.I=yi),Jn.B&&($e(Jn),te(Jn)),ie.g=Rt}else Ka(ie);0<j.i.length&&Hr(j)}else jn[0]!="stop"&&jn[0]!="close"||Sa(j,7);else j.G==3&&(jn[0]=="stop"||jn[0]=="close"?jn[0]=="stop"?Sa(j,7):ti(j):jn[0]!="noop"&&j.l&&j.l.ta(jn),j.v=0)}}Yt(4)}catch{}}var Dt=class{constructor(S,U){this.g=S,this.map=U}};function wt(S){this.l=S||10,a.PerformanceNavigationTiming?(S=a.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tt(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function zt(S){return S.h?1:S.g?S.g.size:0}function Vt(S,U){return S.h?S.h==U:S.g?S.g.has(U):!1}function un(S,U){S.g?S.g.add(U):S.h=U}function Nt(S,U){S.h&&S.h==U?S.h=null:S.g&&S.g.has(U)&&S.g.delete(U)}wt.prototype.cancel=function(){if(this.i=Lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function Lt(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let U=S.i;for(const j of S.g.values())U=U.concat(j.D);return U}return A(S.i)}function Sn(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(l(S)){for(var U=[],j=S.length,ie=0;ie<j;ie++)U.push(S[ie]);return U}U=[],j=0;for(ie in S)U[j++]=S[ie];return U}function nn(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(l(S)||typeof S=="string"){var U=[];S=S.length;for(var j=0;j<S;j++)U.push(j);return U}U=[],j=0;for(const ie in S)U[j++]=ie;return U}}}function In(S,U){if(S.forEach&&typeof S.forEach=="function")S.forEach(U,void 0);else if(l(S)||typeof S=="string")Array.prototype.forEach.call(S,U,void 0);else for(var j=nn(S),ie=Sn(S),Oe=ie.length,Je=0;Je<Oe;Je++)U.call(void 0,ie[Je],j&&j[Je],S)}var An=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vn(S,U){if(S){S=S.split("&");for(var j=0;j<S.length;j++){var ie=S[j].indexOf("="),Oe=null;if(0<=ie){var Je=S[j].substring(0,ie);Oe=S[j].substring(ie+1)}else Je=S[j];U(Je,Oe?decodeURIComponent(Oe.replace(/\+/g," ")):"")}}}function wn(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof wn){this.h=S.h,En(this,S.j),this.o=S.o,this.g=S.g,Yn(this,S.s),this.l=S.l;var U=S.i,j=new Ji;j.i=U.i,U.g&&(j.g=new Map(U.g),j.h=U.h),Mn(this,j),this.m=S.m}else S&&(U=String(S).match(An))?(this.h=!1,En(this,U[1]||"",!0),this.o=dn(U[2]||""),this.g=dn(U[3]||"",!0),Yn(this,U[4]),this.l=dn(U[5]||"",!0),Mn(this,U[6]||"",!0),this.m=dn(U[7]||"")):(this.h=!1,this.i=new Ji(null,this.h))}wn.prototype.toString=function(){var S=[],U=this.j;U&&S.push(us(U,qa,!0),":");var j=this.g;return(j||U=="file")&&(S.push("//"),(U=this.o)&&S.push(us(U,qa,!0),"@"),S.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&S.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&S.push("/"),S.push(us(j,j.charAt(0)=="/"?Do:Fl,!0))),(j=this.i.toString())&&S.push("?",j),(j=this.m)&&S.push("#",us(j,Hs)),S.join("")};function Ut(S){return new wn(S)}function En(S,U,j){S.j=j?dn(U,!0):U,S.j&&(S.j=S.j.replace(/:$/,""))}function Yn(S,U){if(U){if(U=Number(U),isNaN(U)||0>U)throw Error("Bad port number "+U);S.s=U}else S.s=null}function Mn(S,U,j){U instanceof Ji?(S.i=U,Vs(S.i,S.h)):(j||(U=us(U,Xa)),S.i=new Ji(U,S.h))}function hn(S,U,j){S.i.set(U,j)}function gi(S){return hn(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function dn(S,U){return S?U?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function us(S,U,j){return typeof S=="string"?(S=encodeURI(S).replace(U,wa),j&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function wa(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var qa=/[#\/\?@]/g,Fl=/[#\?:]/g,Do=/[#\?]/g,Xa=/[#\?@]/g,Hs=/#/g;function Ji(S,U){this.h=this.g=null,this.i=S||null,this.j=!!U}function Cr(S){S.g||(S.g=new Map,S.h=0,S.i&&Vn(S.i,function(U,j){S.add(decodeURIComponent(U.replace(/\+/g," ")),j)}))}i=Ji.prototype,i.add=function(S,U){Cr(this),this.i=null,S=Ki(this,S);var j=this.g.get(S);return j||this.g.set(S,j=[]),j.push(U),this.h+=1,this};function xn(S,U){Cr(S),U=Ki(S,U),S.g.has(U)&&(S.i=null,S.h-=S.g.get(U).length,S.g.delete(U))}function Ms(S,U){return Cr(S),U=Ki(S,U),S.g.has(U)}i.forEach=function(S,U){Cr(this),this.g.forEach(function(j,ie){j.forEach(function(Oe){S.call(U,Oe,ie,this)},this)},this)},i.na=function(){Cr(this);const S=Array.from(this.g.values()),U=Array.from(this.g.keys()),j=[];for(let ie=0;ie<U.length;ie++){const Oe=S[ie];for(let Je=0;Je<Oe.length;Je++)j.push(U[ie])}return j},i.V=function(S){Cr(this);let U=[];if(typeof S=="string")Ms(this,S)&&(U=U.concat(this.g.get(Ki(this,S))));else{S=Array.from(this.g.values());for(let j=0;j<S.length;j++)U=U.concat(S[j])}return U},i.set=function(S,U){return Cr(this),this.i=null,S=Ki(this,S),Ms(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[U]),this.h+=1,this},i.get=function(S,U){return S?(S=this.V(S),0<S.length?String(S[0]):U):U};function cs(S,U,j){xn(S,U),0<j.length&&(S.i=null,S.g.set(Ki(S,U),A(j)),S.h+=j.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],U=Array.from(this.g.keys());for(var j=0;j<U.length;j++){var ie=U[j];const Je=encodeURIComponent(String(ie)),Rt=this.V(ie);for(ie=0;ie<Rt.length;ie++){var Oe=Je;Rt[ie]!==""&&(Oe+="="+encodeURIComponent(String(Rt[ie]))),S.push(Oe)}}return this.i=S.join("&")};function Ki(S,U){return U=String(U),S.j&&(U=U.toLowerCase()),U}function Vs(S,U){U&&!S.j&&(Cr(S),S.i=null,S.g.forEach(function(j,ie){var Oe=ie.toLowerCase();ie!=Oe&&(xn(this,ie),cs(this,Oe,j))},S)),S.j=U}function vc(S,U){const j=new _r;if(a.Image){const ie=new Image;ie.onload=g(_i,j,"TestLoadImage: loaded",!0,U,ie),ie.onerror=g(_i,j,"TestLoadImage: error",!1,U,ie),ie.onabort=g(_i,j,"TestLoadImage: abort",!1,U,ie),ie.ontimeout=g(_i,j,"TestLoadImage: timeout",!1,U,ie),a.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=S}else U(!1)}function Rr(S,U){const j=new _r,ie=new AbortController,Oe=setTimeout(()=>{ie.abort(),_i(j,"TestPingServer: timeout",!1,U)},1e4);fetch(S,{signal:ie.signal}).then(Je=>{clearTimeout(Oe),Je.ok?_i(j,"TestPingServer: ok",!0,U):_i(j,"TestPingServer: server error",!1,U)}).catch(()=>{clearTimeout(Oe),_i(j,"TestPingServer: error",!1,U)})}function _i(S,U,j,ie,Oe){try{Oe&&(Oe.onload=null,Oe.onerror=null,Oe.onabort=null,Oe.ontimeout=null),ie(j)}catch{}}function yc(){this.g=new Bt}function ki(S,U,j){const ie=j||"";try{In(S,function(Oe,Je){let Rt=Oe;u(Oe)&&(Rt=it(Oe)),U.push(ie+Je+"="+encodeURIComponent(Rt))})}catch(Oe){throw U.push(ie+"type="+encodeURIComponent("_badmap")),Oe}}function ho(S){this.l=S.Ub||null,this.j=S.eb||!1}v(ho,Qt),ho.prototype.g=function(){return new fo(this.l,this.j)},ho.prototype.i=function(S){return function(){return S}}({});function fo(S,U){ke.call(this),this.D=S,this.o=U,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(fo,ke),i=fo.prototype,i.open=function(S,U){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=U,this.readyState=1,Ws(this)},i.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const U={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(U.body=S),(this.D||a).fetch(new Request(this.A,U)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},i.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hs(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function hs(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}i.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var U=S.value?S.value:new Uint8Array(0);(U=this.v.decode(U,{stream:!S.done}))&&(this.response=this.responseText+=U)}S.done?bs(this):Ws(this),this.readyState==3&&hs(this)}},i.Ra=function(S){this.g&&(this.response=this.responseText=S,bs(this))},i.Qa=function(S){this.g&&(this.response=S,bs(this))},i.ga=function(){this.g&&bs(this)};function bs(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Ws(S)}i.setRequestHeader=function(S,U){this.u.append(S,U)},i.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],U=this.h.entries();for(var j=U.next();!j.done;)j=j.value,S.push(j[0]+": "+j[1]),j=U.next();return S.join(`\r
`)};function Ws(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function ai(S){let U="";return O(S,function(j,ie){U+=ie,U+=":",U+=j,U+=`\r
`}),U}function $r(S,U,j){e:{for(ie in j){var ie=!1;break e}ie=!0}ie||(j=ai(j),typeof S=="string"?j!=null&&encodeURIComponent(String(j)):hn(S,U,j))}function $n(S){ke.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v($n,ke);var js=/^https?$/i,Ja=["POST","PUT"];i=$n.prototype,i.Ha=function(S){this.J=S},i.ea=function(S,U,j,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);U=U?U.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ne.g(),this.v=this.o?Te(this.o):Te(ne),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(U,String(S),!0),this.B=!1}catch(Je){Zo(this,Je);return}if(S=j||"",j=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Oe in ie)j.set(Oe,ie[Oe]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Je of ie.keys())j.set(Je,ie.get(Je));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(j.keys()).find(Je=>Je.toLowerCase()=="content-type"),Oe=a.FormData&&S instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ja,U,void 0))||ie||Oe||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Je,Rt]of j)this.g.setRequestHeader(Je,Rt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bo(this),this.u=!0,this.g.send(S),this.u=!1}catch(Je){Zo(this,Je)}};function Zo(S,U){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=U,S.m=5,bi(S),Ci(S)}function bi(S){S.A||(S.A=!0,qe(S,"complete"),qe(S,"error"))}i.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,qe(this,"complete"),qe(this,"abort"),Ci(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ci(this,!0)),$n.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?$o(this):this.bb())},i.bb=function(){$o(this)};function $o(S){if(S.h&&typeof o<"u"&&(!S.v[1]||xr(S)!=4||S.Z()!=2)){if(S.u&&xr(S)==4)lt(S.Ea,0,S);else if(qe(S,"readystatechange"),xr(S)==4){S.h=!1;try{const Rt=S.Z();e:switch(Rt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var U=!0;break e;default:U=!1}var j;if(!(j=U)){var ie;if(ie=Rt===0){var Oe=String(S.D).match(An)[1]||null;!Oe&&a.self&&a.self.location&&(Oe=a.self.location.protocol.slice(0,-1)),ie=!js.test(Oe?Oe.toLowerCase():"")}j=ie}if(j)qe(S,"complete"),qe(S,"success");else{S.m=6;try{var Je=2<xr(S)?S.g.statusText:""}catch{Je=""}S.l=Je+" ["+S.Z()+"]",bi(S)}}finally{Ci(S)}}}}function Ci(S,U){if(S.g){Bo(S);const j=S.g,ie=S.v[0]?()=>{}:null;S.g=null,S.v=null,U||qe(S,"ready");try{j.onreadystatechange=ie}catch{}}}function Bo(S){S.I&&(a.clearTimeout(S.I),S.I=null)}i.isActive=function(){return!!this.g};function xr(S){return S.g?S.g.readyState:0}i.Z=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(S){if(this.g){var U=this.g.responseText;return S&&U.indexOf(S)==0&&(U=U.substring(S.length)),kt(U)}};function ei(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function ea(S){const U={};S=(S.g&&2<=xr(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<S.length;ie++){if(M(S[ie]))continue;var j=k(S[ie]);const Oe=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const Je=U[Oe]||[];U[Oe]=Je,Je.push(j)}D(U,function(ie){return ie.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(S,U,j){return j&&j.internalChannelParams&&j.internalChannelParams[S]||U}function Lo(S){this.Aa=0,this.i=[],this.j=new _r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vi("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vi("baseRetryDelayMs",5e3,S),this.cb=vi("retryDelaySeedMs",1e4,S),this.Wa=vi("forwardChannelMaxRetries",2,S),this.wa=vi("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new wt(S&&S.concurrentRequestLimit),this.Da=new yc,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Lo.prototype,i.la=8,i.G=1,i.connect=function(S,U,j,ie){mn(0),this.W=S,this.H=U||{},j&&ie!==void 0&&(this.H.OSID=j,this.H.OAID=ie),this.F=this.X,this.I=xc(this,null,this.W),Hr(this)};function ti(S){if(Xr(S),S.G==3){var U=S.U++,j=Ut(S.I);if(hn(j,"SID",S.K),hn(j,"RID",U),hn(j,"TYPE","terminate"),li(S,j),U=new Ue(S,S.j,U),U.L=2,U.v=gi(Ut(j)),j=!1,a.navigator&&a.navigator.sendBeacon)try{j=a.navigator.sendBeacon(U.v.toString(),"")}catch{}!j&&a.Image&&(new Image().src=U.v,j=!0),j||(U.g=gu(U.j,null),U.g.ea(U.v)),U.F=Date.now(),te(U)}Vh(S)}function qs(S){S.g&&(po(S),S.g.cancel(),S.g=null)}function Xr(S){qs(S),S.u&&(a.clearTimeout(S.u),S.u=null),Ya(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&a.clearTimeout(S.s),S.s=null)}function Hr(S){if(!Tt(S.h)&&!S.s){S.s=!0;var U=S.Ga;ge||$(),ee||(ge(),ee=!0),le.add(U,S),S.B=0}}function Jr(S,U){return zt(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=U.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=yr(d(S.Ga,S,U),mu(S,S.B)),S.B++,!0)}i.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const Oe=new Ue(this,this.j,S);let Je=this.o;if(this.S&&(Je?(Je=I(Je),B(Je,this.S)):Je=this.S),this.m!==null||this.O||(Oe.H=Je,Je=null),this.P)e:{for(var U=0,j=0;j<this.i.length;j++){t:{var ie=this.i[j];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(U+=ie,4096<U){U=j;break e}if(U===4096||j===this.i.length-1){U=j+1;break e}}U=1e3}else U=1e3;U=Cs(this,Oe,U),j=Ut(this.I),hn(j,"RID",S),hn(j,"CVER",22),this.D&&hn(j,"X-HTTP-Session-Id",this.D),li(this,j),Je&&(this.O?U="headers="+encodeURIComponent(String(ai(Je)))+"&"+U:this.m&&$r(j,this.m,Je)),un(this.h,Oe),this.Ua&&hn(j,"TYPE","init"),this.P?(hn(j,"$req",U),hn(j,"SID","null"),Oe.T=!0,q(Oe,j,null)):q(Oe,j,U),this.G=2}}else this.G==3&&(S?Ir(this,S):this.i.length==0||Tt(this.h)||Ir(this))};function Ir(S,U){var j;U?j=U.l:j=S.U++;const ie=Ut(S.I);hn(ie,"SID",S.K),hn(ie,"RID",j),hn(ie,"AID",S.T),li(S,ie),S.m&&S.o&&$r(ie,S.m,S.o),j=new Ue(S,S.j,j,S.B+1),S.m===null&&(j.H=S.o),U&&(S.i=U.D.concat(S.i)),U=Cs(S,j,1e3),j.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),un(S.h,j),q(j,ie,U)}function li(S,U){S.H&&O(S.H,function(j,ie){hn(U,ie,j)}),S.l&&In({},function(j,ie){hn(U,ie,j)})}function Cs(S,U,j){j=Math.min(S.i.length,j);var ie=S.l?d(S.l.Na,S.l,S):null;e:{var Oe=S.i;let Je=-1;for(;;){const Rt=["count="+j];Je==-1?0<j?(Je=Oe[0].g,Rt.push("ofs="+Je)):Je=0:Rt.push("ofs="+Je);let Jn=!0;for(let yi=0;yi<j;yi++){let jn=Oe[yi].g;const xi=Oe[yi].map;if(jn-=Je,0>jn)Je=Math.max(0,Oe[yi].g-100),Jn=!1;else try{ki(xi,Rt,"req"+jn+"_")}catch{ie&&ie(xi)}}if(Jn){ie=Rt.join("&");break e}}}return S=S.i.splice(0,j),U.D=S,ie}function Ka(S){if(!S.g&&!S.u){S.Y=1;var U=S.Fa;ge||$(),ee||(ge(),ee=!0),le.add(U,S),S.v=0}}function du(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=yr(d(S.Fa,S),mu(S,S.v)),S.v++,!0)}i.Fa=function(){if(this.u=null,ta(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=yr(d(this.ab,this),S)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mn(10),qs(this),ta(this))};function po(S){S.A!=null&&(a.clearTimeout(S.A),S.A=null)}function ta(S){S.g=new Ue(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var U=Ut(S.qa);hn(U,"RID","rpc"),hn(U,"SID",S.K),hn(U,"AID",S.T),hn(U,"CI",S.F?"0":"1"),!S.F&&S.ja&&hn(U,"TO",S.ja),hn(U,"TYPE","xmlhttp"),li(S,U),S.m&&S.o&&$r(U,S.m,S.o),S.L&&(S.g.I=S.L);var j=S.g;S=S.ia,j.L=1,j.v=gi(Ut(U)),j.m=null,j.P=!0,de(j,S)}i.Za=function(){this.C!=null&&(this.C=null,qs(this),du(this),mn(19))};function Ya(S){S.C!=null&&(a.clearTimeout(S.C),S.C=null)}function pu(S,U){var j=null;if(S.g==U){Ya(S),po(S),S.g=null;var ie=2}else if(Vt(S.h,U))j=U.D,Nt(S.h,U),ie=1;else return;if(S.G!=0){if(U.o)if(ie==1){j=U.m?U.m.length:0,U=Date.now()-U.F;var Oe=S.B;ie=ln(),qe(ie,new fr(ie,j)),Hr(S)}else Ka(S);else if(Oe=U.s,Oe==3||Oe==0&&0<U.X||!(ie==1&&Jr(S,U)||ie==2&&du(S)))switch(j&&0<j.length&&(U=S.h,U.i=U.i.concat(j)),Oe){case 1:Sa(S,5);break;case 4:Sa(S,10);break;case 3:Sa(S,6);break;default:Sa(S,2)}}}function mu(S,U){let j=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(j*=2),j*U}function Sa(S,U){if(S.j.info("Error code "+U),U==2){var j=d(S.fb,S),ie=S.Xa;const Oe=!ie;ie=new wn(ie||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||En(ie,"https"),gi(ie),Oe?vc(ie.toString(),j):Rr(ie.toString(),j)}else mn(2);S.G=0,S.l&&S.l.sa(U),Vh(S),Xr(S)}i.fb=function(S){S?(this.j.info("Successfully pinged google.com"),mn(2)):(this.j.info("Failed to ping google.com"),mn(1))};function Vh(S){if(S.G=0,S.ka=[],S.l){const U=Lt(S.h);(U.length!=0||S.i.length!=0)&&(x(S.ka,U),x(S.ka,S.i),S.h.i.length=0,A(S.i),S.i.length=0),S.l.ra()}}function xc(S,U,j){var ie=j instanceof wn?Ut(j):new wn(j);if(ie.g!="")U&&(ie.g=U+"."+ie.g),Yn(ie,ie.s);else{var Oe=a.location;ie=Oe.protocol,U=U?U+"."+Oe.hostname:Oe.hostname,Oe=+Oe.port;var Je=new wn(null);ie&&En(Je,ie),U&&(Je.g=U),Oe&&Yn(Je,Oe),j&&(Je.l=j),ie=Je}return j=S.D,U=S.ya,j&&U&&hn(ie,j,U),hn(ie,"VER",S.la),li(S,ie),ie}function gu(S,U,j){if(U&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return U=S.Ca&&!S.pa?new $n(new ho({eb:j})):new $n(S.pa),U.Ha(S.J),U}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ac(){}i=Ac.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function _u(){}_u.prototype.g=function(S,U){return new fs(S,U)};function fs(S,U){ke.call(this),this.g=new Lo(U),this.l=S,this.h=U&&U.messageUrlParams||null,S=U&&U.messageHeaders||null,U&&U.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=U&&U.initMessageHeaders||null,U&&U.messageContentType&&(S?S["X-WebChannel-Content-Type"]=U.messageContentType:S={"X-WebChannel-Content-Type":U.messageContentType}),U&&U.va&&(S?S["X-WebChannel-Client-Profile"]=U.va:S={"X-WebChannel-Client-Profile":U.va}),this.g.S=S,(S=U&&U.Sb)&&!M(S)&&(this.g.m=S),this.v=U&&U.supportsCrossDomainXhr||!1,this.u=U&&U.sendRawJson||!1,(U=U&&U.httpSessionIdParam)&&!M(U)&&(this.g.D=U,S=this.h,S!==null&&U in S&&(S=this.h,U in S&&delete S[U])),this.j=new Rs(this)}v(fs,ke),fs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fs.prototype.close=function(){ti(this.g)},fs.prototype.o=function(S){var U=this.g;if(typeof S=="string"){var j={};j.__data__=S,S=j}else this.u&&(j={},j.__data__=it(S),S=j);U.i.push(new Dt(U.Ya++,S)),U.G==3&&Hr(U)},fs.prototype.N=function(){this.g.l=null,delete this.j,ti(this.g),delete this.g,fs.aa.N.call(this)};function wc(S){at.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var U=S.__sm__;if(U){e:{for(const j in U){S=j;break e}S=void 0}(this.i=S)&&(S=this.i,U=U!==null&&S in U?U[S]:void 0),this.data=U}else this.data=S}v(wc,at);function Qa(){vt.call(this),this.status=1}v(Qa,vt);function Rs(S){this.g=S}v(Rs,Ac),Rs.prototype.ua=function(){qe(this.g,"a")},Rs.prototype.ta=function(S){qe(this.g,new wc(S))},Rs.prototype.sa=function(S){qe(this.g,new Qa)},Rs.prototype.ra=function(){qe(this.g,"b")},_u.prototype.createWebChannel=_u.prototype.g,fs.prototype.send=fs.prototype.o,fs.prototype.open=fs.prototype.m,fs.prototype.close=fs.prototype.close,W5=function(){return new _u},V5=function(){return ln()},H5=ft,tC={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oi.NO_ERROR=0,oi.TIMEOUT=8,oi.HTTP_ERROR=6,C1=oi,X.COMPLETE="complete",G5=X,Ce.EventType=Le,Le.OPEN="a",Le.CLOSE="b",Le.ERROR="c",Le.MESSAGE="d",ke.prototype.listen=ke.prototype.K,M_=Ce,$n.prototype.listenOnce=$n.prototype.L,$n.prototype.getLastError=$n.prototype.Ka,$n.prototype.getLastErrorCode=$n.prototype.Ba,$n.prototype.getStatus=$n.prototype.Z,$n.prototype.getResponseJson=$n.prototype.Oa,$n.prototype.getResponseText=$n.prototype.oa,$n.prototype.send=$n.prototype.ea,$n.prototype.setWithCredentials=$n.prototype.Ha,z5=$n}).apply(typeof f1<"u"?f1:typeof self<"u"?self:typeof window<"u"?window:{});const MF="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}no.UNAUTHENTICATED=new no(null),no.GOOGLE_CREDENTIALS=new no("google-credentials-uid"),no.FIRST_PARTY=new no("first-party-uid"),no.MOCK_USER=new no("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $m="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new B5("@firebase/firestore");function Qp(){return Rd.logLevel}function $t(i,...e){if(Rd.logLevel<=hr.DEBUG){const t=e.map(vR);Rd.debug(`Firestore (${$m}): ${i}`,...t)}}function mc(i,...e){if(Rd.logLevel<=hr.ERROR){const t=e.map(vR);Rd.error(`Firestore (${$m}): ${i}`,...t)}}function Lm(i,...e){if(Rd.logLevel<=hr.WARN){const t=e.map(vR);Rd.warn(`Firestore (${$m}): ${i}`,...t)}}function vR(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(i="Unexpected state"){const e=`FIRESTORE (${$m}) INTERNAL ASSERTION FAILED: `+i;throw mc(e),new Error(e)}function Tr(i,e){i||Rn()}function kn(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vn extends Zm{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cie{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(no.UNAUTHENTICATED))}shutdown(){}}class hie{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fie{constructor(e){this.t=e,this.currentUser=no.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tr(this.o===void 0);let n=this.i;const r=l=>this.i!==n?(n=this.i,t(l)):Promise.resolve();let s=new Sh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sh,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{$t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($t("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sh)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?($t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Tr(typeof n.accessToken=="string"),new j5(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tr(e===null||typeof e=="string"),new no(e)}}class die{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=no.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class pie{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new die(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(no.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mie{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gie{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Tr(this.o===void 0);const n=s=>{s.error!=null&&$t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,$t("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const r=s=>{$t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):$t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tr(typeof t.token=="string"),this.R=t.token,new mie(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ie(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=_ie(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%e.length))}return n}}function tr(i,e){return i<e?-1:i>e?1:0}function Fm(i,e,t){return i.length===e.length&&i.every((n,r)=>t(n,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{static now(){return ss.fromMillis(Date.now())}static fromDate(e){return ss.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ss(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new vn(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new vn(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new vn(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vn(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tr(this.nanoseconds,e.nanoseconds):tr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{static fromTimestamp(e){return new Pn(e)}static min(){return new Pn(new ss(0,0))}static max(){return new Pn(new ss(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t,n){t===void 0?t=0:t>e.length&&Rn(),n===void 0?n=e.length-t:n>e.length-t&&Rn(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return L0.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof L0?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ti extends L0{construct(e,t,n){return new Ti(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new vn(Ct.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(r=>r.length>0))}return new Ti(t)}static emptyPath(){return new Ti([])}}const vie=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ns extends L0{construct(e,t,n){return new Ns(e,t,n)}static isValidIdentifier(e){return vie.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ns.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ns(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(n.length===0)throw new vn(Ct.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new vn(Ct.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new vn(Ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(n+=a,r++):(s(),r++)}if(s(),o)throw new vn(Ct.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ns(t)}static emptyPath(){return new Ns([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.path=e}static fromPath(e){return new yn(Ti.fromString(e))}static fromName(e){return new yn(Ti.fromString(e).popFirst(5))}static empty(){return new yn(Ti.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ti.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ti.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yn(new Ti(e.slice()))}}function yie(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=Pn.fromTimestamp(n===1e9?new ss(t+1,0):new ss(t,n));return new Dh(r,yn.empty(),e)}function xie(i){return new Dh(i.readTime,i.key,-1)}class Dh{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Dh(Pn.min(),yn.empty(),-1)}static max(){return new Dh(Pn.max(),yn.empty(),-1)}}function Aie(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=yn.comparator(i.documentKey,e.documentKey),t!==0?t:tr(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wie="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sie{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eg(i){if(i.code!==Ct.FAILED_PRECONDITION||i.message!==wie)throw i;$t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Rn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _t((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _t?t:_t.resolve(t)}catch(t){return _t.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_t.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_t.reject(t)}static resolve(e){return new _t((t,n)=>{t(e)})}static reject(e){return new _t((t,n)=>{n(e)})}static waitFor(e){return new _t((t,n)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>n(l))}),o=!0,s===r&&t()})}static or(e){let t=_t.resolve(!1);for(const n of e)t=t.next(r=>r?_t.resolve(r):n());return t}static forEach(e,t){const n=[];return e.forEach((r,s)=>{n.push(t.call(this,r,s))}),this.waitFor(n)}static mapArray(e,t){return new _t((n,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(f=>{o[u]=f,++a,a===s&&n(o)},f=>r(f))}})}static doWhile(e,t){return new _t((n,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):n()};s()})}}function Eie(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function tg(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ie(n),this.se=n=>t.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}YA.oe=-1;function QA(i){return i==null}function Ux(i){return i===0&&1/i==-1/0}function Tie(i){return typeof i=="number"&&Number.isInteger(i)&&!Ux(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mie(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=bF(e)),e=bie(i.get(t),e);return bF(e)}function bie(i,e){let t=e;const n=i.length;for(let r=0;r<n;r++){const s=i.charAt(r);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function bF(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Hh(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function X5(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t){this.comparator=e,this.root=t||ks.EMPTY}insert(e,t){return new mi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ks.BLACK,null,null))}remove(e){return new mi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ks.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new d1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new d1(this.root,e,this.comparator,!1)}getReverseIterator(){return new d1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new d1(this.root,e,this.comparator,!0)}}class d1{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ks{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=n??ks.RED,this.left=r??ks.EMPTY,this.right=s??ks.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new ks(e??this.key,t??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ks.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return ks.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ks.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ks.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Rn();const e=this.left.check();if(e!==this.right.check())throw Rn();return e+(this.isRed()?0:1)}}ks.EMPTY=null,ks.RED=!0,ks.BLACK=!1;ks.EMPTY=new class{constructor(){this.size=0}get key(){throw Rn()}get value(){throw Rn()}get color(){throw Rn()}get left(){throw Rn()}get right(){throw Rn()}copy(e,t,n,r,s){return this}insert(e,t,n){return new ks(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.comparator=e,this.data=new mi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new RF(this.data.getIterator())}getIteratorFrom(e){return new RF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof os)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new os(this.comparator);return t.data=e,t}}class RF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.fields=e,e.sort(Ns.comparator)}static empty(){return new Cl([])}unionWith(e){let t=new os(Ns.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Cl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fm(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new J5("Invalid base64 string: "+s):s}}(e);return new zs(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new zs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zs.EMPTY_BYTE_STRING=new zs("");const Cie=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bh(i){if(Tr(!!i),typeof i=="string"){let e=0;const t=Cie.exec(i);if(Tr(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Bi(i.seconds),nanos:Bi(i.nanos)}}function Bi(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Lh(i){return typeof i=="string"?zs.fromBase64String(i):zs.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ZA(i){const e=i.mapValue.fields.__previous_value__;return yR(e)?ZA(e):e}function F0(i){const e=Bh(i.mapValue.fields.__local_write_time__.timestampValue);return new ss(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rie{constructor(e,t,n,r,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class O0{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new O0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof O0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fh(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?yR(i)?4:Pie(i)?9007199254740991:Iie(i)?10:11:Rn()}function uu(i,e){if(i===e)return!0;const t=Fh(i);if(t!==Fh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return F0(i).isEqual(F0(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Bh(r.timestampValue),a=Bh(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(r,s){return Lh(r.bytesValue).isEqual(Lh(s.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(r,s){return Bi(r.geoPointValue.latitude)===Bi(s.geoPointValue.latitude)&&Bi(r.geoPointValue.longitude)===Bi(s.geoPointValue.longitude)}(i,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Bi(r.integerValue)===Bi(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Bi(r.doubleValue),a=Bi(s.doubleValue);return o===a?Ux(o)===Ux(a):isNaN(o)&&isNaN(a)}return!1}(i,e);case 9:return Fm(i.arrayValue.values||[],e.arrayValue.values||[],uu);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(CF(o)!==CF(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!uu(o[l],a[l])))return!1;return!0}(i,e);default:return Rn()}}function k0(i,e){return(i.values||[]).find(t=>uu(t,e))!==void 0}function Om(i,e){if(i===e)return 0;const t=Fh(i),n=Fh(e);if(t!==n)return tr(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return tr(i.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Bi(s.integerValue||s.doubleValue),l=Bi(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(i,e);case 3:return IF(i.timestampValue,e.timestampValue);case 4:return IF(F0(i),F0(e));case 5:return tr(i.stringValue,e.stringValue);case 6:return function(s,o){const a=Lh(s),l=Lh(o);return a.compareTo(l)}(i.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const f=tr(a[u],l[u]);if(f!==0)return f}return tr(a.length,l.length)}(i.referenceValue,e.referenceValue);case 8:return function(s,o){const a=tr(Bi(s.latitude),Bi(o.latitude));return a!==0?a:tr(Bi(s.longitude),Bi(o.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return PF(i.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,f;const c=s.fields||{},d=o.fields||{},g=(a=c.value)===null||a===void 0?void 0:a.arrayValue,v=(l=d.value)===null||l===void 0?void 0:l.arrayValue,A=tr(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:PF(g,v)}(i.mapValue,e.mapValue);case 11:return function(s,o){if(s===p1.mapValue&&o===p1.mapValue)return 0;if(s===p1.mapValue)return 1;if(o===p1.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let c=0;c<l.length&&c<f.length;++c){const d=tr(l[c],f[c]);if(d!==0)return d;const g=Om(a[l[c]],u[f[c]]);if(g!==0)return g}return tr(l.length,f.length)}(i.mapValue,e.mapValue);default:throw Rn()}}function IF(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return tr(i,e);const t=Bh(i),n=Bh(e),r=tr(t.seconds,n.seconds);return r!==0?r:tr(t.nanos,n.nanos)}function PF(i,e){const t=i.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const s=Om(t[r],n[r]);if(s)return s}return tr(t.length,n.length)}function km(i){return nC(i)}function nC(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const n=Bh(t);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return Lh(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return yn.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let n="[",r=!0;for(const s of t.values||[])r?r=!1:n+=",",n+=nC(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(t){const n=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of n)s?s=!1:r+=",",r+=`${o}:${nC(t.fields[o])}`;return r+"}"}(i.mapValue):Rn()}function R1(i){switch(Fh(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ZA(i);return e?16+R1(e):16;case 5:return 2*i.stringValue.length;case 6:return Lh(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((r,s)=>r+R1(s),0)}(i.arrayValue);case 10:case 11:return function(n){let r=0;return Hh(n.fields,(s,o)=>{r+=s.length+R1(o)}),r}(i.mapValue);default:throw Rn()}}function rC(i){return!!i&&"integerValue"in i}function xR(i){return!!i&&"arrayValue"in i}function DF(i){return!!i&&"nullValue"in i}function BF(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function I1(i){return!!i&&"mapValue"in i}function Iie(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Y_(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Hh(i.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Y_(n)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Y_(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Pie(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.value=e}static empty(){return new ga({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!I1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Y_(t)}setAll(e){let t=Ns.emptyPath(),n={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,n,r),n={},r=[],t=a.popLast()}o?n[a.lastSegment()]=Y_(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());I1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];I1(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Hh(t,(r,s)=>e[r]=s);for(const r of n)delete e[r]}clone(){return new ga(Y_(this.value))}}function K5(i){const e=[];return Hh(i.fields,(t,n)=>{const r=new Ns([t]);if(I1(n)){const s=K5(n.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Cl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t,n,r,s,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ro(e,0,Pn.min(),Pn.min(),Pn.min(),ga.empty(),0)}static newFoundDocument(e,t,n,r){return new ro(e,1,t,Pn.min(),n,r,0)}static newNoDocument(e,t){return new ro(e,2,t,Pn.min(),Pn.min(),ga.empty(),0)}static newUnknownDocument(e,t){return new ro(e,3,t,Pn.min(),Pn.min(),ga.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ga.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ga.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ro&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ro(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t){this.position=e,this.inclusive=t}}function LF(i,e,t){let n=0;for(let r=0;r<i.position.length;r++){const s=e[r],o=i.position[r];if(s.field.isKeyField()?n=yn.comparator(yn.fromName(o.referenceValue),t.key):n=Om(o,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function FF(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!uu(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t="asc"){this.field=e,this.dir=t}}function Die(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{}class rs extends Y5{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Lie(e,t,n):t==="array-contains"?new kie(e,n):t==="in"?new Nie(e,n):t==="not-in"?new Uie(e,n):t==="array-contains-any"?new zie(e,n):new rs(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new Fie(e,n):new Oie(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Om(t,this.value)):t!==null&&Fh(this.value)===Fh(t)&&this.matchesComparison(Om(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Rn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cu extends Y5{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new cu(e,t)}matches(e){return Q5(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Q5(i){return i.op==="and"}function Z5(i){return Bie(i)&&Q5(i)}function Bie(i){for(const e of i.filters)if(e instanceof cu)return!1;return!0}function iC(i){if(i instanceof rs)return i.field.canonicalString()+i.op.toString()+km(i.value);if(Z5(i))return i.filters.map(e=>iC(e)).join(",");{const e=i.filters.map(t=>iC(t)).join(",");return`${i.op}(${e})`}}function $5(i,e){return i instanceof rs?function(n,r){return r instanceof rs&&n.op===r.op&&n.field.isEqual(r.field)&&uu(n.value,r.value)}(i,e):i instanceof cu?function(n,r){return r instanceof cu&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,a)=>s&&$5(o,r.filters[a]),!0):!1}(i,e):void Rn()}function e6(i){return i instanceof rs?function(t){return`${t.field.canonicalString()} ${t.op} ${km(t.value)}`}(i):i instanceof cu?function(t){return t.op.toString()+" {"+t.getFilters().map(e6).join(" ,")+"}"}(i):"Filter"}class Lie extends rs{constructor(e,t,n){super(e,t,n),this.key=yn.fromName(n.referenceValue)}matches(e){const t=yn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Fie extends rs{constructor(e,t){super(e,"in",t),this.keys=t6("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Oie extends rs{constructor(e,t){super(e,"not-in",t),this.keys=t6("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function t6(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>yn.fromName(n.referenceValue))}class kie extends rs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xR(t)&&k0(t.arrayValue,this.value)}}class Nie extends rs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&k0(this.value.arrayValue,t)}}class Uie extends rs{constructor(e,t){super(e,"not-in",t)}matches(e){if(k0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!k0(this.value.arrayValue,t)}}class zie extends rs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xR(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>k0(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gie{constructor(e,t=null,n=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function OF(i,e=null,t=[],n=[],r=null,s=null,o=null){return new Gie(i,e,t,n,r,s,o)}function AR(i){const e=kn(i);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>iC(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),QA(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>km(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>km(n)).join(",")),e.ue=t}return e.ue}function wR(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Die(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!$5(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!FF(i.startAt,e.startAt)&&FF(i.endAt,e.endAt)}function sC(i){return yn.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,t=null,n=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Hie(i,e,t,n,r,s,o,a){return new $A(i,e,t,n,r,s,o,a)}function SR(i){return new $A(i)}function kF(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Vie(i){return i.collectionGroup!==null}function Q_(i){const e=kn(i);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new os(Ns.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Gx(s,n))}),t.has(Ns.keyField().canonicalString())||e.ce.push(new Gx(Ns.keyField(),n))}return e.ce}function ru(i){const e=kn(i);return e.le||(e.le=Wie(e,Q_(i))),e.le}function Wie(i,e){if(i.limitType==="F")return OF(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Gx(r.field,s)});const t=i.endAt?new zx(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new zx(i.startAt.position,i.startAt.inclusive):null;return OF(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function oC(i,e,t){return new $A(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function ew(i,e){return wR(ru(i),ru(e))&&i.limitType===e.limitType}function n6(i){return`${AR(ru(i))}|lt:${i.limitType}`}function Zp(i){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(r=>e6(r)).join(", ")}]`),QA(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>km(r)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>km(r)).join(",")),`Target(${n})`}(ru(i))}; limitType=${i.limitType})`}function tw(i,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):yn.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,e)&&function(n,r){for(const s of Q_(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(i,e)&&function(n,r){return!(n.startAt&&!function(o,a,l){const u=LF(o,a,l);return o.inclusive?u<=0:u<0}(n.startAt,Q_(n),r)||n.endAt&&!function(o,a,l){const u=LF(o,a,l);return o.inclusive?u>=0:u>0}(n.endAt,Q_(n),r))}(i,e)}function jie(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function r6(i){return(e,t)=>{let n=!1;for(const r of Q_(i)){const s=qie(r,e,t);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function qie(i,e,t){const n=i.field.isKeyField()?yn.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Om(l,u):Rn()}(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return Rn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Hh(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return X5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xie=new mi(yn.comparator);function gc(){return Xie}const i6=new mi(yn.comparator);function b_(...i){let e=i6;for(const t of i)e=e.insert(t.key,t);return e}function s6(i){let e=i6;return i.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function sd(){return Z_()}function o6(){return Z_()}function Z_(){return new kd(i=>i.toString(),(i,e)=>i.isEqual(e))}const Jie=new mi(yn.comparator),Kie=new os(yn.comparator);function Zn(...i){let e=Kie;for(const t of i)e=e.add(t);return e}const Yie=new os(tr);function Qie(){return Yie}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ux(e)?"-0":e}}function a6(i){return{integerValue:""+i}}function l6(i,e){return Tie(e)?a6(e):ER(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this._=void 0}}function Zie(i,e,t){return i instanceof Hx?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&yR(s)&&(s=ZA(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):i instanceof N0?c6(i,e):i instanceof U0?h6(i,e):function(r,s){const o=u6(r,s),a=NF(o)+NF(r.Pe);return rC(o)&&rC(r.Pe)?a6(a):ER(r.serializer,a)}(i,e)}function $ie(i,e,t){return i instanceof N0?c6(i,e):i instanceof U0?h6(i,e):t}function u6(i,e){return i instanceof z0?function(n){return rC(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Hx extends nw{}class N0 extends nw{constructor(e){super(),this.elements=e}}function c6(i,e){const t=f6(e);for(const n of i.elements)t.some(r=>uu(r,n))||t.push(n);return{arrayValue:{values:t}}}class U0 extends nw{constructor(e){super(),this.elements=e}}function h6(i,e){let t=f6(e);for(const n of i.elements)t=t.filter(r=>!uu(r,n));return{arrayValue:{values:t}}}class z0 extends nw{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function NF(i){return Bi(i.integerValue||i.doubleValue)}function f6(i){return xR(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ese{constructor(e,t){this.field=e,this.transform=t}}function tse(i,e){return i.field.isEqual(e.field)&&function(n,r){return n instanceof N0&&r instanceof N0||n instanceof U0&&r instanceof U0?Fm(n.elements,r.elements,uu):n instanceof z0&&r instanceof z0?uu(n.Pe,r.Pe):n instanceof Hx&&r instanceof Hx}(i.transform,e.transform)}class nse{constructor(e,t){this.version=e,this.transformResults=t}}class ac{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ac}static exists(e){return new ac(void 0,e)}static updateTime(e){return new ac(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function P1(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class rw{}function d6(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new m6(i.key,ac.none()):new iw(i.key,i.data,ac.none());{const t=i.data,n=ga.empty();let r=new os(Ns.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new Nd(i.key,n,new Cl(r.toArray()),ac.none())}}function rse(i,e,t){i instanceof iw?function(r,s,o){const a=r.value.clone(),l=zF(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(i,e,t):i instanceof Nd?function(r,s,o){if(!P1(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=zF(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(p6(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function $_(i,e,t,n){return i instanceof iw?function(s,o,a,l){if(!P1(s.precondition,o))return a;const u=s.value.clone(),f=GF(s.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(i,e,t,n):i instanceof Nd?function(s,o,a,l){if(!P1(s.precondition,o))return a;const u=GF(s.fieldTransforms,l,o),f=o.data;return f.setAll(p6(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(c=>c.field))}(i,e,t,n):function(s,o,a){return P1(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(i,e,t)}function ise(i,e){let t=null;for(const n of i.fieldTransforms){const r=e.data.field(n.field),s=u6(n.transform,r||null);s!=null&&(t===null&&(t=ga.empty()),t.set(n.field,s))}return t||null}function UF(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Fm(n,r,(s,o)=>tse(s,o))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class iw extends rw{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Nd extends rw{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function p6(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}}),e}function zF(i,e,t){const n=new Map;Tr(i.length===t.length);for(let r=0;r<t.length;r++){const s=i[r],o=s.transform,a=e.data.field(s.field);n.set(s.field,$ie(o,a,t[r]))}return n}function GF(i,e,t){const n=new Map;for(const r of i){const s=r.transform,o=t.data.field(r.field);n.set(r.field,Zie(s,o,e))}return n}class m6 extends rw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sse extends rw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ose{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&rse(s,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=$_(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=$_(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=o6();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=d6(o,a);l!==null&&n.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Pn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zn())}isEqual(e){return this.batchId===e.batchId&&Fm(this.mutations,e.mutations,(t,n)=>UF(t,n))&&Fm(this.baseMutations,e.baseMutations,(t,n)=>UF(t,n))}}class TR{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Tr(e.mutations.length===n.length);let r=function(){return Jie}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new TR(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ase{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lse{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ji,lr;function use(i){switch(i){default:return Rn();case Ct.CANCELLED:case Ct.UNKNOWN:case Ct.DEADLINE_EXCEEDED:case Ct.RESOURCE_EXHAUSTED:case Ct.INTERNAL:case Ct.UNAVAILABLE:case Ct.UNAUTHENTICATED:return!1;case Ct.INVALID_ARGUMENT:case Ct.NOT_FOUND:case Ct.ALREADY_EXISTS:case Ct.PERMISSION_DENIED:case Ct.FAILED_PRECONDITION:case Ct.ABORTED:case Ct.OUT_OF_RANGE:case Ct.UNIMPLEMENTED:case Ct.DATA_LOSS:return!0}}function g6(i){if(i===void 0)return mc("GRPC error has no .code"),Ct.UNKNOWN;switch(i){case ji.OK:return Ct.OK;case ji.CANCELLED:return Ct.CANCELLED;case ji.UNKNOWN:return Ct.UNKNOWN;case ji.DEADLINE_EXCEEDED:return Ct.DEADLINE_EXCEEDED;case ji.RESOURCE_EXHAUSTED:return Ct.RESOURCE_EXHAUSTED;case ji.INTERNAL:return Ct.INTERNAL;case ji.UNAVAILABLE:return Ct.UNAVAILABLE;case ji.UNAUTHENTICATED:return Ct.UNAUTHENTICATED;case ji.INVALID_ARGUMENT:return Ct.INVALID_ARGUMENT;case ji.NOT_FOUND:return Ct.NOT_FOUND;case ji.ALREADY_EXISTS:return Ct.ALREADY_EXISTS;case ji.PERMISSION_DENIED:return Ct.PERMISSION_DENIED;case ji.FAILED_PRECONDITION:return Ct.FAILED_PRECONDITION;case ji.ABORTED:return Ct.ABORTED;case ji.OUT_OF_RANGE:return Ct.OUT_OF_RANGE;case ji.UNIMPLEMENTED:return Ct.UNIMPLEMENTED;case ji.DATA_LOSS:return Ct.DATA_LOSS;default:return Rn()}}(lr=ji||(ji={}))[lr.OK=0]="OK",lr[lr.CANCELLED=1]="CANCELLED",lr[lr.UNKNOWN=2]="UNKNOWN",lr[lr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lr[lr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lr[lr.NOT_FOUND=5]="NOT_FOUND",lr[lr.ALREADY_EXISTS=6]="ALREADY_EXISTS",lr[lr.PERMISSION_DENIED=7]="PERMISSION_DENIED",lr[lr.UNAUTHENTICATED=16]="UNAUTHENTICATED",lr[lr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lr[lr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lr[lr.ABORTED=10]="ABORTED",lr[lr.OUT_OF_RANGE=11]="OUT_OF_RANGE",lr[lr.UNIMPLEMENTED=12]="UNIMPLEMENTED",lr[lr.INTERNAL=13]="INTERNAL",lr[lr.UNAVAILABLE=14]="UNAVAILABLE",lr[lr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cse(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hse=new _d([4294967295,4294967295],0);function HF(i){const e=cse().encode(i),t=new U5;return t.update(e),new Uint8Array(t.digest())}function VF(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _d([t,n],0),new _d([r,s],0)]}class MR{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new C_(`Invalid padding: ${t}`);if(n<0)throw new C_(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new C_(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new C_(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=_d.fromNumber(this.Te)}Ee(e,t,n){let r=e.add(t.multiply(_d.fromNumber(n)));return r.compare(hse)===1&&(r=new _d([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=HF(e),[n,r]=VF(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new MR(s,r,t);return n.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const t=HF(e),[n,r]=VF(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class C_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,gv.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new sw(Pn.min(),r,new mi(tr),gc(),Zn())}}class gv{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new gv(n,t,Zn(),Zn(),Zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class _6{constructor(e,t){this.targetId=e,this.me=t}}class v6{constructor(e,t,n=zs.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class WF{constructor(){this.fe=0,this.ge=jF(),this.pe=zs.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Zn(),t=Zn(),n=Zn();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Rn()}}),new gv(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=jF()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Tr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fse{constructor(e){this.Le=e,this.Be=new Map,this.ke=gc(),this.qe=m1(),this.Qe=m1(),this.Ke=new mi(tr)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.je(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.De(e.resumeToken));break;default:Rn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((n,r)=>{this.je(r)&&t(r)})}Je(e){const t=e.targetId,n=e.me.count,r=this.Ye(t);if(r){const s=r.target;if(sC(s))if(n===0){const o=new yn(s.path);this.We(t,o,ro.newNoDocument(o,Pn.min()))}else Tr(n===1);else{const o=this.Ze(t);if(o!==n){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,u)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=Lh(n).toUint8Array()}catch(l){if(l instanceof J5)return Lm("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new MR(o,r,s)}catch(l){return Lm(l instanceof C_?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,n){return t.me.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),r++)}),r}it(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&sC(a.target)){const l=new yn(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,ro.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let n=Zn();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new sw(e,t,this.Ke,this.ke,n);return this.ke=gc(),this.qe=m1(),this.Qe=m1(),this.Ke=new mi(tr),r}Ue(e,t){if(!this.je(e))return;const n=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.ot(e,t)?r.Fe(t,1):r.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new WF,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new os(tr),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new os(tr),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||$t("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new WF),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function m1(){return new mi(yn.comparator)}function jF(){return new mi(yn.comparator)}const dse={asc:"ASCENDING",desc:"DESCENDING"},pse={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mse={and:"AND",or:"OR"};class gse{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function aC(i,e){return i.useProto3Json||QA(e)?e:{value:e}}function Vx(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y6(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function _se(i,e){return Vx(i,e.toTimestamp())}function iu(i){return Tr(!!i),Pn.fromTimestamp(function(t){const n=Bh(t);return new ss(n.seconds,n.nanos)}(i))}function bR(i,e){return lC(i,e).canonicalString()}function lC(i,e){const t=function(r){return new Ti(["projects",r.projectId,"databases",r.database])}(i).child("documents");return e===void 0?t:t.child(e)}function x6(i){const e=Ti.fromString(i);return Tr(T6(e)),e}function uC(i,e){return bR(i.databaseId,e.path)}function DM(i,e){const t=x6(e);if(t.get(1)!==i.databaseId.projectId)throw new vn(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new vn(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new yn(w6(t))}function A6(i,e){return bR(i.databaseId,e)}function vse(i){const e=x6(i);return e.length===4?Ti.emptyPath():w6(e)}function cC(i){return new Ti(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function w6(i){return Tr(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function qF(i,e,t){return{name:uC(i,e),fields:t.value.mapValue.fields}}function yse(i,e){let t;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Rn()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(Tr(f===void 0||typeof f=="string"),zs.fromBase64String(f||"")):(Tr(f===void 0||f instanceof Buffer||f instanceof Uint8Array),zs.fromUint8Array(f||new Uint8Array))}(i,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=u.code===void 0?Ct.UNKNOWN:g6(u.code);return new vn(f,u.message||"")}(o);t=new v6(n,r,s,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=DM(i,n.document.name),s=iu(n.document.updateTime),o=n.document.createTime?iu(n.document.createTime):Pn.min(),a=new ga({mapValue:{fields:n.document.fields}}),l=ro.newFoundDocument(r,s,o,a),u=n.targetIds||[],f=n.removedTargetIds||[];t=new D1(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=DM(i,n.document),s=n.readTime?iu(n.readTime):Pn.min(),o=ro.newNoDocument(r,s),a=n.removedTargetIds||[];t=new D1([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=DM(i,n.document),s=n.removedTargetIds||[];t=new D1([],s,r,null)}else{if(!("filter"in e))return Rn();{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:s}=n,o=new lse(r,s),a=n.targetId;t=new _6(a,o)}}return t}function xse(i,e){let t;if(e instanceof iw)t={update:qF(i,e.key,e.value)};else if(e instanceof m6)t={delete:uC(i,e.key)};else if(e instanceof Nd)t={update:qF(i,e.key,e.data),updateMask:Rse(e.fieldMask)};else{if(!(e instanceof sse))return Rn();t={verify:uC(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const a=o.transform;if(a instanceof Hx)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof N0)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof U0)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof z0)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Rn()}(0,n))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:_se(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Rn()}(i,e.precondition)),t}function Ase(i,e){return i&&i.length>0?(Tr(e!==void 0),i.map(t=>function(r,s){let o=r.updateTime?iu(r.updateTime):iu(s);return o.isEqual(Pn.min())&&(o=iu(s)),new nse(o,r.transformResults||[])}(t,e))):[]}function wse(i,e){return{documents:[A6(i,e.path)]}}function Sse(i,e){const t={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=A6(i,r);const s=function(u){if(u.length!==0)return E6(cu.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(f=>function(d){return{field:$p(d.field),direction:Mse(d.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=aC(i,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ct:t,parent:r}}function Ese(i){let e=vse(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){Tr(n===1);const f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(c){const d=S6(c);return d instanceof cu&&Z5(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=function(c){return c.map(d=>function(v){return new Gx(em(v.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(d))}(t.orderBy));let a=null;t.limit&&(a=function(c){let d;return d=typeof c=="object"?c.value:c,QA(d)?null:d}(t.limit));let l=null;t.startAt&&(l=function(c){const d=!!c.before,g=c.values||[];return new zx(g,d)}(t.startAt));let u=null;return t.endAt&&(u=function(c){const d=!c.before,g=c.values||[];return new zx(g,d)}(t.endAt)),Hie(e,r,o,s,a,"F",l,u)}function Tse(i,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rn()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function S6(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=em(t.unaryFilter.field);return rs.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=em(t.unaryFilter.field);return rs.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=em(t.unaryFilter.field);return rs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=em(t.unaryFilter.field);return rs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Rn()}}(i):i.fieldFilter!==void 0?function(t){return rs.create(em(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rn()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return cu.create(t.compositeFilter.filters.map(n=>S6(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Rn()}}(t.compositeFilter.op))}(i):Rn()}function Mse(i){return dse[i]}function bse(i){return pse[i]}function Cse(i){return mse[i]}function $p(i){return{fieldPath:i.canonicalString()}}function em(i){return Ns.fromServerFormat(i.fieldPath)}function E6(i){return i instanceof rs?function(t){if(t.op==="=="){if(BF(t.value))return{unaryFilter:{field:$p(t.field),op:"IS_NAN"}};if(DF(t.value))return{unaryFilter:{field:$p(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BF(t.value))return{unaryFilter:{field:$p(t.field),op:"IS_NOT_NAN"}};if(DF(t.value))return{unaryFilter:{field:$p(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$p(t.field),op:bse(t.op),value:t.value}}}(i):i instanceof cu?function(t){const n=t.getFilters().map(r=>E6(r));return n.length===1?n[0]:{compositeFilter:{op:Cse(t.op),filters:n}}}(i):Rn()}function Rse(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function T6(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,n,r,s=Pn.min(),o=Pn.min(),a=zs.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new mh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ise{constructor(e){this.ht=e}}function Pse(i){const e=Ese({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?oC(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dse{constructor(){this.ln=new Bse}addToCollectionParentIndex(e,t){return this.ln.add(t),_t.resolve()}getCollectionParents(e,t){return _t.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return _t.resolve()}deleteFieldIndex(e,t){return _t.resolve()}deleteAllFieldIndexes(e){return _t.resolve()}createTargetIndexes(e,t){return _t.resolve()}getDocumentsMatchingTarget(e,t){return _t.resolve(null)}getIndexType(e,t){return _t.resolve(0)}getFieldIndexes(e,t){return _t.resolve([])}getNextCollectionGroupToUpdate(e){return _t.resolve(null)}getMinOffset(e,t){return _t.resolve(Dh.min())}getMinOffsetFromCollectionGroup(e,t){return _t.resolve(Dh.min())}updateCollectionGroup(e,t,n){return _t.resolve()}updateIndexEntries(e,t){return _t.resolve()}}class Bse{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new os(Ti.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new os(Ti.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vo{static withCacheSize(e){return new Vo(e,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vo.DEFAULT_COLLECTION_PERCENTILE=10,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vo.DEFAULT=new Vo(41943040,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vo.DISABLED=new Vo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Nm(0)}static Qn(){return new Nm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF([i,e],[t,n]){const r=tr(i,t);return r===0?tr(e,n):r}class Lse{constructor(e){this.Gn=e,this.buffer=new os(JF),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();JF(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fse{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){$t("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){tg(t)?$t("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await eg(t)}await this.Yn(3e5)})}}class Ose{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return _t.resolve(YA.oe);const n=new Lse(t);return this.Zn.forEachTarget(e,r=>n.Hn(r.sequenceNumber)).next(()=>this.Zn.er(e,r=>n.Hn(r))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($t("LruGarbageCollector","Garbage collection skipped; disabled"),_t.resolve(XF)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?($t("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XF):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let n,r,s,o,a,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(c=>(c>this.params.maximumSequenceNumbersToCollect?($t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${c}`),r=this.params.maximumSequenceNumbersToCollect):r=c,o=Date.now(),this.nthSequenceNumber(e,r))).next(c=>(n=c,a=Date.now(),this.removeTargets(e,n,t))).next(c=>(s=c,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(c=>(u=Date.now(),Qp()<=hr.DEBUG&&$t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${c} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),_t.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:c})))}}function kse(i,e){return new Ose(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nse{constructor(){this.changes=new kd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ro.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?_t.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Use{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zse{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(n!==null&&$_(n.mutation,r,Cl.empty(),ss.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Zn()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Zn()){const r=sd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(s=>{let o=b_();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const n=sd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Zn()))}populateOverlays(e,t,n){const r=[];return n.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,n,r){let s=gc();const o=Z_(),a=function(){return Z_()}();return t.forEach((l,u)=>{const f=n.get(u.key);r.has(u.key)&&(f===void 0||f.mutation instanceof Nd)?s=s.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),$_(f.mutation,u,f.mutation.getFieldMask(),ss.now())):o.set(u.key,Cl.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,f)=>o.set(u,f)),t.forEach((u,f)=>{var c;return a.set(u,new Use(f,(c=o.get(u))!==null&&c!==void 0?c:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Z_();let r=new mi((o,a)=>o-a),s=Zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let f=n.get(l)||Cl.empty();f=a.applyToLocalView(u,f),n.set(l,f);const c=(r.get(a.batchId)||Zn()).add(l);r=r.insert(a.batchId,c)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,f=l.value,c=o6();f.forEach(d=>{if(!s.has(d)){const g=d6(t.get(d),n.get(d));g!==null&&c.set(d,g),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,c))}return _t.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,r){return function(o){return yn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Vie(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):_t.resolve(sd());let a=-1,l=s;return o.next(u=>_t.forEach(u,(f,c)=>(a<c.largestBatchId&&(a=c.largestBatchId),s.get(f)?_t.resolve():this.remoteDocumentCache.getEntry(e,f).next(d=>{l=l.insert(f,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Zn())).next(f=>({batchId:a,changes:s6(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new yn(t)).next(n=>{let r=b_();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let o=b_();return this.indexManager.getCollectionParents(e,s).next(a=>_t.forEach(a,l=>{const u=function(c,d){return new $A(d,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,r).next(f=>{f.forEach((c,d)=>{o=o.insert(c,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(o=>{s.forEach((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,ro.newInvalidDocument(f)))});let a=b_();return o.forEach((l,u)=>{const f=s.get(l);f!==void 0&&$_(f.mutation,u,Cl.empty(),ss.now()),tw(t,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gse{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return _t.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:iu(r.createTime)}}(t)),_t.resolve()}getNamedQuery(e,t){return _t.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(r){return{name:r.name,query:Pse(r.bundledQuery),readTime:iu(r.readTime)}}(t)),_t.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hse{constructor(){this.overlays=new mi(yn.comparator),this.Er=new Map}getOverlay(e,t){return _t.resolve(this.overlays.get(t))}getOverlays(e,t){const n=sd();return _t.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((r,s)=>{this.Tt(e,t,s)}),_t.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Er.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(n)),_t.resolve()}getOverlaysForCollection(e,t,n){const r=sd(),s=t.length+1,o=new yn(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&r.set(l.getKey(),l)}return _t.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new mi((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>n){let f=s.get(u.largestBatchId);f===null&&(f=sd(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=sd(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=r)););return _t.resolve(a)}Tt(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.Er.get(r.largestBatchId).delete(n.key);this.Er.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new ase(t,n));let s=this.Er.get(t);s===void 0&&(s=Zn(),this.Er.set(t,s)),this.Er.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vse{constructor(){this.sessionToken=zs.EMPTY_BYTE_STRING}getSessionToken(e){return _t.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,_t.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.dr=new os(xs.Ar),this.Rr=new os(xs.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const n=new xs(e,t);this.dr=this.dr.add(n),this.Rr=this.Rr.add(n)}mr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.gr(new xs(e,t))}pr(e,t){e.forEach(n=>this.removeReference(n,t))}yr(e){const t=new yn(new Ti([])),n=new xs(t,e),r=new xs(t,e+1),s=[];return this.Rr.forEachInRange([n,r],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new yn(new Ti([])),n=new xs(t,e),r=new xs(t,e+1);let s=Zn();return this.Rr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new xs(e,0),n=this.dr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class xs{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return yn.comparator(e.key,t.key)||tr(e.br,t.br)}static Vr(e,t){return tr(e.br,t.br)||yn.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wse{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new os(xs.Ar)}checkEmpty(e){return _t.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ose(s,t,n,r);this.mutationQueue.push(o);for(const a of r)this.vr=this.vr.add(new xs(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _t.resolve(o)}lookupMutationBatch(e,t){return _t.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Fr(n),s=r<0?0:r;return _t.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _t.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return _t.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new xs(t,0),r=new xs(t,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([n,r],o=>{const a=this.Cr(o.br);s.push(a)}),_t.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new os(tr);return t.forEach(r=>{const s=new xs(r,0),o=new xs(r,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{n=n.add(a.br)})}),_t.resolve(this.Mr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;yn.isDocumentKey(s)||(s=s.child(""));const o=new xs(new yn(s),0);let a=new os(tr);return this.vr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.br)),!0)},o),_t.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach(n=>{const r=this.Cr(n);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Tr(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.vr;return _t.forEach(t.mutations,r=>{const s=new xs(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.vr=n})}Ln(e){}containsKey(e,t){const n=new xs(t,0),r=this.vr.firstAfterOrEqual(n);return _t.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_t.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jse{constructor(e){this.Nr=e,this.docs=function(){return new mi(yn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,o=this.Nr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return _t.resolve(n?n.document.mutableCopy():ro.newInvalidDocument(t))}getEntries(e,t){let n=gc();return t.forEach(r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():ro.newInvalidDocument(r))}),_t.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=gc();const o=t.path,a=new yn(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Aie(xie(f),n)<=0||(r.has(f.key)||tw(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return _t.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Rn()}Lr(e,t){return _t.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new qse(this)}getSize(e){return _t.resolve(this.size)}}class qse extends Nse{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.hr.addEntry(e,r)):this.hr.removeEntry(n)}),_t.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xse{constructor(e){this.persistence=e,this.Br=new kd(t=>AR(t),wR),this.lastRemoteSnapshotVersion=Pn.min(),this.highestTargetId=0,this.kr=0,this.qr=new CR,this.targetCount=0,this.Qr=Nm.qn()}forEachTarget(e,t){return this.Br.forEach((n,r)=>t(r)),_t.resolve()}getLastRemoteSnapshotVersion(e){return _t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _t.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),_t.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.kr&&(this.kr=t),_t.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Nm(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,_t.resolve()}updateTargetData(e,t){return this.Un(t),_t.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,_t.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=t&&n.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),_t.waitFor(s).next(()=>r)}getTargetCount(e){return _t.resolve(this.targetCount)}getTargetData(e,t){const n=this.Br.get(t)||null;return _t.resolve(n)}addMatchingKeys(e,t,n){return this.qr.mr(t,n),_t.resolve()}removeMatchingKeys(e,t,n){this.qr.pr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),_t.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),_t.resolve()}getMatchingKeysForTargetId(e,t){const n=this.qr.Sr(t);return _t.resolve(n)}containsKey(e,t){return _t.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,t){this.Kr={},this.overlays={},this.$r=new YA(0),this.Ur=!1,this.Ur=!0,this.Wr=new Vse,this.referenceDelegate=e(this),this.Gr=new Xse(this),this.indexManager=new Dse,this.remoteDocumentCache=function(r){return new jse(r)}(n=>this.referenceDelegate.zr(n)),this.serializer=new Ise(t),this.jr=new Gse(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Hse,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Kr[e.toKey()];return n||(n=new Wse(t,this.referenceDelegate),this.Kr[e.toKey()]=n),n}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,n){$t("MemoryPersistence","Starting transaction:",e);const r=new Jse(this.$r.next());return this.referenceDelegate.Hr(),n(r).next(s=>this.referenceDelegate.Jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Yr(e,t){return _t.or(Object.values(this.Kr).map(n=>()=>n.containsKey(e,t)))}}class Jse extends Sie{constructor(e){super(),this.currentSequenceNumber=e}}class RR{constructor(e){this.persistence=e,this.Zr=new CR,this.Xr=null}static ei(e){return new RR(e)}get ti(){if(this.Xr)return this.Xr;throw Rn()}addReference(e,t,n){return this.Zr.addReference(n,t),this.ti.delete(n.toString()),_t.resolve()}removeReference(e,t,n){return this.Zr.removeReference(n,t),this.ti.add(n.toString()),_t.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),_t.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(r=>this.ti.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.ti.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _t.forEach(this.ti,n=>{const r=yn.fromPath(n);return this.ni(e,r).next(s=>{s||t.removeEntry(r,Pn.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(n=>{n?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return _t.or([()=>_t.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Wx{constructor(e,t){this.persistence=e,this.ri=new kd(n=>Mie(n.path),(n,r)=>n.isEqual(r)),this.garbageCollector=kse(this,t)}static ei(e,t){return new Wx(e,t)}Hr(){}Jr(e){return _t.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(r=>n+r))}nr(e){let t=0;return this.er(e,n=>{t++}).next(()=>t)}er(e,t){return _t.forEach(this.ri,(n,r)=>this.ir(e,n,r).next(s=>s?_t.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Lr(e,o=>this.ir(e,o,t).next(a=>{a||(n++,s.removeEntry(o,Pn.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),_t.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),_t.resolve()}removeReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),_t.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),_t.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=R1(e.data.value)),t}ir(e,t,n){return _t.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.ri.get(t);return _t.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Wi=n,this.Gi=r}static zi(e,t){let n=Zn(),r=Zn();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new IR(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kse{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yse{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Jne()?8:Eie(qne())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Xi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,t,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Kse;return this.ts(e,t,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,t,o,a.size)})}).next(()=>s.result)}ns(e,t,n,r){return n.documentReadCount<this.Ji?(Qp()<=hr.DEBUG&&$t("QueryEngine","SDK will not create cache indexes for query:",Zp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),_t.resolve()):(Qp()<=hr.DEBUG&&$t("QueryEngine","Query:",Zp(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Yi*r?(Qp()<=hr.DEBUG&&$t("QueryEngine","The SDK decides to create cache indexes for query:",Zp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ru(t))):_t.resolve())}Xi(e,t){if(kF(t))return _t.resolve(null);let n=ru(t);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=oC(t,null,"F"),n=ru(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=Zn(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.rs(t,a);return this.ss(t,u,o,l.readTime)?this.Xi(e,oC(t,null,"F")):this.os(e,u,t,l)}))})))}es(e,t,n,r){return kF(t)||r.isEqual(Pn.min())?_t.resolve(null):this.Zi.getDocuments(e,n).next(s=>{const o=this.rs(t,s);return this.ss(t,o,n,r)?_t.resolve(null):(Qp()<=hr.DEBUG&&$t("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zp(t)),this.os(e,o,t,yie(r,-1)).next(a=>a))})}rs(e,t){let n=new os(r6(e));return t.forEach((r,s)=>{tw(e,s)&&(n=n.add(s))}),n}ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ts(e,t,n){return Qp()<=hr.DEBUG&&$t("QueryEngine","Using full collection scan to execute query:",Zp(t)),this.Zi.getDocumentsMatchingQuery(e,t,Dh.min(),n)}os(e,t,n,r){return this.Zi.getDocumentsMatchingQuery(e,n,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qse{constructor(e,t,n,r){this.persistence=e,this._s=t,this.serializer=r,this.us=new mi(tr),this.cs=new kd(s=>AR(s),wR),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(n)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zse(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function Zse(i,e,t,n){return new Qse(i,e,t,n)}async function b6(i,e){const t=kn(i);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,t.Ps(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],a=[];let l=Zn();for(const u of r){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of s){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(n,l).next(u=>({Ts:u,removedBatchIds:o,addedBatchIds:a}))})})}function $se(i,e){const t=kn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=e.batch.keys(),s=t.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,f){const c=u.batch,d=c.keys();let g=_t.resolve();return d.forEach(v=>{g=g.next(()=>f.getEntry(l,v)).next(A=>{const x=u.docVersions.get(v);Tr(x!==null),A.version.compareTo(x)<0&&(c.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),f.addEntry(A)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,c))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=Zn();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(n,r))})}function C6(i){const e=kn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function eoe(i,e){const t=kn(i),n=e.snapshotVersion;let r=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.hs.newChangeBuffer({trackRemovals:!0});r=t.us;const a=[];e.targetChanges.forEach((f,c)=>{const d=r.get(c);if(!d)return;a.push(t.Gr.removeMatchingKeys(s,f.removedDocuments,c).next(()=>t.Gr.addMatchingKeys(s,f.addedDocuments,c)));let g=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(c)!==null?g=g.withResumeToken(zs.EMPTY_BYTE_STRING,Pn.min()).withLastLimboFreeSnapshotVersion(Pn.min()):f.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(f.resumeToken,n)),r=r.insert(c,g),function(A,x,w){return A.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,g,f)&&a.push(t.Gr.updateTargetData(s,g))});let l=gc(),u=Zn();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(toe(s,o,e.documentUpdates).next(f=>{l=f.Is,u=f.Es})),!n.isEqual(Pn.min())){const f=t.Gr.getLastRemoteSnapshotVersion(s).next(c=>t.Gr.setTargetsMetadata(s,s.currentSequenceNumber,n));a.push(f)}return _t.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.us=r,s))}function toe(i,e,t){let n=Zn(),r=Zn();return t.forEach(s=>n=n.add(s)),e.getEntries(i,n).next(s=>{let o=gc();return t.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Pn.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$t("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Is:o,Es:r}})}function noe(i,e){const t=kn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function roe(i,e){const t=kn(i);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return t.Gr.getTargetData(n,e).next(s=>s?(r=s,_t.resolve(r)):t.Gr.allocateTargetId(n).next(o=>(r=new mh(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.Gr.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=t.us.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.us=t.us.insert(n.targetId,n),t.cs.set(e,n.targetId)),n})}async function hC(i,e,t){const n=kn(i),r=n.us.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!tg(o))throw o;$t("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.us=n.us.remove(e),n.cs.delete(r.target)}function KF(i,e,t){const n=kn(i);let r=Pn.min(),s=Zn();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,f){const c=kn(l),d=c.cs.get(f);return d!==void 0?_t.resolve(c.us.get(d)):c.Gr.getTargetData(u,f)}(n,o,ru(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,n.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>n._s.getDocumentsMatchingQuery(o,e,t?r:Pn.min(),t?s:Zn())).next(a=>(ioe(n,jie(e),a),{documents:a,ds:s})))}function ioe(i,e,t){let n=i.ls.get(e)||Pn.min();t.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.ls.set(e,n)}class YF{constructor(){this.activeTargetIds=Qie()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class soe{constructor(){this._o=new YF,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,n){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new YF,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ooe{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){$t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){$t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g1=null;function BM(){return g1===null?g1=function(){return 268435456+Math.round(2147483648*Math.random())}():g1++,"0x"+g1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aoe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class loe{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="WebChannelConnection";class uoe extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=n+"://"+t.host,this.Mo=`projects/${r}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Oo(t,n,r,s,o){const a=BM(),l=this.No(t,n.toUriEncodedString());$t("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(u,s,o),this.Bo(t,l,u,r).then(f=>($t("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Lm("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}ko(t,n,r,s,o,a){return this.Oo(t,n,r,s,o)}Lo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$m}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}No(t,n){const r=aoe[t];return`${this.Fo}/v1/${n}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,n,r){const s=BM();return new Promise((o,a)=>{const l=new z5;l.setWithCredentials(!0),l.listenOnce(G5.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case C1.NO_ERROR:const f=l.getResponseJson();$t(to,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case C1.TIMEOUT:$t(to,`RPC '${e}' ${s} timed out`),a(new vn(Ct.DEADLINE_EXCEEDED,"Request time out"));break;case C1.HTTP_ERROR:const c=l.getStatus();if($t(to,`RPC '${e}' ${s} failed with status:`,c,"response text:",l.getResponseText()),c>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const g=d==null?void 0:d.error;if(g&&g.status&&g.message){const v=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(Ct).indexOf(w)>=0?w:Ct.UNKNOWN}(g.status);a(new vn(v,g.message))}else a(new vn(Ct.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new vn(Ct.UNAVAILABLE,"Connection failed."));break;default:Rn()}}finally{$t(to,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);$t(to,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",u,n,15)})}qo(e,t,n){const r=BM(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=W5(),a=V5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,t,n),l.encodeInitMessageHeaders=!0;const f=s.join("");$t(to,`Creating RPC '${e}' stream ${r}: ${f}`,l);const c=o.createWebChannel(f,l);let d=!1,g=!1;const v=new loe({Eo:x=>{g?$t(to,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(d||($t(to,`Opening RPC '${e}' stream ${r} transport.`),c.open(),d=!0),$t(to,`RPC '${e}' stream ${r} sending:`,x),c.send(x))},Ao:()=>c.close()}),A=(x,w,M)=>{x.listen(w,b=>{try{M(b)}catch(R){setTimeout(()=>{throw R},0)}})};return A(c,M_.EventType.OPEN,()=>{g||($t(to,`RPC '${e}' stream ${r} transport opened.`),v.So())}),A(c,M_.EventType.CLOSE,()=>{g||(g=!0,$t(to,`RPC '${e}' stream ${r} transport closed`),v.Do())}),A(c,M_.EventType.ERROR,x=>{g||(g=!0,Lm(to,`RPC '${e}' stream ${r} transport errored:`,x),v.Do(new vn(Ct.UNAVAILABLE,"The operation could not be completed")))}),A(c,M_.EventType.MESSAGE,x=>{var w;if(!g){const M=x.data[0];Tr(!!M);const b=M,R=(b==null?void 0:b.error)||((w=b[0])===null||w===void 0?void 0:w.error);if(R){$t(to,`RPC '${e}' stream ${r} received error:`,R);const F=R.status;let O=function(C){const B=ji[C];if(B!==void 0)return g6(B)}(F),D=R.message;O===void 0&&(O=Ct.INTERNAL,D="Unknown error status: "+F+" with message "+R.message),g=!0,v.Do(new vn(O,D)),c.close()}else $t(to,`RPC '${e}' stream ${r} received:`,M),v.vo(M)}}),A(a,H5.STAT_EVENT,x=>{x.stat===tC.PROXY?$t(to,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===tC.NOPROXY&&$t(to,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.bo()},0),v}}function LM(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(i){return new gse(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,t,n=1e3,r=1.5,s=6e4){this.li=e,this.timerId=t,this.Qo=n,this.Ko=r,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),n=Math.max(0,Date.now()-this.Go),r=Math.max(0,t-n);r>0&&$t("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,r,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,t,n,r,s,o,a,l){this.li=e,this.Yo=n,this.Zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new R6(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Ct.RESOURCE_EXHAUSTED?(mc(t.toString()),mc("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.Xo===t&&this.I_(n,r)},n=>{e(()=>{const r=new vn(Ct.UNKNOWN,"Fetching auth token failed: "+n.message);return this.E_(r)})})}I_(e,t){const n=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{n(()=>this.listener.Ro())}),this.stream.mo(()=>{n(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(r=>{n(()=>this.E_(r))}),this.stream.onMessage(r=>{n(()=>++this.n_==1?this.A_(r):this.onNext(r))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return $t("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():($t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class coe extends I6{constructor(e,t,n,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=yse(this.serializer,e),n=function(s){if(!("targetChange"in s))return Pn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Pn.min():o.readTime?iu(o.readTime):Pn.min()}(e);return this.listener.R_(t,n)}V_(e){const t={};t.database=cC(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=sC(l)?{documents:wse(s,l)}:{query:Sse(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=y6(s,o.resumeToken);const u=aC(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Pn.min())>0){a.readTime=Vx(s,o.snapshotVersion.toTimestamp());const u=aC(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const n=Tse(this.serializer,e);n&&(t.labels=n),this.c_(t)}m_(e){const t={};t.database=cC(this.serializer),t.removeTarget=e,this.c_(t)}}class hoe extends I6{constructor(e,t,n,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Tr(!!e.streamToken),this.lastStreamToken=e.streamToken,Tr(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Tr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=Ase(e.writeResults,e.commitTime),n=iu(e.commitTime);return this.listener.y_(n,t)}w_(){const e={};e.database=cC(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>xse(this.serializer,n))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class foe extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.S_=!1}b_(){if(this.S_)throw new vn(Ct.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,n,r){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,lC(t,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new vn(Ct.UNKNOWN,s.toString())})}ko(e,t,n,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,lC(t,n),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new vn(Ct.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class doe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(mc(t),this.C_=!1):$t("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class poe{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{n.enqueueAndForget(async()=>{Ud(this)&&($t("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=kn(l);u.k_.add(4),await _v(u),u.K_.set("Unknown"),u.k_.delete(4),await aw(u)}(this))})}),this.K_=new doe(n,r)}}async function aw(i){if(Ud(i))for(const e of i.q_)await e(!0)}async function _v(i){for(const e of i.q_)await e(!1)}function P6(i,e){const t=kn(i);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),LR(t)?BR(t):ng(t).s_()&&DR(t,e))}function PR(i,e){const t=kn(i),n=ng(t);t.B_.delete(e),n.s_()&&D6(t,e),t.B_.size===0&&(n.s_()?n.a_():Ud(t)&&t.K_.set("Unknown"))}function DR(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ng(i).V_(e)}function D6(i,e){i.U_.xe(e),ng(i).m_(e)}function BR(i){i.U_=new fse({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.B_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),ng(i).start(),i.K_.F_()}function LR(i){return Ud(i)&&!ng(i).i_()&&i.B_.size>0}function Ud(i){return kn(i).k_.size===0}function B6(i){i.U_=void 0}async function moe(i){i.K_.set("Online")}async function goe(i){i.B_.forEach((e,t)=>{DR(i,e)})}async function _oe(i,e){B6(i),LR(i)?(i.K_.O_(e),BR(i)):i.K_.set("Unknown")}async function voe(i,e,t){if(i.K_.set("Online"),e instanceof v6&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.B_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.B_.delete(a),r.U_.removeTarget(a))}(i,e)}catch(n){$t("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await jx(i,n)}else if(e instanceof D1?i.U_.$e(e):e instanceof _6?i.U_.Je(e):i.U_.Ge(e),!t.isEqual(Pn.min()))try{const n=await C6(i.localStore);t.compareTo(n)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.B_.get(u);f&&s.B_.set(u,f.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const f=s.B_.get(l);if(!f)return;s.B_.set(l,f.withResumeToken(zs.EMPTY_BYTE_STRING,f.snapshotVersion)),D6(s,l);const c=new mh(f.target,l,u,f.sequenceNumber);DR(s,c)}),s.remoteSyncer.applyRemoteEvent(a)}(i,t)}catch(n){$t("RemoteStore","Failed to raise snapshot:",n),await jx(i,n)}}async function jx(i,e,t){if(!tg(e))throw e;i.k_.add(1),await _v(i),i.K_.set("Offline"),t||(t=()=>C6(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{$t("RemoteStore","Retrying IndexedDB access"),await t(),i.k_.delete(1),await aw(i)})}function L6(i,e){return e().catch(t=>jx(i,t,e))}async function lw(i){const e=kn(i),t=Oh(e);let n=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;yoe(e);)try{const r=await noe(e.localStore,n);if(r===null){e.L_.length===0&&t.a_();break}n=r.batchId,xoe(e,r)}catch(r){await jx(e,r)}F6(e)&&O6(e)}function yoe(i){return Ud(i)&&i.L_.length<10}function xoe(i,e){i.L_.push(e);const t=Oh(i);t.s_()&&t.f_&&t.g_(e.mutations)}function F6(i){return Ud(i)&&!Oh(i).i_()&&i.L_.length>0}function O6(i){Oh(i).start()}async function Aoe(i){Oh(i).w_()}async function woe(i){const e=Oh(i);for(const t of i.L_)e.g_(t.mutations)}async function Soe(i,e,t){const n=i.L_.shift(),r=TR.from(n,e,t);await L6(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),await lw(i)}async function Eoe(i,e){e&&Oh(i).f_&&await async function(n,r){if(function(o){return use(o)&&o!==Ct.ABORTED}(r.code)){const s=n.L_.shift();Oh(n).__(),await L6(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await lw(n)}}(i,e),F6(i)&&O6(i)}async function ZF(i,e){const t=kn(i);t.asyncQueue.verifyOperationInProgress(),$t("RemoteStore","RemoteStore received new credentials");const n=Ud(t);t.k_.add(3),await _v(t),n&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await aw(t)}async function Toe(i,e){const t=kn(i);e?(t.k_.delete(2),await aw(t)):e||(t.k_.add(2),await _v(t),t.K_.set("Unknown"))}function ng(i){return i.W_||(i.W_=function(t,n,r){const s=kn(t);return s.b_(),new coe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Ro:moe.bind(null,i),mo:goe.bind(null,i),po:_oe.bind(null,i),R_:voe.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),LR(i)?BR(i):i.K_.set("Unknown")):(await i.W_.stop(),B6(i))})),i.W_}function Oh(i){return i.G_||(i.G_=function(t,n,r){const s=kn(t);return s.b_(),new hoe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:Aoe.bind(null,i),po:Eoe.bind(null,i),p_:woe.bind(null,i),y_:Soe.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await lw(i)):(await i.G_.stop(),i.L_.length>0&&($t("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Sh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const o=Date.now()+n,a=new FR(e,t,o,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vn(Ct.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function OR(i,e){if(mc("AsyncQueue",`${e}: ${i}`),tg(i))return new vn(Ct.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{static emptySet(e){return new _m(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||yn.comparator(t.key,n.key):(t,n)=>yn.comparator(t.key,n.key),this.keyedMap=b_(),this.sortedSet=new mi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _m)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new _m;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(){this.z_=new mi(yn.comparator)}track(e){const t=e.doc.key,n=this.z_.get(t);n?e.type!==0&&n.type===3?this.z_=this.z_.insert(t,e):e.type===3&&n.type!==1?this.z_=this.z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.z_=this.z_.remove(t):e.type===1&&n.type===2?this.z_=this.z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Rn():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Um{constructor(e,t,n,r,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Um(e,t,_m.emptySet(t),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ew(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Moe{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class boe{constructor(){this.queries=eO(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,n){const r=kn(t),s=r.queries;r.queries=eO(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(n)})})(this,new vn(Ct.ABORTED,"Firestore shutting down"))}}function eO(){return new kd(i=>n6(i),ew)}async function Coe(i,e){const t=kn(i);let n=3;const r=e.query;let s=t.queries.get(r);s?!s.Y_()&&e.Z_()&&(n=2):(s=new Moe,n=e.Z_()?0:1);try{switch(n){case 0:s.H_=await t.onListen(r,!0);break;case 1:s.H_=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=OR(o,`Initialization of query '${Zp(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.J_.push(e),e.ea(t.onlineState),s.H_&&e.ta(s.H_)&&kR(t)}async function Roe(i,e){const t=kn(i),n=e.query;let r=3;const s=t.queries.get(n);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?r=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function Ioe(i,e){const t=kn(i);let n=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.J_)a.ta(r)&&(n=!0);o.H_=r}}n&&kR(t)}function Poe(i,e,t){const n=kn(i),r=n.queries.get(e);if(r)for(const s of r.J_)s.onError(t);n.queries.delete(e)}function kR(i){i.X_.forEach(e=>{e.next()})}var fC,tO;(tO=fC||(fC={})).na="default",tO.Cache="cache";class Doe{constructor(e,t,n){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=n||{}}ta(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new Um(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const n=t!=="Offline";return(!this.options.ua||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Um.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==fC.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.key=e}}class N6{constructor(e){this.key=e}}class Boe{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Zn(),this.mutatedKeys=Zn(),this.Va=r6(e),this.ma=new _m(this.Va)}get fa(){return this.da}ga(e,t){const n=t?t.pa:new $F,r=t?t.ma:this.ma;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,c)=>{const d=r.get(f),g=tw(this.query,c)?c:null,v=!!d&&this.mutatedKeys.has(d.key),A=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;d&&g?d.data.isEqual(g.data)?v!==A&&(n.track({type:3,doc:g}),x=!0):this.ya(d,g)||(n.track({type:2,doc:g}),x=!0,(l&&this.Va(g,l)>0||u&&this.Va(g,u)<0)&&(a=!0)):!d&&g?(n.track({type:0,doc:g}),x=!0):d&&!g&&(n.track({type:1,doc:d}),x=!0,(l||u)&&(a=!0)),x&&(g?(o=o.add(g),s=A?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),n.track({type:1,doc:f})}return{ma:o,pa:n,ss:a,mutatedKeys:s}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((f,c)=>function(g,v){const A=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rn()}};return A(g)-A(v)}(f.type,c.type)||this.Va(f.doc,c.doc)),this.wa(n),r=r!=null&&r;const a=t&&!r?this.Sa():[],l=this.Ra.size===0&&this.current&&!r?1:0,u=l!==this.Aa;return this.Aa=l,o.length!==0||u?{snapshot:new Um(this.query,e.ma,s,o,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new $F,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Zn(),this.ma.forEach(n=>{this.Da(n.key)&&(this.Ra=this.Ra.add(n.key))});const t=[];return e.forEach(n=>{this.Ra.has(n)||t.push(new N6(n))}),this.Ra.forEach(n=>{e.has(n)||t.push(new k6(n))}),t}va(e){this.da=e.ds,this.Ra=Zn();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Um.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class Loe{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Foe{constructor(e){this.key=e,this.Fa=!1}}class Ooe{constructor(e,t,n,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new kd(a=>n6(a),ew),this.Oa=new Map,this.Na=new Set,this.La=new mi(yn.comparator),this.Ba=new Map,this.ka=new CR,this.qa={},this.Qa=new Map,this.Ka=Nm.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function koe(i,e,t=!0){const n=W6(i);let r;const s=n.xa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Ca()):r=await U6(n,e,t,!0),r}async function Noe(i,e){const t=W6(i);await U6(t,e,!0,!1)}async function U6(i,e,t,n){const r=await roe(i.localStore,ru(e)),s=r.targetId,o=i.sharedClientState.addLocalQueryTarget(s,t);let a;return n&&(a=await Uoe(i,e,s,o==="current",r.resumeToken)),i.isPrimaryClient&&t&&P6(i.remoteStore,r),a}async function Uoe(i,e,t,n,r){i.Ua=(c,d,g)=>async function(A,x,w,M){let b=x.view.ga(w);b.ss&&(b=await KF(A.localStore,x.query,!1).then(({documents:D})=>x.view.ga(D,b)));const R=M&&M.targetChanges.get(x.targetId),F=M&&M.targetMismatches.get(x.targetId)!=null,O=x.view.applyChanges(b,A.isPrimaryClient,R,F);return rO(A,x.targetId,O.ba),O.snapshot}(i,c,d,g);const s=await KF(i.localStore,e,!0),o=new Boe(e,s.ds),a=o.ga(s.documents),l=gv.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",r),u=o.applyChanges(a,i.isPrimaryClient,l);rO(i,t,u.ba);const f=new Loe(e,t,o);return i.xa.set(e,f),i.Oa.has(t)?i.Oa.get(t).push(e):i.Oa.set(t,[e]),u.snapshot}async function zoe(i,e,t){const n=kn(i),r=n.xa.get(e),s=n.Oa.get(r.targetId);if(s.length>1)return n.Oa.set(r.targetId,s.filter(o=>!ew(o,e))),void n.xa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await hC(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),t&&PR(n.remoteStore,r.targetId),dC(n,r.targetId)}).catch(eg)):(dC(n,r.targetId),await hC(n.localStore,r.targetId,!0))}async function Goe(i,e){const t=kn(i),n=t.xa.get(e),r=t.Oa.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),PR(t.remoteStore,n.targetId))}async function Hoe(i,e,t){const n=Koe(i);try{const r=await function(o,a){const l=kn(o),u=ss.now(),f=a.reduce((g,v)=>g.add(v.key),Zn());let c,d;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=gc(),A=Zn();return l.hs.getEntries(g,f).next(x=>{v=x,v.forEach((w,M)=>{M.isValidDocument()||(A=A.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(x=>{c=x;const w=[];for(const M of a){const b=ise(M,c.get(M.key).overlayedDocument);b!=null&&w.push(new Nd(M.key,b,K5(b.value.mapValue),ac.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,w,a)}).next(x=>{d=x;const w=x.applyToLocalDocumentSet(c,A);return l.documentOverlayCache.saveOverlays(g,x.batchId,w)})}).then(()=>({batchId:d.batchId,changes:s6(c)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.qa[o.currentUser.toKey()];u||(u=new mi(tr)),u=u.insert(a,l),o.qa[o.currentUser.toKey()]=u}(n,r.batchId,t),await vv(n,r.changes),await lw(n.remoteStore)}catch(r){const s=OR(r,"Failed to persist write");t.reject(s)}}async function z6(i,e){const t=kn(i);try{const n=await eoe(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.Ba.get(s);o&&(Tr(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Fa=!0:r.modifiedDocuments.size>0?Tr(o.Fa):r.removedDocuments.size>0&&(Tr(o.Fa),o.Fa=!1))}),await vv(t,n,e)}catch(n){await eg(n)}}function nO(i,e,t){const n=kn(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=kn(o);l.onlineState=a;let u=!1;l.queries.forEach((f,c)=>{for(const d of c.J_)d.ea(a)&&(u=!0)}),u&&kR(l)}(n.eventManager,e),r.length&&n.Ma.R_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Voe(i,e,t){const n=kn(i);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.Ba.get(e),s=r&&r.key;if(s){let o=new mi(yn.comparator);o=o.insert(s,ro.newNoDocument(s,Pn.min()));const a=Zn().add(s),l=new sw(Pn.min(),new Map,new mi(tr),o,a);await z6(n,l),n.La=n.La.remove(s),n.Ba.delete(e),NR(n)}else await hC(n.localStore,e,!1).then(()=>dC(n,e,t)).catch(eg)}async function Woe(i,e){const t=kn(i),n=e.batch.batchId;try{const r=await $se(t.localStore,e);H6(t,n,null),G6(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await vv(t,r)}catch(r){await eg(r)}}async function joe(i,e,t){const n=kn(i);try{const r=await function(o,a){const l=kn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,a).next(c=>(Tr(c!==null),f=c.keys(),l.mutationQueue.removeMutationBatch(u,c))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(n.localStore,e);H6(n,e,t),G6(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await vv(n,r)}catch(r){await eg(r)}}function G6(i,e){(i.Qa.get(e)||[]).forEach(t=>{t.resolve()}),i.Qa.delete(e)}function H6(i,e,t){const n=kn(i);let r=n.qa[n.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),n.qa[n.currentUser.toKey()]=r}}function dC(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.Oa.get(e))i.xa.delete(n),t&&i.Ma.Wa(n,t);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(n=>{i.ka.containsKey(n)||V6(i,n)})}function V6(i,e){i.Na.delete(e.path.canonicalString());const t=i.La.get(e);t!==null&&(PR(i.remoteStore,t),i.La=i.La.remove(e),i.Ba.delete(t),NR(i))}function rO(i,e,t){for(const n of t)n instanceof k6?(i.ka.addReference(n.key,e),qoe(i,n)):n instanceof N6?($t("SyncEngine","Document no longer in limbo: "+n.key),i.ka.removeReference(n.key,e),i.ka.containsKey(n.key)||V6(i,n.key)):Rn()}function qoe(i,e){const t=e.key,n=t.path.canonicalString();i.La.get(t)||i.Na.has(n)||($t("SyncEngine","New document in limbo: "+t),i.Na.add(n),NR(i))}function NR(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const t=new yn(Ti.fromString(e)),n=i.Ka.next();i.Ba.set(n,new Foe(t)),i.La=i.La.insert(t,n),P6(i.remoteStore,new mh(ru(SR(t.path)),n,"TargetPurposeLimboResolution",YA.oe))}}async function vv(i,e,t){const n=kn(i),r=[],s=[],o=[];n.xa.isEmpty()||(n.xa.forEach((a,l)=>{o.push(n.Ua(l,e,t).then(u=>{var f;if((u||t)&&n.isPrimaryClient){const c=u?!u.fromCache:(f=t==null?void 0:t.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(l.targetId,c?"current":"not-current")}if(u){r.push(u);const c=IR.zi(l.targetId,u);s.push(c)}}))}),await Promise.all(o),n.Ma.R_(r),await async function(l,u){const f=kn(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>_t.forEach(u,d=>_t.forEach(d.Wi,g=>f.persistence.referenceDelegate.addReference(c,d.targetId,g)).next(()=>_t.forEach(d.Gi,g=>f.persistence.referenceDelegate.removeReference(c,d.targetId,g)))))}catch(c){if(!tg(c))throw c;$t("LocalStore","Failed to update sequence numbers: "+c)}for(const c of u){const d=c.targetId;if(!c.fromCache){const g=f.us.get(d),v=g.snapshotVersion,A=g.withLastLimboFreeSnapshotVersion(v);f.us=f.us.insert(d,A)}}}(n.localStore,s))}async function Xoe(i,e){const t=kn(i);if(!t.currentUser.isEqual(e)){$t("SyncEngine","User change. New user:",e.toKey());const n=await b6(t.localStore,e);t.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new vn(Ct.CANCELLED,o))})}),s.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await vv(t,n.Ts)}}function Joe(i,e){const t=kn(i),n=t.Ba.get(e);if(n&&n.Fa)return Zn().add(n.key);{let r=Zn();const s=t.Oa.get(e);if(!s)return r;for(const o of s){const a=t.xa.get(o);r=r.unionWith(a.view.fa)}return r}}function W6(i){const e=kn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=z6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Joe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Voe.bind(null,e),e.Ma.R_=Ioe.bind(null,e.eventManager),e.Ma.Wa=Poe.bind(null,e.eventManager),e}function Koe(i){const e=kn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Woe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=joe.bind(null,e),e}class qx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ow(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return Zse(this.persistence,new Yse,e.initialUser,this.serializer)}ja(e){return new M6(RR.ei,this.serializer)}za(e){return new soe}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qx.provider={build:()=>new qx};class Yoe extends qx{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Tr(this.persistence.referenceDelegate instanceof Wx);const n=this.persistence.referenceDelegate.garbageCollector;return new Fse(n,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Vo.withCacheSize(this.cacheSizeBytes):Vo.DEFAULT;return new M6(n=>Wx.ei(n,t),this.serializer)}}class pC{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>nO(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xoe.bind(null,this.syncEngine),await Toe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new boe}()}createDatastore(e){const t=ow(e.databaseInfo.databaseId),n=function(s){return new uoe(s)}(e.databaseInfo);return function(s,o,a,l){return new foe(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,r,s,o,a){return new poe(n,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>nO(this.syncEngine,t,0),function(){return QF.p()?new QF:new ooe}())}createSyncEngine(e,t){return function(r,s,o,a,l,u,f){const c=new Ooe(r,s,o,a,l,u);return f&&(c.$a=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const s=kn(r);$t("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await _v(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}pC.provider={build:()=>new pC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qoe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):mc("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zoe{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=no.UNAUTHENTICATED,this.clientId=q5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{$t("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>($t("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=OR(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function FM(i,e){i.asyncQueue.verifyOperationInProgress(),$t("FirestoreClient","Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener(async r=>{n.isEqual(r)||(await b6(e.localStore,r),n=r)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function iO(i,e){i.asyncQueue.verifyOperationInProgress();const t=await $oe(i);$t("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(n=>ZF(e.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>ZF(e.remoteStore,r)),i._onlineComponents=e}async function $oe(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){$t("FirestoreClient","Using user provided OfflineComponentProvider");try{await FM(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===Ct.FAILED_PRECONDITION||r.code===Ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Lm("Error using user provided cache. Falling back to memory cache: "+t),await FM(i,new qx)}}else $t("FirestoreClient","Using default OfflineComponentProvider"),await FM(i,new Yoe(void 0));return i._offlineComponents}async function j6(i){return i._onlineComponents||(i._uninitializedComponentsProvider?($t("FirestoreClient","Using user provided OnlineComponentProvider"),await iO(i,i._uninitializedComponentsProvider._online)):($t("FirestoreClient","Using default OnlineComponentProvider"),await iO(i,new pC))),i._onlineComponents}function eae(i){return j6(i).then(e=>e.syncEngine)}async function tae(i){const e=await j6(i),t=e.eventManager;return t.onListen=koe.bind(null,e.syncEngine),t.onUnlisten=zoe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Noe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Goe.bind(null,e.syncEngine),t}function nae(i,e,t={}){const n=new Sh;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const f=new Qoe({next:d=>{f.eu(),o.enqueueAndForget(()=>Roe(s,c));const g=d.docs.has(a);!g&&d.fromCache?u.reject(new vn(Ct.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&d.fromCache&&l&&l.source==="server"?u.reject(new vn(Ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),c=new Doe(SR(a.path),f,{includeMetadataChanges:!0,ua:!0});return Coe(s,c)}(await tae(i),i.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rae(i,e,t){if(!t)throw new vn(Ct.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function iae(i,e,t,n){if(e===!0&&n===!0)throw new vn(Ct.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function oO(i){if(!yn.isDocumentKey(i))throw new vn(Ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function UR(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Rn()}function G0(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new vn(Ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=UR(i);throw new vn(Ct.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new vn(Ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new vn(Ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iae("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q6((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new vn(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new vn(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new vn(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zR{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aO({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vn(Ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new vn(Ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aO(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new cie;switch(n.type){case"firstParty":return new pie(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new vn(Ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=sO.get(t);n&&($t("ComponentProvider","Removing Datastore"),sO.delete(t),n.terminate())}(this),Promise.resolve()}}function sae(i,e,t,n={}){var r;const s=(i=G0(i,zR))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Lm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=no.MOCK_USER;else{a=jne(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new vn(Ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new no(u)}i._authCredentials=new hie(new j5(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new GR(this.firestore,e,this._query)}}class Ha{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new H0(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ha(this.firestore,e,this._key)}}class H0 extends GR{constructor(e,t,n){super(e,t,SR(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ha(this.firestore,null,new yn(e))}withConverter(e){return new H0(this.firestore,e,this._path)}}function X6(i,e,...t){if(i=Cd(i),arguments.length===1&&(e=q5.newId()),rae("doc","path",e),i instanceof zR){const n=Ti.fromString(e,...t);return oO(n),new Ha(i,null,new yn(n))}{if(!(i instanceof Ha||i instanceof H0))throw new vn(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Ti.fromString(e,...t));return oO(n),new Ha(i.firestore,i instanceof H0?i.converter:null,new yn(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new R6(this,"async_queue_retry"),this.fu=()=>{const n=LM();n&&$t("AsyncQueue","Visibility state changed to "+n.visibilityState),this.r_.Jo()},this.gu=e;const t=LM();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=LM();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Sh;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!tg(e))throw e;$t("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(n=>{this.Au=n,this.Ru=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(n);throw mc("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.Ru=!1,n))));return this.gu=t,t}enqueueAfterDelay(e,t,n){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const r=FR.createAndSchedule(this,e,t,n,s=>this.Su(s));return this.du.push(r),r}pu(){this.Au&&Rn()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class HR extends zR{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new lO,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lO(e),this._firestoreClient=void 0,await e}}}function oae(i,e){const t=typeof i=="object"?i:eie(),n=typeof i=="string"?i:"(default)",r=Yre(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=Vne("firestore");s&&sae(r,...s)}return r}function J6(i){if(i._terminated)throw new vn(Ct.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||aae(i),i._firestoreClient}function aae(i){var e,t,n;const r=i._freezeSettings(),s=function(a,l,u,f){return new Rie(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,q6(f.experimentalLongPollingOptions),f.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,r);i._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),i._firestoreClient=new Zoe(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zm(zs.fromBase64String(e))}catch(t){throw new vn(Ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zm(zs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new vn(Ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ns(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new vn(Ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new vn(Ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tr(this._lat,e._lat)||tr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lae=/^__.*__$/;class K6{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Nd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Y6(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rn()}}class jR{constructor(e,t,n,r,s,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new jR(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.xu({path:n,Nu:!1});return r.Lu(e),r}Bu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.xu({path:n,Nu:!1});return r.Fu(),r}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Xx(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Y6(this.Mu)&&lae.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class uae{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ow(e)}$u(e,t,n,r=!1){return new jR({Mu:e,methodName:t,Ku:n,path:Ns.emptyPath(),Nu:!1,Qu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cae(i){const e=i._freezeSettings(),t=ow(i._databaseId);return new uae(i._databaseId,!!e.ignoreUndefinedProperties,t)}class hw extends cw{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hw}}class qR extends cw{constructor(e,t){super(e),this.Wu=t}_toFieldTransform(e){const t=new z0(e.serializer,l6(e.serializer,this.Wu));return new ese(e.path,t)}isEqual(e){return e instanceof qR&&this.Wu===e.Wu}}function hae(i,e,t,n){const r=i.$u(1,e,t);Z6("Data must be an object, but it was:",r,n);const s=[],o=ga.empty();Hh(n,(l,u)=>{const f=XR(e,l,t);u=Cd(u);const c=r.Bu(f);if(u instanceof hw)s.push(f);else{const d=fw(u,c);d!=null&&(s.push(f),o.set(f,d))}});const a=new Cl(s);return new K6(o,a,r.fieldTransforms)}function fae(i,e,t,n,r,s){const o=i.$u(1,e,t),a=[uO(e,n,t)],l=[r];if(s.length%2!=0)throw new vn(Ct.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(uO(e,s[d])),l.push(s[d+1]);const u=[],f=ga.empty();for(let d=a.length-1;d>=0;--d)if(!mae(u,a[d])){const g=a[d];let v=l[d];v=Cd(v);const A=o.Bu(g);if(v instanceof hw)u.push(g);else{const x=fw(v,A);x!=null&&(u.push(g),f.set(g,x))}}const c=new Cl(u);return new K6(f,c,o.fieldTransforms)}function fw(i,e){if(Q6(i=Cd(i)))return Z6("Unsupported field value:",e,i),dae(i,e);if(i instanceof cw)return function(n,r){if(!Y6(r.Mu))throw r.qu(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(n,r){const s=[];let o=0;for(const a of n){let l=fw(a,r.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(i,e)}return function(n,r){if((n=Cd(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return l6(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ss.fromDate(n);return{timestampValue:Vx(r.serializer,s)}}if(n instanceof ss){const s=new ss(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Vx(r.serializer,s)}}if(n instanceof VR)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof zm)return{bytesValue:y6(r.serializer,n._byteString)};if(n instanceof Ha){const s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bR(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof WR)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return ER(a.serializer,l)})}}}}}}(n,r);throw r.qu(`Unsupported field value: ${UR(n)}`)}(i,e)}function dae(i,e){const t={};return X5(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hh(i,(n,r)=>{const s=fw(r,e.Ou(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function Q6(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ss||i instanceof VR||i instanceof zm||i instanceof Ha||i instanceof cw||i instanceof WR)}function Z6(i,e,t){if(!Q6(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const n=UR(t);throw n==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+n)}}function uO(i,e,t){if((e=Cd(e))instanceof uw)return e._internalPath;if(typeof e=="string")return XR(i,e);throw Xx("Field path arguments must be of type string or ",i,!1,void 0,t)}const pae=new RegExp("[~\\*/\\[\\]]");function XR(i,e,t){if(e.search(pae)>=0)throw Xx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new uw(...e.split("."))._internalPath}catch{throw Xx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Xx(i,e,t,n,r){const s=n&&!n.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${r}`),l+=")"),new vn(Ct.INVALID_ARGUMENT,a+i+l)}function mae(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ha(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gae(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(e9("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gae extends $6{data(){return super.data()}}function e9(i,e){return typeof e=="string"?XR(i,e):e instanceof uw?e._internalPath:e._delegate._internalPath}class _ae{convertValue(e,t="none"){switch(Fh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Rn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Hh(e,(r,s)=>{n[r]=this.convertValue(s,t)}),n}convertVectorValue(e){var t,n,r;const s=(r=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(o=>Bi(o.doubleValue));return new WR(s)}convertGeoPoint(e){return new VR(Bi(e.latitude),Bi(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ZA(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(F0(e));default:return null}}convertTimestamp(e){const t=Bh(e);return new ss(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ti.fromString(e);Tr(T6(n));const r=new O0(n.get(1),n.get(3)),s=new yn(n.popFirst(5));return r.isEqual(t)||mc(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vae{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class t9 extends $6{constructor(e,t,n,r,s,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yae(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(e9("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class yae extends t9{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xae(i){i=G0(i,Ha);const e=G0(i.firestore,HR);return nae(J6(e),i._key).then(t=>Eae(e,i,t))}class Aae extends _ae{constructor(e){super(),this.firestore=e}convertBytes(e){return new zm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ha(this.firestore,null,t)}}function wae(i,e,t,...n){i=G0(i,Ha);const r=G0(i.firestore,HR),s=cae(r);let o;return o=typeof(e=Cd(e))=="string"||e instanceof uw?fae(s,"updateDoc",i._key,e,t,n):hae(s,"updateDoc",i._key,e),Sae(r,[o.toMutation(i._key,ac.exists(!0))])}function Sae(i,e){return function(n,r){const s=new Sh;return n.asyncQueue.enqueueAndForget(async()=>Hoe(await eae(n),r,s)),s.promise}(J6(i),e)}function Eae(i,e,t){const n=t.docs.get(e._key),r=new Aae(i);return new t9(i,r,e._key,n,new vae(t.hasPendingWrites,t.fromCache),e.converter)}function Tae(i){return new qR("increment",i)}(function(e,t=!0){(function(r){$m=r})($re),Nx(new D0("firestore",(n,{instanceIdentifier:r,options:s})=>{const o=n.getProvider("app").getImmediate(),a=new HR(new fie(n.getProvider("auth-internal")),new gie(n.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new vn(Ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new O0(u.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),gm(MF,"4.7.5",e),gm(MF,"4.7.5","esm2017")})();var Mae="firebase",bae="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gm(Mae,bae,"app");const Cae={apiKey:"AIzaSyAH2GqiWqePOTQRaw9M-VS3WMogA68ruxI",authDomain:"franciscoagustin-portfolio.firebaseapp.com",projectId:"franciscoagustin-portfolio",storageBucket:"franciscoagustin-portfolio.firebasestorage.app",messagingSenderId:"686754198370",appId:"1:686754198370:web:9d954f08268c29559b723b",measurementId:"G-B4KM3FTL6M"},Rae=O5(Cae),n9=oae(Rae),Iae=async()=>{try{const i=X6(n9,"clickCounters","avatarClickCount");await wae(i,{count:Tae(1)})}catch(i){console.error("Error al incrementar el contador:",i)}};var OM={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var cO;function Pae(){return cO||(cO=1,function(i){(function(){var e=function(){this.init()};e.prototype={init:function(){var c=this||t;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var d=this||t;if(c=parseFloat(c),d.ctx||f(),typeof c<"u"&&c>=0&&c<=1){if(d._volume=c,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c,t.ctx.currentTime);for(var g=0;g<d._howls.length;g++)if(!d._howls[g]._webAudio)for(var v=d._howls[g]._getSoundIds(),A=0;A<v.length;A++){var x=d._howls[g]._soundById(v[A]);x&&x._node&&(x._node.volume=x._volume*c)}return d}return d._volume},mute:function(c){var d=this||t;d.ctx||f(),d._muted=c,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c?0:d._volume,t.ctx.currentTime);for(var g=0;g<d._howls.length;g++)if(!d._howls[g]._webAudio)for(var v=d._howls[g]._getSoundIds(),A=0;A<v.length;A++){var x=d._howls[g]._soundById(v[A]);x&&x._node&&(x._node.muted=c?!0:x._muted)}return d},stop:function(){for(var c=this||t,d=0;d<c._howls.length;d++)c._howls[d].stop();return c},unload:function(){for(var c=this||t,d=c._howls.length-1;d>=0;d--)c._howls[d].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,f()),c},codecs:function(c){return(this||t)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||t;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var d=new Audio;d.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||t,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return c}if(!d||typeof d.canPlayType!="function")return c;var g=d.canPlayType("audio/mpeg;").replace(/^no$/,""),v=c._navigator?c._navigator.userAgent:"",A=v.match(/OPR\/(\d+)/g),x=A&&parseInt(A[0].split("/")[1],10)<33,w=v.indexOf("Safari")!==-1&&v.indexOf("Chrome")===-1,M=v.match(/Version\/(.*?) /),b=w&&M&&parseInt(M[1],10)<15;return c._codecs={mp3:!!(!x&&(g||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!g,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||t;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var d=function(g){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var v=new Audio;v._unlocked=!0,c._releaseHtml5Audio(v)}catch{c.noAudio=!0;break}for(var A=0;A<c._howls.length;A++)if(!c._howls[A]._webAudio)for(var x=c._howls[A]._getSoundIds(),w=0;w<x.length;w++){var M=c._howls[A]._soundById(x[w]);M&&M._node&&!M._node._unlocked&&(M._node._unlocked=!0,M._node.load())}c._autoResume();var b=c.ctx.createBufferSource();b.buffer=c._scratchBuffer,b.connect(c.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),b.onended=function(){b.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var R=0;R<c._howls.length;R++)c._howls[R]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),c}},_obtainHtml5Audio:function(){var c=this||t;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var d=this||t;return c._unlocked&&d._html5AudioPool.push(c),d},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!t.usingWebAudio)){for(var d=0;d<c._howls.length;d++)if(c._howls[d]._webAudio){for(var g=0;g<c._howls[d]._sounds.length;g++)if(!c._howls[d]._sounds[g]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(c.autoSuspend){c._suspendTimer=null,c.state="suspending";var v=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(v,v)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!t.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var d=0;d<c._howls.length;d++)c._howls[d]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var t=new e,n=function(c){var d=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(c)};n.prototype={init:function(c){var d=this;return t.ctx||f(),d._autoplay=c.autoplay||!1,d._format=typeof c.format!="string"?c.format:[c.format],d._html5=c.html5||!1,d._muted=c.mute||!1,d._loop=c.loop||!1,d._pool=c.pool||5,d._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,d._rate=c.rate||1,d._sprite=c.sprite||{},d._src=typeof c.src!="string"?c.src:[c.src],d._volume=c.volume!==void 0?c.volume:1,d._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=c.onend?[{fn:c.onend}]:[],d._onfade=c.onfade?[{fn:c.onfade}]:[],d._onload=c.onload?[{fn:c.onload}]:[],d._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],d._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],d._onpause=c.onpause?[{fn:c.onpause}]:[],d._onplay=c.onplay?[{fn:c.onplay}]:[],d._onstop=c.onstop?[{fn:c.onstop}]:[],d._onmute=c.onmute?[{fn:c.onmute}]:[],d._onvolume=c.onvolume?[{fn:c.onvolume}]:[],d._onrate=c.onrate?[{fn:c.onrate}]:[],d._onseek=c.onseek?[{fn:c.onseek}]:[],d._onunlock=c.onunlock?[{fn:c.onunlock}]:[],d._onresume=[],d._webAudio=t.usingWebAudio&&!d._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var c=this,d=null;if(t.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var g=0;g<c._src.length;g++){var v,A;if(c._format&&c._format[g])v=c._format[g];else{if(A=c._src[g],typeof A!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}v=/^data:audio\/([^;,]+);/i.exec(A),v||(v=/\.([^.]+)$/.exec(A.split("?",1)[0])),v&&(v=v[1].toLowerCase())}if(v||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),v&&t.codecs(v)){d=c._src[g];break}}if(!d){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=d,c._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new r(c),c._webAudio&&o(c),c},play:function(c,d){var g=this,v=null;if(typeof c=="number")v=c,c=null;else{if(typeof c=="string"&&g._state==="loaded"&&!g._sprite[c])return null;if(typeof c>"u"&&(c="__default",!g._playLock)){for(var A=0,x=0;x<g._sounds.length;x++)g._sounds[x]._paused&&!g._sounds[x]._ended&&(A++,v=g._sounds[x]._id);A===1?c=null:v=null}}var w=v?g._soundById(v):g._inactiveSound();if(!w)return null;if(v&&!c&&(c=w._sprite||"__default"),g._state!=="loaded"){w._sprite=c,w._ended=!1;var M=w._id;return g._queue.push({event:"play",action:function(){g.play(M)}}),M}if(v&&!w._paused)return d||g._loadQueue("play"),w._id;g._webAudio&&t._autoResume();var b=Math.max(0,w._seek>0?w._seek:g._sprite[c][0]/1e3),R=Math.max(0,(g._sprite[c][0]+g._sprite[c][1])/1e3-b),F=R*1e3/Math.abs(w._rate),O=g._sprite[c][0]/1e3,D=(g._sprite[c][0]+g._sprite[c][1])/1e3;w._sprite=c,w._ended=!1;var I=function(){w._paused=!1,w._seek=b,w._start=O,w._stop=D,w._loop=!!(w._loop||g._sprite[c][2])};if(b>=D){g._ended(w);return}var C=w._node;if(g._webAudio){var B=function(){g._playLock=!1,I(),g._refreshBuffer(w);var Z=w._muted||g._muted?0:w._volume;C.gain.setValueAtTime(Z,t.ctx.currentTime),w._playStart=t.ctx.currentTime,typeof C.bufferSource.start>"u"?w._loop?C.bufferSource.noteGrainOn(0,b,86400):C.bufferSource.noteGrainOn(0,b,R):w._loop?C.bufferSource.start(0,b,86400):C.bufferSource.start(0,b,R),F!==1/0&&(g._endTimers[w._id]=setTimeout(g._ended.bind(g,w),F)),d||setTimeout(function(){g._emit("play",w._id),g._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?B():(g._playLock=!0,g.once("resume",B),g._clearTimer(w._id))}else{var k=function(){C.currentTime=b,C.muted=w._muted||g._muted||t._muted||C.muted,C.volume=w._volume*t.volume(),C.playbackRate=w._rate;try{var Z=C.play();if(Z&&typeof Promise<"u"&&(Z instanceof Promise||typeof Z.then=="function")?(g._playLock=!0,I(),Z.then(function(){g._playLock=!1,C._unlocked=!0,d?g._loadQueue():g._emit("play",w._id)}).catch(function(){g._playLock=!1,g._emit("playerror",w._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),w._ended=!0,w._paused=!0})):d||(g._playLock=!1,I(),g._emit("play",w._id)),C.playbackRate=w._rate,C.paused){g._emit("playerror",w._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||w._loop?g._endTimers[w._id]=setTimeout(g._ended.bind(g,w),F):(g._endTimers[w._id]=function(){g._ended(w),C.removeEventListener("ended",g._endTimers[w._id],!1)},C.addEventListener("ended",g._endTimers[w._id],!1))}catch(ue){g._emit("playerror",w._id,ue)}};C.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(C.src=g._src,C.load());var H=window&&window.ejecta||!C.readyState&&t._navigator.isCocoonJS;if(C.readyState>=3||H)k();else{g._playLock=!0,g._state="loading";var z=function(){g._state="loaded",k(),C.removeEventListener(t._canPlayEvent,z,!1)};C.addEventListener(t._canPlayEvent,z,!1),g._clearTimer(w._id)}}return w._id},pause:function(c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(c)}}),d;for(var g=d._getSoundIds(c),v=0;v<g.length;v++){d._clearTimer(g[v]);var A=d._soundById(g[v]);if(A&&!A._paused&&(A._seek=d.seek(g[v]),A._rateSeek=0,A._paused=!0,d._stopFade(g[v]),A._node))if(d._webAudio){if(!A._node.bufferSource)continue;typeof A._node.bufferSource.stop>"u"?A._node.bufferSource.noteOff(0):A._node.bufferSource.stop(0),d._cleanBuffer(A._node)}else(!isNaN(A._node.duration)||A._node.duration===1/0)&&A._node.pause();arguments[1]||d._emit("pause",A?A._id:null)}return d},stop:function(c,d){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"stop",action:function(){g.stop(c)}}),g;for(var v=g._getSoundIds(c),A=0;A<v.length;A++){g._clearTimer(v[A]);var x=g._soundById(v[A]);x&&(x._seek=x._start||0,x._rateSeek=0,x._paused=!0,x._ended=!0,g._stopFade(v[A]),x._node&&(g._webAudio?x._node.bufferSource&&(typeof x._node.bufferSource.stop>"u"?x._node.bufferSource.noteOff(0):x._node.bufferSource.stop(0),g._cleanBuffer(x._node)):(!isNaN(x._node.duration)||x._node.duration===1/0)&&(x._node.currentTime=x._start||0,x._node.pause(),x._node.duration===1/0&&g._clearSound(x._node))),d||g._emit("stop",x._id))}return g},mute:function(c,d){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"mute",action:function(){g.mute(c,d)}}),g;if(typeof d>"u")if(typeof c=="boolean")g._muted=c;else return g._muted;for(var v=g._getSoundIds(d),A=0;A<v.length;A++){var x=g._soundById(v[A]);x&&(x._muted=c,x._interval&&g._stopFade(x._id),g._webAudio&&x._node?x._node.gain.setValueAtTime(c?0:x._volume,t.ctx.currentTime):x._node&&(x._node.muted=t._muted?!0:c),g._emit("mute",x._id))}return g},volume:function(){var c=this,d=arguments,g,v;if(d.length===0)return c._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var A=c._getSoundIds(),x=A.indexOf(d[0]);x>=0?v=parseInt(d[0],10):g=parseFloat(d[0])}else d.length>=2&&(g=parseFloat(d[0]),v=parseInt(d[1],10));var w;if(typeof g<"u"&&g>=0&&g<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,d)}}),c;typeof v>"u"&&(c._volume=g),v=c._getSoundIds(v);for(var M=0;M<v.length;M++)w=c._soundById(v[M]),w&&(w._volume=g,d[2]||c._stopFade(v[M]),c._webAudio&&w._node&&!w._muted?w._node.gain.setValueAtTime(g,t.ctx.currentTime):w._node&&!w._muted&&(w._node.volume=g*t.volume()),c._emit("volume",w._id))}else return w=v?c._soundById(v):c._sounds[0],w?w._volume:0;return c},fade:function(c,d,g,v){var A=this;if(A._state!=="loaded"||A._playLock)return A._queue.push({event:"fade",action:function(){A.fade(c,d,g,v)}}),A;c=Math.min(Math.max(0,parseFloat(c)),1),d=Math.min(Math.max(0,parseFloat(d)),1),g=parseFloat(g),A.volume(c,v);for(var x=A._getSoundIds(v),w=0;w<x.length;w++){var M=A._soundById(x[w]);if(M){if(v||A._stopFade(x[w]),A._webAudio&&!M._muted){var b=t.ctx.currentTime,R=b+g/1e3;M._volume=c,M._node.gain.setValueAtTime(c,b),M._node.gain.linearRampToValueAtTime(d,R)}A._startFadeInterval(M,c,d,g,x[w],typeof v>"u")}}return A},_startFadeInterval:function(c,d,g,v,A,x){var w=this,M=d,b=g-d,R=Math.abs(b/.01),F=Math.max(4,R>0?v/R:v),O=Date.now();c._fadeTo=g,c._interval=setInterval(function(){var D=(Date.now()-O)/v;O=Date.now(),M+=b*D,M=Math.round(M*100)/100,b<0?M=Math.max(g,M):M=Math.min(g,M),w._webAudio?c._volume=M:w.volume(M,c._id,!0),x&&(w._volume=M),(g<d&&M<=g||g>d&&M>=g)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,w.volume(g,c._id),w._emit("fade",c._id))},F)},_stopFade:function(c){var d=this,g=d._soundById(c);return g&&g._interval&&(d._webAudio&&g._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(g._interval),g._interval=null,d.volume(g._fadeTo,c),g._fadeTo=null,d._emit("fade",c)),d},loop:function(){var c=this,d=arguments,g,v,A;if(d.length===0)return c._loop;if(d.length===1)if(typeof d[0]=="boolean")g=d[0],c._loop=g;else return A=c._soundById(parseInt(d[0],10)),A?A._loop:!1;else d.length===2&&(g=d[0],v=parseInt(d[1],10));for(var x=c._getSoundIds(v),w=0;w<x.length;w++)A=c._soundById(x[w]),A&&(A._loop=g,c._webAudio&&A._node&&A._node.bufferSource&&(A._node.bufferSource.loop=g,g&&(A._node.bufferSource.loopStart=A._start||0,A._node.bufferSource.loopEnd=A._stop,c.playing(x[w])&&(c.pause(x[w],!0),c.play(x[w],!0)))));return c},rate:function(){var c=this,d=arguments,g,v;if(d.length===0)v=c._sounds[0]._id;else if(d.length===1){var A=c._getSoundIds(),x=A.indexOf(d[0]);x>=0?v=parseInt(d[0],10):g=parseFloat(d[0])}else d.length===2&&(g=parseFloat(d[0]),v=parseInt(d[1],10));var w;if(typeof g=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,d)}}),c;typeof v>"u"&&(c._rate=g),v=c._getSoundIds(v);for(var M=0;M<v.length;M++)if(w=c._soundById(v[M]),w){c.playing(v[M])&&(w._rateSeek=c.seek(v[M]),w._playStart=c._webAudio?t.ctx.currentTime:w._playStart),w._rate=g,c._webAudio&&w._node&&w._node.bufferSource?w._node.bufferSource.playbackRate.setValueAtTime(g,t.ctx.currentTime):w._node&&(w._node.playbackRate=g);var b=c.seek(v[M]),R=(c._sprite[w._sprite][0]+c._sprite[w._sprite][1])/1e3-b,F=R*1e3/Math.abs(w._rate);(c._endTimers[v[M]]||!w._paused)&&(c._clearTimer(v[M]),c._endTimers[v[M]]=setTimeout(c._ended.bind(c,w),F)),c._emit("rate",w._id)}}else return w=c._soundById(v),w?w._rate:c._rate;return c},seek:function(){var c=this,d=arguments,g,v;if(d.length===0)c._sounds.length&&(v=c._sounds[0]._id);else if(d.length===1){var A=c._getSoundIds(),x=A.indexOf(d[0]);x>=0?v=parseInt(d[0],10):c._sounds.length&&(v=c._sounds[0]._id,g=parseFloat(d[0]))}else d.length===2&&(g=parseFloat(d[0]),v=parseInt(d[1],10));if(typeof v>"u")return 0;if(typeof g=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,d)}}),c;var w=c._soundById(v);if(w)if(typeof g=="number"&&g>=0){var M=c.playing(v);M&&c.pause(v,!0),w._seek=g,w._ended=!1,c._clearTimer(v),!c._webAudio&&w._node&&!isNaN(w._node.duration)&&(w._node.currentTime=g);var b=function(){M&&c.play(v,!0),c._emit("seek",v)};if(M&&!c._webAudio){var R=function(){c._playLock?setTimeout(R,0):b()};setTimeout(R,0)}else b()}else if(c._webAudio){var F=c.playing(v)?t.ctx.currentTime-w._playStart:0,O=w._rateSeek?w._rateSeek-w._seek:0;return w._seek+(O+F*Math.abs(w._rate))}else return w._node.currentTime;return c},playing:function(c){var d=this;if(typeof c=="number"){var g=d._soundById(c);return g?!g._paused:!1}for(var v=0;v<d._sounds.length;v++)if(!d._sounds[v]._paused)return!0;return!1},duration:function(c){var d=this,g=d._duration,v=d._soundById(c);return v&&(g=d._sprite[v._sprite][1]/1e3),g},state:function(){return this._state},unload:function(){for(var c=this,d=c._sounds,g=0;g<d.length;g++)d[g]._paused||c.stop(d[g]._id),c._webAudio||(c._clearSound(d[g]._node),d[g]._node.removeEventListener("error",d[g]._errorFn,!1),d[g]._node.removeEventListener(t._canPlayEvent,d[g]._loadFn,!1),d[g]._node.removeEventListener("ended",d[g]._endFn,!1),t._releaseHtml5Audio(d[g]._node)),delete d[g]._node,c._clearTimer(d[g]._id);var v=t._howls.indexOf(c);v>=0&&t._howls.splice(v,1);var A=!0;for(g=0;g<t._howls.length;g++)if(t._howls[g]._src===c._src||c._src.indexOf(t._howls[g]._src)>=0){A=!1;break}return s&&A&&delete s[c._src],t.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,d,g,v){var A=this,x=A["_on"+c];return typeof d=="function"&&x.push(v?{id:g,fn:d,once:v}:{id:g,fn:d}),A},off:function(c,d,g){var v=this,A=v["_on"+c],x=0;if(typeof d=="number"&&(g=d,d=null),d||g)for(x=0;x<A.length;x++){var w=g===A[x].id;if(d===A[x].fn&&w||!d&&w){A.splice(x,1);break}}else if(c)v["_on"+c]=[];else{var M=Object.keys(v);for(x=0;x<M.length;x++)M[x].indexOf("_on")===0&&Array.isArray(v[M[x]])&&(v[M[x]]=[])}return v},once:function(c,d,g){var v=this;return v.on(c,d,g,1),v},_emit:function(c,d,g){for(var v=this,A=v["_on"+c],x=A.length-1;x>=0;x--)(!A[x].id||A[x].id===d||c==="load")&&(setTimeout((function(w){w.call(this,d,g)}).bind(v,A[x].fn),0),A[x].once&&v.off(c,A[x].fn,A[x].id));return v._loadQueue(c),v},_loadQueue:function(c){var d=this;if(d._queue.length>0){var g=d._queue[0];g.event===c&&(d._queue.shift(),d._loadQueue()),c||g.action()}return d},_ended:function(c){var d=this,g=c._sprite;if(!d._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(d._ended.bind(d,c),100),d;var v=!!(c._loop||d._sprite[g][2]);if(d._emit("end",c._id),!d._webAudio&&v&&d.stop(c._id,!0).play(c._id),d._webAudio&&v){d._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=t.ctx.currentTime;var A=(c._stop-c._start)*1e3/Math.abs(c._rate);d._endTimers[c._id]=setTimeout(d._ended.bind(d,c),A)}return d._webAudio&&!v&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,d._clearTimer(c._id),d._cleanBuffer(c._node),t._autoSuspend()),!d._webAudio&&!v&&d.stop(c._id,!0),d},_clearTimer:function(c){var d=this;if(d._endTimers[c]){if(typeof d._endTimers[c]!="function")clearTimeout(d._endTimers[c]);else{var g=d._soundById(c);g&&g._node&&g._node.removeEventListener("ended",d._endTimers[c],!1)}delete d._endTimers[c]}return d},_soundById:function(c){for(var d=this,g=0;g<d._sounds.length;g++)if(c===d._sounds[g]._id)return d._sounds[g];return null},_inactiveSound:function(){var c=this;c._drain();for(var d=0;d<c._sounds.length;d++)if(c._sounds[d]._ended)return c._sounds[d].reset();return new r(c)},_drain:function(){var c=this,d=c._pool,g=0,v=0;if(!(c._sounds.length<d)){for(v=0;v<c._sounds.length;v++)c._sounds[v]._ended&&g++;for(v=c._sounds.length-1;v>=0;v--){if(g<=d)return;c._sounds[v]._ended&&(c._webAudio&&c._sounds[v]._node&&c._sounds[v]._node.disconnect(0),c._sounds.splice(v,1),g--)}}},_getSoundIds:function(c){var d=this;if(typeof c>"u"){for(var g=[],v=0;v<d._sounds.length;v++)g.push(d._sounds[v]._id);return g}else return[c]},_refreshBuffer:function(c){var d=this;return c._node.bufferSource=t.ctx.createBufferSource(),c._node.bufferSource.buffer=s[d._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,t.ctx.currentTime),d},_cleanBuffer:function(c){var d=this,g=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!c.bufferSource)return d;if(t._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),g))try{c.bufferSource.buffer=t._scratchBuffer}catch{}return c.bufferSource=null,d},_clearSound:function(c){var d=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);d||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(c){this._parent=c,this.init()};r.prototype={init:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++t._counter,d._sounds.push(c),c.create(),c},create:function(){var c=this,d=c._parent,g=t._muted||c._muted||c._parent._muted?0:c._volume;return d._webAudio?(c._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),c._node.gain.setValueAtTime(g,t.ctx.currentTime),c._node.paused=!0,c._node.connect(t.masterGain)):t.noAudio||(c._node=t._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(t._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=d._src,c._node.preload=d._preload===!0?"auto":d._preload,c._node.volume=g*t.volume(),c._node.load()),c},reset:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++t._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,d=c._parent;d._duration=Math.ceil(c._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),c._node.removeEventListener(t._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,d=c._parent;d._duration===1/0&&(d._duration=Math.ceil(c._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var s={},o=function(c){var d=c._src;if(s[d]){c._duration=s[d].duration,u(c);return}if(/^data:[^;]+;base64,/.test(d)){for(var g=atob(d.split(",")[1]),v=new Uint8Array(g.length),A=0;A<g.length;++A)v[A]=g.charCodeAt(A);l(v.buffer,c)}else{var x=new XMLHttpRequest;x.open(c._xhr.method,d,!0),x.withCredentials=c._xhr.withCredentials,x.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(w){x.setRequestHeader(w,c._xhr.headers[w])}),x.onload=function(){var w=(x.status+"")[0];if(w!=="0"&&w!=="2"&&w!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+x.status+".");return}l(x.response,c)},x.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete s[d],c.load())},a(x)}},a=function(c){try{c.send()}catch{c.onerror()}},l=function(c,d){var g=function(){d._emit("loaderror",null,"Decoding audio data failed.")},v=function(A){A&&d._sounds.length>0?(s[d._src]=A,u(d,A)):g()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(c).then(v).catch(g):t.ctx.decodeAudioData(c,v,g)},u=function(c,d){d&&!c._duration&&(c._duration=d.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},f=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),d=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),g=d?parseInt(d[1],10):null;if(c&&g&&g<9){var v=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!v&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};i.Howler=t,i.Howl=n,typeof ec<"u"?(ec.HowlerGlobal=e,ec.Howler=t,ec.Howl=n,ec.Sound=r):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=r)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var r=n._howls.length-1;r>=0;r--)n._howls[r].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,r){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,r=typeof r!="number"?s._pos[2]:r,typeof t=="number")s._pos=[t,n,r],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,n,r,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var u=l._orientation;if(n=typeof n!="number"?u[1]:n,r=typeof r!="number"?u[2]:r,s=typeof s!="number"?u[3]:s,o=typeof o!="number"?u[4]:o,a=typeof a!="number"?u[5]:a,typeof t=="number")l._orientation=[t,n,r,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(t,n,r,s,o,a);else return u;return l},Howl.prototype.init=function(t){return function(n){var r=this;return r._orientation=n.orientation||[1,0,0],r._stereo=n.stereo||null,r._pos=n.pos||null,r._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},r._onstereo=n.onstereo?[{fn:n.onstereo}]:[],r._onpos=n.onpos?[{fn:n.onpos}]:[],r._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")r._stereo=t,r._pos=[t,0,0];else return r._stereo;for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l)if(typeof t=="number")l._stereo=t,l._pos=[t,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(t,0,0):l._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",l._id);else return l._stereo}return r},Howl.prototype.pos=function(t,n,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,s)}}),o;if(n=typeof n!="number"?0:n,r=typeof r!="number"?-.5:r,typeof s>"u")if(typeof t=="number")o._pos=[t,n,r];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var u=o._soundById(a[l]);if(u)if(typeof t=="number")u._pos=[t,n,r],u._node&&((!u._panner||u._panner.pan)&&e(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setPosition(t,n,r)),o._emit("pos",u._id);else return u._pos}return o},Howl.prototype.orientation=function(t,n,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,s)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,r=typeof r!="number"?o._orientation[2]:r,typeof s>"u")if(typeof t=="number")o._orientation=[t,n,r];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var u=o._soundById(a[l]);if(u)if(typeof t=="number")u._orientation=[t,n,r],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),e(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(t,n,r)),o._emit("orientation",u._id);else return u._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,r,s,o;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")r=n[0],typeof s>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),t._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(n[0],10)),o?o._pannerAttr:t._pannerAttr;else n.length===2&&(r=n[0],s=parseInt(n[1],10));for(var a=t._getSoundIds(s),l=0;l<a.length;l++)if(o=t._soundById(a[l]),o){var u=o._pannerAttr;u={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:u.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:u.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:u.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:u.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:u.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:u.panningModel};var f=o._panner;f||(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"),f=o._panner),f.coneInnerAngle=u.coneInnerAngle,f.coneOuterAngle=u.coneOuterAngle,f.coneOuterGain=u.coneOuterGain,f.distanceModel=u.distanceModel,f.maxDistance=u.maxDistance,f.refDistance=u.refDistance,f.rolloffFactor=u.rolloffFactor,f.panningModel=u.panningModel}return t},Sound.prototype.init=function(t){return function(){var n=this,r=n._parent;n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,t.call(this),n._stereo?r.stereo(n._stereo):n._pos&&r.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,r=n._parent;return n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,n._stereo?r.stereo(n._stereo):n._pos?r.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,r._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()}(OM)),OM}var mC=Pae();const e0=Pd(i=>({isMusicPlaying:!1,playMusic:()=>i({isMusicPlaying:!0}),stopMusic:()=>i({isMusicPlaying:!1})})),r9=Pd(i=>({isErrorPage:!1,setErrorPage:e=>i({isErrorPage:e})})),gC="/assets/sparkles-DDVRP0SD.png",Dae=({props:i,setDialogText:e})=>{var le;const{nodes:t,materials:n}=Od("/models/F-model7.glb"),r=QY(t,n),s=Object.keys(r),{setHatName:o}=mR(),a=me.useRef(),l=me.useRef(),[u,f]=me.useState(0),[c,d]=me.useState(!1),[g,v]=me.useState(!1),[A,x]=me.useState(!1),w=(le=a==null?void 0:a.current)==null?void 0:le.morphTargetInfluences,[M,b]=me.useState(!1),R=me.useRef(0),F=.15,O=me.useRef(Math.random()*5+3),D=Jb($=>$.triggerConfetti),I=Dd($=>$.isScrolling),C=Jm($=>$.isLoading),B=P0($=>$.isPopUpOpen),k=e0($=>$.isMusicPlaying),H=r9($=>$.isErrorPage),z=()=>{new mC.Howl({src:["assets/sounds/pop.mp3"],volume:.05}).play()},Z=()=>{new mC.Howl({src:["assets/sounds/bubble-pop-avatar.mp3"],volume:.05}).play()},ue=$=>{if(C||A||H)return;$.stopPropagation(),Iae(),z();const V=(u+1)%s.length;f(V);const Q=s[V];o(Q),d(!0),x(!0),w[0]=1,w[1]=1,setTimeout(()=>{d(!1),x(!1)},800),setTimeout(()=>{w[0]=0,w[1]=0},800)},{scale:ae,position:ge,rotation:ee}=Cne({scale:A?[.95,.95,.95]:[1,1,1],position:A?[0,0,-.05]:k?[Math.sin(Date.now()/500)*.2,0,0]:[0,0,0],rotation:A?[-.18,0,0]:D?[0,Math.PI/.5,0]:I&&!B?[0,Math.sin(Date.now()/100)*.4,0]:k?[0,0,Math.sin(Date.now()/500)*.13]:[0,0,0],config:{tension:250,friction:20},onRest:()=>{A&&x(!1)}});return me.useEffect(()=>{if(C)return;const $=V=>{const Q=V.clientX<window.innerWidth/2?`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='75' height='90' viewport='0 0 100 100' style='fill:black;font-size:45px;'><text y='30%'>👉🏻</text></svg>") 16 0, auto`:`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='75' height='90' viewport='0 0 100 100' style='fill:black;font-size:45px;'><text y='30%'>👈🏻</text></svg>") 16 0, auto`;document.body.style.cursor=g?Q:"auto"};return g?(window.addEventListener("mousemove",$),Z()):document.body.style.cursor="auto",()=>{window.removeEventListener("mousemove",$)}},[g,C]),av($=>{if(C)return;const V=$.clock.getElapsedTime();if(A)return;const{pointer:Q}=$,fe=Q.x,oe=Q.y,he=fe*Math.PI/6,xe=oe*Math.PI/-50;if(l.current&&(l.current.rotation.y+=(he-l.current.rotation.y)*.1,l.current.rotation.x+=(xe-l.current.rotation.x)*.5),a.current)if(M){const _e=V-R.current;if(_e<F){const be=_e/F;w[0]=Math.sin(Math.PI*be),w[1]=Math.sin(Math.PI*be)}else w[0]=0,w[1]=0,b(!1),O.current=Math.random()*5+3}else V-R.current>O.current&&(b(!0),R.current=V)}),me.useEffect(()=>{l.current&&l.current.traverse($=>{if($.isMesh){const V=$.material;V&&(V.originalColor||(V.originalColor=V.color.clone()),H?Qr.to(V.color,{r:V.originalColor.r,g:V.originalColor.g,b:V.originalColor.b,duration:.8,ease:"power2.inOut",onComplete:()=>{V.wireframe=!1}}):C?(V.wireframe=!0,Qr.to(V.color,{r:.847,g:1,b:.867,duration:.8,ease:"power2.out"})):(Qr.to(V.color,{r:V.originalColor.r,g:V.originalColor.g,b:V.originalColor.b,duration:1.2,ease:"power2.in",onComplete:()=>{V.wireframe=!1}}),setTimeout(()=>{e(`Welcome! <img loading="eager" src=${gC} class='inline-block w-6'/><img loading="eager" src=${bO} class='inline-block w-6'/> `),w[0]=1,w[1]=1,setTimeout(()=>{w[0]=0,w[1]=0,e("")},1e3)},1300)))}})},[C,H]),re.jsx(Bne.group,{scale:ae,position:ge,rotation:ee,children:re.jsxs("group",{...i,ref:l,dispose:null,onClick:ue,onPointerOver:()=>v(!0),onPointerOut:()=>v(!1),children:[r[s[u]],c&&re.jsx(SJ,{position:[0,2.5,0],children:re.jsx("div",{className:"absolute !inset-0",children:re.jsx(M1,{force:.2,particleCount:40,width:600,duration:1500})})}),re.jsx("group",{name:"avatar-skin",position:[0,1.041,0],scale:.411,children:re.jsxs("group",{position:[-.021,.106,-.023],children:[re.jsx("mesh",{ref:a,name:"Object_0002",castShadow:!0,receiveShadow:!0,geometry:t.Object_0002.geometry,material:n.piel,morphTargetDictionary:t.Object_0002.morphTargetDictionary,morphTargetInfluences:t.Object_0002.morphTargetInfluences}),re.jsx("mesh",{name:"Object_0002_1",castShadow:!0,receiveShadow:!0,geometry:t.Object_0002_1.geometry,material:n.dientes,morphTargetDictionary:t.Object_0002_1.morphTargetDictionary,morphTargetInfluences:t.Object_0002_1.morphTargetInfluences}),re.jsx("mesh",{name:"Object_0002_2",castShadow:!0,receiveShadow:!0,geometry:t.Object_0002_2.geometry,material:n.Lengua,morphTargetDictionary:t.Object_0002_2.morphTargetDictionary,morphTargetInfluences:t.Object_0002_2.morphTargetInfluences}),re.jsx("mesh",{name:"Object_0002_3",castShadow:!0,receiveShadow:!0,geometry:t.Object_0002_3.geometry,material:n["piel.oscura"],morphTargetDictionary:t.Object_0002_3.morphTargetDictionary,morphTargetInfluences:t.Object_0002_3.morphTargetInfluences})]})}),re.jsx("group",{name:"glasses",position:[.021,1.663,.512],rotation:[-1.572,.002,1.638],scale:[.045,.047,.045],children:re.jsx("group",{rotation:[Math.PI/2,0,0],children:re.jsxs("group",{position:[10.014,.418,-.027],children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.a_A06.geometry,material:n.daz__A06}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.a_B05.geometry,material:n.daz__B05}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.a_E04.geometry,material:n.daz__E04}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.a_E08.geometry,material:n.daz__E08}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.a_F05.geometry,material:n.daz__F05}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.a_F05001.geometry,material:n.daz__F05}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.a_I05.geometry,material:n.daz__I05})]})})}),re.jsx("mesh",{name:"nose",castShadow:!0,receiveShadow:!0,geometry:t.nose.geometry,material:n.piel,position:[.016,1.783,.465],rotation:[-1.072,-.769,1.27],scale:-.044}),re.jsxs("group",{position:[-.012,2.316,.085],rotation:[2.892,.024,-3.141],scale:0,children:[re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Mesh208.geometry,material:n.dbl_Layer0_001}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Mesh208_1.geometry,material:n.dbl_Layer0_002}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Mesh208_2.geometry,material:n.dbl_Layer0_003}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Mesh208_3.geometry,material:n.dbl_Layer0_004}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Mesh208_4.geometry,material:n.dbl_Layer0_005}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Mesh208_5.geometry,material:n.dbl_Layer0_006}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Mesh208_6.geometry,material:n.dbl_Layer0_007})]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.piercing_nariz.geometry,material:n.piercing,position:[-.011,1.76,.473],rotation:[-2.863,.841,-2.097],scale:.01,children:re.jsx("meshStandardMaterial",{attach:"material",metalness:1,roughness:.3,color:"silver"})}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.aro_der_1.geometry,material:n["piercing.001"],position:[.445,1.647,-.065],rotation:[2.117,.003,1.53],scale:.039,children:re.jsx("meshStandardMaterial",{attach:"material",metalness:1,roughness:.3,color:"silver"})}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.aro_der_2.geometry,material:n["piercing.002"],position:[.495,1.644,-.064],rotation:[2.124,.003,1.53],scale:.039,children:re.jsx("meshStandardMaterial",{attach:"material",metalness:1,roughness:.3,color:"silver"})}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.bolita_aro.geometry,material:n["piercing.002"],position:[.497,1.614,.018],rotation:[-3.012,-.3,-.922],scale:.02,children:re.jsx("meshStandardMaterial",{attach:"material",metalness:1,roughness:.3,color:"silver"})}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.bolita_aro_2.geometry,material:n["piercing.003"],position:[.503,1.626,-.034],rotation:[2.971,-.162,-.775],scale:.02,children:re.jsx("meshStandardMaterial",{attach:"material",metalness:1,roughness:.3,color:"silver"})}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.aro_izq.geometry,material:n["piercing.004"],position:[-.469,1.636,-.078],rotation:[2.117,.003,1.53],scale:.039,children:re.jsx("meshStandardMaterial",{attach:"material",metalness:1,roughness:.3,color:"silver"})}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.chiva.geometry,material:n["Material.004"],position:[-.117,1.544,.377],rotation:[-.142,.018,.012],scale:.066}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.bigote.geometry,material:n["moustache.004"],position:[-.084,1.703,.462],scale:-.024}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.ojo_derecho.geometry,material:n.eyes,position:[.195,1.799,.249],rotation:[0,0,-Math.PI],scale:[-.14,-.14,-.1]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.ojo_izquierdo.geometry,material:n["eyes.001"],position:[-.216,1.814,.277],rotation:[0,0,-Math.PI],scale:[-.137,-.137,-.097]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.iris_izquierdo.geometry,material:n["pulp.001"],position:[-.201,1.819,.361],rotation:[-Math.PI,0,3.107],scale:[.055,.085,.041]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.iris_derecho.geometry,material:n["pulp.003"],position:[.19,1.817,.368],rotation:[-Math.PI,.087,-Math.PI],scale:[.055,.085,.041]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.ceja_izquierda.geometry,material:n.eyebrown,position:[-.23,2.004,.385],rotation:[1.014,-.262,1.895],scale:[-.02,-.03,-.021]}),re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.ceja_derecha.geometry,material:n.eyebrown,position:[.204,2,.399],rotation:[1.977,-.018,-1.786],scale:[-.02,-.03,-.021]}),re.jsx("group",{name:"hair",position:[0,1.041,0],scale:.411,children:re.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Object_4003.geometry,material:n["Material.007"],position:[-.023,.116,.001],scale:[1.025,1,1.07]})})]})})};Od.preload("/models/F-model7.glb");const i9=({setDialogText:i})=>{const[e,t]=me.useState(0),n=Jm(o=>o.isLoading),r=window.innerWidth>=4e3?[0,0,0]:[-.2,-4.3,0],s=window.innerWidth>=4e3?2:1.7;return me.useEffect(()=>{const o=setInterval(()=>{t(a=>a+.05)},16);return()=>clearInterval(o)},[]),re.jsx(dJ,{dpr:[1.5,2],children:re.jsxs(me.Suspense,{fallback:null,children:[re.jsx("ambientLight",{intensity:1,position:[0,0,0]}),re.jsx(HY,{preset:"warehouse"}),re.jsx(VY,{position:[0,-1.55,.15],opacity:.35,scale:4,blur:6,far:10}),re.jsx(MY,{speed:5,rotationIntensity:.2,floatIntensity:.9,floatingRange:[1,1.1],children:re.jsx(SY,{position:[0,-1.2,1],rotation:[0,0,0],children:re.jsx("mesh",{position:r,scale:s,children:re.jsx(Dae,{setDialogText:i})})})}),!n&&re.jsx(re.Fragment,{children:re.jsx("mesh",{position:[0,0,-2],scale:1.45,children:re.jsx(WY,{})})})]})})},Bae="/assets/francisco-photo-DPYqvkqR.png",Lae="/assets/francisco-fun-photo-BhdS0O4o.png",s9="/assets/grinning-face-BMjzwd3H.png",Fae=({setDialogText:i})=>{const e=P0(r=>r.openPopUp),t=Dd(r=>r.isScrolling),n=e0(r=>r.isMusicPlaying);return me.useEffect(()=>{$x(".picture-container",t)},[t]),re.jsx("div",{className:"picture-container z-30 max-h-20 cursor-pointer",onClick:e,children:re.jsxs("div",{className:"group relative max-h-20 transition-all duration-200",onMouseEnter:()=>i(`Know more about me! <img loading="eager" src=${s9} class='inline-block w-6 animate-bounce'/>`),onMouseLeave:()=>i(""),children:[re.jsx("img",{src:Bae,alt:"Francisco",className:`opacity-1 relative -top-3 !w-28 select-none transition-all duration-300 ease-in-out group-hover:opacity-0 3xl:left-0 3xl:!w-44 4xl:top-2 4xl:!w-[22rem] ${n&&"animate-shakeTwo"}`}),re.jsx("img",{src:Lae,alt:"Francisco",className:"relative -top-[6.5rem] left-3 !w-20 select-none opacity-0 transition-all duration-300 ease-in-out group-hover:scale-150 group-hover:opacity-100 group-active:scale-[1.2] lg:-top-[7rem] lg:!w-24 3xl:-top-[11.5rem] 3xl:!w-40 3xl:group-hover:scale-125 4xl:-top-[19rem] 4xl:left-8 4xl:!w-72 4xl:group-hover:scale-150"})]})})},Oae=()=>{const[i,e]=me.useState(0),t=Jm(n=>n.stopLoader);return me.useEffect(()=>{i===100&&t()},[i,t]),me.useEffect(()=>{const n=setTimeout(()=>{const r=setInterval(()=>{e(s=>{if(s>=100)return clearInterval(r),100;const o=Math.floor(Math.random()*10)+1,a=s+o;return a>100?100:a})},250);return()=>clearInterval(r)},1e3);return()=>clearTimeout(n)},[]),re.jsx("div",{className:"3xl:mt-[35rem] 3xl:w-2/6 left-1/2 z-50 mt-[29rem] h-[18px] w-11/12 rounded-full border-2 border-white p-0.5 md:w-[350px] 4xl:mt-[80rem]",children:re.jsx("div",{className:"loader h-[10px] rounded-full bg-white shadow-[0_10px_40px_-10px_rgba(255,255,255,1)]",style:{width:`${i}%`}})})},kae=()=>re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"3xl:right-36 3xl:top-40 pointer-events-none invisible absolute top-48 z-30 animate-pulse select-none md:visible md:right-20 md:top-32 lg:right-28 lg:top-[7.5rem] 4xl:top-[27rem]",children:re.jsxs("div",{className:"3xl:text-xl relative flex -rotate-45 font-HomemadeApple text-white md:-rotate-6 4xl:text-5xl",children:["stay in contact",re.jsx("svg",{fill:"#fafafa",className:"relative -top-6 left-7 w-12 rotate-[40deg] md:left-4 md:rotate-12 4xl:-top-24 4xl:w-32 4xl:-rotate-45",viewBox:"0 0 367.339 367.34",children:re.jsx("g",{children:re.jsx("path",{d:`M337.591,0.932c-13.464,6.12-26.315,12.852-39.168,20.196c-11.628,6.12-25.704,12.24-35.496,21.42
		c-5.508,4.896,0,15.3,7.344,12.852c0,0,0.612,0,0.612-0.612c1.836,1.224,3.061,2.448,4.896,4.284c0,0.612,0.611,1.836,0.611,2.448
		c0.612,1.224,1.836,2.448,3.061,3.672c-17.748,33.048-34.272,66.096-55.08,96.696c-6.12,9.18-12.853,17.748-20.808,25.704
		c-19.584-31.212-51.409-67.32-89.965-60.588c-50.796,9.18-23.256,63.647,3.06,82.008c31.212,22.644,58.14,21.42,85.068,0
		c12.24,20.808,20.809,44.063,19.584,66.708c-1.836,54.468-50.796,63.647-91.8,49.571c6.12-15.912,7.956-34.271,4.284-50.184
		c-6.12-28.764-50.184-54.468-75.888-34.272c-25.092,20.196,22.032,71.604,37.332,82.009c4.284,3.06,9.18,6.119,14.076,8.567
		c-0.612,0.612-0.612,1.225-1.224,1.836c-28.152,44.064-65.484,6.12-82.62-25.092c-2.448-4.896-9.18-0.612-7.344,4.284
		c14.076,32.436,42.84,70.38,81.396,48.348c9.18-5.508,17.136-13.464,22.644-23.256c33.66,13.464,72.829,13.464,97.308-17.136
		c29.376-36.72,11.017-84.456-8.567-119.952c0.611-0.612,0.611-0.612,1.224-1.224c34.884-33.66,56.304-81.396,78.336-124.236
		c4.284,3.06,9.181,6.12,13.464,9.18c3.061,1.836,7.345,1.224,9.792-1.224c17.748-20.808,31.212-45.9,35.496-73.44
		C351.055,2.768,344.324-2.128,337.591,0.932z M178.471,207.787c-23.256,13.464-46.512-3.06-63.648-18.972
		c-22.644-20.808-16.524-54.468,18.36-47.735c17.748,3.672,31.824,19.584,43.452,32.436c6.12,6.732,12.241,14.687,17.749,23.255
		C189.488,201.056,183.979,204.728,178.471,207.787z M116.047,319.171C116.047,319.171,115.435,319.171,116.047,319.171
		c-16.524-8.567-28.764-20.808-38.556-36.107c-4.284-6.732-7.956-14.076-9.792-22.032c-6.12-20.808,26.928-10.404,35.496-6.12
		C126.451,267.764,124.615,297.14,116.047,319.171z M306.379,67.028c-0.612,0-0.612-0.612-1.224-0.612
		c0-1.836-1.225-3.672-3.672-4.896c-4.284-1.836-8.568-4.284-12.853-6.732c-1.836-1.224-5.508-4.896-5.508-3.672
		c0-0.612-0.612-1.224-1.224-1.224c6.731-3.672,13.464-8.568,20.195-12.24c8.568-4.896,17.748-9.792,26.929-14.688
		C324.74,38.264,316.784,53.564,306.379,67.028z`})})})]})}),re.jsx("div",{className:"3xl:left-28 3xl:top-[11rem] pointer-events-none absolute left-12 top-32 z-30 select-none md:left-16 md:top-[7rem] lg:left-20 lg:top-[7.5rem] xl:top-[8rem] 4xl:left-64 4xl:top-[22rem]",children:re.jsxs("div",{className:"3xl:text-xl relative flex rotate-[2deg] font-HomemadeApple text-sm text-white md:rotate-[-6deg] lg:rotate-[-4deg] lg:text-base 4xl:-rotate-[15deg] 4xl:text-5xl",children:[re.jsxs("svg",{fill:"#fafafa",viewBox:"-10.78 -10.78 380.73 380.73",transform:"matrix(-1, 0, 0, 1, 0, 0)rotate(0)",stroke:"#fff",strokeWidth:"0.00359171",className:"relative -left-4 -top-5 w-9 rotate-[-10deg] scale-x-[-1] md:-rotate-[5deg] lg:-left-3 lg:w-11 4xl:-left-7 4xl:-top-24 4xl:w-36",children:[re.jsx("g",{strokeWidth:"0"}),re.jsx("g",{strokeLinecap:"round",strokeLinejoin:"round",stroke:"#CCCCCC",strokeWidth:"0.718342"}),re.jsxs("g",{children:[" ",re.jsxs("g",{children:[" ",re.jsxs("g",{children:[" ",re.jsx("path",{d:"M351.689,201.729c-0.612-46.512-6.732-95.472-18.972-140.76c-3.061-9.792-17.748-6.12-15.301,4.284 c9.792,40.392,15.912,81.396,17.748,123.013c1.837,41.615,2.448,97.308-27.54,129.743c-15.3,16.524-42.84,15.912-63.647,17.137 c-30.601,1.836-61.812,1.224-92.412-0.612c-30.6-1.224-61.812-4.284-92.412-7.956c-16.524-1.836-43.452-11.016-58.14-3.06 c-1.224,0.611-1.224,2.447-0.612,3.06c11.016,14.076,42.228,13.464,58.752,15.912c36.72,4.896,72.828,7.344,109.548,9.18 c44.675,1.836,114.443,11.017,149.939-22.644C351.077,299.649,351.689,242.121,351.689,201.729z"})," ",re.jsx("path",{d:"M338.225,8.949c-4.284-6.12-11.628-4.896-14.688,1.836c-8.567,20.808-22.031,39.78-30.6,60.588 c-2.448,6.12,6.732,9.18,9.792,4.284c9.792-15.912,18.972-31.824,28.764-47.736c2.448,4.896,4.896,9.792,7.345,14.688 c3.06,7.956,3.672,15.912,7.344,23.256c2.447,5.508,9.792,3.06,11.628-1.224C363.929,47.505,348.017,23.025,338.225,8.949z"})," "]})," "]})," "]})]}),"can see my works here"]})})]}),Nae="/assets/FranciscoWithBeto-_DusLQl4.jpg",Uae="/assets/waving-hand-B7Twzrlu.png",zae="/assets/flag-argentina-nGSfV_Mg.png",Gae="/assets/joystick-DdoGPq3m.png",Hae="/assets/artist-palette-Cc--MnJZ.png",hO="/assets/backhand-pointing-down-DfKeFrfg.png",Vae="/assets/dog--_Kw573K.png",Wae="/assets/dizzy-BC0-u1tH.png",jae="/assets/handshake-BOKNFhfw.png",o9="/assets/upside-down-face-BgyJodIS.png",qae="/assets/star-Bt2SZkuG.png",Xae="/assets/nerd-face-BQr6SFZk.png",Jae="/assets/rainbow-B88PW-le.png",Kae="/assets/smiling-face-love-UWLBYFU_.png",Yae="/assets/sparkling-heart-LVzQQXxz.png",Qae="/assets/Portfolio2023Preview--sV3d0nb.jpg",Zae="/assets/ShurikenPreview-Cm50b7tK.png",$ae="/assets/CrypcollPreview-Bg22PGcz.png",ele="/assets/LuvlyPreview-kX_L2XFr.png",tle="/assets/DisneyPreview-BEQSSmzu.jpg",fO=[{url:"https://shurikenleapgame.netlify.app/",name:"Shuriken Leap Game",description:"A game created with React Three Fiber (ThreeJS)",technologies:"REACTJS + TAILWINDCSS + THREEJS / R3F ",id:"1",imageURL:Zae},{url:"https://golden-daifuku-48cfde.netlify.app/",name:"Previous Portfolio",description:"Check my previous portfolio!",technologies:"REACTJS + TAILWINDCSS",id:"2",imageURL:Qae},{url:"https://sage-beignet-1e7e8a.netlify.app/",name:"Crypcoll Crypto Trade",description:"Concept landingpage for crypto trades",technologies:"REACTJS + TAILWINDCSS + THREEJS / R3F",id:"3",imageURL:$ae},{url:"https://eloquent-klepon-12b92d.netlify.app/",name:"Luvly",description:"Landingpage presentation for Luvly, the eco car ",technologies:"REACTJS + TAILWINDCSS + THREEJS / R3F",id:"4",imageURL:ele},{url:"https://leafy-gingersnap-887f3e.netlify.app/",name:"Disney+ Clone",description:"Based on Disney+ Consumes the data of TMDB Api",technologies:"REACTJS + TAILWINDCSS",id:"5",imageURL:tle}],JR=()=>{const i=me.useCallback(t=>{switch(t){case"NoneHat":return"#ec4899";case"OktopusHat":return"#9C2B7C";case"BatmanHat":return"#414AF0";case"ChineseHat":return"#DF9930";case"MickeyHat":return"#C39642";case"CowboyHat":return"#F49E00";case"SharkHat":return"#09CEFF";default:return"#ec4899"}},[]),e=me.useCallback(t=>{switch(t){case"NoneHat":return"linear-gradient(to bottom right, rgb(53, 190, 214), rgb(53, 190, 214))";case"OktopusHat":return"linear-gradient(to bottom right, #ee43be, #9e2ba8)";case"BatmanHat":return"linear-gradient(to bottom, #1d2167, #0f0f0f)";case"ChineseHat":return"linear-gradient(to bottom right, #b99c70, #8a7345)";case"MickeyHat":return"linear-gradient(to bottom, #bed95f, #f2ba52)";case"CowboyHat":return"linear-gradient(to bottom right, #f6bc4e, #f2a65e)";case"SharkHat":return"linear-gradient(to bottom left, #047692, #0476ff)";default:return"linear-gradient(to bottom right, rgb(53, 190, 214), rgb(53, 190, 214))"}},[]);return{getHexBackground:i,getGradientBackground:e}},nle=({hatName:i})=>{const e=m4(),{getHexBackground:t}=JR(),n=t(i),r=window.innerWidth<=389,s=window.innerWidth>=390&&window.innerWidth<=767,o=()=>{window.open("./CV_FranciscoAgustinRodriguez.pdf","_blank")};return re.jsxs("div",{style:{"--dynamic-color":n},children:[fO&&fO.map(a=>{const l=a.id%2===0?"-rotate-12":"rotate-12";return re.jsx("div",{className:"group relative mb-0.5 md:mb-1 lg:mb-2",children:re.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"group z-50",children:[re.jsx("div",{className:"relative left-[15rem]",children:re.jsx("div",{style:{left:window.innerWidth>=4e3?(e.x/Math.PI-250*3.2)/4:(e.x/Math.PI-250)/4},className:"absolute",children:re.jsx("img",{src:a.imageURL,alt:a.name,className:`relative z-50 max-h-[200px] w-[190px] scale-75 border border-[#FAFAFA] object-cover opacity-0 transition-all duration-200 group-hover:scale-100 group-hover:opacity-100 ${l}`})})}),re.jsxs("div",{className:"no-wrap flex flex-row items-center justify-start gap-2 border-b border-[#fff] border-opacity-40 p-2 text-left transition-all duration-300 ease-in-out",children:[re.jsx("div",{className:"rounded-full p-2 opacity-0 group-hover:opacity-100",children:re.jsx("svg",{width:"14",height:"13",viewBox:"0 0 14 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-3.5 origin-top-left -translate-x-2 rotate-45 transition-all duration-200 group-hover:translate-x-0 group-hover:rotate-0 group-hover:brightness-150",children:re.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0855 5.5714L14 6.49971L13.0858 7.42892L7.60055 13L6.68634 12.0714L11.5902 7.09018H1.29288H0.646521H0V-5.45053e-05H1.29288V5.77693H11.4595L6.68636 0.928618L7.60057 0L13.0855 5.5714Z",fill:"var(--dynamic-color)"})})}),re.jsxs("div",{className:"-translate-x-9 transition-all duration-[210ms] ease-linear group-hover:-translate-x-0",children:[re.jsx("h2",{className:"max-w-fit px-2 pl-0 font-KarlaExtraBold text-base uppercase text-[#fff] transition-all duration-200 ease-linear group-hover:text-[var(--dynamic-color)] group-hover:brightness-150 4xl:text-lg",children:a.name}),re.jsx("p",{className:"font-sans text-xs font-light uppercase text-[#fff] 4xl:text-xs",children:a.description}),re.jsx("p",{className:"font-sans text-xs font-semibold tracking-wide text-[#fff] 4xl:text-xs",children:a.technologies})]})]})]})},a.id)}),re.jsxs("div",{className:`mt-3 flex items-center justify-around gap-5 px-2 pb-2 md:mt-6 md:pb-0 lg:mt-8 lg:gap-0 4xl:mt-5 ${r?"mt-4":s?"mt-10":"mt-5"}`,children:[re.jsx("button",{className:"cursor-contact rounded-full bg-[var(--dynamic-color)] px-6 py-2 font-RecoletaBlack uppercase tracking-wide text-white transition-all duration-200 hover:-rotate-2 hover:scale-125 hover:bg-white hover:text-[var(--dynamic-color)] hover:shadow-lg 4xl:text-lg",children:re.jsx("a",{className:"cursor-contact",href:"mailto:rodriguezfranciscoa@hotmail.com?subject=Wanna talk!",children:"Let's chat!"})}),re.jsx("button",{onClick:o,className:"cursor-resume rounded-full bg-[var(--dynamic-color)] px-6 py-2 font-RecoletaBlack uppercase tracking-wide text-white transition-all duration-200 hover:-rotate-2 hover:scale-125 hover:bg-white hover:text-[var(--dynamic-color)] hover:shadow-lg 4xl:text-lg",children:"Get resume!"})]})]})},rle=({hatName:i})=>{const e=me.useRef(),t=P0(u=>u.closePopUp),n=P0(u=>u.isPopUpOpen),r=window.innerWidth<=375,s=window.innerWidth>=1920&&window.innerWidth<=3999,o=window.innerWidth>=4e3,a=()=>{e.current&&Qr.to(e.current,{top:"0.5rem",left:"0.5rem",scale:0,opacity:0,duration:.5,onComplete:()=>{t()}})},l=u=>{e.current&&!e.current.contains(u.target)&&a()};return me.useEffect(()=>{n&&e.current&&Qr.fromTo(e.current,{scale:0,opacity:0,rotation:-180},{scale:s?1:o?2.5:1,opacity:1,rotation:0,duration:1,ease:"bounce.out"})},[n]),me.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),n&&re.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-50 bg-opacity-5 backdrop-blur-md",children:re.jsxs("div",{ref:e,className:`no-scrollbar relative top-0 z-20 mx-1 h-[40rem] w-auto overflow-x-hidden overflow-y-scroll rounded-2xl border border-solid border-gray-100 bg-gray-600 bg-opacity-20 shadow-2xl will-change-transform md:h-[43rem] lg:top-2 4xl:!w-[70rem] ${r&&"h-[36.5rem]"}`,children:[re.jsx(sle,{className:"absolute right-2 top-2 z-50 cursor-pointer",onClick:a}),re.jsxs("div",{className:"relative mx-4 flex min-h-full flex-col gap-1 pb-1 pt-2.5 md:flex-row lg:mr-8 lg:gap-4 4xl:justify-between",children:[re.jsx("div",{className:"hidden flex-col justify-end gap-3 text-black md:flex md:w-[390px] lg:w-[440px] 4xl:flex-1",children:re.jsx(ile,{})}),re.jsxs("div",{className:"sticky top-8 flex h-full flex-col items-center justify-start rounded-lg lg:w-[450px]",children:[re.jsxs("h2",{className:"relative -rotate-3 select-none pt-1 text-center font-RecoletaBlack text-6xl leading-[3rem] tracking-wider text-[#fff] lg:pt-0 lg:text-7xl lg:leading-[4.2rem]",children:[Array.from("Selected").map((u,f)=>re.jsx("span",{className:`inline-block transition-all duration-150 hover:scale-150 ${f%2===0?"hover:rotate-6":"hover:-rotate-12"} ${["hover:text-[#f7d65f]","hover:text-[#e18754]","hover:text-[#54f0f0]","hover:text-[#db7c45]","hover:text-[#ef4d53]","hover:text-[#dd5ad9]","hover:text-[#d97e4a]","hover:text-[#eecb4b]"][f%7]}`,children:u},f)),re.jsx("br",{}),Array.from("Works").map((u,f)=>re.jsx("span",{className:`inline-block transition-all duration-150 hover:scale-150 ${f%2===0?"hover:rotate-6":"hover:-rotate-6"} ${["hover:text-[#c0ef3d]","hover:text-[#fb8039]","hover:text-[#3effff]","hover:text-[#df4c51]","hover:text-[#f265ee]"][f%5]}`,children:u},f))]}),re.jsx("div",{className:"mt-4 px-2 md:mt-8 lg:w-full lg:px-6 4xl:mt-6",children:re.jsx(nle,{hatName:i})})]})]})]})})},ile=()=>{const i=me.useMemo(()=>[`Hi there! <img src=${Uae} class='3xl:w-6 inline-block w-5 aspect-square
object-contain animate-wavingHand'/> I’m Francisco Agustín Rodríguez —but you can call me Fran.`,`I’m a front-end developer hailing from Buenos Aires, Argentina <img src=${zae} class='3xl:w-6 inline-block w-5 aspect-square
object-contain'/>`,`I bring websites to life by creating interactive <img src=${Gae} class='3xl:w-6 inline-block w-5 aspect-square
object-contain animate-shake'/> visually stunning experiences <img src=${Hae} class='3xl:w-6 inline-block w-5 aspect-square
object-contain'/> with a focus on seamless motion and user-friendly design <img src=${gC} class='3xl:w-6 inline-block w-5 aspect-square
object-contain animate-pulse'/>`,`This is my teammate <img src=${hO} class='3xl:w-6 inline-block w-5 aspect-square
object-contain animate-bounce duration-150'/> <img src=${hO} class='3xl:w-6 inline-block w-5 aspect-square
object-contain animate-bounce duration-150'/>`,"img",`Beto, my loyal sidekick <img src=${Vae} class='3xl:w-6 inline-block w-5 aspect-square
object-contain animate-shake'/>  He keeps the creativity flowing! <img src=${Wae} class='3xl:w-6 inline-block w-5 aspect-square
object-contain'/>`,`Let’s connect <img src=${jae} class='3xl:w-6 animate-bounce inline-block w-5 aspect-square
object-contain'/> share some laughs <img src=${o9} class='3xl:w-6 animate-spin inline-block w-5 aspect-square
object-contain'/> and turn your ideas into reality! <img src=${MO} class='3xl:w-6 inline-block w-5 aspect-square
object-contain'/> `],[]),[e,t]=me.useState(i.map(()=>({emoji:null,count:0}))),n=[{id:"grinningFace",src:`${s9}`},{id:"star",src:`${qae}`},{id:"nerd",src:`${Xae}`},{id:"rainbow",src:`${Jae}`},{id:"faceLove",src:`${Kae}`},{id:"sparklingHeart",src:`${Yae}`},{id:"sparkles",src:`${gC}`}],r=me.useRef(),[s,o]=me.useState(0),[a,l]=me.useState(!0),u=c=>{t(d=>d.map((g,v)=>v===c?{emoji:n[c],count:g.count+1}:g))},f=i.slice(0,s);return me.useEffect(()=>{const c=setInterval(()=>{s<i.length?(o(d=>d+1),l(!1),setTimeout(()=>l(!0),400)):clearInterval(c)},2e3);return()=>clearInterval(c)},[s,i.length,f.length]),me.useEffect(()=>{r.current&&f&&r.current.scrollIntoView({behavior:"smooth"})},[f.length,a]),re.jsxs("div",{className:"flex h-full flex-col justify-end bg-transparent",children:[f.map((c,d)=>re.jsxs("div",{className:`relative max-w-max animate-appear cursor-pointer select-none rounded-2xl rounded-bl-md bg-[#ffffff] py-2 pl-3 pr-2 font-KarlaLight text-sm shadow-sm transition-all duration-300 ease-in-out 3xl:text-base 4xl:text-xl ${e[d].emoji?"mb-5":"mb-2"} `,onClick:()=>u(d),children:[re.jsx("div",{className:"absolute -left-1 bottom-0 h-0 w-0 rotate-90 border-l-8 border-t-8 border-l-transparent border-t-white"}),c==="img"?re.jsx("div",{className:"-ml-1 max-w-[340px]",children:re.jsx("img",{src:Nae,alt:"Beto & Me",className:"aspect-square w-full rounded-lg"})}):re.jsx("div",{dangerouslySetInnerHTML:{__html:c}}),e[d].emoji&&re.jsxs("span",{className:"absolute -bottom-3.5 right-2 flex animate-appear items-center justify-center rounded-full border border-gray-300 bg-white px-2 py-0.5 shadow-sm duration-0 3xl:px-2.5 3xl:py-1",children:[e[d].emoji.id==="star"?Array.from({length:3}).map((g,v)=>re.jsx("img",{src:e[d].emoji.src,alt:"emoji",loading:"eager",className:"mr-1 inline-block aspect-square w-4 object-contain 3xl:w-6"},`${d}-star-${v}`)):re.jsx("img",{src:e[d].emoji.src,alt:"emoji",loading:"eager",className:"inline-block aspect-square w-4 object-contain 3xl:w-6"}),re.jsx("span",{className:"relative ml-0.5 animate-appear pl-0.5 text-xs text-gray-500 3xl:text-sm",children:e[d].count},`${d}-${e[d].count}`)]})]},d)),s<i.length&&a&&re.jsx(re.Fragment,{children:re.jsx("div",{className:"relative my-2 max-w-16 animate-appear rounded-2xl rounded-bl-md bg-[#ffffff] p-0 text-sm",children:re.jsx("span",{className:"typing-animation flex items-center justify-center",children:re.jsx(ole,{})})})}),re.jsx("div",{ref:r})]})},sle=({className:i,onClick:e})=>re.jsx(re.Fragment,{children:re.jsx("svg",{className:`w-6 ${i} transition-all duration-150 hover:scale-150`,viewBox:"0 -0.5 25 25",fill:"#000",onClick:e,children:re.jsx("path",{d:"M6.96967 16.4697C6.67678 16.7626 6.67678 17.2374 6.96967 17.5303C7.26256 17.8232 7.73744 17.8232 8.03033 17.5303L6.96967 16.4697ZM13.0303 12.5303C13.3232 12.2374 13.3232 11.7626 13.0303 11.4697C12.7374 11.1768 12.2626 11.1768 11.9697 11.4697L13.0303 12.5303ZM11.9697 11.4697C11.6768 11.7626 11.6768 12.2374 11.9697 12.5303C12.2626 12.8232 12.7374 12.8232 13.0303 12.5303L11.9697 11.4697ZM18.0303 7.53033C18.3232 7.23744 18.3232 6.76256 18.0303 6.46967C17.7374 6.17678 17.2626 6.17678 16.9697 6.46967L18.0303 7.53033ZM13.0303 11.4697C12.7374 11.1768 12.2626 11.1768 11.9697 11.4697C11.6768 11.7626 11.6768 12.2374 11.9697 12.5303L13.0303 11.4697ZM16.9697 17.5303C17.2626 17.8232 17.7374 17.8232 18.0303 17.5303C18.3232 17.2374 18.3232 16.7626 18.0303 16.4697L16.9697 17.5303ZM11.9697 12.5303C12.2626 12.8232 12.7374 12.8232 13.0303 12.5303C13.3232 12.2374 13.3232 11.7626 13.0303 11.4697L11.9697 12.5303ZM8.03033 6.46967C7.73744 6.17678 7.26256 6.17678 6.96967 6.46967C6.67678 6.76256 6.67678 7.23744 6.96967 7.53033L8.03033 6.46967ZM8.03033 17.5303L13.0303 12.5303L11.9697 11.4697L6.96967 16.4697L8.03033 17.5303ZM13.0303 12.5303L18.0303 7.53033L16.9697 6.46967L11.9697 11.4697L13.0303 12.5303ZM11.9697 12.5303L16.9697 17.5303L18.0303 16.4697L13.0303 11.4697L11.9697 12.5303ZM13.0303 11.4697L8.03033 6.46967L6.96967 7.53033L11.9697 12.5303L13.0303 11.4697Z",fill:"#fff"})})}),ole=()=>re.jsx(re.Fragment,{children:re.jsxs("svg",{height:"30",width:"40",children:[re.jsx("circle",{className:"animate-blink",cx:"10",cy:"20",r:"3",fill:"grey"}),re.jsx("circle",{className:"animate-blink delay-250ms",cx:"20",cy:"20",r:"3",fill:"grey"}),re.jsx("circle",{className:"animate-blink delay-500ms",cx:"30",cy:"20",r:"3",fill:"grey"})]})}),ale=()=>{const i=Dd(e=>e.setIsScrolling);me.useEffect(()=>{let e;const t=()=>{i(!0),clearTimeout(e),e=setTimeout(()=>{i(!1)},50)};return window.addEventListener("scroll",t),window.addEventListener("wheel",t),window.addEventListener("touchmove",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("wheel",t),window.removeEventListener("touchmove",t),clearTimeout(e)}},[i])},a9=async()=>{try{const i=X6(n9,"clickCounters","avatarClickCount"),e=await xae(i);return e.exists()?e.data().count:(console.log("No se encontró el documento."),null)}catch(i){return console.error("Error al obtener la cantidad de clics:",i),null}},lle=()=>{const[i,e]=me.useState(null),t=me.useRef(),[n,r]=me.useState(!1),s=Jm(u=>u.isLoading),{hatName:o}=mR(),a=Dd(u=>u.isScrolling);me.useEffect(()=>{(async()=>{const f=await a9();f!==null&&e(f)})()},[o]),me.useEffect(()=>{$x(t.current,a)},[a]),me.useEffect(()=>{if(s)return;document.querySelectorAll(".exploding-letter").forEach((c,d)=>{Qr.to(c,{scale:3,rotation:d%2===0?720:-720,opacity:0,x:"random(-200, 200)",y:-50,duration:.8,delay:.05*d,ease:"power4.out",onComplete:()=>{Qr.to(c,{scale:1,opacity:1,rotation:0,x:0,y:0,duration:0,ease:"power4.in"})}})}),r(!0);const f=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(f)},[o,s]);const l=u=>u.split("").map((f,c)=>re.jsx("span",{className:"exploding-letter inline-block animate-gradientText bg-gradient-text bg-300% bg-clip-text text-transparent",children:f},c));return re.jsxs("div",{ref:t,className:`relative z-30 m-2 mb-20 w-fit min-w-[250px] scale-125 select-none rounded-lg border border-black bg-white bg-opacity-50 px-2 py-1 pr-0.5 shadow-md duration-200 md:mb-4 md:hover:scale-150 lg:min-w-[290px] lg:px-2.5 3xl:px-3 3xl:py-2 4xl:bottom-16 4xl:scale-[2.7] 4xl:hover:scale-[3.2] ${n&&"animate-ping"}`,children:[re.jsx("div",{className:"relative h-full overflow-visible",children:re.jsxs("p",{className:"flex items-center justify-center font-Karla text-sm md:text-base 3xl:text-2xl",children:["Times people changed my look:",re.jsx("span",{className:"ml-1 inline-block text-nowrap pr-1.5 text-center font-RecoletaBlack text-base tracking-wide lg:ml-2 lg:pr-0 lg:text-lg 3xl:text-3xl",children:i!==null&&l(i.toString())})]})}),re.jsx("div",{className:"pointer-events-none absolute left-0 top-0 h-full w-full overflow-hidden rounded-lg",children:re.jsx("div",{className:"absolute left-[-100%] top-0 h-full w-[30%] skew-x-[-20deg] animate-[shine_5s_infinite] bg-gradient-to-r from-white/20 via-white/60 to-white/20"})})]})};var Gf={};const B1=2,Ml=4,Yl=4,l9=4,$u=new Int32Array(2),_C=new Float32Array($u.buffer),vC=new Float64Array($u.buffer),R_=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Jx;(function(i){i[i.UTF8_BYTES=1]="UTF8_BYTES",i[i.UTF16_STRING=2]="UTF16_STRING"})(Jx||(Jx={}));class V0{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new V0(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return $u[0]=this.readInt32(e),_C[0]}readFloat64(e){return $u[R_?0:1]=this.readInt32(e),$u[R_?1:0]=this.readInt32(e+4),vC[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){_C[0]=t,this.writeInt32(e,$u[0])}writeFloat64(e,t){vC[0]=t,this.writeInt32(e,$u[R_?0:1]),this.writeInt32(e+4,$u[R_?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Ml+Yl)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<Yl;t++)e+=String.fromCharCode(this.readInt8(this.position_+Ml+t));return e}__offset(e,t){const n=e-this.readInt32(e);return t<this.readInt16(n)?this.readInt16(n+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const n=this.readInt32(e);e+=Ml;const r=this.bytes_.subarray(e,e+n);return t===Jx.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,t){return typeof e=="string"?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+Ml}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=Yl)throw new Error("FlatBuffers: file identifier must be length "+Yl);for(let t=0;t<Yl;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+Ml+t))return!1;return!0}createScalarList(e,t){const n=[];for(let r=0;r<t;++r){const s=e(r);s!==null&&n.push(s)}return n}createObjList(e,t){const n=[];for(let r=0;r<t;++r){const s=e(r);s!==null&&n.push(s.unpack())}return n}}class KR{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let t;e?t=e:t=1024,this.bb=V0.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);const n=~(this.bb.capacity()-this.space+t)+1&e-1;for(;this.space<n+e+t;){const r=this.bb.capacity();this.bb=KR.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(n)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,n){(this.force_defaults||t!=n)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,n){(this.force_defaults||t!=n)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,n){(this.force_defaults||t!=n)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,n){(this.force_defaults||t!==n)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,n){(this.force_defaults||t!=n)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,n){t!=n&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=t<<1,r=V0.allocate(n);return r.setPosition(n-t),r.bytes().set(e.bytes(),n-t),r}addOffset(e){this.prep(Ml,0),this.writeInt32(this.offset()-e+Ml)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&this.vtable[t]==0;t--);const n=t+1;for(;t>=0;t--)this.addInt16(this.vtable[t]!=0?e-this.vtable[t]:0);const r=2;this.addInt16(e-this.object_start);const s=(n+r)*B1;this.addInt16(s);let o=0;const a=this.space;e:for(t=0;t<this.vtables.length;t++){const l=this.bb.capacity()-this.vtables[t];if(s==this.bb.readInt16(l)){for(let u=B1;u<s;u+=B1)if(this.bb.readInt16(a+u)!=this.bb.readInt16(l+u))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,n){const r=n?l9:0;if(t){const s=t;if(this.prep(this.minalign,Ml+Yl+r),s.length!=Yl)throw new TypeError("FlatBuffers: file identifier must be length "+Yl);for(let o=Yl-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Ml+r),this.addOffset(e),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const n=this.bb.capacity()-e,r=n-this.bb.readInt32(n);if(!(t<this.bb.readInt16(r)&&this.bb.readInt16(r+t)!=0))throw new TypeError("FlatBuffers: field "+t+" must be set")}startVector(e,t,n){this.notNested(),this.vector_num_elems=t,this.prep(Ml,e*t),this.prep(n,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(e==null)return 0;let t;return e instanceof Uint8Array?t=e:t=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n];if(r!==null)t.push(this.createObjectOffset(r));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}}const ule=Object.freeze(Object.defineProperty({__proto__:null,Builder:KR,ByteBuffer:V0,get Encoding(){return Jx},FILE_IDENTIFIER_LENGTH:Yl,SIZEOF_INT:Ml,SIZEOF_SHORT:B1,SIZE_PREFIX_LENGTH:l9,float32:_C,float64:vC,int32:$u,isLittleEndian:R_},Symbol.toStringTag,{value:"Module"})),dw=L9(ule);var xl={},d_={},dO;function cle(){if(dO)return d_;dO=1,Object.defineProperty(d_,"__esModule",{value:!0}),d_.Model=void 0;var i;return function(e){e[e.undefined=0]="undefined",e[e.best_match=1]="best_match",e[e.gfs_seamless=2]="gfs_seamless",e[e.gfs_global=3]="gfs_global",e[e.gfs_hrrr=4]="gfs_hrrr",e[e.meteofrance_seamless=5]="meteofrance_seamless",e[e.meteofrance_arpege_seamless=6]="meteofrance_arpege_seamless",e[e.meteofrance_arpege_world=7]="meteofrance_arpege_world",e[e.meteofrance_arpege_europe=8]="meteofrance_arpege_europe",e[e.meteofrance_arome_seamless=9]="meteofrance_arome_seamless",e[e.meteofrance_arome_france=10]="meteofrance_arome_france",e[e.meteofrance_arome_france_hd=11]="meteofrance_arome_france_hd",e[e.jma_seamless=12]="jma_seamless",e[e.jma_msm=13]="jma_msm",e[e.jms_gsm=14]="jms_gsm",e[e.jma_gsm=15]="jma_gsm",e[e.gem_seamless=16]="gem_seamless",e[e.gem_global=17]="gem_global",e[e.gem_regional=18]="gem_regional",e[e.gem_hrdps_continental=19]="gem_hrdps_continental",e[e.icon_seamless=20]="icon_seamless",e[e.icon_global=21]="icon_global",e[e.icon_eu=22]="icon_eu",e[e.icon_d2=23]="icon_d2",e[e.ecmwf_ifs04=24]="ecmwf_ifs04",e[e.metno_nordic=25]="metno_nordic",e[e.era5_seamless=26]="era5_seamless",e[e.era5=27]="era5",e[e.cerra=28]="cerra",e[e.era5_land=29]="era5_land",e[e.ecmwf_ifs=30]="ecmwf_ifs",e[e.gwam=31]="gwam",e[e.ewam=32]="ewam",e[e.glofas_seamless_v3=33]="glofas_seamless_v3",e[e.glofas_forecast_v3=34]="glofas_forecast_v3",e[e.glofas_consolidated_v3=35]="glofas_consolidated_v3",e[e.glofas_seamless_v4=36]="glofas_seamless_v4",e[e.glofas_forecast_v4=37]="glofas_forecast_v4",e[e.glofas_consolidated_v4=38]="glofas_consolidated_v4",e[e.gfs025=39]="gfs025",e[e.gfs05=40]="gfs05",e[e.CMCC_CM2_VHR4=41]="CMCC_CM2_VHR4",e[e.FGOALS_f3_H_highresSST=42]="FGOALS_f3_H_highresSST",e[e.FGOALS_f3_H=43]="FGOALS_f3_H",e[e.HiRAM_SIT_HR=44]="HiRAM_SIT_HR",e[e.MRI_AGCM3_2_S=45]="MRI_AGCM3_2_S",e[e.EC_Earth3P_HR=46]="EC_Earth3P_HR",e[e.MPI_ESM1_2_XR=47]="MPI_ESM1_2_XR",e[e.NICAM16_8S=48]="NICAM16_8S",e[e.cams_europe=49]="cams_europe",e[e.cams_global=50]="cams_global",e[e.cfsv2=51]="cfsv2",e[e.era5_ocean=52]="era5_ocean",e[e.cma_grapes_global=53]="cma_grapes_global",e[e.bom_access_global=54]="bom_access_global",e[e.bom_access_global_ensemble=55]="bom_access_global_ensemble",e[e.arpae_cosmo_seamless=56]="arpae_cosmo_seamless",e[e.arpae_cosmo_2i=57]="arpae_cosmo_2i",e[e.arpae_cosmo_2i_ruc=58]="arpae_cosmo_2i_ruc",e[e.arpae_cosmo_5m=59]="arpae_cosmo_5m",e[e.ecmwf_ifs025=60]="ecmwf_ifs025",e[e.ecmwf_aifs025=61]="ecmwf_aifs025",e[e.gfs013=62]="gfs013",e[e.gfs_graphcast025=63]="gfs_graphcast025",e[e.ecmwf_wam025=64]="ecmwf_wam025",e[e.meteofrance_wave=65]="meteofrance_wave",e[e.meteofrance_currents=66]="meteofrance_currents",e[e.ecmwf_wam025_ensemble=67]="ecmwf_wam025_ensemble",e[e.ncep_gfswave025=68]="ncep_gfswave025",e[e.ncep_gefswave025=69]="ncep_gefswave025",e[e.knmi_seamless=70]="knmi_seamless",e[e.knmi_harmonie_arome_europe=71]="knmi_harmonie_arome_europe",e[e.knmi_harmonie_arome_netherlands=72]="knmi_harmonie_arome_netherlands",e[e.dmi_seamless=73]="dmi_seamless",e[e.dmi_harmonie_arome_europe=74]="dmi_harmonie_arome_europe",e[e.metno_seamless=75]="metno_seamless",e[e.era5_ensemble=76]="era5_ensemble",e[e.ecmwf_ifs_analysis=77]="ecmwf_ifs_analysis",e[e.ecmwf_ifs_long_window=78]="ecmwf_ifs_long_window",e[e.ecmwf_ifs_analysis_long_window=79]="ecmwf_ifs_analysis_long_window",e[e.ukmo_global_deterministic_10km=80]="ukmo_global_deterministic_10km",e[e.ukmo_uk_deterministic_2km=81]="ukmo_uk_deterministic_2km",e[e.ukmo_seamless=82]="ukmo_seamless",e[e.ncep_gfswave016=83]="ncep_gfswave016",e[e.ncep_nbm_conus=84]="ncep_nbm_conus"}(i||(d_.Model=i={})),d_}var Al={},wl={},p_={},pO;function hle(){if(pO)return p_;pO=1,Object.defineProperty(p_,"__esModule",{value:!0}),p_.Aggregation=void 0;var i;return function(e){e[e.none=0]="none",e[e.minimum=1]="minimum",e[e.maximum=2]="maximum",e[e.mean=3]="mean",e[e.p10=4]="p10",e[e.p25=5]="p25",e[e.median=6]="median",e[e.p75=7]="p75",e[e.p90=8]="p90",e[e.dominant=9]="dominant",e[e.sum=10]="sum",e[e.spread=11]="spread"}(i||(p_.Aggregation=i={})),p_}var m_={},mO;function fle(){if(mO)return m_;mO=1,Object.defineProperty(m_,"__esModule",{value:!0}),m_.Unit=void 0;var i;return function(e){e[e.undefined=0]="undefined",e[e.celsius=1]="celsius",e[e.centimetre=2]="centimetre",e[e.cubic_metre_per_cubic_metre=3]="cubic_metre_per_cubic_metre",e[e.cubic_metre_per_second=4]="cubic_metre_per_second",e[e.degree_direction=5]="degree_direction",e[e.dimensionless_integer=6]="dimensionless_integer",e[e.dimensionless=7]="dimensionless",e[e.european_air_quality_index=8]="european_air_quality_index",e[e.fahrenheit=9]="fahrenheit",e[e.feet=10]="feet",e[e.fraction=11]="fraction",e[e.gdd_celsius=12]="gdd_celsius",e[e.geopotential_metre=13]="geopotential_metre",e[e.grains_per_cubic_metre=14]="grains_per_cubic_metre",e[e.gram_per_kilogram=15]="gram_per_kilogram",e[e.hectopascal=16]="hectopascal",e[e.hours=17]="hours",e[e.inch=18]="inch",e[e.iso8601=19]="iso8601",e[e.joule_per_kilogram=20]="joule_per_kilogram",e[e.kelvin=21]="kelvin",e[e.kilopascal=22]="kilopascal",e[e.kilogram_per_square_metre=23]="kilogram_per_square_metre",e[e.kilometres_per_hour=24]="kilometres_per_hour",e[e.knots=25]="knots",e[e.megajoule_per_square_metre=26]="megajoule_per_square_metre",e[e.metre_per_second_not_unit_converted=27]="metre_per_second_not_unit_converted",e[e.metre_per_second=28]="metre_per_second",e[e.metre=29]="metre",e[e.micrograms_per_cubic_metre=30]="micrograms_per_cubic_metre",e[e.miles_per_hour=31]="miles_per_hour",e[e.millimetre=32]="millimetre",e[e.pascal=33]="pascal",e[e.per_second=34]="per_second",e[e.percentage=35]="percentage",e[e.seconds=36]="seconds",e[e.unix_time=37]="unix_time",e[e.us_air_quality_index=38]="us_air_quality_index",e[e.watt_per_square_metre=39]="watt_per_square_metre",e[e.wmo_code=40]="wmo_code",e[e.parts_per_million=41]="parts_per_million"}(i||(m_.Unit=i={})),m_}var g_={},gO;function dle(){if(gO)return g_;gO=1,Object.defineProperty(g_,"__esModule",{value:!0}),g_.Variable=void 0;var i;return function(e){e[e.undefined=0]="undefined",e[e.apparent_temperature=1]="apparent_temperature",e[e.cape=2]="cape",e[e.cloud_cover=3]="cloud_cover",e[e.cloud_cover_high=4]="cloud_cover_high",e[e.cloud_cover_low=5]="cloud_cover_low",e[e.cloud_cover_mid=6]="cloud_cover_mid",e[e.daylight_duration=7]="daylight_duration",e[e.dew_point=8]="dew_point",e[e.diffuse_radiation=9]="diffuse_radiation",e[e.diffuse_radiation_instant=10]="diffuse_radiation_instant",e[e.direct_normal_irradiance=11]="direct_normal_irradiance",e[e.direct_normal_irradiance_instant=12]="direct_normal_irradiance_instant",e[e.direct_radiation=13]="direct_radiation",e[e.direct_radiation_instant=14]="direct_radiation_instant",e[e.et0_fao_evapotranspiration=15]="et0_fao_evapotranspiration",e[e.evapotranspiration=16]="evapotranspiration",e[e.freezing_level_height=17]="freezing_level_height",e[e.growing_degree_days=18]="growing_degree_days",e[e.is_day=19]="is_day",e[e.latent_heat_flux=20]="latent_heat_flux",e[e.leaf_wetness_probability=21]="leaf_wetness_probability",e[e.lifted_index=22]="lifted_index",e[e.lightning_potential=23]="lightning_potential",e[e.precipitation=24]="precipitation",e[e.precipitation_hours=25]="precipitation_hours",e[e.precipitation_probability=26]="precipitation_probability",e[e.pressure_msl=27]="pressure_msl",e[e.rain=28]="rain",e[e.relative_humidity=29]="relative_humidity",e[e.runoff=30]="runoff",e[e.sensible_heat_flux=31]="sensible_heat_flux",e[e.shortwave_radiation=32]="shortwave_radiation",e[e.shortwave_radiation_instant=33]="shortwave_radiation_instant",e[e.showers=34]="showers",e[e.snow_depth=35]="snow_depth",e[e.snow_height=36]="snow_height",e[e.snowfall=37]="snowfall",e[e.snowfall_height=38]="snowfall_height",e[e.snowfall_water_equivalent=39]="snowfall_water_equivalent",e[e.sunrise=40]="sunrise",e[e.sunset=41]="sunset",e[e.soil_moisture=42]="soil_moisture",e[e.soil_moisture_index=43]="soil_moisture_index",e[e.soil_temperature=44]="soil_temperature",e[e.surface_pressure=45]="surface_pressure",e[e.surface_temperature=46]="surface_temperature",e[e.temperature=47]="temperature",e[e.terrestrial_radiation=48]="terrestrial_radiation",e[e.terrestrial_radiation_instant=49]="terrestrial_radiation_instant",e[e.total_column_integrated_water_vapour=50]="total_column_integrated_water_vapour",e[e.updraft=51]="updraft",e[e.uv_index=52]="uv_index",e[e.uv_index_clear_sky=53]="uv_index_clear_sky",e[e.vapour_pressure_deficit=54]="vapour_pressure_deficit",e[e.visibility=55]="visibility",e[e.weather_code=56]="weather_code",e[e.wind_direction=57]="wind_direction",e[e.wind_gusts=58]="wind_gusts",e[e.wind_speed=59]="wind_speed",e[e.vertical_velocity=60]="vertical_velocity",e[e.geopotential_height=61]="geopotential_height",e[e.wet_bulb_temperature=62]="wet_bulb_temperature",e[e.river_discharge=63]="river_discharge",e[e.wave_height=64]="wave_height",e[e.wave_period=65]="wave_period",e[e.wave_direction=66]="wave_direction",e[e.wind_wave_height=67]="wind_wave_height",e[e.wind_wave_period=68]="wind_wave_period",e[e.wind_wave_peak_period=69]="wind_wave_peak_period",e[e.wind_wave_direction=70]="wind_wave_direction",e[e.swell_wave_height=71]="swell_wave_height",e[e.swell_wave_period=72]="swell_wave_period",e[e.swell_wave_peak_period=73]="swell_wave_peak_period",e[e.swell_wave_direction=74]="swell_wave_direction",e[e.pm10=75]="pm10",e[e.pm2p5=76]="pm2p5",e[e.dust=77]="dust",e[e.aerosol_optical_depth=78]="aerosol_optical_depth",e[e.carbon_monoxide=79]="carbon_monoxide",e[e.nitrogen_dioxide=80]="nitrogen_dioxide",e[e.ammonia=81]="ammonia",e[e.ozone=82]="ozone",e[e.sulphur_dioxide=83]="sulphur_dioxide",e[e.alder_pollen=84]="alder_pollen",e[e.birch_pollen=85]="birch_pollen",e[e.grass_pollen=86]="grass_pollen",e[e.mugwort_pollen=87]="mugwort_pollen",e[e.olive_pollen=88]="olive_pollen",e[e.ragweed_pollen=89]="ragweed_pollen",e[e.european_aqi=90]="european_aqi",e[e.european_aqi_pm2p5=91]="european_aqi_pm2p5",e[e.european_aqi_pm10=92]="european_aqi_pm10",e[e.european_aqi_nitrogen_dioxide=93]="european_aqi_nitrogen_dioxide",e[e.european_aqi_ozone=94]="european_aqi_ozone",e[e.european_aqi_sulphur_dioxide=95]="european_aqi_sulphur_dioxide",e[e.us_aqi=96]="us_aqi",e[e.us_aqi_pm2p5=97]="us_aqi_pm2p5",e[e.us_aqi_pm10=98]="us_aqi_pm10",e[e.us_aqi_nitrogen_dioxide=99]="us_aqi_nitrogen_dioxide",e[e.us_aqi_ozone=100]="us_aqi_ozone",e[e.us_aqi_sulphur_dioxide=101]="us_aqi_sulphur_dioxide",e[e.us_aqi_carbon_monoxide=102]="us_aqi_carbon_monoxide",e[e.sunshine_duration=103]="sunshine_duration",e[e.convective_inhibition=104]="convective_inhibition",e[e.shortwave_radiation_clear_sky=105]="shortwave_radiation_clear_sky",e[e.global_tilted_irradiance=106]="global_tilted_irradiance",e[e.global_tilted_irradiance_instant=107]="global_tilted_irradiance_instant",e[e.ocean_current_velocity=108]="ocean_current_velocity",e[e.ocean_current_direction=109]="ocean_current_direction",e[e.cloud_base=110]="cloud_base",e[e.cloud_top=111]="cloud_top",e[e.mass_density=112]="mass_density",e[e.boundary_layer_height=113]="boundary_layer_height",e[e.formaldehyde=114]="formaldehyde",e[e.glyoxal=115]="glyoxal",e[e.non_methane_volatile_organic_compounds=116]="non_methane_volatile_organic_compounds",e[e.pm10_wildfires=117]="pm10_wildfires",e[e.peroxyacyl_nitrates=118]="peroxyacyl_nitrates",e[e.secondary_inorganic_aerosol=119]="secondary_inorganic_aerosol",e[e.residential_elementary_carbon=120]="residential_elementary_carbon",e[e.total_elementary_carbon=121]="total_elementary_carbon",e[e.pm2_5_total_organic_matter=122]="pm2_5_total_organic_matter",e[e.sea_salt_aerosol=123]="sea_salt_aerosol",e[e.nitrogen_monoxide=124]="nitrogen_monoxide",e[e.thunderstorm_probability=125]="thunderstorm_probability",e[e.rain_probability=126]="rain_probability",e[e.freezing_rain_probability=127]="freezing_rain_probability",e[e.ice_pellets_probability=128]="ice_pellets_probability",e[e.snowfall_probability=129]="snowfall_probability",e[e.carbon_dioxide=130]="carbon_dioxide",e[e.methane=131]="methane"}(i||(g_.Variable=i={})),g_}var _O;function ple(){if(_O)return wl;_O=1;var i=wl&&wl.__createBinding||(Object.create?function(l,u,f,c){c===void 0&&(c=f);var d=Object.getOwnPropertyDescriptor(u,f);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[f]}}),Object.defineProperty(l,c,d)}:function(l,u,f,c){c===void 0&&(c=f),l[c]=u[f]}),e=wl&&wl.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),t=wl&&wl.__importStar||function(l){if(l&&l.__esModule)return l;var u={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&i(u,l,f);return e(u,l),u};Object.defineProperty(wl,"__esModule",{value:!0}),wl.VariableWithValues=void 0;const n=t(dw),r=hle(),s=fle(),o=dle();class a{constructor(){this.bb=null,this.bb_pos=0}__init(u,f){return this.bb_pos=u,this.bb=f,this}static getRootAsVariableWithValues(u,f){return(f||new a).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsVariableWithValues(u,f){return u.setPosition(u.position()+n.SIZE_PREFIX_LENGTH),(f||new a).__init(u.readInt32(u.position())+u.position(),u)}variable(){const u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readUint8(this.bb_pos+u):o.Variable.undefined}unit(){const u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readUint8(this.bb_pos+u):s.Unit.undefined}value(){const u=this.bb.__offset(this.bb_pos,8);return u?this.bb.readFloat32(this.bb_pos+u):0}values(u){const f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readFloat32(this.bb.__vector(this.bb_pos+f)+u*4):0}valuesLength(){const u=this.bb.__offset(this.bb_pos,10);return u?this.bb.__vector_len(this.bb_pos+u):0}valuesArray(){const u=this.bb.__offset(this.bb_pos,10);return u?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}valuesInt64(u){const f=this.bb.__offset(this.bb_pos,12);return f?this.bb.readInt64(this.bb.__vector(this.bb_pos+f)+u*8):BigInt(0)}valuesInt64Length(){const u=this.bb.__offset(this.bb_pos,12);return u?this.bb.__vector_len(this.bb_pos+u):0}altitude(){const u=this.bb.__offset(this.bb_pos,14);return u?this.bb.readInt16(this.bb_pos+u):0}aggregation(){const u=this.bb.__offset(this.bb_pos,16);return u?this.bb.readUint8(this.bb_pos+u):r.Aggregation.none}pressureLevel(){const u=this.bb.__offset(this.bb_pos,18);return u?this.bb.readInt16(this.bb_pos+u):0}depth(){const u=this.bb.__offset(this.bb_pos,20);return u?this.bb.readInt16(this.bb_pos+u):0}depthTo(){const u=this.bb.__offset(this.bb_pos,22);return u?this.bb.readInt16(this.bb_pos+u):0}ensembleMember(){const u=this.bb.__offset(this.bb_pos,24);return u?this.bb.readInt16(this.bb_pos+u):0}previousDay(){const u=this.bb.__offset(this.bb_pos,26);return u?this.bb.readInt16(this.bb_pos+u):0}}return wl.VariableWithValues=a,wl}var vO;function mle(){if(vO)return Al;vO=1;var i=Al&&Al.__createBinding||(Object.create?function(o,a,l,u){u===void 0&&(u=l);var f=Object.getOwnPropertyDescriptor(a,l);(!f||("get"in f?!a.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return a[l]}}),Object.defineProperty(o,u,f)}:function(o,a,l,u){u===void 0&&(u=l),o[u]=a[l]}),e=Al&&Al.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),t=Al&&Al.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&i(a,o,l);return e(a,o),a};Object.defineProperty(Al,"__esModule",{value:!0}),Al.VariablesWithTime=void 0;const n=t(dw),r=ple();class s{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsVariablesWithTime(a,l){return(l||new s).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsVariablesWithTime(a,l){return a.setPosition(a.position()+n.SIZE_PREFIX_LENGTH),(l||new s).__init(a.readInt32(a.position())+a.position(),a)}time(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt64(this.bb_pos+a):BigInt("0")}timeEnd(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readInt64(this.bb_pos+a):BigInt("0")}interval(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readInt32(this.bb_pos+a):0}variables(a,l){const u=this.bb.__offset(this.bb_pos,10);return u?(l||new r.VariableWithValues).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+a*4),this.bb):null}variablesLength(){const a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0}}return Al.VariablesWithTime=s,Al}var yO;function gle(){if(yO)return xl;yO=1;var i=xl&&xl.__createBinding||(Object.create?function(a,l,u,f){f===void 0&&(f=u);var c=Object.getOwnPropertyDescriptor(l,u);(!c||("get"in c?!l.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(a,f,c)}:function(a,l,u,f){f===void 0&&(f=u),a[f]=l[u]}),e=xl&&xl.__setModuleDefault||(Object.create?function(a,l){Object.defineProperty(a,"default",{enumerable:!0,value:l})}:function(a,l){a.default=l}),t=xl&&xl.__importStar||function(a){if(a&&a.__esModule)return a;var l={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&i(l,a,u);return e(l,a),l};Object.defineProperty(xl,"__esModule",{value:!0}),xl.WeatherApiResponse=void 0;const n=t(dw),r=cle(),s=mle();class o{constructor(){this.bb=null,this.bb_pos=0}__init(l,u){return this.bb_pos=l,this.bb=u,this}static getRootAsWeatherApiResponse(l,u){return(u||new o).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsWeatherApiResponse(l,u){return l.setPosition(l.position()+n.SIZE_PREFIX_LENGTH),(u||new o).__init(l.readInt32(l.position())+l.position(),l)}latitude(){const l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readFloat32(this.bb_pos+l):0}longitude(){const l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readFloat32(this.bb_pos+l):0}elevation(){const l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readFloat32(this.bb_pos+l):0}generationTimeMilliseconds(){const l=this.bb.__offset(this.bb_pos,10);return l?this.bb.readFloat32(this.bb_pos+l):0}locationId(){const l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readInt64(this.bb_pos+l):BigInt("0")}model(){const l=this.bb.__offset(this.bb_pos,14);return l?this.bb.readUint8(this.bb_pos+l):r.Model.undefined}utcOffsetSeconds(){const l=this.bb.__offset(this.bb_pos,16);return l?this.bb.readInt32(this.bb_pos+l):0}timezone(l){const u=this.bb.__offset(this.bb_pos,18);return u?this.bb.__string(this.bb_pos+u,l):null}timezoneAbbreviation(l){const u=this.bb.__offset(this.bb_pos,20);return u?this.bb.__string(this.bb_pos+u,l):null}current(l){const u=this.bb.__offset(this.bb_pos,22);return u?(l||new s.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}daily(l){const u=this.bb.__offset(this.bb_pos,24);return u?(l||new s.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}hourly(l){const u=this.bb.__offset(this.bb_pos,26);return u?(l||new s.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}minutely15(l){const u=this.bb.__offset(this.bb_pos,28);return u?(l||new s.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}sixHourly(l){const u=this.bb.__offset(this.bb_pos,30);return u?(l||new s.VariablesWithTime).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}}return xl.WeatherApiResponse=o,xl}var xO;function _le(){if(xO)return Gf;xO=1;var i=Gf&&Gf.__awaiter||function(o,a,l,u){function f(c){return c instanceof l?c:new l(function(d){d(c)})}return new(l||(l=Promise))(function(c,d){function g(x){try{A(u.next(x))}catch(w){d(w)}}function v(x){try{A(u.throw(x))}catch(w){d(w)}}function A(x){x.done?c(x.value):f(x.value).then(g,v)}A((u=u.apply(o,a||[])).next())})};Object.defineProperty(Gf,"__esModule",{value:!0}),Gf.fetchWeatherApi=void 0;const e=dw,t=gle(),n=o=>new Promise(a=>setTimeout(a,o));function r(o){return i(this,arguments,void 0,function*(a,l=3,u=.5,f=2){const c=[500,502,504],d=[400,429];let g=0,v=yield fetch(a);for(;c.includes(v.status);){if(g++,g>=l)throw new Error(v.statusText);const A=Math.min(u*Math.pow(2,g),f)*1e3;yield n(A),v=yield fetch(a)}if(d.includes(v.status)){const A=yield v.json();throw"reason"in A?new Error(A.reason):new Error(v.statusText)}return v})}function s(o,a){return i(this,arguments,void 0,function*(l,u,f=3,c=.2,d=2){const g=new URLSearchParams(u);g.set("format","flatbuffers");const v=yield r(`${l}?${g.toString()}`,f,c,d),A=new e.ByteBuffer(new Uint8Array(yield v.arrayBuffer())),x=[];let w=0;for(;w<A.capacity();){A.setPosition(w);const M=A.readInt32(A.position());x.push(t.WeatherApiResponse.getSizePrefixedRootAsWeatherApiResponse(A)),w+=M+4}return x})}return Gf.fetchWeatherApi=s,Gf}var vle=_le();const yle=i=>{const e={latitude:-34.6131,longitude:-58.3772,current:["temperature_2m","is_day"],timeformat:"unixtime"};vle.fetchWeatherApi("https://api.open-meteo.com/v1/gfs",e).then(n=>{if(n&&n.length>0){const r=n[0];if(r){const s=r.utcOffsetSeconds(),o=r.current();if(o&&o.variables){let a=function(){const f=new Date,c=f.getHours(),d=f.getMinutes(),g=c>=12?"PM":"AM",v=c%12||12,A=l(d);return`${v}:${A} ${g}`},l=function(f){return f<10?`0${f}`:f};Number(o.time())+s;const u={time:a(),temperature2m:o.variables(0).value().toFixed(),isDay:o.variables(1).value()};i(u)}else console.error("No valid 'current' data available.")}else console.error("No valid 'response' data available.")}else console.error("No weather data available.")}).catch(n=>{console.error("Error fetching weather data:",n)})},AO="/assets/party-DvrpmNbU.png",wO="/assets/balloon-CxP_6qTG.png",xle=({setDialogText:i,hatName:e})=>{const[t,n]=me.useState(null),r=me.useRef(),s=Jb(g=>g.triggerConfetti),o=Jb(g=>g.setTriggerConfetti),{getHexBackground:a}=JR(),l=Dd(g=>g.isScrolling);me.useEffect(()=>{$x(".weatherContainer",l)},[l]),me.useEffect(()=>{yle(n),Qr.to(document.documentElement,{duration:.8,"--bg-after":a(e),ease:"power1.inOut"})},[e]);const u=t&&t.temperature2m?t.temperature2m<=10?"☁️":t.temperature2m<=15?"🌥️":t.temperature2m<=24?"🌤️":t.temperature2m>=25?"🌞":t.temperature2m>=32?"🔥":"":null,f=()=>{new Howl({src:["assets/sounds/bubble-pop-buttons.mp3"],volume:.005}).play()},c=()=>{new Howl({src:["assets/sounds/woo-hoo.mp3"],volume:.07}).play()},d=()=>{o(!0),c(),setTimeout(()=>o(!1),1500)};return re.jsxs(re.Fragment,{children:[s&&re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"absolute left-0 top-0 md:-left-[50%] lg:-left-[180%]",children:re.jsx(M1,{force:.2,particleCount:200,width:window.innerWidth,duration:1700})}),re.jsx("div",{className:"absolute left-0 top-1/3 lg:-left-1/3",children:re.jsx(M1,{force:.5,particleCount:120,width:window.innerWidth/2,duration:1800})}),re.jsx("div",{className:"absolute right-1/3 top-1/3 md:left-0",children:re.jsx(M1,{force:.5,particleCount:120,width:window.innerWidth/2,duration:1800})})]}),re.jsx("div",{ref:r,className:"weatherContainer w-56 text-[#FAFAFA] md:w-72 3xl:w-auto",children:t?re.jsxs("div",{className:"text-right font-sans text-sm uppercase tracking-tight 3xl:text-xl 4xl:text-5xl",children:[re.jsxs("p",{className:"select-none",children:[t.temperature2m,"°C"," ",t&&t.isDay===0?"🌙":u," ",re.jsx("b",{className:"pl-0.5",children:"Buenos Aires, ARG 🇦🇷"})," ",t.time]}),re.jsx("div",{className:"mt-0 flex flex-row items-center justify-end gap-2 pb-[3px]",children:re.jsx("a",{href:"mailto:rodriguezfranciscoa@hotmail.com?subject=Wanna talk!",className:"group",onMouseEnter:()=>(i(`<img loading="eager" src=${AO} class='inline-block w-6'/> <img loading="eager" src=${wO} class='inline-block w-6 animate-shake'/> YAY! <img loading="eager" src=${wO} class='inline-block w-6 animate-shake'/><img loading="eager" src=${AO} class='inline-block w-6'/>`),f()),onMouseLeave:()=>i(""),onClick:d,children:re.jsxs("span",{className:"bg-talk pointer-events-none relative flex select-none flex-row items-center font-RecoletaBlack font-semibold tracking-wide text-white transition-all duration-200 after:absolute after:!bottom-[-2px] after:!left-1.5 after:z-[-1] after:!h-4 after:!w-24 after:bg-[var(--bg-after)] after:!transition-all after:!duration-150 after:content-[''] group-hover:scale-110 group-hover:after:!-left-1 group-hover:after:!bottom-[-3px] group-hover:after:!h-6 group-hover:after:!w-[6.7rem] group-hover:after:!rotate-3 group-hover:after:shadow-md 2xl:after:!w-[7.6rem] 2xl:group-hover:after:!h-8 2xl:group-hover:after:!w-[9.3rem] 4xl:mt-2 4xl:after:!left-5 4xl:after:!h-8 4xl:after:!w-[17rem] 4xl:group-hover:after:!-left-4 4xl:group-hover:after:!h-[4.2rem] 4xl:group-hover:after:!w-[22.5rem]",children:["lets talk!",re.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#fafafa",className:"w-4 transition-all duration-150 group-hover:translate-x-1.5 group-hover:drop-shadow-sm 2xl:w-5 4xl:w-14",children:re.jsx("path",{d:"M11.293 4.707L17.586 11H4v2h13.586l-6.293 6.293 1.414 1.414L21.414 12l-8.707-8.707-1.414 1.414z"})})]})})})]}):""})]})},Ale=()=>{const i=["Hi!","Hola!","Bonjour!","Ciao!","こんにちは!"],[e,t]=me.useState(0),n=me.useRef(null);return me.useEffect(()=>{const r=setInterval(()=>{t(s=>(s+1)%i.length)},2e3);return()=>clearInterval(r)},[i.length]),me.useEffect(()=>{if(n.current){const r=n.current.querySelectorAll("span");Qr.timeline().fromTo(r,{opacity:0,y:20,rotateX:-20},{opacity:1,y:0,rotateX:0,duration:.1,stagger:.02}).to(r,{opacity:0,y:-30,rotateX:90,duration:.1,stagger:.02},"+=1")}},[e]),re.jsx("div",{className:"absolute top-[28%] z-50 w-full text-center 4xl:top-[26%]",children:re.jsx("p",{ref:n,className:"text-center font-RecoletaBlack text-4xl font-bold leading-none tracking-wider text-white 4xl:pl-36 4xl:text-8xl",children:i[e].split("").map((r,s)=>re.jsx("span",{className:"inline-block",children:r},s))})})},wle="/assets/Speaker-B9jaLx9T.png",Sle="/assets/SpeakerMuted-BrzHEwpD.png",SO="/assets/MusicalNote-ij5PN67m.png",Ele="/assets/man-dancing-DcK4v1wZ.png",Tle="/assets/seal-Cb2MDl_t.png",Mle=({setDialogText:i})=>{const e=e0(f=>f.isMusicPlaying),t=e0(f=>f.playMusic),n=e0(f=>f.stopMusic),[r,s]=me.useState(),o=me.useRef(null),a=me.useRef(null),l=window.innerWidth<768,u=()=>{if(e&&r)r.stop(),n();else{const f=new mC.Howl({volume:.07,src:["assets/sounds/home-music.mp3"],loop:!0,rate:.9});f.play(),s(f),t()}};return me.useEffect(()=>{if(e&&o.current&&a.current){const f=(c,d,g,v)=>{const A=Qr.timeline({repeat:-1,repeatDelay:v,delay:g});A.to(c,{y:l?-15:-50,duration:2,ease:"power1.in",opacity:1,scale:1,onUpdate:function(){const x=this.progress(),w=Math.sin(x*Math.PI*4)*d;Qr.set(c,{x:w})}}),A.to(c,{y:l?-15:-60,scale:0,opacity:0,duration:1,ease:"power4.out"}),A.set(c,{scale:0,opacity:0})};f(o.current,10,0,2),f(a.current,10,2.5,2)}},[e]),re.jsxs(re.Fragment,{children:[re.jsx("img",{src:e?wle:Sle,className:`w-10 cursor-pointer md:w-12 lg:w-16 3xl:w-20 4xl:w-44 ${e&&"animate-pulse"} transition-all hover:scale-125 active:scale-150`,alt:"Music On Icon",onClick:u,onMouseEnter:()=>{i(e?`Moment of calm? <img loading="eager" src=${Tle} class='inline-block w-6'/>`:`Let the good vibes play! <img loading="eager" src=${Ele} class='inline-block w-6 animate-shake'/>`)},onMouseLeave:()=>{i("")}}),e&&re.jsxs(re.Fragment,{children:[re.jsx("img",{ref:o,src:SO,alt:"Musical Note Icon",className:"pointer-events-none absolute -left-4 bottom-7 w-5 opacity-0 md:bottom-20"}),re.jsx("img",{ref:a,src:SO,alt:"Musical Note Icon",className:"pointer-events-none absolute bottom-7 left-5 w-5 opacity-0 md:bottom-16 lg:left-10"})]})]})};function ble(){const[i,e]=me.useState(null),{getGradientBackground:t}=JR(),{hatName:n}=mR();ale();const r=Dd(l=>l.isScrolling),s=Jm(l=>l.isLoading),o=P0(l=>l.isPopUpOpen);me.useEffect(()=>{!r||o||(e(`Nope, everything is here! <img loading="eager" src=${o9} class='inline-block w-6'/>`),setTimeout(()=>e(""),1800))},[r,o]),me.useEffect(()=>{s||Qr.to(".main-container",{background:t(n),duration:1,ease:"power4.in"})},[t,n,s]),me.useEffect(()=>{s||(Qr.fromTo(".rrss",{opacity:0,y:20},{opacity:1,y:0,duration:1,ease:"power3.out",delay:.8}),Qr.fromTo(".handwritten-texts",{opacity:0,y:20},{opacity:1,y:0,duration:1,ease:"power3.out",delay:1.2}),Qr.fromTo(".about",{opacity:0,y:20,rotation:-180},{opacity:1,y:0,duration:1,rotation:0,ease:"power3.out",delay:1.4}),Qr.fromTo(".weather",{opacity:0,y:20},{opacity:1,y:0,duration:1,ease:"power3.out",delay:1.4}),Qr.fromTo(".count-container",{opacity:0},{opacity:1,duration:2,delay:.9,ease:"power2.out"}),Qr.fromTo(".music-icon",{opacity:0,y:20},{opacity:1,y:0,duration:1,ease:"power3.out",delay:1.1}))},[s]),me.useEffect(()=>{a9(),console.log("%c❤️ SITE MADE WITH LOVE BY FRANCISCO AGUSTIN ❤️","background-color: #047692; color: white; padding: 20px;")},[]);const a=()=>{new Howl({src:["assets/sounds/bubble-pop-buttons.mp3"],volume:.01}).play()};return re.jsxs("div",{className:`main-container h-dvh !overflow-hidden ${s&&"bg-[#101720]"}`,children:[re.jsx(i9,{setDialogText:e}),s&&re.jsx(re.Fragment,{children:re.jsxs("div",{className:"absolute inset-0 flex w-full items-center justify-center",children:[re.jsx(Oae,{}),re.jsx(Ale,{})]})}),!s&&re.jsxs(re.Fragment,{children:[re.jsx(j9,{}),re.jsx("div",{className:"handwritten-texts absolute top-0 z-50 w-full",children:re.jsx(kae,{})}),re.jsx(rle,{hatName:n}),re.jsx("div",{onMouseEnter:a,className:"about absolute -left-4 top-4 lg:left-2 lg:top-6",children:re.jsx(Fae,{setDialogText:e})}),re.jsx("div",{className:"rrss",children:re.jsx(dG,{setDialogText:e})}),re.jsx("div",{className:"weather absolute right-3.5 top-8 z-30 lg:right-16 3xl:top-10 4xl:right-[2%] 4xl:top-28",children:re.jsx(xle,{setDialogText:e,hatName:n})}),re.jsx("div",{className:"count-container absolute bottom-2 left-1/2 z-10 -translate-x-1/2 transform",children:re.jsx(lle,{})}),re.jsx("div",{onMouseEnter:a,className:"music-icon absolute right-2.5 top-36 z-10 md:bottom-36 md:right-2 md:top-auto lg:right-12 3xl:right-10 4xl:bottom-96",children:re.jsx(Mle,{setDialogText:e})}),re.jsx("div",{className:"absolute -right-[3.5rem] top-1/2 -rotate-90 select-none",children:re.jsx("p",{className:"font-mono text-xs text-white opacity-30",children:"ALL RIGHTS RESERVED."})}),i&&re.jsx(V9,{text:i})]})]})}const Cle=()=>{const i=()=>{window.location.replace("/")};return re.jsxs("div",{className:"relative flex min-h-screen flex-col items-center justify-center bg-slate-200",children:[re.jsx("div",{className:"absolute z-10 h-full w-full",children:re.jsx(i9,{})}),re.jsxs("div",{className:"absolute text-center",children:[re.jsxs("div",{className:"relative -top-52 z-50 flex flex-col gap-1",children:[re.jsx("span",{className:"bg-gradient-text bg-300% animate-gradientText bg-clip-text font-RecoletaBlack text-8xl text-black text-transparent 4xl:text-4xl",children:"Oops!"}),re.jsx("span",{className:"font-KarlaLight text-base text-black 4xl:text-4xl",children:"Look like you're lost"})]}),re.jsx("p",{className:"animate-marquee404 relative top-5 flex whitespace-nowrap py-1 font-KarlaExtraBold text-6xl font-bold text-red-500 4xl:py-3 4xl:text-4xl",children:" 404 —".repeat(30)}),re.jsx("p",{className:"animate-marquee404Text relative top-7 font-KarlaLight text-base",children:" Page not found - ".repeat(30)}),re.jsx("button",{className:"button-home-page relative top-40 z-50 rounded-xl bg-cyan-500 px-5 py-2 font-Inter text-xl tracking-tight text-white shadow-sm transition-all hover:rotate-2 hover:scale-110 active:scale-125",onClick:i,children:"GO TO HOMEPAGE"})]})]})},Rle=()=>{const i=r9(r=>r.setErrorPage),e=["/"],t=window.location.pathname,n=!e.includes(t);return i(n),n?re.jsx(Cle,{}):re.jsx(ble,{})},Ile=H9.createRoot(document.getElementById("root"));Ile.render(re.jsx(jo.Fragment,{children:re.jsx(Rle,{})}))});export default Ple();
